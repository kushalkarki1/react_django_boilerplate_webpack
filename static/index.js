!function(t){function e(e){for(var n,i,o=e[0],a=e[1],s=0,u=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(l&&l(e);u.length;)u.shift()()}var n={},r={2:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(t){return i.p+"../static/"+t+".js"}(t);var l=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,n[1](l)}r[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var l=a;i(i.s=29)}([function(t,e,n){"use strict";t.exports=n(19)},function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return vt})),n.d(e,"d",(function(){return te})),n.d(e,"a",(function(){return Gt}));var r=n(8),i=n.n(r),o=n(13),a=n.n(o),s=n(0),l=n.n(s),u=n(14),c=n(9),f=n(10),p=(n(26),n(15)),h=n(16),d=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},_=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},w=function(t){return"object"===(void 0===t?"undefined":y(t))&&t.constructor===Object},x=Object.freeze([]),O=Object.freeze({});function S(t){return"function"==typeof t}function k(t){return t.displayName||t.name||"Component"}function T(t){return t&&"string"==typeof t.styledComponentId}var E=void 0!==t&&(t.env.REACT_APP_SC_ATTR||t.env.SC_ATTR)||"data-styled",C="undefined"!=typeof window&&"HTMLElement"in window,R="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||void 0!==t&&(t.env.REACT_APP_SC_DISABLE_SPEEDY||t.env.SC_DISABLE_SPEEDY)||!1;var D=function(t){function e(n){g(this,e);for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=_(this,t.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+n+" for more information."+(i.length>0?" Additional arguments: "+i.join(", "):"")));return _(a)}return b(e,t),e}(Error),P=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,I=function(t){var e=""+(t||""),n=[];return e.replace(P,(function(t,e,r){return n.push({componentId:e,matchIndex:r}),t})),n.map((function(t,r){var i=t.componentId,o=t.matchIndex,a=n[r+1];return{componentId:i,cssFromDOM:a?e.slice(o,a.matchIndex):e.slice(o)}}))},A=/^\s*\/\/.*$/gm,F=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),j=new i.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),M=[],z=function(t){if(-2===t){var e=M;return M=[],e}},L=a()((function(t){M.push(t)})),B=void 0,N=void 0,U=void 0,W=function(t,e,n){return e>0&&-1!==n.slice(0,e).indexOf(N)&&n.slice(e-N.length,e)!==N?"."+B:t};j.use([function(t,e,n){2===t&&n.length&&n[0].lastIndexOf(N)>0&&(n[0]=n[0].replace(U,W))},L,z]),F.use([L,z]);var H=function(t){return F("",t)};function V(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=t.join("").replace(A,""),o=e&&n?n+" "+e+" { "+i+" }":i;return B=r,N=e,U=new RegExp("\\"+N+"\\b","g"),j(n||!e?"":e,o)}var G=function(){return n.nc},Z=function(t,e,n){n&&((t[e]||(t[e]=Object.create(null)))[n]=!0)},X=function(t,e){t[e]=Object.create(null)},q=function(t){return function(e,n){return void 0!==t[e]&&t[e][n]}},Y=function(t){var e="";for(var n in t)e+=Object.keys(t[n]).join(" ")+" ";return e.trim()},K=function(t){if(t.sheet)return t.sheet;for(var e=t.ownerDocument.styleSheets.length,n=0;n<e;n+=1){var r=t.ownerDocument.styleSheets[n];if(r.ownerNode===t)return r}throw new D(10)},Q=function(t,e,n){if(!e)return!1;var r=t.cssRules.length;try{t.insertRule(e,n<=r?n:r)}catch(t){return!1}return!0},J=function(t){return"\n/* sc-component-id: "+t+" */\n"},$=function(t,e){for(var n=0,r=0;r<=e;r+=1)n+=t[r];return n},tt=function(t,e){return function(n){var r=G();return"<style "+[r&&'nonce="'+r+'"',E+'="'+Y(e)+'"','data-styled-version="4.4.1"',n].filter(Boolean).join(" ")+">"+t()+"</style>"}},et=function(t,e){return function(){var n,r=((n={})[E]=Y(e),n["data-styled-version"]="4.4.1",n),i=G();return i&&(r.nonce=i),l.a.createElement("style",v({},r,{dangerouslySetInnerHTML:{__html:t()}}))}},nt=function(t){return function(){return Object.keys(t)}},rt=function(t,e){return t.createTextNode(J(e))},it=function t(e,n){var r=void 0===e?Object.create(null):e,i=void 0===n?Object.create(null):n,o=function(t){var e=i[t];return void 0!==e?e:i[t]=[""]},a=function(){var t="";for(var e in i){var n=i[e][0];n&&(t+=J(e)+n)}return t};return{clone:function(){var e=function(t){var e=Object.create(null);for(var n in t)e[n]=v({},t[n]);return e}(r),n=Object.create(null);for(var o in i)n[o]=[i[o][0]];return t(e,n)},css:a,getIds:nt(i),hasNameForId:q(r),insertMarker:o,insertRules:function(t,e,n){o(t)[0]+=e.join(" "),Z(r,t,n)},removeRules:function(t){var e=i[t];void 0!==e&&(e[0]="",X(r,t))},sealed:!1,styleTag:null,toElement:et(a,r),toHTML:tt(a,r)}},ot=function(t,e,n,r,i){if(C&&!n){var o=function(t,e,n){var r=document;t?r=t.ownerDocument:e&&(r=e.ownerDocument);var i=r.createElement("style");i.setAttribute(E,""),i.setAttribute("data-styled-version","4.4.1");var o=G();if(o&&i.setAttribute("nonce",o),i.appendChild(r.createTextNode("")),t&&!e)t.appendChild(i);else{if(!e||!t||!e.parentNode)throw new D(6);e.parentNode.insertBefore(i,n?e:e.nextSibling)}return i}(t,e,r);return R?function(t,e){var n=Object.create(null),r=Object.create(null),i=void 0!==e,o=!1,a=function(e){var i=r[e];return void 0!==i?i:(r[e]=rt(t.ownerDocument,e),t.appendChild(r[e]),n[e]=Object.create(null),r[e])},s=function(){var t="";for(var e in r)t+=r[e].data;return t};return{clone:function(){throw new D(5)},css:s,getIds:nt(r),hasNameForId:q(n),insertMarker:a,insertRules:function(t,r,s){for(var l=a(t),u=[],c=r.length,f=0;f<c;f+=1){var p=r[f],h=i;if(h&&-1!==p.indexOf("@import"))u.push(p);else{h=!1;var d=f===c-1?"":" ";l.appendData(""+p+d)}}Z(n,t,s),i&&u.length>0&&(o=!0,e().insertRules(t+"-import",u))},removeRules:function(a){var s=r[a];if(void 0!==s){var l=rt(t.ownerDocument,a);t.replaceChild(l,s),r[a]=l,X(n,a),i&&o&&e().removeRules(a+"-import")}},sealed:!1,styleTag:t,toElement:et(s,n),toHTML:tt(s,n)}}(o,i):function(t,e){var n=Object.create(null),r=Object.create(null),i=[],o=void 0!==e,a=!1,s=function(t){var e=r[t];return void 0!==e?e:(r[t]=i.length,i.push(0),X(n,t),r[t])},l=function(){var e=K(t).cssRules,n="";for(var o in r){n+=J(o);for(var a=r[o],s=$(i,a),l=s-i[a];l<s;l+=1){var u=e[l];void 0!==u&&(n+=u.cssText)}}return n};return{clone:function(){throw new D(5)},css:l,getIds:nt(r),hasNameForId:q(n),insertMarker:s,insertRules:function(r,l,u){for(var c=s(r),f=K(t),p=$(i,c),h=0,d=[],y=l.length,g=0;g<y;g+=1){var m=l[g],v=o;v&&-1!==m.indexOf("@import")?d.push(m):Q(f,m,p+h)&&(v=!1,h+=1)}o&&d.length>0&&(a=!0,e().insertRules(r+"-import",d)),i[c]+=h,Z(n,r,u)},removeRules:function(s){var l=r[s];if(void 0!==l&&!1!==t.isConnected){var u=i[l];!function(t,e,n){for(var r=e-n,i=e;i>r;i-=1)t.deleteRule(i)}(K(t),$(i,l)-1,u),i[l]=0,X(n,s),o&&a&&e().removeRules(s+"-import")}},sealed:!1,styleTag:t,toElement:et(l,n),toHTML:tt(l,n)}}(o,i)}return it()},at=/\s+/,st=void 0;st=C?R?40:1e3:-1;var lt=0,ut=void 0,ct=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g(this,t),this.getImportRuleTag=function(){var t=e.importRuleTag;if(void 0!==t)return t;var n=e.tags[0];return e.importRuleTag=ot(e.target,n?n.styleTag:null,e.forceServer,!0)},lt+=1,this.id=lt,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return t.prototype.rehydrate=function(){if(!C||this.forceServer)return this;var t=[],e=[],n=!1,r=document.querySelectorAll("style["+E+'][data-styled-version="4.4.1"]'),i=r.length;if(!i)return this;for(var o=0;o<i;o+=1){var a=r[o];n||(n=!!a.getAttribute("data-styled-streamed"));for(var s,l=(a.getAttribute(E)||"").trim().split(at),u=l.length,c=0;c<u;c+=1)s=l[c],this.rehydratedNames[s]=!0;e.push.apply(e,I(a.textContent)),t.push(a)}var f=e.length;if(!f)return this;var p=this.makeTag(null);!function(t,e,n){for(var r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.componentId,s=o.cssFromDOM,l=H(s);t.insertRules(a,l)}for(var u=0,c=e.length;u<c;u+=1){var f=e[u];f.parentNode&&f.parentNode.removeChild(f)}}(p,t,e),this.capacity=Math.max(1,st-f),this.tags.push(p);for(var h=0;h<f;h+=1)this.tagMap[e[h].componentId]=p;return this},t.reset=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ut=new t(void 0,e).rehydrate()},t.prototype.clone=function(){var e=new t(this.target,this.forceServer);return this.clones.push(e),e.tags=this.tags.map((function(t){for(var n=t.getIds(),r=t.clone(),i=0;i<n.length;i+=1)e.tagMap[n[i]]=r;return r})),e.rehydratedNames=v({},this.rehydratedNames),e.deferred=v({},this.deferred),e},t.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach((function(t){t.sealed=!0}))},t.prototype.makeTag=function(t){var e=t?t.styleTag:null;return ot(this.target,e,this.forceServer,!1,this.getImportRuleTag)},t.prototype.getTagForId=function(t){var e=this.tagMap[t];if(void 0!==e&&!e.sealed)return e;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=st,n=this.makeTag(n),this.tags.push(n)),this.tagMap[t]=n},t.prototype.hasId=function(t){return void 0!==this.tagMap[t]},t.prototype.hasNameForId=function(t,e){if(void 0===this.ignoreRehydratedNames[t]&&this.rehydratedNames[e])return!0;var n=this.tagMap[t];return void 0!==n&&n.hasNameForId(t,e)},t.prototype.deferredInject=function(t,e){if(void 0===this.tagMap[t]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(t,e);this.getTagForId(t).insertMarker(t),this.deferred[t]=e}},t.prototype.inject=function(t,e,n){for(var r=this.clones,i=0;i<r.length;i+=1)r[i].inject(t,e,n);var o=this.getTagForId(t);if(void 0!==this.deferred[t]){var a=this.deferred[t].concat(e);o.insertRules(t,a,n),this.deferred[t]=void 0}else o.insertRules(t,e,n)},t.prototype.remove=function(t){var e=this.tagMap[t];if(void 0!==e){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(t);e.removeRules(t),this.ignoreRehydratedNames[t]=!0,this.deferred[t]=void 0}},t.prototype.toHTML=function(){return this.tags.map((function(t){return t.toHTML()})).join("")},t.prototype.toReactElements=function(){var t=this.id;return this.tags.map((function(e,n){var r="sc-"+t+"-"+n;return Object(s.cloneElement)(e.toElement(),{key:r})}))},m(t,null,[{key:"master",get:function(){return ut||(ut=(new t).rehydrate())}},{key:"instance",get:function(){return t.master}}]),t}(),ft=function(){function t(e,n){var r=this;g(this,t),this.inject=function(t){t.hasNameForId(r.id,r.name)||t.inject(r.id,r.rules,r.name)},this.toString=function(){throw new D(12,String(r.name))},this.name=e,this.rules=n,this.id="sc-keyframes-"+e}return t.prototype.getName=function(){return this.name},t}(),pt=/([A-Z])/g,ht=/^ms-/;function dt(t){return t.replace(pt,"-$1").toLowerCase().replace(ht,"-ms-")}var yt=function(t){return null==t||!1===t||""===t},gt=function t(e,n){var r=[];return Object.keys(e).forEach((function(n){if(!yt(e[n])){if(w(e[n]))return r.push.apply(r,t(e[n],n)),r;if(S(e[n]))return r.push(dt(n)+":",e[n],";"),r;r.push(dt(n)+": "+(i=n,(null==(o=e[n])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||i in u.a?String(o).trim():o+"px")+";"))}var i,o;return r})),n?[n+" {"].concat(r,["}"]):r};function mt(t,e,n){if(Array.isArray(t)){for(var r,i=[],o=0,a=t.length;o<a;o+=1)null!==(r=mt(t[o],e,n))&&(Array.isArray(r)?i.push.apply(i,r):i.push(r));return i}return yt(t)?null:T(t)?"."+t.styledComponentId:S(t)?"function"!=typeof(s=t)||s.prototype&&s.prototype.isReactComponent||!e?t:mt(t(e),e,n):t instanceof ft?n?(t.inject(n),t.getName()):t:w(t)?gt(t):t.toString();var s}function vt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return S(t)||w(t)?mt(d(x,[t].concat(n))):mt(d(t,n))}function bt(t){for(var e,n=0|t.length,r=0|n,i=0;n>=4;)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+((1540483477*(e>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&t.charCodeAt(i+2))<<16;case 2:r^=(255&t.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return((r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16))^r>>>15)>>>0}var _t=function(t){return String.fromCharCode(t+(t>25?39:97))};function wt(t){var e="",n=void 0;for(n=t;n>52;n=Math.floor(n/52))e=_t(n%52)+e;return _t(n%52)+e}function xt(t,e){for(var n=0;n<t.length;n+=1){var r=t[n];if(Array.isArray(r)&&!xt(r,e))return!1;if(S(r)&&!T(r))return!1}return!e.some((function(t){return S(t)||function(t){for(var e in t)if(S(t[e]))return!0;return!1}(t)}))}var Ot,St=function(t){return wt(bt(t))},kt=function(){function t(e,n,r){g(this,t),this.rules=e,this.isStatic=xt(e,n),this.componentId=r,ct.master.hasId(r)||ct.master.deferredInject(r,[])}return t.prototype.generateAndInjectStyles=function(t,e){var n=this.isStatic,r=this.componentId,i=this.lastClassName;if(C&&n&&"string"==typeof i&&e.hasNameForId(r,i))return i;var o=mt(this.rules,t,e),a=St(this.componentId+o.join(""));return e.hasNameForId(r,a)||e.inject(this.componentId,V(o,"."+a,void 0,r),a),this.lastClassName=a,a},t.generateName=function(t){return St(t)},t}(),Tt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,r=!!n&&t.theme===n.theme,i=t.theme&&!r?t.theme:e||n.theme;return i},Et=/[[\].#*$><+~=|^:(),"'`-]+/g,Ct=/(^-|-$)/g;function Rt(t){return t.replace(Et,"-").replace(Ct,"")}function Dt(t){return"string"==typeof t&&!0}var Pt={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},It={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},At=((Ot={})[c.ForwardRef]={$$typeof:!0,render:!0},Ot),Ft=Object.defineProperty,jt=Object.getOwnPropertyNames,Mt=Object.getOwnPropertySymbols,zt=void 0===Mt?function(){return[]}:Mt,Lt=Object.getOwnPropertyDescriptor,Bt=Object.getPrototypeOf,Nt=Object.prototype,Ut=Array.prototype;function Wt(t,e,n){if("string"!=typeof e){var r=Bt(e);r&&r!==Nt&&Wt(t,r,n);for(var i=Ut.concat(jt(e),zt(e)),o=At[t.$$typeof]||Pt,a=At[e.$$typeof]||Pt,s=i.length,l=void 0,u=void 0;s--;)if(u=i[s],!(It[u]||n&&n[u]||a&&a[u]||o&&o[u])&&(l=Lt(e,u)))try{Ft(t,u,l)}catch(t){}return t}return t}var Ht=Object(s.createContext)(),Vt=Ht.Consumer,Gt=function(t){function e(n){g(this,e);var r=_(this,t.call(this,n));return r.getContext=Object(f.a)(r.getContext.bind(r)),r.renderInner=r.renderInner.bind(r),r}return b(e,t),e.prototype.render=function(){return this.props.children?l.a.createElement(Ht.Consumer,null,this.renderInner):null},e.prototype.renderInner=function(t){var e=this.getContext(this.props.theme,t);return l.a.createElement(Ht.Provider,{value:e},this.props.children)},e.prototype.getTheme=function(t,e){if(S(t))return t(e);if(null===t||Array.isArray(t)||"object"!==(void 0===t?"undefined":y(t)))throw new D(8);return v({},e,t)},e.prototype.getContext=function(t,e){return this.getTheme(t,e)},e}(s.Component),Zt=(function(){function t(){g(this,t),this.masterSheet=ct.master,this.instance=this.masterSheet.clone(),this.sealed=!1}t.prototype.seal=function(){if(!this.sealed){var t=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(t,1),this.sealed=!0}},t.prototype.collectStyles=function(t){if(this.sealed)throw new D(2);return l.a.createElement(qt,{sheet:this.instance},t)},t.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},t.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},t.prototype.interleaveWithNodeStream=function(t){throw new D(3)}}(),Object(s.createContext)()),Xt=Zt.Consumer,qt=function(t){function e(n){g(this,e);var r=_(this,t.call(this,n));return r.getContext=Object(f.a)(r.getContext),r}return b(e,t),e.prototype.getContext=function(t,e){if(t)return t;if(e)return new ct(e);throw new D(4)},e.prototype.render=function(){var t=this.props,e=t.children,n=t.sheet,r=t.target;return l.a.createElement(Zt.Provider,{value:this.getContext(n,r)},e)},e}(s.Component),Yt={};var Kt=function(t){function e(){g(this,e);var n=_(this,t.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return b(e,t),e.prototype.render=function(){return l.a.createElement(Xt,null,this.renderOuter)},e.prototype.renderOuter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct.master;return this.styleSheet=t,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():l.a.createElement(Vt,null,this.renderInner)},e.prototype.renderInner=function(t){var e=this.props.forwardedComponent,n=e.componentStyle,r=e.defaultProps,i=(e.displayName,e.foldedComponentIds),o=e.styledComponentId,a=e.target,l=void 0;l=n.isStatic?this.generateAndInjectStyles(O,this.props):this.generateAndInjectStyles(Tt(this.props,t,r)||O,this.props);var u=this.props.as||this.attrs.as||a,c=Dt(u),f={},h=v({},this.props,this.attrs),d=void 0;for(d in h)"forwardedComponent"!==d&&"as"!==d&&("forwardedRef"===d?f.ref=h[d]:"forwardedAs"===d?f.as=h[d]:c&&!Object(p.a)(d)||(f[d]=h[d]));return this.props.style&&this.attrs.style&&(f.style=v({},this.attrs.style,this.props.style)),f.className=Array.prototype.concat(i,o,l!==o?l:null,this.props.className,this.attrs.className).filter(Boolean).join(" "),Object(s.createElement)(u,f)},e.prototype.buildExecutionContext=function(t,e,n){var r=this,i=v({},e,{theme:t});return n.length?(this.attrs={},n.forEach((function(t){var e,n=t,o=!1,a=void 0,s=void 0;for(s in S(n)&&(n=n(i),o=!0),n)a=n[s],o||!S(a)||(e=a)&&e.prototype&&e.prototype.isReactComponent||T(a)||(a=a(i)),r.attrs[s]=a,i[s]=a})),i):i},e.prototype.generateAndInjectStyles=function(t,e){var n=e.forwardedComponent,r=n.attrs,i=n.componentStyle;n.warnTooManyClasses;return i.isStatic&&!r.length?i.generateAndInjectStyles(O,this.styleSheet):i.generateAndInjectStyles(this.buildExecutionContext(t,e,r),this.styleSheet)},e}(s.Component);function Qt(t,e,n){var r=T(t),i=!Dt(t),o=e.displayName,a=void 0===o?function(t){return Dt(t)?"styled."+t:"Styled("+k(t)+")"}(t):o,s=e.componentId,u=void 0===s?function(t,e,n){var r="string"!=typeof e?"sc":Rt(e),i=(Yt[r]||0)+1;Yt[r]=i;var o=r+"-"+t.generateName(r+i);return n?n+"-"+o:o}(kt,e.displayName,e.parentComponentId):s,c=e.ParentComponent,f=void 0===c?Kt:c,p=e.attrs,d=void 0===p?x:p,y=e.displayName&&e.componentId?Rt(e.displayName)+"-"+e.componentId:e.componentId||u,g=r&&t.attrs?Array.prototype.concat(t.attrs,d).filter(Boolean):d,m=new kt(r?t.componentStyle.rules.concat(n):n,g,y),b=void 0,_=function(t,e){return l.a.createElement(f,v({},t,{forwardedComponent:b,forwardedRef:e}))};return _.displayName=a,(b=l.a.forwardRef(_)).displayName=a,b.attrs=g,b.componentStyle=m,b.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):x,b.styledComponentId=y,b.target=r?t.target:t,b.withComponent=function(t){var r=e.componentId,i=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(e,["componentId"]),o=r&&r+"-"+(Dt(t)?t:Rt(k(t)));return Qt(t,v({},i,{attrs:g,componentId:o,ParentComponent:f}),n)},Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?Object(h.a)(t.defaultProps,e):e}}),b.toString=function(){return"."+b.styledComponentId},i&&Wt(b,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),b}var Jt=function(t){return function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;if(!Object(c.isValidElementType)(n))throw new D(1,String(n));var i=function(){return e(n,r,vt.apply(void 0,arguments))};return i.withConfig=function(i){return t(e,n,v({},r,i))},i.attrs=function(i){return t(e,n,v({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(Qt,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){Jt[t]=Jt(t)}));!function(){function t(e,n){g(this,t),this.rules=e,this.componentId=n,this.isStatic=xt(e,x),ct.master.hasId(n)||ct.master.deferredInject(n,[])}t.prototype.createStyles=function(t,e){var n=V(mt(this.rules,t,e),"");e.inject(this.componentId,n)},t.prototype.removeStyles=function(t){var e=this.componentId;t.hasId(e)&&t.remove(e)},t.prototype.renderStyles=function(t,e){this.removeStyles(e),this.createStyles(t,e)}}();C&&(window.scCGSHMRCache={});var $t=function(t){return t.replace(/\s|\\n/g,"")};function te(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=vt.apply(void 0,[t].concat(n)),o=wt(bt($t(JSON.stringify(i))));return new ft(o,V(i,o,"@keyframes"))}e.c=Jt}).call(this,n(5))},function(t,e,n){"use strict";(function(t,r,i){n.d(e,"a",(function(){return py})),n.d(e,"b",(function(){return oo})),n.d(e,"c",(function(){return P})),n.d(e,"d",(function(){return A})),n.d(e,"e",(function(){return Sw})),n.d(e,"f",(function(){return W})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return Vt})),n.d(e,"i",(function(){return G})),n.d(e,"j",(function(){return fs})),n.d(e,"k",(function(){return Tm})),n.d(e,"l",(function(){return Ys})),n.d(e,"m",(function(){return mm})),n.d(e,"n",(function(){return km})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return _m})),n.d(e,"q",(function(){return wl})),n.d(e,"r",(function(){return Ob})),n.d(e,"s",(function(){return bm})),n.d(e,"t",(function(){return bb})),n.d(e,"u",(function(){return Lm})),n.d(e,"v",(function(){return _b})),n.d(e,"w",(function(){return dy})),n.d(e,"x",(function(){return db})),n.d(e,"y",(function(){return $v})),n.d(e,"z",(function(){return wb})),n.d(e,"A",(function(){return Wu})),n.d(e,"B",(function(){return w})),n.d(e,"C",(function(){return _})),n.d(e,"D",(function(){return ea})),n.d(e,"E",(function(){return Nt})),n.d(e,"F",(function(){return Gt})),n.d(e,"G",(function(){return R})),n.d(e,"H",(function(){return x})),n.d(e,"I",(function(){return k})),n.d(e,"J",(function(){return at})),n.d(e,"K",(function(){return $})),n.d(e,"L",(function(){return bf})),n.d(e,"M",(function(){return O})),n.d(e,"N",(function(){return y})),n.d(e,"O",(function(){return Tf})),n.d(e,"P",(function(){return g})),n.d(e,"Q",(function(){return kf})),n.d(e,"R",(function(){return bo})),n.d(e,"S",(function(){return rf})),n.d(e,"T",(function(){return d})),n.d(e,"U",(function(){return Ef})),n.d(e,"V",(function(){return hy})),n.d(e,"W",(function(){return ty})),n.d(e,"X",(function(){return mu})),n.d(e,"Y",(function(){return ju})),n.d(e,"Z",(function(){return vm})),n.d(e,"ab",(function(){return f})),n.d(e,"bb",(function(){return cf}));var o=n(1),a=n(0),s=n.n(a),l=n(3),u=n.n(l),c=n(4),f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function p(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(null==e&&n.path)}},n.exports),n.exports}var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function d(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function g(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function m(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function v(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function b(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function _(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function x(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(w(arguments[e]));return t}function O(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var S=function(){function t(t,e,n){void 0===e&&(e={x:1,y:1}),void 0===n&&(n=0),this.position=t,this.scale=e,this.rotation=n}return Object.defineProperty(t,"IDENTITY",{get:function(){return new t({x:0,y:0})},enumerable:!0,configurable:!0}),t}(),k=function(){function t(t,e){"number"==typeof t?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y)}return t.fromSize=function(e){return new t(e.width,e.height)},t.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.lerp=function(e,n,r){var i=Math.min(Math.max(r,0),1);return new t(e.x*i+n.x*(1-i),e.y*i+n.y*(1-i))},t.lerpUnclamped=function(e,n,r){return new t(e.x*r+n.x*(1-r),e.y*r+n.y*(1-r))},t.proportionalFit=function(t,e){return t.x/t.y>e.x/e.y?e.multiply(t.y/e.y):e.multiply(t.x/e.x)},Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalized",{get:function(){var e=this.magnitude;return new t(this.x/e,this.y/e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"floored",{get:function(){return new t(Math.floor(this.x),Math.floor(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rounded",{get:function(){return new t(Math.round(this.x),Math.round(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return Math.min(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return Math.max(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"abs",{get:function(){return new t(Math.abs(this.x),Math.abs(this.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swapped",{get:function(){return new t(this.y,this.x)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(e,n){return"number"==typeof e?new t(this.x+e,this.y+n):new t(this.x+e.x,this.y+e.y)},t.prototype.subtract=function(e,n){return"number"==typeof e?new t(this.x-e,this.y-n):new t(this.x-e.x,this.y-e.y)},t.prototype.multiply=function(e,n){return"number"==typeof e?new t(this.x*e,this.y*(void 0===n?e:n)):new t(this.x*e.x,this.y*e.y)},t.prototype.divide=function(e,n){return"number"==typeof e?new t(this.x/e,this.y/(void 0===n?e:n)):new t(this.x/e.x,this.y/e.y)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.prototype.clamp=function(e,n){return new t(Math.max(e.x,Math.min(n.x,this.x)),Math.max(e.y,Math.min(n.y,this.y)))},t.ZERO=new t(0,0),t.ONE=new t(1,1),t.UP=new t(0,1),t.DOWN=new t(0,-1),t.RIGHT=new t(1,0),t.LEFT=new t(-1,0),t}(),T=function(){function t(t,e,n,r){if("number"==typeof t){if("number"!=typeof e||void 0===n||void 0===r)throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");this.origin={x:t,y:e},this.size={width:n||0,height:r||0}}else{if(this.origin=t,"number"==typeof e)throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=e}}return t.contains=function(t,e){return e.x>=t.minX&&e.x<=t.maxX&&e.y>=t.minY&&e.y<=t.maxY},Object.defineProperty(t.prototype,"minX",{get:function(){return this.origin.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.origin.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"midX",{get:function(){return this.origin.x+.5*this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"midY",{get:function(){return this.origin.y+.5*this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.origin.x+this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.origin.y+this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),t.ZERO=new t({x:0,y:0},{width:0,height:0}),t}(),E=function(){function t(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.fromScale=function(e,n){return new t(e,0,0,n,0,0)},t.fromRotation=function(e){var n=Math.cos(e),r=Math.sin(e);return new t(n,-r,r,n,0,0)},t.fromRotationDeg=function(t){var e=Math.PI*t/180;return this.fromRotation(e)},t.fromTranslation=function(e,n){return new t(1,0,0,1,e,n)},t.fromTRS=function(e,n,r,i,o){var a=Math.cos(r),s=Math.sin(r);return new t(i*a,-o*s,i*s,o*a,e,n)},t.multiply=function(e,n){return new t(e.a*n.a+e.b*n.c,e.a*n.b+e.b*n.d,e.c*n.a+e.d*n.c,e.c*n.b+e.d*n.d,e.a*n.tx+e.b*n.ty+e.tx,e.c*n.tx+e.d*n.ty+e.ty)},t.transformPoint=function(t,e){return{x:t.a*e.x+t.b*e.y+t.tx,y:t.c*e.x+t.d*e.y+t.ty}},t.getInverted=function(e){var n=e.a*e.d-e.b*e.c;if(0===n)return e;var r=1/n;return new t(r*e.d,-r*e.b,-r*e.c,r*e.a,r*(e.b*e.ty-e.d*e.tx),r*(e.c*e.tx-e.a*e.ty))},t.IDENTITY=t.fromScale(1,1),t}();function C(t){return"number"==typeof t}function R(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}window.performance.now.bind(window.performance);var D,P,I,A,F,j,M=function(){function t(t){this.text=t,this.lastOffsetWidth=-1;var e="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(t)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=e,this.expandable.style.cssText=e,this.expandableInner.style.cssText=e,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return t.prototype.getElement=function(){return this.element},t.prototype.setFont=function(t){this.element.style.cssText="max-width:none;\n      min-width:20px;\n      min-height:20px;\n      display:inline-block;\n      overflow:hidden;\n      position:absolute;\n      width:auto;\n      margin:0;\n      padding:0;\n      top:-999px;\n      white-space:nowrap;\n      font-synthesis:none;\n      font:"+t+";"},t.prototype.getWidth=function(){return this.element.offsetWidth},t.prototype.setWidth=function(t){this.element.style.width=t+"px"},t.prototype.onResize=function(t){var e=this,n=function(){e.onScroll(t)};this.collapsible.addEventListener("scroll",n),this.expandable.addEventListener("scroll",n),this.reset()},t.prototype.reset=function(){var t=this.getWidth(),e=t+100;return this.expandableInner.style.width=e+"px",this.expandable.scrollLeft=e,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==t&&(this.lastOffsetWidth=t,!0)},t.prototype.onScroll=function(t){this.reset()&&null!==this.element.parentNode&&t(this.lastOffsetWidth)},t}(),z=function(){function t(t){this.font=y({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},t)}return t.getUserAgent=function(){return window.navigator.userAgent},t.getNavigatorVendor=function(){return window.navigator.vendor},t.hasWebKitFallbackBug=function(){if(null===t.HAS_WEBKIT_FALLBACK_BUG){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(t.getUserAgent());t.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return t.HAS_WEBKIT_FALLBACK_BUG},t.hasSafari10Bug=function(){if(null===t.HAS_SAFARI_10_BUG)if(t.supportsNativeFontLoading()&&/Apple/.test(t.getNavigatorVendor())){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(t.getUserAgent());t.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else t.HAS_SAFARI_10_BUG=!1;return t.HAS_SAFARI_10_BUG},t.supportsNativeFontLoading=function(){return null===t.SUPPORTS_NATIVE_FONT_LOADING&&(t.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),t.SUPPORTS_NATIVE_FONT_LOADING},t.supportsStretch=function(){if(null===t.SUPPORTS_STRETCH){var e=document.createElement("div");try{e.style.font="condensend 100px sans-serif"}catch(e){t.SUPPORTS_STRETCH=!1}t.SUPPORTS_STRETCH=""!==e.style.font}return t.SUPPORTS_STRETCH},t.prototype.load=function(e,n){var r=this,i=null,o=n||t.DEFAULT_TIMEOUT,a=this.getTime();return new Promise((function(e,n){if(t.supportsNativeFontLoading()&&!t.hasSafari10Bug()){var s=new Promise((function(t,e){var i=function(){r.getTime()-a>=o?e(new Error(o+"ms timeout exceeded")):document.fonts.load(r.getStyle('"'+r.font.fontFamily+'"'),"BESbswy").then((function(e){e.length>=1?t():setTimeout(i,25)}),n)};i()})),l=new Promise((function(t,e){i=setTimeout((function(){e(new Error(o+" ms timeout exceeded"))}),o)}));Promise.race([l,s]).then((function(){clearTimeout(i),e(r)}),n)}else{var u=new M("BESbswy"),c=new M("BESbswy"),f=new M("BESbswy"),p=-1,h=-1,d=-1,y=-1,g=-1,m=-1,v=document.createElement("div"),b=function(){null!==v.parentNode&&v.parentNode.removeChild(v)},_=function(){if((-1!==p&&-1!==h||-1!==p&&-1!==d||-1!==h&&-1!==d)&&(p===h||p===d||h===d)){if(t.hasWebKitFallbackBug()&&(p===y&&h===y&&d===y||p===g&&h===g&&d===g||p===m&&h===m&&d===m))return;b(),clearTimeout(i),e(r)}};v.dir="ltr",u.setFont(r.getStyle("sans-serif")),c.setFont(r.getStyle("serif")),f.setFont(r.getStyle("monospace")),v.appendChild(u.getElement()),v.appendChild(c.getElement()),v.appendChild(f.getElement()),document.body.appendChild(v),y=u.getWidth(),g=c.getWidth(),m=f.getWidth();var w=function(){if(r.getTime()-a>=o)b(),n(new Error(o+" ms timeout exceeded"));else{var t=document.hidden;!0!==t&&void 0!==t||(p=u.getWidth(),h=c.getWidth(),d=f.getWidth(),_()),i=setTimeout(w,50)}};w(),u.onResize((function(t){p=t,_()})),u.setFont(r.getStyle('"'+r.font.fontFamily+'",sans-serif')),c.onResize((function(t){h=t,_()})),c.setFont(r.getStyle('"'+r.font.fontFamily+'",serif')),f.onResize((function(t){d=t,_()})),f.setFont(r.getStyle('"'+r.font.fontFamily+'",monospace'))}}))},t.prototype.getStyle=function(e){return[this.font.fontStyle,this.font.fontWeight,t.supportsStretch()?this.font.fontStretch:"","100px",e].join(" ")},t.prototype.getTime=function(){return(new Date).getTime()},t.HAS_WEBKIT_FALLBACK_BUG=null,t.HAS_SAFARI_10_BUG=null,t.SUPPORTS_STRETCH=null,t.SUPPORTS_NATIVE_FONT_LOADING=null,t.DEFAULT_TIMEOUT=3e3,t}();(j=D||(D={})).UNDO="undo",j.REDO="redo",j.DELETE="delete",j.BRING_TO_FRONT="bringtofront",j.EDIT="edit",j.DUPLICATE="duplicate",j.ADD="add",j.FLIP="flip",j.INVERT="invert",j.CLOSE="close",j.EXPORT="export",function(t){t.LIBRARY="library",t.ART_FILTER="artFilter",t.TRANSFORM="transform",t.FILTER="filter",t.ADJUSTMENT="adjustment",t.FOCUS="focus",t.STICKER="sticker",t.TEXT="text",t.TEXT_DESIGN="textdesign",t.OVERLAY="overlay",t.FRAME="frame",t.BRUSH="brush"}(P||(P={})),function(t){t.TEXT="text",t.CARD="card"}(I||(I={})),function(t){t.LARGE="large",t.MEDIUM="medium",t.SMALL="small"}(A||(A={})),function(t){t.ERROR="error",t.WARNING="warning",t.INFO="info",t.TEXT_EDIT="textEdit"}(F||(F={}));var L,B=function(){this.enabled=!0,this.threshold=20,this.snapToHorizontalCenter=!0,this.snapToVerticalCenter=!0,this.snapToLeft=.1,this.snapToRight=.1,this.snapToTop=.1,this.snapToBottom=.1},N=function(){this.enabled=!0,this.threshold=20,this.angles=[0,45,90,135,180,225,270,315]};!function(t){t.OBJECT="object"}(L||(L={}));var U,W;!function(t){t.IMAGE="image",t.DATA_URL="data-url",t.BLOB="blob",t.MSBLOB="ms-blob"}(U||(U={})),function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.RAW="raw"}(W||(W={}));var H;P.FILTER,P.FOCUS,P.ADJUSTMENT,P.LIBRARY,P.OVERLAY,P.STICKER,P.TEXT,P.TEXT_DESIGN,P.FRAME,P.BRUSH,P.TRANSFORM,function(t){t.BRIGHTNESS="brightness",t.CONTRAST="contrast",t.SATURATION="saturation",t.CLARITY="clarity",t.SHADOWS="shadows",t.HIGHLIGHTS="highlights",t.EXPOSURE="exposure",t.GAMMA="gamma",t.BLACKS="blacks",t.WHITES="whites",t.TEMPERATURE="temperature",t.SHARPNESS="sharpness"}(H||(H={}));function V(t){return void 0!==t.lightColor}var G;!function(t){t.RADIAL="radial",t.LINEAR="linear",t.MIRRORED="mirrored",t.GAUSSIAN="gaussian"}(G||(G={}));(function(){function t(t){this.name=t.name,this.coverImageUrl=t.coverImageUrl}t.prototype.loadCoverImage=function(t){var e=this;return void 0===t&&(t="anonymous"),new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(){r(new Error("Failed to load image at "+e.coverImage))})),i.crossOrigin=t,i.src=e.coverImageUrl,e.coverImage=i}))}})(),function(){function t(t){this.category=t.title,this.thumbUrl=t.thumbUrl,this.rawUrl=t.rawUrl}t.prototype.loadThumbImage=function(t){var e=this;return void 0===t&&(t="anonymous"),new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(){r(new Error("Failed to load image at "+e.thumbUrl))})),i.crossOrigin=t,i.src=e.thumbUrl,e.thumbImage=i}))},t.prototype.getThumbImage=function(){return this.thumbUrl}}();var Z,X=function(){function t(){}return t.prototype.getData=function(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="json",r.onload=function(){var t=r.status;200===t?e(r.response):n(new Error("HTTP Status "+t))},r.send()}))},t}();!function(){function t(t){this.data={},this.data=t}t.prototype.loadJSON=function(t){return(new X).getData(t)},t.prototype.getCategories=function(){return Promise.resolve([])},t.prototype.searchImages=function(t){return Promise.resolve([])}}();!function(t){t.NORMAL="normal",t.OVERLAY="overlay",t.SOFT_LIGHT="softLight",t.HARD_LIGHT="hardLight",t.MULTIPLY="multiply",t.DARKEN="darken",t.COLOR_BURN="colorBurn",t.SCREEN="screen",t.LIGHTEN="lighten"}(Z||(Z={}));function q(t){return void 0!==t.sticker}function Y(t){return void 0!==t.thumbnail}function K(t){return void 0===t.provider||"file"===t.provider}function Q(t){return"google"===t.provider}var J,$;!function(t){t.CommonCategory="imgly_transforms_common",t.FacebookCategory="imgly_transforms_facebook",t.TwitterCategory="imgly_transforms_twitter",t.InstagramCategory="imgly_transforms_instagram",t.Custom="imgly_transform_common_custom",t.Square="imgly_transform_common_square",t.ThreeByFour="imgly_transform_common_3",t.FourByThree="imgly_transform_common_4",t.NineBySixteen="imgly_transform_common_9",t.SixteenByNine="imgly_transform_common_16",t.FacebookPost="imgly_transform_facebook_post",t.FacebookProfile="imgly_transform_facebook_profile",t.FacebookTitle="imgly_transform_facebook_title",t.InstagramLandscape="imgly_transform_instagram_landscape",t.InstagramPortrait="imgly_transform_instagram_portrait",t.InstagramSquare="imgly_transform_instagram_square",t.InstagramStory="imgly_transform_instagram_story",t.TwitterPost="imgly_transform_twitter_post",t.TwitterProfile="imgly_transform_twitter_profile",t.TwitterTitle="imgly_transform_twitter_title"}(J||(J={})),function(t){t.EXPORT="export",t.CLOSE="close",t.HISTORY_CHANGE="historyChange",t.EDITOR_READY="editorReady",t.ERROR_IMAGE_LOADING="errorImageLoading"}($||($={}));var tt,et=function(){function t(){this.events={}}return t.prototype.addListener=function(t,e){return(this.events[t]||(this.events[t]=[])).push(e),this},t.prototype.removeListener=function(t,e){var n=this.events[t];if(!n)return this;var r=n.lastIndexOf(e);return-1===r||n.splice(r,1),this},t.prototype.removeAllListeners=function(t){return this.events[t]=void 0,this},t.prototype.on=function(t,e){return this.addListener(t,e)},t.prototype.off=function(t,e){return this.removeListener(t,e)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.events[t];return!(!r||!r.length||(r.slice(0).forEach((function(t){return t.apply(null,e)})),0))},t}();!function(t){t.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",t.IMAGE_DOWNSCALED="imageDownscaled"}(tt||(tt={}));var nt=function(t){function e(e,n){var r=t.call(this)||this;return r.image=e,r.options=n,r}return d(e,t),e.prototype.needsResize=function(){var t=this.resizedDimensions();return t.x<this.image.width||t.y<this.image.height},e.prototype.resizedDimensions=function(){var t=this.options,e={width:this.image.width,height:this.image.height},n=k.fromSize(e),r=k.fromSize(e),i=t.maxMegaPixels;if(i){var o=1e6*(function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}()?i.mobile:i.desktop),a=e.width/e.height,s=e.height/e.width,l=new k(Math.floor(Math.sqrt(o*a)),Math.floor(Math.sqrt(o*s)));l.x<=e.width&&l.y<=e.height&&(n=l)}var u=t.maxDimensions;u&&(u.height<e.height||u.width<e.width)&&(r=new k(u.width,u.height));var c=new k(Math.min(n.x,r.x),Math.min(n.y,r.y));return k.proportionalFit(c,k.fromSize(e)).floored},e.prototype.downscaleIfNecessary=function(){var t=this.resizedDimensions();if(!(t.x<this.image.width||t.y<this.image.height))return this.image;this.emit(tt.BEGAN_IMAGE_DOWNSCALING,this.image);var e=document.createElement("canvas");e.width=t.x,e.height=t.y;var n=e.getContext("2d"),r=this.image;return n.drawImage(r,0,0,r.width,r.height,0,0,t.x,t.y),this.emit(tt.IMAGE_DOWNSCALED),e},e.prototype.downscaleImageIfNecessary=function(){var t=this.image,e=this.resizedDimensions();if(!(e.x<this.image.width||e.y<this.image.height))return t;this.emit(tt.BEGAN_IMAGE_DOWNSCALING,t);var n=new Image;return n.width=e.x,n.height=e.y,n.src=t.src,this.emit(tt.IMAGE_DOWNSCALED),n},e}(et),rt=function(t){return function(e){(function(t){return"Escape"===t.key})(e)&&t(e)}},it=function(t,e,n,r){var i=w(n,2),o=i[0],a=i[1];void 0===r&&(r=0);var s=t[e];if(s){if(s<o)return console.error(e+" must be greater than or equal to "+o),o;if(s>a)return console.error(e+" must be less than or equal to "+a),a}return s||r},ot={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco"},at=function(t,e){return void 0===e&&(e=!1),ot[t]?(e&&console.warn("Font "+t+" was deprecated. Please use "+ot[t]+" instead."),ot[t]):t};function st(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var lt=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ut=function(t){return lt.exec(t).slice(1)};function ct(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return(e?"/":"")+(t=st(dt(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."}function ft(t){var e=pt(t),n="/"===gt(t,-1);return(t=st(dt(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function pt(t){return"/"===t.charAt(0)}var ht={extname:function(t){return ut(t)[3]},basename:function(t,e){var n=ut(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},dirname:function(t){var e=ut(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},sep:"/",delimiter:":",relative:function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=ct(t).substr(1),e=ct(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var l=[];for(s=a;s<r.length;s++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},join:function(){var t=Array.prototype.slice.call(arguments,0);return ft(dt(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},isAbsolute:pt,normalize:ft,resolve:ct};function dt(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var yt,gt="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)},mt=[{identifier:"imgly_overlay_golden",name:"Golden",defaultBlendMode:Z.LIGHTEN,overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:"imgly_overlay_lightleak1",name:"Lightleak",defaultBlendMode:Z.SCREEN,overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:"imgly_overlay_rain",name:"Rain",defaultBlendMode:Z.OVERLAY,overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:"imgly_overlay_mosaic",name:"Mosaic",defaultBlendMode:Z.MULTIPLY,overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:"imgly_overlay_vintage",name:"Vintage",defaultBlendMode:Z.DARKEN,overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:"imgly_overlay_paper",name:"Paper",defaultBlendMode:Z.MULTIPLY,overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:"imgly_overlay_bokeh",name:"Bokeh",defaultBlendMode:Z.LIGHTEN,overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:"imgly_overlay_hearts",name:"Hearts",defaultBlendMode:Z.SCREEN,overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:"imgly_overlay_lightleak2",name:"Lightleak 2",defaultBlendMode:Z.LIGHTEN,overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:"imgly_overlay_wood",name:"Wood",defaultBlendMode:Z.MULTIPLY,overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:"imgly_overlay_chop",name:"Chop",defaultBlendMode:Z.MULTIPLY,overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:"imgly_overlay_metal",name:"Metal",defaultBlendMode:Z.OVERLAY,overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:"imgly_overlay_painting",name:"Painting",defaultBlendMode:Z.OVERLAY,overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:"imgly_overlay_grain",name:"Grain",defaultBlendMode:Z.OVERLAY,overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:"imgly_overlay_clouds",name:"Clouds",defaultBlendMode:Z.SOFT_LIGHT,overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:"imgly_overlay_wall1",name:"Wall",defaultBlendMode:Z.LIGHTEN,overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:"imgly_overlay_wall2",name:"Wall 2",defaultBlendMode:Z.OVERLAY,overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}],vt=[{identifier:"imgly_filter_category_duotone",name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:"imgly_duotone_desert",name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:"imgly_duotone_peach",name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:"imgly_duotone_clash",name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_plum",name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:"imgly_duotone_breezy",name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:"imgly_duotone_deepblue",name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:"imgly_duotone_frog",name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:"imgly_duotone_sunset",name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:"imgly_filter_category_bw",name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:"imgly_lut_ad1920",name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bw",name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_x400",name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_litho",name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sepiahigh",name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_plate",name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_sin",name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filter_category_vintage",name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:"imgly_lut_blues",name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_front",name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_smooth",name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:"imgly_lut_chest",name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_kdynamic",name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fall",name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lenin",name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pola669",name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_cold",name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:"imgly_lut_elder",name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_orchid",name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleached",name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_bleachedblue",name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_breeze",name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_blueshadows",name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_warm",name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:"imgly_lut_sunset",name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_eighties",name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_evening",name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k2",name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:"imgly_filter_category_legacy",name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:"imgly_lut_ancient",name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_cottoncandy",name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_classic",name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_colorful",name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_creamy",name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fixie",name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_fridge",name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_gobblin",name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcontrast",name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_highcarb",name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k1",name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_k6",name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_keen",name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lomo",name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_lucid",name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_mellow",name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pale",name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pitched",name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_polasx",name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_pro400",name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_quozi",name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_settled",name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_seventies",name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_soft",name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_steel",name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_summer",name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_tender",name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:"imgly_lut_twilight",name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}],bt=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}},{identifier:"imgly_font_amaticsc",fontFamily:"Amaticsc",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_carter_one",fontFamily:"Carter",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-225}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}}],_t=[{identifier:G.RADIAL,thumbnailURI:"./items/radial.png"},{identifier:G.MIRRORED,thumbnailURI:"./items/mirrored.png"},{identifier:G.LINEAR,thumbnailURI:"./items/linear.png"},{identifier:G.GAUSSIAN,thumbnailURI:"./items/gaussian.png"}],wt=[{identifier:"basics",name:"Basics",items:[{identifier:H.BRIGHTNESS},{identifier:H.CONTRAST},{identifier:H.SATURATION},{identifier:H.GAMMA}]},{identifier:"refinements",name:"Refinements",items:[{identifier:H.CLARITY},{identifier:H.SHADOWS},{identifier:H.HIGHLIGHTS},{identifier:H.EXPOSURE},{identifier:H.BLACKS},{identifier:H.WHITES},{identifier:H.TEMPERATURE},{identifier:H.SHARPNESS}]}],xt=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}],Ot=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],St=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}],kt=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}],Tt=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}],Et=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans","imgly_font_galano_grotesque_bold","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"],Ct=["imgly_font_abril_fatface_regular","imgly_font_amberlight","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_galano_grotesque_bold","imgly_font_handycheera_regular","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra","imgly_font_wolesbro"],Rt=function(){return window&&window.navigator&&window.navigator.userAgent||""},Dt=function(t){return void 0===t&&(t=Rt()),-1!==t.indexOf("Edge")},Pt=function(t){return void 0===t&&(t=Rt()),!!t.match(/msie|trident/i)},It=function(t){try{return new URL(t),!0}catch(t){return!1}},At=function(){function t(t){this.assetManager=t,this.injectedFonts={},this.loadedFonts={}}return t.createFontFacesCSS=function(t,e){return t.map((function(t){var n=e(t.fontURI);return'@font-face {\n        font-family: "'+t.fontFamily+"\";\n        src: url('"+n+"') format('"+(t.format||"woff")+"');\n        font-weight: "+(t.fontWeight||"normal")+";\n        font-style: "+(t.fontStyle||"normal")+";\n      }"}))},t.prototype.getFontWithId=function(t){var e=this.assetManager.getFontAsset(t);if(!e)throw new Error("The requested font does not exist as an asset.");return e},t.prototype.isFontLoaded=function(t){return void 0!==this.loadedFonts[t]},t.prototype.injectAllFonts=function(){var t=this.assetManager.getFontAssets();this.injectFonts(t)},t.prototype.loadAllFonts=function(){return v(this,void 0,void 0,(function(){var t;return b(this,(function(e){return t=this.assetManager.getFontAssets(),[2,this.loadFonts(t)]}))}))},t.prototype.loadFontsWithIdentifiers=function(t){return v(this,void 0,void 0,(function(){var e,n=this;return b(this,(function(r){return e=t.map((function(t){return n.getFontWithId(t)})),[2,this.loadFonts(e)]}))}))},t.prototype.loadFonts=function(t){return v(this,void 0,void 0,(function(){var e,n=this;return b(this,(function(r){return this.injectFonts(t),e=new Array,t.forEach((function(t){e.push(n.loadFont(t,!1))})),[2,new Promise((function(t,n){Promise.all(e).then((function(){return t()})).catch((function(t){return n(t)}))}))]}))}))},t.prototype.loadFont=function(t,e){return void 0===e&&(e=!0),v(this,void 0,void 0,(function(){var n=this;return b(this,(function(r){return[2,new Promise((function(r,i){n.isFontLoaded(t.identifier)&&r(),e&&n.injectFonts([t]),new z(t).load().then((function(){n.loadedFonts[t.identifier]=t,r()})).catch((function(){i(t.identifier)}))}))]}))}))},t.prototype.loadFontWithIdentifier=function(t,e){return void 0===e&&(e=!0),v(this,void 0,void 0,(function(){var n;return b(this,(function(r){if(!(n=this.assetManager.getFontAsset(t)))throw new Error("The requested font asset with identifier "+t+" does not exist!");return[2,this.loadFont(n,e)]}))}))},t.prototype.injectFonts=function(t,e){void 0===e&&(e=this.assetManager.getPathForCategory("font"));var n=t.filter(Q),r=t.filter(K);n.length>0&&this.addGoogleFontLinks(n),r.length>0&&this.addWebFontCSS(r,e)},t.prototype.addGoogleFontLinks=function(t){var e=this,n=t.filter((function(t){return!e.injectedFonts[t.identifier]}));if(0!==n.length){var r=document.createElement("link");r.rel="stylesheet",r.href="https://fonts.googleapis.com/css?family="+n.map((function(t){return t.fontFamily})).join(","),document.getElementsByTagName("head")[0].appendChild(r),t.forEach((function(t){e.injectedFonts[t.identifier]=t}))}},t.prototype.addWebFontCSS=function(e,n){var r=this,i=e.filter((function(t){return!r.injectedFonts[t.identifier]}));if(0!==i.length){var o="\n      /* Injected by PhotoEditorSDK */\n      "+t.createFontFacesCSS(i,n).join("\n")+"\n    ",a=document.createElement("style");a.innerHTML=o,document.head.appendChild(a),e.forEach((function(t){r.injectedFonts[t.identifier]=t}))}},t}(),Ft=function(){function t(t,e){var n=this;void 0===e&&(e=!1),this.basePath="assets/",this.areCustomAssetsAllowed=!1,this.getAssets=function(t){switch(t){case"overlay":return n.overlayAssets;case"filter":return n.filterCategories;case"font":return n.fontAssets;case"focus":return n.focusAssets;case"adjustment":return n.adjustmentCategories;case"sticker":return n.stickerCategories;case"textdesign":return n.textDesignAssets;case"frame":return n.frameAssets;case"transform":return n.transformCategories}return[]},this.getPath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=ht.join.apply(ht,x([t],e));if(e&&0!==e.length&&It(ht.join.apply(ht,x(e))))return ht.join.apply(ht,x(e));if((!e||0===e.length)&&It(t))return t;if(n.basePath.match(/(ftp|http|https):\/\//)){var o=n.basePath.length;return"/"!==n.basePath[o-1]&&(n.basePath=n.basePath+"/"),n.basePath+i}return ht.join(n.basePath,i)},this.getPathForCategory=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n.getPath.apply(n,x([t],e))}},this.addCustomStickerAsset=function(t,e,r){t.forEach((function(t){var i=t.thumbnailURI,o=t.name,a=t.sticker,s=t.identifier,l=t.tintMode,u=t.resizeMode,c=n.stickerCategories.find((function(t){return t.identifier===e})),f={identifier:s,name:o,thumbnailURI:i,sticker:a,tintMode:l,resizeMode:u};if(c&&Y(c))c.items.push(f);else{var p={identifier:e,name:r,thumbnail:i,items:[f]};n.stickerCategories=x([p],n.stickerCategories)}})),n.stickerAssets=n.stickerCategories.reduce(n.allOptions,[])},this.getItemPath=function(t,e,n){var r=t.find((function(t){return t.identifier===e}));return r&&(r[n]||r.path)||""},this.isNonExistingFont=function(t){return!bt.find((function(e){return e.identifier===t.identifier}))&&!ot[t.identifier]},this.replaceDeprecatedFont=function(t){return ot[t.identifier]?bt.find((function(e){return e.identifier===at(t.identifier,!0)})):t},t&&t.basePath&&(this.basePath=t.basePath),this.areCustomAssetsAllowed=e;var r=vt.reduce(this.allOptions,[]);t&&t.filter?this.filterCategories=this.configuredCategory(vt,t.filter,r):this.filterCategories=vt,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(t){return function(t){return void 0!==t.lutURI}(t)})),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((function(t){return V(t)}));var i=wt.reduce(this.allOptions,[]);t&&t.adjustment?this.adjustmentCategories=this.configuredCategory(wt,t.adjustment,i):this.adjustmentCategories=wt,this.fontAssets=bt.reduce(this.allOptions,[]);var o=Et.map((function(t){return n.getFontAsset(t)}));if(t&&t.text&&t.text.fonts&&t.text.fonts.length>0){var a=t.text.fonts.filter(this.isNonExistingFont),s=t.text.fonts.filter((function(t){return!n.isNonExistingFont(t)})).map((function(t){return n.replaceDeprecatedFont(t)})).map((function(t){return n.getFontAsset(t.identifier)}));o=t.text.fonts?x(s,a):o,this.fontAssets=t.text.fonts?x(this.fontAssets,a):this.fontAssets}this.textToolFontAssets=o;var l=t&&t.focus&&t.focus.items&&t.focus.items.length?t.focus.items.map((function(t){return _t.find((function(e){return e.identifier===t.identifier}))})):_t;this.focusAssets=l,t&&t.overlay&&t.overlay.items?this.overlayAssets=this.configuredItem(t.overlay.items,mt,mt):this.overlayAssets=mt,t&&t.frame&&t.frame.items?this.frameAssets=this.configuredItem(t.frame.items,kt,kt):this.frameAssets=kt;var u=xt.reduce(this.allOptions,[]);t&&t.sticker?this.stickerCategories=this.configuredCategory(xt,t.sticker,u):this.stickerCategories=xt,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);var c=Ot;t&&"light"===t.theme&&(c=St),this.textDesignAssets=t&&t.textdesign&&t.textdesign.items&&t.textdesign.items.length?t.textdesign.items.map((function(t){return c.find((function(e){return e.identifier===t.identifier}))})):c,this.textDesignToolFontAssets=Ct.map((function(t){return n.getFontAsset(t)}));var f=Tt.reduce(this.allOptions,[]);t&&t.transform?this.transformCategories=this.configuredCategory(Tt,t.transform,f):this.transformCategories=Tt,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new At(this)}return t.prototype.getFontManager=function(){return this.fontManager},t.prototype.getAssetSource=function(t,e){switch(t){case"filter":if(this.getLUTFilterAsset(e))return this.getPath(t,this.getItemPath(this.lutFilterAssets,e,"lutURI"));break;case"overlay":return this.getPath(t,this.getItemPath(this.overlayAssets,e,"overlayURI"));case"font":return this.getPath(t,this.getItemPath(this.fontAssets,e,"fontURI"));case"sticker":var n=this.stickerAssets.find((function(t){return t.identifier===e}));if(n){if(q(n))return n.sticker;if(e.includes("imgly_sticker")&&n.stickerURI.includes(".svg")&&Pt()){var r=this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI")).split("/");return r.splice(r.length-1,0,"base"),r[r.length-1]=r[r.length-1].replace(".svg",".png"),r.join("/")}return this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(t,"engine",e);case"frame":return this.getPath(t,e)}throw new Error("Cannot resolve this type of asset yet")},t.prototype.getDuotoneFilterAsset=function(t){return this.duoToneFilterAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getLUTFilterAsset=function(t){return this.lutFilterAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getOverlayAsset=function(t){return this.overlayAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getStickerAsset=function(t){return this.stickerAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getFontAsset=function(t){return this.fontAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getTextDesignAssets=function(t){return this.textDesignAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getFrameAsset=function(t){return this.frameAssets.filter((function(e){return e.identifier===t}))[0]},t.prototype.getFontAssets=function(){return this.fontAssets},t.prototype.getFontAssetsForText=function(){return this.textToolFontAssets},t.prototype.getFontAssetsForTextDesign=function(){return this.textDesignToolFontAssets},t.prototype.getFrameAssets=function(){return this.frameAssets},t.prototype.allOptions=function(t,e){return Object.prototype.hasOwnProperty.call(e,"items")?x(t,e.items):x(t,[e])},t.prototype.configuredCategory=function(t,e,n){var r=this;return e.categories&&e.categories.length?e.categories.reduce((function(e,i){var o=t.find((function(t){return t.identifier===i.identifier}));return o?e.push(y(y(y({},o),i),{items:r.configuredItem(i.items,n,o.items).filter(Boolean)})):r.areCustomAssetsAllowed&&e.push(y(y({},i),{items:r.configuredItem(i.items,n,i.items).filter(Boolean)})),e}),[]):t},t.prototype.configuredItem=function(t,e,n){var r=this;return t&&t.length?t.reduce((function(t,n){var i=e.find((function(t){return t.identifier===n.identifier}));return i?t.push(y(y({},i),n)):r.areCustomAssetsAllowed&&t.push(n),t}),[]).filter(Boolean):n},t}(),jt=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(p((function(t,e){
/*! For license information please see PhotoEditorSDK.Engine.js.LICENSE.txt */
self,t.exports=(()=>{var t={7945:(t,e,n)=>{t.exports=n(1602)},7857:(t,e,n)=>{n.d(e,{JD:()=>x,cQ:()=>c,FM:()=>E,xx:()=>O,vp:()=>w,gT:()=>m,Il:()=>_,DS:()=>b,y2:()=>S,Bq:()=>T,Zb:()=>o.Z,D3:()=>k,yO:()=>f.Z,S3:()=>v.Z});var r=n(6982),i=n.n(r),o=n(3678);const a={getIEVersion:function(){var t=navigator,e=t.userAgent,n=t.appVersion;return-1!==n.indexOf("MSIE")?n.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==e.indexOf("Trident")&&e.match(/rv:([0-9]+)/i)[1]}};var s=n(9706),l=i().Utils,u=i().Math.Vector2;const c={getInnerDimensionsForElement:function(t){var e=new u(t.offsetWidth,t.offsetHeight),n=window.getComputedStyle(t,null);return e.x-=parseInt(n.getPropertyValue("padding-left"),10),e.x-=parseInt(n.getPropertyValue("padding-right"),10),e.y-=parseInt(n.getPropertyValue("padding-top"),10),e.y-=parseInt(n.getPropertyValue("padding-bottom"),10),e},getEventPosition:function(t){var e=t.clientX,n=t.clientY;if(-1!==t.type.indexOf("touch")){if(!t.touches.length)return;e=t.touches[0].clientX,n=t.touches[0].clientY}return new u(e,n)},createTransparentPatternCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=10,t.height=10,e.fillStyle="white",e.fillRect(0,0,t.width,t.height),e.fillStyle="#cccccc",e.fillRect(0,0,t.width/2,t.height/2),e.fillRect(t.width/2,t.height/2,t.width,t.height),t},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.fetch(t,e);if(!r)return o.Z.info("Utils#translate","Unable to translate `".concat(e,"`")),null;for(var i in n)r=r.replace("${".concat(i,"}"),n[i]);return r},fetch:function(t,e,n){for(var r=(e=(e=e.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<r.length&&(t=t[r[i]]);i++);return void 0!==t&&t},isMobile:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},select:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=function(t){return t});var r=[];return e.forEach((function(e){t.forEach((function(t){n(t)===e&&r.push(t)}))})),r},getJSONP:function(t){return new s.Z(t).load()},cloneCategories:function(t,e){return t.map((function(t){return(t=l.clone(t))[e]=t[e].slice(0),t}))},mergeCategories:function(t,e,n){t=this.cloneCategories(t,n);var r=null;return e.forEach((function(e){t.forEach((function(t){e.identifier===t.identifier&&(r=t)})),r?r[n]=r[n].concat(e[n]):t.push(e)})),t},wrapFiltersInCategories:function(t,e){return t.map((function(t){var n,r,i,o=t;return e in o||(n={identifier:"imgly_filters_wrapped-".concat(t.identifier),displayFlat:!0},i=[t],(r=e)in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,o=n),o}))},getStyleObject:function(t){var e=window.getComputedStyle(t),n={};for(var r in e){var i=e.getPropertyValue(r),o=r.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}));""!==i&&(n[o]=i)}return n},styleElement:function(t,e){for(var n in e)t.style[n]=e[n]},debounce:function(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(this,o)}},getScrollbarWidth:function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var r=n.offsetWidth;return t.parentNode.removeChild(t),e-r},findIntegerFraction:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=Number.MAX_VALUE,r=0,i=0,o=1,a=1,s=0;s<e;s++){var l=o/a-t;if(l<0)o++;else{if(!(l>0))return new u(o,a);a++}var c=Math.abs(o/a-t);c<n&&(n=c,r=o,i=a)}return new u(r,i)},toFixed:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toFixed(e);return parseFloat(n)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},flipObject:function(t){var e={};for(var n in t)e[t[n]]=n;return e},Browser:a};var f=n(3596);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const y=h(h({},f.z),{},{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"});var g=[];void 0!==i().Operations.SpriteOperation&&g.push(i().Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush);const m={EVENTS:y,DEFAULTS:{TRANSFORM_RATIO_CATEGORIES:[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}],FONTS:[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_campton_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-225}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]}],TEXT_DESIGN_FONTS:[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"text-design/fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"text-design/fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"text-design/fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"text-design/fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"text-design/fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}}]}],BRUSHES:g}};var v=n(4696),b=i().Base64,_=i().Color,w=(i().Math.ColorMatrix,i().EventEmitter),x=(i().EXIF,i().OptionType,i().Promise),O=i().Utils,S=i().RenderType,k=i().ImageFormat,T=i(),E=(i().UniformType,i().Math.Vector2);i().Math.Rectangle,i().Math.Range,"undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930)},6675:(t,e,n)=>{n.r(e),n.d(e,{Color:()=>r.Il,Constants:()=>r.gT,EngineWrapper:()=>C,JSONLoader:()=>m.Z,PhotoEditorSDK:()=>r.Bq,Utils:()=>r.cQ});var r=n(7857),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"downloadDataURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",n=this.createBlobURLFromDataURL(t),r=this.getExtensionFromDataURL(t),i=document.createElement("a");i.download="".concat(e,".").concat(r),i.href=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{key:"downloadMSBlob",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob&&navigator.msSaveBlob(t,"".concat(e,".png"))}},{key:"getExtensionFromDataURL",value:function(t){return t.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;for(var e=r.DS.decode(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),o=new Uint8Array(i),a=0;a<e.length;a++)o[a]=e[a];var s=new window.Blob([i],{type:n});return window.URL.createObjectURL(s)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}(),o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._sdk=e,this._options=n,this._download=r}var e;return(e=[{key:"export",value:function(){var t=this,e=this._getRenderType();return this._sdk.export(e,this._options.format,this._options.quality).then((function(n){return t._download&&t._downloadData(e,n),n}))}},{key:"_downloadData",value:function(t,e){switch(t){case r.y2.DATAURL:i.downloadDataURL(e,this._options.fileBasename);break;case r.y2.MSBLOB:i.downloadMSBlob(e,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var t=this._options;return t.type===r.y2.IMAGE&&this._download?r.cQ.supportsMSBlob()?r.y2.MSBLOB:r.y2.DATAURL:t.type}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),a=n(7288),s=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._image=e,this._maxPixels=n,this._maxDimensions=r}var e;return(e=[{key:"needsResize",value:function(){var t=new r.FM(this._image.width,this._image.height),e=t.x*t.y>this._maxPixels,n=null!==this._maxDimensions&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return e||n}},{key:"resize",value:function(){var t=this,e=null,n=null,i=this._maxDimensions;return new r.JD((function(o,a){window.setTimeout((function(){var a=new r.FM(t._image.width,t._image.height).clone();if(a.x*a.y>t._maxPixels&&(a.copy(t._getDimensionsByMaxPixels()),e="maxMegaPixels"),null!==i&&(a.x>i||a.y>i)){var s=Math.min(i/a.x,i/a.y);a.multiply(s),e="maxDimensions"}a.floor(),n=t._createResizedImageCanvas(a),o({canvas:n,dimensions:a,reason:e})}),1e3)}))}},{key:"_createResizedImageCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this._image,r=document.createElement("canvas");r.width=t.x,r.height=t.y;var i=t.clone().subtract(e).divide(2),o=r.getContext("2d");return o.drawImage(n,0,0,n.width,n.height,i.x,i.y,e.x,e.y),r}},{key:"_getDimensionsByMaxPixels",value:function(){var t=this._image,e=this._maxPixels,n=t.width/t.height,i=t.height/t.width;return new r.FM(Math.sqrt(e*n),Math.sqrt(e*i)).floor()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e,this._sdk=n,this._mediator=r,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}var e;return(e=[{key:"exists",value:function(t){return!!this._map[t]}},{key:"add",value:function(t){var e=this,n=t.constructor.identifier;t.on("update",(function(){e._mediator.emit(r.gT.EVENTS.OPERATION_UPDATED,t)}));var i=this._preferredOrder.indexOf(n);if(-1===i)throw new Error("EditorOperations#add: `".concat(n,"` does not appear in `operationsOrder`"));this._stack.set(i,t),this._map[n]=t,this._mediator.emit(r.gT.EVENTS.OPERATION_CREATED,t)}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="object"===l(t)?t.constructor.identifier:t,i=this._stack.getStack();t=this.get(n),delete this._map[n];var o=i.map((function(t){return t.constructor.identifier})).indexOf(n);if(-1!==o){this._stack.removeAt(o);for(var a=o+1;a<i.length;a++){var s=i[a];s&&s.setDirty(!0)}e&&this._mediator.emit(r.gT.EVENTS.OPERATION_REMOVED,t)}}},{key:"get",value:function(t){return this._map[t]}},{key:"getOrCreate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[t]){var n=this._map[t];return n.set(e,!1),n}var r=this._available[t],i=new r(this._sdk,e);return this.add(i),i}},{key:"getStack",value:function(){return this._stack}},{key:"reset",value:function(){this._map={}}},{key:"_fixStack",value:function(){var t=this,e=this._stack.getStack().slice();this._stack.clear(),e.forEach((function(e){t.add(e)}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(m,t);var e,l,c,g=(l=m,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(l);if(c){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function m(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return f(this,m),(r=g.call(this))._ui=t,r._options=e,r._mediator=n,r._shallow=i,i||(r._initSDK(),r.operations=new u(d(r),r._sdk,r._mediator)),r}return(e=[{key:"_initFonts",value:function(){var t=r.xx.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new a.Z(this._ui,t);var e=this._fontManager.getFonts(),n=this._ui.getFontLoader();n.setFonts(e),n.load()}},{key:"setImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.reset();var n=null;n=this._sdk.parseExif(t),this._setImage(t,n),this._initWatermark()}},{key:"_initWatermark",value:function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}},{key:"_initSDK",value:function(){var t,e=this._options,n=e.logLevel,i=e.displayWelcomeMessage,o=e.debug,a=e.license,s=e.crossOrigin,l=this._options.editor,u=l.smoothDownscaling,c=l.smoothUpscaling,f=l.preferredRenderer,p=l.pixelRatio,h=l.transparent,d=l.clearColor;Array.isArray(d)?t=r.Il.fromArray(d):"string"==typeof d?t=r.Il.fromHex(d):d instanceof r.Il&&(t=d.clone());var y={logLevel:n,debug:o,displayWelcomeMessage:i,pixelRatio:p,smoothDownscaling:u,smoothUpscaling:c,transparent:h,crossOrigin:s,clearColor:t,license:a};this._sdk=new r.Bq(f,y)}},{key:"getMaxMegapixels",value:function(){return this._options.editor.maxMegaPixels}},{key:"getCrossOrigin",value:function(){return r.xx.getCrossOriginValue(this._options.crossOrigin||"anonymous")}},{key:"getOutputDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(t)}},{key:"getOutputTextureDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(t)}},{key:"getFinalDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(t)}},{key:"_setImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=t,this._sdk.setImage(t,e)}},{key:"_ensureImageIsResized",value:function(){var t=this,e=this._sdk.getImage(),n=this._sdk.getRenderer(),i=this.getMaxMegapixels(),o=i?1e6*i:null,a=n.getMaxDimensions(),l=new s(e,o,a);return!this._resizedImage&&l.needsResize()?l.resize().then((function(e){var n=e.canvas;return e.dimensions,e.reason,t._resizedImage=n,t._sdk.setImage(n),n})):r.JD.resolve(e)}},{key:"export",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then((function(n){var i=t._options.editor.export;return new o(t._sdk,i,e).export().then((function(e){return t.emit("export",e),t._mediator.emit(r.gT.EVENTS.EXPORT,e,t),t._watermarkOperation&&(t._watermarkOperation.setEnabled(!0),t._sdk.render()),t._sdk.setAllOperationsToDirty(),e}))}))}},{key:"broadcastTransform",value:function(t,e){var n=this,i=new r.Bq.Operations.TransformOperation.TransformChange(t,e);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach((function(t){var e=n.operations.get(t);e&&e.transform(i)}))}},{key:"broadcastFlip",value:function(t){var e=this;["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach((function(n){var r=e.operations.get(n);r&&r.flip(t)}))}},{key:"broadcastRotate",value:function(t){var e=this;["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach((function(n){var r=e.operations.get(n);r&&r.rotate(t)}))}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":n(1233).Z,"1.0.1":n(463).Z,"2.0.0":n(9608).Z,"3.0.0":n(9879).Z,"3.1.0":n(7309).Z,"3.2.0":n(7362).Z,"3.4.0":n(6021).Z,"3.5.0":n(3102).Z,"3.6.0":n(4146).Z,"3.7.0":n(9848).Z,"3.8.0":n(5699).Z,"3.9.0":n(8481).Z}}},{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.9.0",n=this._serializers[e];if(!n)return r.JD.reject(new Error("No serializer for version ".concat(e," found.")));var i=new n(this);return i.serialize(t)}},{key:"deserialize",value:function(t){var e=this._serializers[t.version];return e?new e(this).deserialize(t):r.JD.reject(new Error("No serializer for version ".concat(t.version," found.")))}},{key:"save",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._options.editor.save;return this.serialize({image:e}).then((function(e){var r=JSON.stringify(e,null,2);if(t){var o="data:text/json;charset=utf-8;base64,"+window.encodeURI(window.btoa(r));i.downloadDataURL(o,n.fileBasename)}return r}))}},{key:"reset",value:function(){this._sdk.reset(),this.operations.reset()}},{key:"dispose",value:function(){this.stop(),this._sdk.dispose()}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getImage",value:function(){return this._sdk.getImage()}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"getMediator",value:function(){return this._mediator}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(m.prototype,e),m}(r.vp);var m=n(9706),v=n(4340),b=n(6312),_=n(4923);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(t){return r.xx.byteArrayToString(r.DS.decode(t))},C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(s,t);var e,n,i,o=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(i){var r=T(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return S(this,t)});function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,s),(t=o.call(this))._mediator=new r.vp,t._fontLoader=new v.Z(k(t)),t._options=e,t._initOptions(),t._initEvents(),t._disposed=!1,t._isReady=!1,t._editor=new g(k(t),t._options,t._mediator),t._options.editor.image&&t._editor.setImage(t._options.editor.image),t._mediator.once(r.gT.EVENTS.EDITOR_READY,(function(){t._isReady=!0})),r.Zb.setLevel(t._options.logLevel),t._v(),t}return(e=[{key:"export",value:function(){var t;return(t=this._editor).export.apply(t,arguments)}},{key:"serialize",value:function(){var t;return(t=this._editor).serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return this._editor.deserialize(t)}},{key:"getEditor",value:function(){return this._editor}},{key:"isReady",value:function(){return this._isReady}},{key:"onReady",value:function(t){this._isReady?t():this._mediator.once(r.gT.EVENTS.EDITOR_READY,t)}},{key:"createFilter",value:function(t){return new b.Z(this,this._getOptions("filter")).instantiateFilterWithIdentifier(t)}},{key:"getTextDesignLayoutByID",value:function(t){return new(new _.Z(this,this._getOptions("textDesign")).getLayoutByIdentifier(t))}},{key:"getTextDesignAssetManager",value:function(){return r.Bq.Operations.SpriteOperation.TextDesignSprite.AssetManager}},{key:"getTextDesignFontManager",value:function(){return new a.Z(this,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0,isTextDesign:!0})}},{key:"_getOptions",value:function(t){var e=this.getEditor(),n=e.controls,i={};n&&n.get(t)&&(i=n.get(t).defaultOptions);var o=e.getOptions();return r.xx.deepDefaults({},o.editor.controlsOptions[t]||{},i)}},{key:"_initOptions",value:function(){if(this._options=r.xx.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=r.xx.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=r.xx.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=r.xx.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=r.xx.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=r.xx.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=r.xx.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=r.xx.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=r.xx.defaults(this._options.editor.export||{},{format:"image/png",type:r.y2.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=r.xx.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=r.xx.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=r.xx.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){var t=new window.Image;this._options.editor.image&&(t.src=this._options.editor.image,this._options.editor.image=t)}}},{key:"_v",value:function(){return!!this[E("X29wdGlvbnM=")][E("bGljZW5zZQ==")]||(r.Zb.error(E("TGljZW5zaW5n"),E("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),r.Zb.error(E("TGljZW5zaW5n"),E("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function(){this._mediator.unpipeEvents(this)}},{key:"setImage",value:function(t){this._editor.setImage(t)}},{key:"getAssetPath",value:function(t){var e=this._options.assets,n=e.baseUrl,r=e.resolver,i="".concat(n,"/").concat(t);r=r||function(t){return t},t.match(/(ftp|http|https):\/\//)&&(i=t);var o=t.replace(/assets\//,"").split("/");switch(o[0]){case"art-filters":return r("art-filter",{identifier:o[1],type:o[2].split(".")[0]});case"filters":return r("filter",{identifier:o[1].replace(/\.png$/g,"")});case"fonts":return r("font",{identifier:o[1].replace(/\.(woff|otf|ttf)$/g,"")});case"frames":return r("frame",{identifier:o[1],filename:o[2]});case"overlays":return r("overlay",{identifier:o[1].replace(/\.(png|jpg|jpeg)$/g,"")});case"stickers":var a=o[3].endsWith(".svg"),s="thumbs"===o[3];return r("sticker",{category:o[1],identifier:(a?o[3]:o[4]).replace(/\.(png|svg)$/g,""),variant:a?"svg":s?"thumb":"base"});case"text-design":return r("text-design",{type:"fonts"===o[1]?"font":"image",identifier:o[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")})}return null!=r&&(i=r(i)),i}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}},{key:"render",value:function(t){var e=this;return this.deserialize(t).then((function(){return e.export()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(r.vp);C.prototype.identifier="engine-wrapper",C.Constants=r.gT,C.Events=r.gT.EVENTS,C.Utils=r.cQ,C.JSONLoader=m.Z,C.SDK=r.Bq},4340:(t,e,n)=>{n.d(e,{Z:()=>S});var r=n(1512),i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._fontVariation=e||new r.Z({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}var e;return(e=[{key:"_createRuler",value:function(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()}},{key:"_setRulerStyle",value:function(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: ".concat(this._fontVariation.getFontStyle()," ").concat(this._fontVariation.getFontWeight()," ").concat(30,"px ").concat(this._fontVariation.getFontFamily(),";\n    ")}},{key:"setFontVariation",value:function(t){this._fontVariation=t,this._setRulerStyle()}},{key:"getWidth",value:function(){return this._ruler?this._ruler.offsetWidth:-1}},{key:"dispose",value:function(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),o="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._fontVariation=e,this._defaultFontRuler=new i,this._customFontRuler=new i(this._fontVariation)}var e;return(e=[{key:"observe",value:function(){var t=this,e=o();return new Promise((function(n,r){var i=window.setInterval((function(){if(t._defaultFontRuler.getWidth()!==t._customFontRuler.getWidth())return window.clearInterval(i),n();if(o()-e>=5e3){var a=new Error("Failed to load font ".concat(t._fontVariation.getFontFamily(),"."));return a.font=t._fontVariation,r(a)}}),50)}))}},{key:"dispose",value:function(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=n(6982),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._fonts=[],this._observers=[]}var e;return(e=[{key:"add",value:function(t){this._fonts.push(t)}},{key:"load",value:function(){var t=this;return 0===this._fonts.length?Promise.resolve():(this._observers=[],this._fonts.forEach((function(e){t._observers.push(new a(e))})),s.Utils.executePromises(this._observers.map((function(t){return t.observe()}))))}},{key:"dispose",value:function(){this._observers.forEach((function(t){return t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y={italic:"i"},g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return h(this,t)});function o(){return c(this,o),i.apply(this,arguments)}return(e=[{key:"load",value:function(){return this._fonts.length&&this._addStylesheetTag(),f(d(o.prototype),"load",this).call(this)}},{key:"_addStylesheetTag",value:function(){var t=this._getFamiliesString(),e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css?family=".concat(t),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_getFamiliesString",value:function(){var t={};this._fonts.forEach((function(e){var n=e.getFontFamily(),r=e.getFontStyle(),i=e.getFontWeight();t[n]=t[n]||[],void 0!==i?t[n].push("".concat(i).concat(y[r]||"")):t[n].push(400)}));var e=[];for(var n in t){var r=t[n],i=r.length?":".concat(r.join(",")):"",o=n.replace(" ","+")+i;e.push(o)}return e.join("|")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(l);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(n);if(r){var i=w(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return _(this,t)});function o(){return v(this,o),i.apply(this,arguments)}return(e=[{key:"load",value:function(){return Promise.resolve()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(l);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._fonts=n,this._loadedFonts=[]}var e;return(e=[{key:"setFonts",value:function(t){this._fonts=t}},{key:"needsToLoad",value:function(){for(var t=this,e=function(e){var n=void 0;return t._fonts[e].getVariations().forEach((function(t){n=n||t.getProvider()})),n?{v:!0}:"continue"},n=0;n<this._fonts.length;n++){var r=e(n);if("continue"!==r&&"object"===O(r))return r.v}}},{key:"fontLoaded",value:function(t){var e=t.getFontFamily();return-1!==this._loadedFonts.indexOf(e)}},{key:"setFontLoaded",value:function(t){if(!this.fontLoaded(t)){var e=t.getFontFamily();this._loadedFonts.push(e)}}},{key:"load",value:function(){var t=this,e=this._fonts,n={google:new g(this._ui),file:new x(this._ui)},r=function(){for(var t in n)n[t].dispose()};e.filter((function(e){return!t.fontLoaded(e)})).forEach((function(t){t.getVariations().forEach((function(t){var e=t.getProvider();e&&n[e].add(t)}))}));var i=[];for(var o in n)i.push(n[o].load());return Promise.all(i).then((function(){r(),e.forEach((function(e){t.setFontLoaded(e)}))})).catch((function(t){throw r(),t}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},5030:(t,e,n)=>{n.r(e),n.d(e,{RenderType:()=>r,ImageFormat:()=>i,OptionType:()=>o,UniformType:()=>a,RendererType:()=>s});var r={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},i={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"},o={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},a={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",INT2:"2i",INT3:"3i",INT4:"4i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},s={WEBGL:"webgl",CANVAS:"canvas"}},1385:(t,e,n)=>{n.d(e,{uO:()=>p,FN:()=>h,Il:()=>i.Z,y3:()=>o.Z,FM:()=>s.Z,Ae:()=>a.Z,vp:()=>l.Z,Zb:()=>r.Z,cQ:()=>u.Z,gT:()=>f,L6:()=>c.Z});var r=n(3678),i=n(8882),o=n(688),a=n(9385),s=n(6903),l=n(4842),u=n(3779),c=n(3066),f=n(5030),p=2e3,h=20},332:(t,e,n)=>{n.d(e,{Z:()=>We});var r={};n.r(r),n.d(r,{ColorOverlayFilter:()=>xe,OverlayFilter:()=>Ue,TintFilter:()=>Pe,UnpremultiplyFilter:()=>he});var i=n(1385),o="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930);const a=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e,this._tracking=!1;var r=this,i=function(t){"function"==typeof e[t]?n[t]=function(){for(var n=e[t],i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(!r._tracking)return n.apply(e,a);var l=o(),u=n.apply(e,a),c=o()-l,f={functionName:t,arguments:a,duration:c};return r._trackedCalls.push(f),u}:n._makePropertyWrapper(t)};for(var a in e)i(a)}var e;return(e=[{key:"_makePropertyWrapper",value:function(t){if(-1===["_context","_trackedCalls","_tracking"].indexOf(t)){var e=this._context;this.__defineGetter__(t,(function(){return e[t]})),this.__defineSetter__(t,(function(n){e[t]=n}))}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var t="Rendering";i.Zb.log(t,"Frame rendering results:"),i.Zb.log(t,"Context calls: ".concat(this._trackedCalls.length));var e={};this._trackedCalls.forEach((function(t){var n=t.functionName,r=t.duration;e[n]=e[n]||{totalDuration:0,calls:0},e[n].totalDuration+=r,e[n].calls++}));var n=[];for(var r in e){var o=e[r];o.averageDuration=o.totalDuration/o.calls,n.push({functionName:r,data:o})}n.sort((function(t,e){return e.data.totalDuration-t.data.totalDuration})),(n=n.slice(0,3)).forEach((function(e){i.Zb.log(t,"".concat(e.functionName,": ").concat(e.data.calls," calls, ").concat(e.data.totalDuration.toFixed(2),"ms"))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=function(t){var e={};for(var n in t)e[n]=t[n];for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];for(var o in i)void 0===e[o]&&(e[o]=i[o])}return e};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,r,o,a,l=(o=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(o);if(a){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return p(this,t)});function d(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u(this,d),(n=l.call(this))._options=s(r,{pixelRatio:1,transparent:!1,clearColor:i.Il.BLACK,debug:!1}),n.setMaxListeners(0),n._width=t||800,n._height=e||600,n._dimensions=new i.FM(n._width,n._height),n._maxTextureSize=null,n._pixelRatio=n._options.pixelRatio,n._clearColor=n._options.transparent?i.Il.TRANSPARENT:n._options.clearColor||i.Il.BLACK,n}return e=d,r=[{key:"isSupported",value:function(){return!0}}],(n=[{key:"setCanvas",value:function(t){var e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new i.FM(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width="".concat(this._width/this._pixelRatio,"px"),this._canvas.style.height="".concat(this._height/this._pixelRatio,"px"))),this._dimensions=t.clone()}},{key:"_createContext",value:function(){i.Zb.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){i.Zb.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(t){i.Zb.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(t){this._filterManager=t}},{key:"isOfType",value:function(t){return this._type===t}},{key:"dispose",value:function(){i.Zb.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}])&&c(e.prototype,n),r&&c(e,r),d}(i.vp);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(l,t);var e,n,r,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(o);if(a){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return b(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this)).id=l.id++,e._onSourceLoaded=e._onSourceLoaded.bind(_(e)),e._renderers=[],e._glTextures={},e._source=t,e._dirty=!0,e._glUnit=0,e._mipMapping=!1,e._magFilter=l.DefaultMagFilter,e._minFilter=l.DefaultMinFilter,e._repeatX=l.ClampToEdge,e._repeatY=l.ClampToEdge,e._pixelRatio=1,e._loaded=!1,e._frame=new i.Ae(0,0,100,100),t&&e._loadSource(),e}return e=l,r=[{key:"getGLFilter",value:function(t,e){switch(e){case l.LinearFilter:return t.LINEAR;case l.NearestFilter:return t.NEAREST;case l.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case l.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}}}],(n=[{key:"resizeTo",value:function(t){this._frame.width===t.x&&this._frame.height===t.y||(this._frame.width=t.x,this._frame.height=t.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var t=this._source,e=t.complete,n="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();if(e||n)return this._onSourceLoaded();t.addEventListener&&t.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var t=new i.FM(this._source.width,this._source.height);i.cQ.isPowerOfTwo(t)?(i.Zb.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=l.TrilinearFilter,this._mipMapping=!0):(this._minFilter=l.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new i.Ae(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getRenderers",value:function(){return function(t){if(Array.isArray(t))return g(t)}(t=this._renderers)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t}},{key:"getGLFilter",value:function(t,e){switch(e){case"min":return this.constructor.getGLFilter(t,this._minFilter);case"mag":return this.constructor.getGLFilter(t,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(t){this._loaded=t}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(t){this._source=t}},{key:"getGLTextureForRenderer",value:function(t){return this._glTextures[t.id]}},{key:"setGLTextureForRenderer",value:function(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getDimensions",value:function(){return new i.FM(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(t){this._glUnit=t}},{key:"setMinFilter",value:function(t){this._minFilter=t}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(t){this._magFilter=t}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(t){this._repeatX=t}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(t){this._repeatY=t}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(t,e){switch("x"===e?this.getRepeatX():this.getRepeatY()){case l.ClampToEdge:return t.CLAMP_TO_EDGE;case l.Repeat:return t.REPEAT;case l.MirroredRepeat:return t.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(t){this._dirty=t}},{key:"disposeGLTextures",value:function(){var t=this;this._renderers.forEach((function(e){t.disposeGLTexturesForRenderer(e)}))}},{key:"disposeGLTexturesForRenderer",value:function(t){this._glTextures[t.id]&&(t.getContext().deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(t){this._mipMapping=t}},{key:"dispose",value:function(){this.disposeGLTextures(),this._source=void 0}}])&&m(e.prototype,n),r&&m(e,r),l}(i.vp);x.NearestFilter=0,x.LinearFilter=1,x.BilinearFilter=2,x.TrilinearFilter=3,x.DefaultMagFilter=x.NearestFilter,x.DefaultMinFilter=x.LinearFilter,x.ClampToEdge=0,x.Repeat=1,x.MirroredRepeat=2,x.id=0;const O=x,S=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._width=e,this._height=n,this._pixelRatio=r,this._baseTexture=new O,this._canvas=i||this._createCanvas(),this._context=o||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}var e;return(e=[{key:"_createCanvas",value:function(){return i.cQ.createCanvas()}},{key:"clear",value:function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(t){this._baseTexture.resizeTo(t),this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t}},{key:"getDimensions",value:function(){return new i.FM(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null,this._baseTexture.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new i.Ae(0,0,e.getWidth(),e.getHeight())}var e;return(e=[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach((function(e){return e.resizeTo(t)}))}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(r),this._filterStack.push({renderTarget:r,filters:e}),r.clear()}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1].renderTarget;return 1===e.length?(e[0].apply(this._renderer,n,r),this._textures.push(n)):this._applyFilters(e,n,r),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach((function(t,e){if(t===a)t.apply(r._renderer,i,n);else{t.apply(r._renderer,i,o);var s=i;i=o,o=s}})),this._textures.push(i),this._textures.push(o)}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._textures.pop();return e||(e=new S(this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"dispose",value:function(){}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=i.gT.RendererType,I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(s,t);var e,n,r,o=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(n);if(r){var i=D(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return R(this,t)});function s(){var t;E(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n)))._type=P.CANVAS,t.setCanvas(t._options.canvas||t._createCanvas()),t}return(e=[{key:"_createCanvas",value:function(){return i.cQ.createCanvas()}},{key:"_createContext",value:function(){var t=this._canvas.getContext("2d");return this._options.debug&&(t=new a(t)),this.id=t.id=s.contextId++,this._context=t,t.renderer=this,this.emit("context",t),t}},{key:"_setupContext",value:function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach((function(e){t[e]&&(t[e]=!0)})),this._defaultRenderTarget=new S(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new k(this)}},{key:"render",value:function(t){var e=this._renderTarget.getContext(),n=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(n),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var r=this._canvas,i=r.width,o=r.height;e.clearRect(0,0,i,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,i,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)}},{key:"renderDisplayObject",value:function(t,e){var n=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(n)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(t){this._renderTarget=t}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(d);I.contextId=0,I.type="Canvas2D";const A=I;var F=n(16);function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}const M=function(){function t(e,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];j(this,t),this._renderer=e,this._gl=e.getContext(),this._width=n,this._height=r,this._frame=null,this._pixelRatio=o,this._projectionMatrix=new i.y3,this._mipMapping=!1,this._baseTexture=new O;var s=this._baseTexture.getFrame();s.width=n,s.height=r,this._baseTexture.setPixelRatio(o),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=a,this._filterStack=[{renderTarget:this,filter:[]}],a||this._initFrameBuffer()}var e;return(e=[{key:"resizeTo",value:function(t){this._width=0|t.x,this._height=0|t.y,this._baseTexture.resizeTo(t),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var t=O.DefaultMinFilter;return this._mipMapping&&(t=O.TrilinearFilter),t}},{key:"_getMagFilter",value:function(){return O.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var t=this._gl,e=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this._texture&&(t.deleteTexture(this._texture),this._texture=null),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&i.L6.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t);var r=new i.FM(this._width,this._height);i.cQ.isPowerOfTwo(r)?(i.Zb.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Il.TRANSPARENT,e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&i.L6.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new i.Ae(0,0,this._width,this._height),n=e.x,r=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-n*t.a,t.ty=1-r*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-n*t.a,t.ty=-1-r*t.d)}},{key:"_initFrameBuffer",value:function(){var t=this._gl;this._framebuffer&&(t.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(t.deleteTexture(this._texture),this._texture=null),this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new i.FM(this._width,this._height)),this._renderer._options.debug&&i.L6.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var t=this._gl;this._baseTexture.dispose(),this._framebuffer&&(t.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(t.deleteTexture(this._texture),this._texture=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}var e;return(e=[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e,n){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(n);if(r){var i=H(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return W(this,t)});function a(){var t;B(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=o.call.apply(o,[this].concat(n)))._maxBatchSize=i.uO,t._vertices=new ArrayBuffer(4*i.uO*i.FN),t._positions=new Float32Array(t._vertices),t._colors=new Uint32Array(t._vertices),t._indices=new Uint16Array(6*i.uO);for(var s=0,l=0;s<6*i.uO;s+=6,l+=4)t._indices[s+0]=l+0,t._indices[s+1]=l+1,t._indices[s+2]=l+2,t._indices[s+3]=l+0,t._indices[s+4]=l+2,t._indices[s+5]=l+3;return t._shaders=[],t._sprites=[],t._currentBatchSize=0,t._onContextChange(),t}return(e=[{key:"render",value:function(t){var e=t.getTexture(),n=e.getFrame();e.getBaseTexture(),this._currentBatchSize>=this._maxBatchSize&&this.flush();var r=e.getUVs();if(r){var o=this._currentBatchSize*i.FN;this._addVertexCoordinates(t,o,n),this._addTextureUVs(t,o,r),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}}},{key:"_addColors",value:function(t,e){var n=this._colors,r=t.getTint(),i=(r>>16)+(65280&r)+((255&r)<<16)+(255*t.getWorldAlpha()<<24);n[e+4]=n[e+9]=n[e+14]=n[e+19]=i}},{key:"_addTextureUVs",value:function(t,e,n){var r=this._positions,i=n.getUVsAt(0);r[e+2]=i.x,r[e+3]=i.y,i=n.getUVsAt(1),r[e+7]=i.x,r[e+8]=i.y,i=n.getUVsAt(2),r[e+12]=i.x,r[e+13]=i.y,i=n.getUVsAt(3),r[e+17]=i.x,r[e+18]=i.y}},{key:"_addVertexCoordinates",value:function(t,e,n){for(var r=this._positions,i=t.getWorldTransform(),o=t.getAnchor(),a=i.rectangleToCoordinates(n,o),s=0;s<4;s++)r[e+5*s]=a[s].x,r[e+5*s+1]=a[s].y}},{key:"_onContextChange",value:function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer=null),this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*i.uO)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var n=this._positions.subarray(0,this._currentBatchSize*i.FN);e.bufferSubData(e.ARRAY_BUFFER,0,n)}for(var r=0,o=null,a=null,s=null,l=null,u=!1,c=null,f=0,p=0,h=this._currentBatchSize;p<h;p++){if(a=(c=this._sprites[p]).getTexture().getBaseTexture(),u=s!==(l=c.getShader()||this._shader),(o!==a||u)&&(this._renderBatch(o,r,f),f=p,r=0,o=a,u)){s=l,t.setShader(s);var d=t.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",d),s.syncUniforms(),e.activeTexture(e.TEXTURE0)}r++}this._renderBatch(o,r,f),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(t,e,n){if(0!==e){var r=this._renderer,i=r.getContext(),o=t.getGLTextureForRenderer(r);o||(o=r.getOrCreateGLTexture(t)),t.isDirty()&&(r.updateTexture(t),t.setDirty(!1)),i.activeTexture(i.TEXTURE0+t.getGLUnit()),i.bindTexture(i.TEXTURE_2D,o);var a=6*e,s=6*n*2;i.drawElements(i.TRIANGLES,a,i.UNSIGNED_SHORT,s)}}},{key:"dispose",value:function(){var t=this._renderer.getContext();for(var e in this._sprites)e.dispose();this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,N(H(a.prototype),"dispose",this).call(this)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(z);var G=n(5030),Z=i.Zb,X=i.cQ;const q=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._vertexSource=n,this._fragmentSource=r,this._uniforms=i||{},this._uniformLocations={},this._attributes=o||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}var e;return(e=[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(t,e){var n=this._renderer.getContext();n.bindBuffer(n.ARRAY_BUFFER,t),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),n.vertexAttribPointer(this._attributeLocations.a_position,2,n.FLOAT,!1,i.FN,0),n.vertexAttribPointer(this._attributeLocations.a_texCoord,2,n.FLOAT,!1,i.FN,8),n.vertexAttribPointer(this._attributeLocations.a_color,4,n.UNSIGNED_BYTE,!0,i.FN,16)}},{key:"syncUniforms",value:function(){var t=this;Object.keys(this._uniforms).forEach((function(e){t.syncUniform(e)}))}},{key:"syncUniform",value:function(t){var e=this._renderer.getContext(),n=this._uniforms[t],r=this._uniformLocations[t];switch(n.type){case G.UniformType.SAMPLER2D:e.uniform1i(r,n.value);break;case G.UniformType.INT:case G.UniformType.INT1:e.uniform1i(r,n.value);break;case G.UniformType.INT2:e.uniform2i(r,n.value[0],n.value[1]);break;case G.UniformType.INT3:e.uniform3i(r,n.value[0],n.value[1],n.value[2]);break;case G.UniformType.INT4:e.uniform4i(r,n.value[0],n.value[1],n.value[2],n.value[3]);break;case G.UniformType.FLOAT:case G.UniformType.FLOAT1:e.uniform1f(r,n.value);break;case G.UniformType.FLOAT2:e.uniform2f(r,n.value[0],n.value[1]);break;case G.UniformType.FLOAT3:e.uniform3f(r,n.value[0],n.value[1],n.value[2]);break;case G.UniformType.FLOAT4:e.uniform4f(r,n.value[0],n.value[1],n.value[2],n.value[3]);break;case G.UniformType.FLOAT_VECTOR2:e.uniform2fv(r,n.value);break;case G.UniformType.MAT3:case G.UniformType.MAT3FV:e.uniformMatrix3fv(r,!1,n.value);break;case G.UniformType.MAT4:e.uniformMatrix4fv(r,!1,n.value);break;default:Z.warn(this.constructor.name,"Unknown uniform type: ".concat(n.type))}}},{key:"_cacheAttributeLocations",value:function(){var t=this,e=this._renderer.getContext();this._attributes.forEach((function(n){t._attributeLocations[n]=e.getAttribLocation(t._program,n)}))}},{key:"_cacheUniformLocations",value:function(){var t=this,e=this._renderer.getContext();Object.keys(this._uniforms).forEach((function(n){t._uniformLocations[n]=e.getUniformLocation(t._program,n)}))}},{key:"_addPrecisionToSource",value:function(t){var e=this._renderer.getMaxFloatPrecision(),n="mediump";return X.isMobile()&&"highp"===e&&(n="highp"),"precision ".concat(n," float;\n").concat(t)}},{key:"_compile",value:function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;var n=this._addPrecisionToSource(this._fragmentSource),r=this._compileShader(t.FRAGMENT_SHADER,n);this._fragmentShader=r;var i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))this._program=i;else{var o=t.getProgramInfoLog(i);t.isContextLost()&&(o="WebGL context lost"),t.deleteProgram(i),Z.error(this.constructor.name,"WebGL program linking error: ".concat(o))}}},{key:"_compileShader",value:function(t,e){var n=this._renderer.getContext(),r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);n.isContextLost()&&(i="WebGL context lost"),n.deleteShader(r),Z.error(this.constructor.name,"WebGL shader compilation error: ".concat(i))}return r}},{key:"setUniform",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[t].value=e,n&&this.syncUniform(t)}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $=i.gT.UniformType,tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=J(e);if(n){var i=J(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Q(this,t)});function i(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||i.defaultVertexSource,n=n||i.defaultFragmentSource,r.call(this,t,e,n,i.defaultUniforms,i.defaultAttributes)}return i}(q);tt.defaultVertexSource=n(5209),tt.defaultFragmentSource=n(9059);var et=new i.y3;tt.defaultUniforms={u_image:{type:$.SAMPLER2D,value:0},u_projMatrix:{type:$.MAT3,value:et.toArray()}},tt.defaultAttributes=["a_position","a_texCoord","a_color"];const nt=tt,rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._position=new i.FM(0,0),this._scale=new i.FM(1,1),this._pivot=new i.FM(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new i.y3,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new i.Ae(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new i.Ae(0,0,1,1),this._tint=16777215,this._filterRectangle=new i.Ae(0,0,0,0)}var e;return(e=[{key:"renderWebGL",value:function(t){i.Zb.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(t){i.Zb.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var t=this._parent?this._parent.getWorldTransform():i.y3.IDENTITY,e=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(t){this._shaders.push(t)}},{key:"removeShader",value:function(t){var e=this._shaders.indexOf(t);return-1!==e&&(this._shaders.splice(e,1),!0)}},{key:"removeShaderAt",value:function(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(t,e){t instanceof i.FM?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(t,e){t instanceof i.FM?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(t,e){t instanceof i.FM?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(t){this._alpha=t}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(t){this._parent=t}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(t){this._filterRectangle.copy(t)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(t){this._tint=t}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(t){this._visible=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var it=n(2861),ot=i.gT.RendererType;const at=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new i.Ae(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}var e;return(e=[{key:"resizeTo",value:function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach((function(e){return e.resizeTo(t)}))}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(t){this._filterStack=t}},{key:"_getOrCreateRenderTarget",value:function(t){var e=this._renderTargets.pop();return e||(e=new M(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),e.setFrame(this._currentFrame),t&&e.clear(),e}},{key:"pushFilters",value:function(t,e){var n=t.getBounds();this._currentFrame=n;var r=t.getFilterRectangle();r.width>0&&r.height>0&&(this._currentFrame=r);var i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),i.clear(),this._filterStack.push({renderTarget:i,filters:e})}},{key:"popFilters",value:function(){var t=this._filterStack.pop(),e=t.filters,n=t.renderTarget,r=this._filterStack[this._filterStack.length-1].renderTarget;this._quad.map(this._textureFrame,n.getFrame());var i=e[0].getShaderForRenderer(this._renderer),o=this._quad.getVertexBuffer(),a=this._quad.getIndexBuffer(),s=this._renderer.getContext();s.bindBuffer(s.ARRAY_BUFFER,o),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,a);var l=i.getAttributeLocations();return s.vertexAttribPointer(l.a_position,2,s.FLOAT,!1,0,0),s.vertexAttribPointer(l.a_texCoord,2,s.FLOAT,!1,0,32),s.vertexAttribPointer(l.a_color,4,s.FLOAT,!1,0,64),this._renderer.updateTexture(n.getBaseTexture(),!1),1===e.length?(e[0].apply(this._renderer,n,r),this._renderTargets.push(n)):this._applyFilters(e,n,r),e}},{key:"_applyFilters",value:function(t,e,n){var r=this,i=e,o=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(o.getBaseTexture(),!1);var a=t[t.length-1];t.forEach((function(t,e){if(t===a)t.apply(r._renderer,i,n,!0);else{t.apply(r._renderer,i,o,!0);var s=i;i=o,o=s}})),this._renderTargets.push(i),this._renderTargets.push(o)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(ot.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new it.Z(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach((function(t){t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var st=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=n,this.data=r}var e;return(e=[{key:"fromNodeCanvasImage",value:function(e){var n=new Canvas(e.width,e.height).getContext("2d");n.drawImage(e,0,0);var r=n.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,r.data)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(t,e,n){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ht(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?dt(t):e}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt=i.gT.RendererType,mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(u,t);var e,n,r,o,s,l=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yt(o);if(s){var n=yt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ht(this,t)});function u(){var t;ut(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=l.call.apply(l,[this].concat(n)))._type=gt.WEBGL,t._fakeObject=new rt,t._onContextLost=t._onContextLost.bind(dt(t)),t._onContextRestored=t._onContextRestored.bind(dt(t)),t.setCanvas(t._options.canvas||i.cQ.createCanvas()),t._cachedBlitCanvas=i.cQ.createCanvas(),t.shaders=t._initShaders(),t.renderers=t._initRenderers(),t}return e=u,r=[{key:"isSupported",value:function(){var t=i.cQ.createCanvas();t.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var e=t.getContext("webgl")||t.getContext("experimental-webgl"),n=!!e;if(n){var r=i.L6.determineGPUName(e);n&=!i.L6.isGPUBlacklisted(r)}return t.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),n}}],(n=[{key:"_onContextLost",value:function(t){t.preventDefault(),i.Zb.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(t){t.preventDefault(),i.Zb.warn(this.constructor.name,"Failed to create WebGL context: ".concat(t.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){i.Zb.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new at(this),this._currentObjectRenderer=new z(this)}},{key:"setShader",value:function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)}},{key:"setCanvas",value:function(t){this._canvas&&this._removeContextEventListeners(),ft(yt(u.prototype),"setCanvas",this).call(this,t),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(t){var e=this._context,n=t.getAttributes(),r=t.getAttributeLocations();n.forEach((function(t){var n=r[t];e.enableVertexAttribArray(n)}))}},{key:"_initShaders",value:function(){return{default:new nt(this)}}},{key:"_initRenderers",value:function(){return{sprite:new V(this)}}},{key:"_createContext",value:function(){var t=this._canvas,e=null,n={preserveDrawingBuffer:!0};return e=t.getContext("webgl",n)||t.getContext("experimental-webgl",n),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug&&(e=window.WebGLDebugUtils.makeDebugContext(e,null,(function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")}))),this._options.debug&&(e=new a(e)),this.id=e.id=u.contextId++,this._context=e,e.renderer=this,this._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.emit("context",e),e}},{key:"_setupContext",value:function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new M(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==e.precision?"highp":"mediump";var n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==n.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ft(yt(u.prototype),"resizeTo",this).call(this,t,e),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(t)}},{key:"setRenderTarget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=t,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()}},{key:"render",value:function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer}},{key:"getOrCreateGLTexture",value:function(t){var e=this._context,n=t.getGLTextureForRenderer(this);return n||(n=e.createTexture(),t.setGLTextureForRenderer(n,this)),n}},{key:"updateTexture",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getSource(),r=!!n,o=this._context,a=t.getGLUnit(),s=this.getOrCreateGLTexture(t);if(o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,s),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&r)if(n instanceof st)o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width,n.height,0,o.RGBA,o.UNSIGNED_BYTE,n.data);else{var l=i.cQ.convertHtmlImageToRGBACanvas(n,this._cachedBlitCanvas);o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l)}t.isMipMappingEnabled()?o.generateMipmap(o.TEXTURE_2D):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t.getGLRepeat(o,"x")),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t.getGLRepeat(o,"y"))),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t.getGLFilter(o,"min")),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t.getGLFilter(o,"mag")),o.activeTexture(o.TEXTURE0)}},{key:"getMaxDimensions",value:function(){var t=this.maxTextureDimensions;if(void 0===t){var e=i.cQ.createCanvas(),n=e.getContext("webgl")||e.getContext("experimental-webgl");if(n){var r=n.getParameter(n.MAX_TEXTURE_SIZE),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),t=r}else t=null;this.maxTextureDimensions=t}return t}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){for(var t in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this.shaders)this.shaders[t].dispose(),delete this.shaders[t];this._removeContextEventListeners();var e=this._context.getExtension("WEBGL_lose_context");e&&e.loseContext()}}])&&ct(e.prototype,n),r&&ct(e,r),u}(d);mt.contextId=0,mt.type="WebGL";const vt=mt;var bt=n(3990),_t=n(3638),wt=n.n(_t);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e,n){return(St="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Et(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tt(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Et(n);if(r){var i=Et(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tt(this,t)});function a(){var t;Ot(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=o.call.apply(o,[this].concat(n)))._children=[],t._filters=[],t}return(e=[{key:"addFilter",value:function(t){this._filters.push(t)}},{key:"removeFilter",value:function(t){var e=this._filters.indexOf(t);return-1!==e&&(this._filters.splice(e,1),!0)}},{key:"setFilters",value:function(t){this._filters=t}},{key:"addChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)}},{key:"prependChild",value:function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)}},{key:"hasChild",value:function(t){return-1!==this._children.indexOf(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):i.Zb.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach((function(e){e.renderWebGL(t)})),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(t){}},{key:"renderCanvas",value:function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach((function(e){e.renderCanvas(t)})),this._filters&&this._filters.length&&e.popFilters()}}},{key:"_renderCanvas",value:function(t){}},{key:"updateTransform",value:function(){St(Et(a.prototype),"updateTransform",this).call(this),this._children.forEach((function(t){t.updateTransform()}))}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(rt),Rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uvs=[new i.FM(0,0),new i.FM(1,0),new i.FM(1,1),new i.FM(0,1)]}var e;return(e=[{key:"update",value:function(t,e){var n=this._uvs[0];n.x=t.x/e.width,n.y=t.y/e.height,(n=this._uvs[1]).x=(t.x+t.width)/e.width,n.y=t.y/e.height,(n=this._uvs[2]).x=(t.x+t.width)/e.width,n.y=(t.y+t.height)/e.height,(n=this._uvs[3]).x=t.x/e.width,n.y=(t.y+t.height)/e.height}},{key:"getUVsAt",value:function(t){return this._uvs[t]}},{key:"getUVs",value:function(){return this._uvs}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function At(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?Ft(t):e}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Mt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(l,t);var e,n,r,o,a,s=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jt(o);if(a){var n=jt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return At(this,t)});function l(t,e){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=s.call(this),!(t instanceof O))throw new Error("`baseTexture` should be an instance of BaseTexture");return n._uvs=new Rt,n._frame=e?e.clone():null,n._frameLocked=!!e,n._onBaseTextureLoaded=n._onBaseTextureLoaded.bind(Ft(n)),n._onBaseTextureUpdated=n._onBaseTextureUpdated.bind(Ft(n)),n._frame||(n._frame=new i.Ae(0,0,1,1)),n.setBaseTexture(t),n}return e=l,r=[{key:"fromImage",value:function(t){return new l(new O(t))}},{key:"fromCanvas",value:function(t){return new l(new O(t))}}],(n=[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var t=this._baseTexture.getFrame(),e=t.width,n=t.height;this._frame.width=e,this._frame.height=n,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(t){if(this._baseTexture=t,this._baseTexture.isLoaded()){var e=t.getFrame(),n=e.width,r=e.height;this._frameLocked||(this._frame=new i.Ae(0,0,n,r)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(t){this._frame=t,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new i.FM(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this._baseTexture.dispose()}}])&&Pt(e.prototype,n),r&&Pt(e,r),l}(i.vp);function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bt(t,e,n){return(Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ht=i.gT.RendererType;const Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wt(n);if(r){var i=Wt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Ut(this,t)});function a(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Lt(this,a),(e=o.call(this,new O,new i.Ae(0,0,n,r)))._loaded=!0,e._width=n,e._height=r,e._pixelRatio=s,e._renderer=t,e._setupFilterManager(),e._setupBuffer(),e.setBaseTexture(e._renderTarget.getBaseTexture()),e._updateUVs(),e}return(e=[{key:"_setupFilterManager",value:function(){this._filterManager&&this._filterManager.dispose(),this._renderer.isOfType(Ht.WEBGL)?this._filterManager=new at(this._renderer):this._renderer.isOfType(Ht.CANVAS)&&(this._filterManager=new k(this._renderer)),this._filterManager.resizeTo(new i.FM(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(Ht.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(Ht.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new M(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget&&this._renderTarget.dispose(),this._renderTarget=new S(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(t){this._renderTarget.clear(t)}},{key:"resizeTo",value:function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))}},{key:"render",value:function(t){if(this._renderer.isOfType(Ht.WEBGL))this._renderWebGL(t);else{if(!this._renderer.isOfType(Ht.CANVAS))throw new Error("RenderTexture does not support rendering via ".concat(this._renderer.constructor.name));this._renderCanvas(t)}}},{key:"_renderWebGL",value:function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach((function(t){t.updateTransform()}));var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"_renderCanvas",value:function(t){t.getWorldTransform().reset(),t.getChildren().forEach((function(t){t.updateTransform()}));var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose(),Bt(Wt(a.prototype),"dispose",this).call(this)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Mt);var Gt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=new F.Engine.Container,this._sprite=new F.Engine.Sprite,this._container.addChild(this._sprite)}var e;return(e=[{key:"render",value:function(t,e,n){var r=n.getDimensions(),i=this._getNextHighestPOT(r);this._renderTexture?this._renderTexture.resizeTo(i):this._renderTexture=new F.Engine.RenderTexture(t,i.x,i.y);var o=this._renderTexture.getDimensions();this._sprite.setTexture(n),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(t,e,r,o)}},{key:"_updateSprite",value:function(t,e,n,r){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new F.Rectangle(0,0,n.x,n.y))}},{key:"_getNextHighestPOT",value:function(t){return new F.Vector2(F.Utils.nextHighestPOT(t.x),F.Utils.nextHighestPOT(t.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture&&(this._renderTexture.dispose(),this._renderTexture=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Zt(t){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qt(t,e){return!e||"object"!==Zt(e)&&"function"!=typeof e?Yt(t):e}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kt(n);if(r){var i=Kt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return qt(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this))._onTextureUpdate=e._onTextureUpdate.bind(Yt(e)),e._texture=t,e._shader=null,e._width=0,e._height=0,e._anchor=new i.FM(0,0),e._canvasSmoothingEnabled=!0,e.setTexture(t),e}return(e=[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(t){var e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new Gt),this._potRenderer.render(t,this,this._texture)),t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(t){var e=this._worldTransform,n=this._texture.getFrame(),r=n.width,i=n.height,o=t.getCurrentRenderTarget().getPixelRatio(),a=this._anchor.x*-r|0,s=this._anchor.y*-i|0,l=t.getContext();l.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),l.globalAlpha=this.getWorldAlpha();var u=this._texture.getBaseTexture(),c=u.getPixelRatio(),f=u.getSource();l.imageSmoothingEnabled=this._canvasSmoothingEnabled,t.beforeDraw&&t.beforeDraw(l),l.drawImage(f,0,0,(f.naturalWidth||r)*c,(f.naturalHeight||i)*c,a*o,s*o,r*o,i*o)}},{key:"isAtPosition",value:function(t){var e=this._worldTransform.applyInverseToVector(t),n=this._texture.getFrame(),r=n.width,o=n.height,a=new i.FM(-r,-o);a.multiply(this._anchor);var s=a.clone().add(r,o);return!(e.x<a.x||e.x>s.x||e.y<a.y||e.y>s.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var t=this._bounds,e=this._texture.getFrame(),n=this._worldTransform,r=this._anchor,i=n.rectangleToCoordinates(e,r),o=i[0].x,a=i[0].y,s=o,l=a;i.forEach((function(t){var e=t.x,n=t.y;o=Math.min(o,e),a=Math.min(a,n),s=Math.max(s,e),l=Math.max(l,n)})),t.x=o,t.width=Math.abs(s-o),t.y=a,t.height=Math.abs(l-a),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._texture&&(this._texture.off("update",this._onTextureUpdate),t&&this._texture.dispose(),this._texture=null,this._potRenderer&&(t&&this._potRenderer.dispose(),this._potRenderer=null))}},{key:"setTexture",value:function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(t){this._shader=t}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new i.FM(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(t,e){t instanceof i.FM?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(t){this._smoothDownscaling=t}},{key:"dispose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(t||e)&&this._texture.dispose(e),this._potRenderer&&this._potRenderer.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ct),Jt={TextureShader:nt};function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ee(t,e,n){return(ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ie(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function re(t,e){return!e||"object"!==$t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=i.gT.OptionType,ae=i.gT.UniformType,se=i.gT.RendererType;const le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(a,t);var e,n,r,o=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ie(n);if(r){var i=ie(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return re(this,t)});function a(){return te(this,a),o.apply(this,arguments)}return(e=[{key:"_initOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=nt.defaultUniforms,this._attributes=nt.defaultAttributes,this._vertexSource=nt.defaultVertexSource,this._fragmentSource=nt.defaultFragmentSource,this._initUniforms(),ee(ie(a.prototype),"_initOptions",this).call(this,t)}},{key:"_initUniforms",value:function(){for(var t in this._uniforms={},this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(var n in this.availableOptions){var r=this.availableOptions[n];r.uniformType?this._uniforms["u_".concat(n)]={type:r.uniformType,value:r.default||null}:i.Zb.trace(this.constructor.name,"Option `".concat(n,"` is missing a `uniformType`!"))}}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];ee(ie(a.prototype),"setOption",this).call(this,t,e,n);var r=e,i=this.availableOptions[t];if(i.uniformType){var o="u_".concat(t);switch(i.type){case oe.COLOR:i.uniformType===ae.FLOAT4?r=e.toGLColor():i.uniformType===ae.FLOAT3&&(r=e.toRGBGLColor());break;case oe.VECTOR2:r=[e.x,e.y];break;case oe.COLOR_MATRIX:r=[e.a,e.b,e.c,e.d,e.f,e.g,e.h,e.i,e.k,e.l,e.m,e.n,e.p,e.q,e.r,e.s];var s=[e.e,e.j,e.o,e.t];this._uniforms[o+"_vec"]={value:s,type:ae.FLOAT4}}this.setUniform(o,r)}}},{key:"setUniform",value:function(t,e){this._uniforms[t].value=e}},{key:"setUniforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in t)this._uniforms[n].value=t[n],e&&this.syncUniform(n)}},{key:"syncUniform",value:function(t){this._shaders.forEach((function(e){e.syncUniform(t)}))}},{key:"syncUniforms",value:function(){this._shaders.forEach((function(t){t.syncUniforms()}))}},{key:"getShaderForRenderer",value:function(t){var e=t.getContext(),n=this._shaders[e.id];return n||(n=new q(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=n),n}},{key:"apply",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.isOfType(se.WEBGL)?this._applyWebGL(t,e,n,r):t.isOfType(se.CANVAS)&&this._applyCanvas(t,e,n,r)}},{key:"_applyWebGL",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(n),r&&n.clear(),t.setShader(o);var a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),o=n.getContext();i.Zb.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),o.clearRect(0,0,r.width,r.height),o.drawImage(r,0,0)}},{key:"dispose",value:function(){this._shaders.forEach((function(t){return t.dispose()})),this._shaders=[]}},{key:"_blurImage",value:function(t,e,n){var r=t.getCanvas(),o=Math.min(1,10/(n*Math.min(r.width,r.height))),a=i.cQ.createCanvas();a.width=Math.round(r.width*o),a.height=Math.round(r.height*o);var s=a.getContext("2d");s.drawImage(r,0,0,r.width,r.height,0,0,a.width,a.height);var l=n*Math.min(a.width,a.height),u=s.getImageData(0,0,a.width,a.height);wt().stackBlurCanvasRGBA(u,0,0,a.width,a.height,l),s.putImageData(u,0,0),e.getContext().drawImage(a,0,0,a.width,a.height,0,0,r.width,r.height)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(bt.Z);function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fe(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var he=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(o,t);var e,r,i=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=pe(e);if(r){var i=pe(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return fe(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this))._fragmentSource=n(8737),t}return o}(le);function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var be=i.gT.OptionType,_e=i.gT.UniformType,we=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(s,t);var e,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ve(r);if(o){var n=ve(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return me(this,t)});function s(){var t;ye(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(5994),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),o=e.getContext(),a=n.getContext(),s=this._options.color,l=o.getImageData(0,0,r.width,r.height),u=a.getImageData(0,0,r.width,r.height),c=r.width*r.height,f=new i.Il,p=new i.Il,h=0;h<4*c;h+=4){f.set(l.data[h]/255,l.data[h+1]/255,l.data[h+2]/255,l.data[h+3]/255),p.set(u.data[h]/255,u.data[h+1]/255,u.data[h+2]/255,u.data[h+3]/255);var d=p.r+f.a*(f.r-p.r);u.data[h]=255*(d+f.a*(s.r-d));var y=p.g+f.a*(f.g-p.g);u.data[h+1]=255*(y+f.a*(s.g-y));var g=p.b+f.a*(f.b-p.b);u.data[h+2]=255*(g+f.a*(s.b-g))}a.putImageData(u,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(le);we.prototype.availableOptions={color:{type:be.COLOR,default:i.Il.WHITE,uniformType:_e.FLOAT4}};const xe=we;function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Te(t,e){return!e||"object"!==Oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ce=i.gT.OptionType,Re=i.gT.UniformType,De=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(s,t);var e,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ee(r);if(o){var n=Ee(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Te(this,t)});function s(){var t;Se(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(2426),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),o=e.getContext(),a=n.getContext(),l=o.getImageData(0,0,r.width,r.height),u=this._options,c=u.mode,f=u.color,p=f.r,h=f.g,d=f.b,y=f.a,g=[.2125,.7154,.0721];switch(c){case s.MODES.SOLID:for(var m=0;m<r.width*r.height;m++){var v=4*m;l.data[v]+=(255*p-l.data[v])*y,l.data[v+1]+=(255*h-l.data[v+1])*y,l.data[v+2]+=(255*d-l.data[v+2])*y}break;case s.MODES.COLORIZED:for(var b=0;b<r.width*r.height;b++){var _=4*b,w=l.data[_]/255*g[0]+l.data[_+1]/255*g[1]+l.data[_+2]/255*g[2],x=new i.Il(w*p,w*h,w*d);l.data[_]+=(255*x.r-l.data[_])*y,l.data[_+1]+=(255*x.g-l.data[_+1])*y,l.data[_+2]+=(255*x.b-l.data[_+2])*y}}a.putImageData(l,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(le);De.MODES={NONE:0,SOLID:1,COLORIZED:2},De.prototype.availableOptions={color:{type:Ce.COLOR,default:i.Il.WHITE,uniformType:Re.FLOAT4},mode:{type:Ce.NUMBER,default:De.MODES.NONE,uniformType:Re.INT}};const Pe=De;function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ze=i.gT.OptionType,Le=i.gT.UniformType,Be=1e-6,Ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(s,t);var e,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Me(r);if(o){var n=Me(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return je(this,t)});function s(){var t;Ae(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(888),t._lastImage=null,t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=this._options.overlayTexture.getRenderTarget().getContext(),o=e.getCanvas(),a=e.getContext(),l=n.getContext(),u=a.getImageData(0,0,o.width,o.height),c=r.getImageData(0,0,o.width,o.height),f=this._options,p=f.blendMode,h=f.alpha,d=new i.Il,y=new i.Il,g=new i.Il,m=0;m<o.width*o.height*4;m+=4){d.set(u.data[m]/255,u.data[m+1]/255,u.data[m+2]/255,u.data[m+3]/255),y.set(c.data[m]/255,c.data[m+1]/255,c.data[m+2]/255,c.data[m+3]/255);var v=void 0,b=void 0,_=void 0,w=void 0,x=void 0,O=void 0,S=void 0,k=void 0,T=void 0;switch(p){case s.BLEND_MODES.NORMAL:g.set(d.r+y.a*h*(y.r-d.r),d.g+y.a*h*(y.g-d.g),d.b+y.a*h*(y.b-d.b),d.a);break;case s.BLEND_MODES.OVERLAY:v=1-2*(1-d.r)*(1-y.r),b=2*d.r*y.r,_=v+(d.r<.5?1:0)*(b-v),w=1-2*(1-d.g)*(1-y.g),x=2*d.g*y.g,O=w+(d.g<.5?1:0)*(x-w),S=1-2*(1-d.b)*(1-y.b),k=2*d.b*y.b,T=S+(d.b<.5?1:0)*(k-S),g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.HARD_LIGHT:v=1-2*(1-y.r)*(1-d.r),b=2*y.r*d.r,_=v+(y.r<.5?1:0)*(b-v),w=1-2*(1-y.g)*(1-d.g),x=2*y.g*d.g,O=w+(y.g<.5?1:0)*(x-w),S=1-2*(1-y.b)*(1-d.b),k=2*y.b*d.b,T=S+(y.b<.5?1:0)*(k-S),g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.SOFT_LIGHT:v=2*d.r*(1-y.r)+(2*y.r-1)*Math.sqrt(d.r),b=2*d.r*y.r+d.r*d.r*(1-2*y.r),_=v+(y.r<.5?1:0)*(b-v),w=2*d.g*(1-y.g)+(2*y.g-1)*Math.sqrt(d.g),x=2*d.g*y.g+d.g*d.g*(1-2*y.g),O=w+(y.g<.5?1:0)*(x-w),S=2*d.b*(1-y.b)+(2*y.b-1)*Math.sqrt(d.b),k=2*d.b*y.b+d.b*d.b*(1-2*y.b),T=S+(y.b<.5?1:0)*(k-S),g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.MULTIPLY:_=d.r*y.r,O=d.g*y.g,T=d.b*y.b,g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.DARKEN:_=Math.min(d.r,y.r),O=Math.min(d.g,y.g),T=Math.min(d.b,y.b),g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.LIGHTEN:_=Math.max(d.r,y.r),O=Math.max(d.g,y.g),T=Math.max(d.b,y.b),g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.SCREEN:_=1-(1-d.r)*(1-y.r),O=1-(1-d.g)*(1-y.g),T=1-(1-d.b)*(1-y.b),g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a);break;case s.BLEND_MODES.COLOR_BURN:_=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(y.r,Be))),O=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(y.g,Be))),T=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(y.b,Be))),g.set(d.r+y.a*h*(_-d.r),d.g+y.a*h*(O-d.g),d.b+y.a*h*(T-d.b),d.a)}u.data[m]=255*g.r,u.data[m+1]=255*g.g,u.data[m+2]=255*g.b,u.data[m+3]=255*g.a}l.putImageData(u,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(le);Ne.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},Ne.prototype.availableOptions={blendMode:{type:ze.NUMBER,default:Ne.BLEND_MODES.NORMAL,uniformType:Le.INT},overlayImage:{type:ze.NUMBER,required:!0,uniformType:Le.SAMPLER2D},overlayTexture:{type:ze.OBJECT,required:!0},alpha:{type:ze.NUMBER,default:1,uniformType:Le.FLOAT}};const Ue=Ne,We={WebGLRenderer:vt,CanvasRenderer:A,WebGLFilterManager:at,CanvasFilterManager:k,DisplayObject:rt,Container:Ct,BaseTexture:O,Texture:Mt,RenderTexture:Vt,WebGLRenderTarget:M,CanvasRenderTarget:S,Sprite:Qt,Shaders:Jt,Shader:q,Filter:le,Filters:r,PixelArrayImage:st,autoDetectRenderer:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return vt.isSupported()?new vt(t,e,n):new A(t,e,n)}}},2861:(t,e,n)=>{n.d(e,{Z:()=>r});const r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=e,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}var e;return(e=[{key:"map",value:function(t,e){var n=e.x,r=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=n,this._vertices[1]=r,this._vertices[2]=n+e.width,this._vertices[3]=r,this._vertices[4]=this._vertices[2],this._vertices[5]=r+e.height,this._vertices[6]=n,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var t=this._context;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var t=this._context;t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var t=this._context;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},4182:(t,e,n)=>{n.d(e,{default:()=>x});var r=n(5034),i=(n(5236),n(2537)),o=n(9082),a=n(332),s=n(8882),l=n(2009),u=n(8513),c=n(4842),f=n(3779);const p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"current",value:function(){return"production"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!1}},{key:"isProduction",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();var h=n(7365),d=n(2578),y=n(4518),g=n(9313),m=n(3990),v=n(3678),b=n(1207),_=n(5030),w=n(2293);r.Z.version=n(9719).version,r.Z.Math=i,r.Z.Operations=o,r.Z.Engine=a.Z,r.Z.Color=s.Z,r.Z.LicenseChecker=l.Z,r.Z.Operation=u.Z,r.Z.EventEmitter=c.Z,r.Z.Utils=f.Z,r.Z.Env=p,r.Z.OperationsStack=h.Z,r.Z.EXIF=d.Z,r.Z.Image=y.Z,r.Z.Promise=g.Z,r.Z.Configurable=m.Z,r.Z.Log=v.Z,r.Z.Loaders=b,r.Z.RenderType=_.RenderType,r.Z.ImageFormat=_.ImageFormat,r.Z.OptionType=_.OptionType,r.Z.RendererType=_.RendererType,r.Z.UniformType=_.UniformType,r.Z.Base64=w.Z,r.Z.UI={};const x=r.Z},16:(t,e,n)=>{n.r(e),n.d(e,{requestAnimationFrame:()=>g,cancelAnimationFrame:()=>m,Engine:()=>r.Z,EventEmitter:()=>a.Z,Events:()=>s.z,Utils:()=>l.Z,Configurable:()=>u.Z,Color:()=>c.Z,Constants:()=>i,Log:()=>f.Z,Promise:()=>p.Z,GLUtils:()=>h.Z,Base64:()=>o.Z,LicenseChecker:()=>d.Z,FreeLicenseChecker:()=>d.v,ColorMatrix:()=>w.ColorMatrix,CubicBezierCurve:()=>w.CubicBezierCurve,Matrix:()=>w.Matrix,Range:()=>w.Range,Rectangle:()=>w.Rectangle,Vector2:()=>w.Vector2,Vector3:()=>w.Vector3});for(var r=n(332),i=n(5030),o=n(2293),a=n(4842),s=n(3596),l=n(3779),u=n(3990),c=n(8882),f=n(3678),p=n(9313),h=n(3066),d=n(2009),y="undefined"==typeof window?n.g:window,g=y.requestAnimationFrame,m=y.cancelAnimationFrame,v=0,b=["ms","moz","webkit","o"],_=0;_<b.length&&!g;++_)g=y[b[_]+"RequestAnimationFrame"],m=y[b[_]+"CancelAnimationFrame"]||y[b[_]+"CancelRequestAnimationFrame"];g&&(g=g.bind(y)),m&&(m=m.bind(y)),g||(g=function(t,e){var n=(new Date).getTime(),r=Math.max(0,16-(n-v)),i=setTimeout((function(){t(n+r)}),r);return v=n+r,i}),m||(m=function(t){clearTimeout(t)});var w=n(2537)},787:(t,e,n)=>{t.exports=n(4182).default},2293:(t,e,n)=>{n.d(e,{Z:()=>i});var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const i={encode:function(t){var e,n,i,o,a,s,l,u="",c=0;do{o=(e=t[c++])>>2,a=(3&e)<<4|(n=t[c++])>>4,s=(15&n)<<2|(i=t[c++])>>6,l=63&i,isNaN(n)?s=l=64:isNaN(i)&&(l=64),u=u+r.charAt(o)+r.charAt(a)+r.charAt(s)+r.charAt(l),e=n=i="",o=a=s=l=""}while(c<t.length);return u},decode:function(t){var e,n,i,o,a,s,l=0,u=[];if(/[^A-Za-z0-9+/=]/g.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9+/=]/g,"");do{e=r.indexOf(t.charAt(l++))<<2|(o=r.indexOf(t.charAt(l++)))>>4,n=(15&o)<<4|(a=r.indexOf(t.charAt(l++)))>>2,i=(3&a)<<6|(s=r.indexOf(t.charAt(l++))),u.push(e),64!==a&&u.push(n),64!==s&&u.push(i),e=n=i="",o=a=s=""}while(l<t.length);return u}}},8882:(t,e,n)=>{function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>a});const a=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,t),this.r=e,this.g=n,this.b=r,this.a=o}var e,n,a;return e=t,a=[{key:"fromHSV",value:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=[],a=o[0],s=o[1],l=o[2],u=Math.floor(6*e),c=6*e-u,f=r*(1-n),p=r*(1-c*n),h=r*(1-(1-c)*n);switch(u%6){case 0:a=r,s=h,l=f;break;case 1:a=p,s=r,l=f;break;case 2:a=f,s=r,l=h;break;case 3:a=f,s=p,l=r;break;case 4:a=h,s=f,l=r;break;case 5:a=r,s=f,l=p}return new t(a,s,l,i)}},{key:"fromArray",value:function(e){return new t(e[0],e[1],e[2],e[3])}},{key:"fromHex",value:function(e){var n,i=function(t){if(Array.isArray(t))return t}(n=e.match(/[0-9A-fa-f]{1,2}/g))||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),3!==n.length);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(n)||function(t,e){if(t){if("string"==typeof t)return r(t,3);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,3):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],a=i[1],s=i[2];return new t(parseInt(o,16)/255,parseInt(a,16)/255,parseInt(s,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}},{key:"RED",get:function(){return new t(1,0,0,1)}},{key:"BLUE",get:function(){return new t(0,0,1,1)}},{key:"GREEN",get:function(){return new t(0,1,0,1)}}],(n=[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=t,this.g=e,this.b=n,this.a=r,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var t,e,n=Math.max(this.r,this.g,this.b),r=Math.min(this.r,this.g,this.b),i=n,o=n-r;if(e=0===n?0:o/n,n===r)t=0;else{switch(n){case this.r:t=(this.g-this.b)/o,this.g<this.b&&(t+=6);break;case this.g:t=(this.b-this.r)/o+2;break;case this.b:t=(this.r-this.g)/o+4}t/=6}return[t,e,i]}},{key:"fromHSV",value:function(e,n,r){return this.copy(t.fromHSV(e,n,r)),this}},{key:"clone",value:function(){return new t(this.r,this.g,this.b,this.a)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}},{key:"minus",value:function(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}},{key:"divideScalar",value:function(t){return this.r/=t,this.g/=t,this.b/=t,this.a/=t,this}},{key:"clamp",value:function(t,e){return this.r=Math.min(Math.max(this.r,t),e),this.g=Math.min(Math.max(this.g,t),e),this.b=Math.min(Math.max(this.b,t),e),this.a=Math.min(Math.max(this.a,t),e),this}},{key:"mix",value:function(t,e){return this.r=(1-e)*this.r+e*t.r,this.g=(1-e)*this.g+e*t.g,this.b=(1-e)*this.b+e*t.b,this.a=(1-e)*this.a+e*t.a,this}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"equals",value:function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}},{key:"_componentToHex",value:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},{key:"toString",value:function(){return"Color(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", ").concat(this.a,")")}}])&&o(e.prototype,n),a&&o(e,a),t}()},3990:(t,e,n)=>{n.d(e,{Z:()=>_});var r=n(9313),i=n(3678),o=n(4842),a=n(6903),s=n(8882),l=n(3779),u=n(4518),c=n(9698),f=n(5030);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(w,t);var e,n,o,_=(n=w,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(n);if(o){var r=b(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return m(this,t)});function w(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,w),(t=_.call(this)).availableOptions=t.availableOptions||{},t.availableOptions=l.Z.extend(t.availableOptions,n),t._onConfigurableUpdate=t._onConfigurableUpdate.bind(v(t)),t._initOptions(e),t}return(e=[{key:"_buildConfigError",value:function(t){var e="";return this.constructor.name&&(e="".concat(this.constructor.name,": ")),e+=t,new Error(e)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var t=this;return new r.Z((function(e,n){for(var r in t.availableOptions)if(t.availableOptions[r].required&&void 0===t._options[r])return n(t._buildConfigError("Option `".concat(r,"` is required.")));e()}))}},{key:"_initOptions",value:function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var i=this;for(t in this.availableOptions){if(n=t.charAt(0).toUpperCase()+t.slice(1),e=this.availableOptions[t],-1===[f.OptionType.STRING,f.OptionType.NUMBER,f.OptionType.BOOLEAN,f.OptionType.OBJECT,f.OptionType.VECTOR2,f.OptionType.COLOR,f.OptionType.CONFIGURABLE,f.OptionType.COLOR_MATRIX,f.OptionType.ARRAY,f.OptionType.IMAGE,f.OptionType.FUNCTION,f.OptionType.ALL].indexOf(e.type))throw this._buildConfigError("Unknown option type: `".concat(e.type,"`"));var o=function(t,e){i["set"+n]=function(e,n,r){i.setOption(t,e,n,r)},i["get"+n]=function(){return i.getOption(t)}};if(o(t,e),e.type===f.OptionType.CONFIGURABLE&&(this._options[t]=new w(void 0,e.structure||{}),this._options[t].on("update",this._onConfigurableUpdate)),!(t in r)||void 0===r[t])if(void 0!==e.default){var a=e.default;"function"==typeof e.default&&(a=e.default()),this["set"+n](a,!1,!0)}else e.type!==f.OptionType.CONFIGURABLE&&(this._options[t]=void 0)}for(t in r){if(void 0===this.availableOptions[t])throw new Error("Invalid option: ".concat(t));void 0!==r[t]&&this["set"+(n=t.charAt(0).toUpperCase()+t.slice(1))](r[t],!1,!0)}}},{key:"set",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var n in t)this.setOption(n,t[n],!1);this._onOptionsChange(),e&&this.emit("update",this,t)}},{key:"getOption",value:function(t){return this._options[t]}},{key:"hasOption",value:function(t){return!!this.availableOptions[t]}},{key:"getOptionDefault",value:function(t){var e=this.availableOptions[t];if(!e)throw new Error("Invalid option: ".concat(t));return e.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var t={};for(var e in this.availableOptions){var n=this.availableOptions[e].default;void 0!==n&&(t[e]=n)}return t}},{key:"getOptions",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this._options)}},{key:"equals",value:function(t){var e=t.getOptions();return this.optionsEqual(e)}},{key:"optionsEqual",value:function(t){for(var e in t){var n=t[e];if(!this._optionEquals(e,n))return!1}return!0}},{key:"_optionEquals",value:function(t,e){if(void 0===this.availableOptions[t])throw new Error("Invalid option: ".concat(t));var n=this.availableOptions[t].type,r=this._options[t];if(r===e)return!0;if(void 0===e||void 0===r)return!1;switch(n){case f.OptionType.OBJECT:return"function"==typeof r.optionsEqual?r.optionsEqual(e._options):r===e;case f.OptionType.STRING:case f.OptionType.NUMBER:case f.OptionType.BOOLEAN:case f.OptionType.FUNCTION:case"*":return r===e;case f.OptionType.VECTOR2:return r.equals(e);case f.OptionType.COLOR:case f.OptionType.COLOR_MATRIX:return e.equals(r);case f.OptionType.CONFIGURABLE:return r.optionsEqual(e);case f.OptionType.ARRAY:return this._arrayOptionEquals(t,e);case f.OptionType.IMAGE:return r.src===e.src}}},{key:"_arrayOptionEquals",value:function(t,e){var n=this._options[t];if(e.length!==n.length)return!1;for(var r=!0,i=0;i<n.length;i++){var o=n[i],a=e[i];if(o instanceof w){if(void 0===a||!o.optionsEqual(a)){r=!1;break}}else if(a!==o){r=!1;break}}return r}},{key:"serializeOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(this._options),n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return e.forEach((function(e){if(void 0===t.availableOptions[e])return i.Z.warn("Trying to serialize a key that does not exist: ".concat(e));!1!==t.availableOptions[e].serializable&&(r[e]=t.serializeOption(e,n))})),r}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.availableOptions[t],r=n.type,i=this._options[t];if(!i)return i;if(!1===n.serializable)throw new Error("Option `".concat(t,"` is not serializable."));switch(r){case f.OptionType.STRING:case f.OptionType.NUMBER:case f.OptionType.BOOLEAN:case f.OptionType.OBJECT:case f.OptionType.FUNCTION:case f.OptionType.ALL:return i;case f.OptionType.VECTOR2:return e?i.toObject():i.clone();case f.OptionType.COLOR:case f.OptionType.COLOR_MATRIX:return e?i.toArray():i.clone();case f.OptionType.CONFIGURABLE:return i.serializeOptions(void 0,e);case f.OptionType.ARRAY:return i.slice(0);case f.OptionType.IMAGE:return e?i.src:i}}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.availableOptions[t];if(!i)throw new Error("Invalid option: ".concat(t));if(void 0!==i.setter&&(e=i.setter.call(this,e,r)),void 0!==i.validation&&i.validation(e),null==e){if(i.required)throw this._buildConfigError("Option `".concat(t,"` is required."));this._options[t]=e}else switch(i.type){case f.OptionType.STRING:if(p(e)!==f.OptionType.STRING)throw this._buildConfigError("Option `".concat(t,"` has to be a string."));var o=i.available;if(void 0!==o&&-1===o.indexOf(e))throw this._buildConfigError("Invalid value for `".concat(t,"` (valid values are: ").concat(i.available.join(", "),")"));this._options[t]=e;break;case f.OptionType.NUMBER:if(p(e)!==f.OptionType.NUMBER)throw this._buildConfigError("Option `".concat(t,"` has to be a number."));this._options[t]=e;break;case f.OptionType.BOOLEAN:if(p(e)!==f.OptionType.BOOLEAN)throw this._buildConfigError("Option `".concat(t,"` has to be a boolean."));this._options[t]=e;break;case f.OptionType.VECTOR2:if(!(e instanceof a.Z||"object"===p(e)&&"x"in e&&"y"in e))throw this._buildConfigError("Option `".concat(t,"` has to be an instance of Vector2 or an Object holding x and y values."));e instanceof a.Z?this._options[t]=e.clone():this._options[t]=a.Z.fromObject(e);break;case f.OptionType.COLOR:if(!(e instanceof s.Z))throw this._buildConfigError("Option `".concat(t,"` has to be an instance of Color."));this._options[t]=e;break;case f.OptionType.COLOR_MATRIX:if(!(e instanceof c.Z))throw this._buildConfigError("Option `".concat(t,"` has to be an instance of ColorMatrix."));this._options[t]=e.clone();break;case f.OptionType.FUNCTION:if("function"!=typeof e)throw this._buildConfigError("Option `".concat(t,"` has to be a function."));this._options[t]=e;break;case f.OptionType.OBJECT:case"*":this._options[t]=e;break;case f.OptionType.IMAGE:if("string"==typeof e){var h=new u.Z;h.crossOrigin=l.Z.getCrossOriginValue(i.crossOrigin),h.src=e,this._options[t]=h}else{if(!(e instanceof u.Z||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw this._buildConfigError("Option `".concat(t,"` has to be an Image, Canvas or String."));this._options[t]=e}break;case f.OptionType.CONFIGURABLE:e instanceof w?this._options[t]=e:this._options[t].set(e);break;case f.OptionType.ARRAY:if(!(e instanceof Array))throw this._buildConfigError("Option `".concat(t,"` has to be an Array."));this._options[t]=e.slice(0);break;default:throw this._buildConfigError("Unknown option type: `".concat(i.type,"`"))}n&&(this._onOptionsChange(),this.emit("update",this,d({},t,e)))}},{key:"_onConfigurableUpdate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,["update"].concat(e))}},{key:"hasChanges",value:function(){var t=this.getDefaultOptions();return!this.optionsEqual(t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(w.prototype,e),w}(o.Z)},4842:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(3678);const i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._maxListeners=12,this._events={},this._pipeDestinations=[]}var e;return(e=[{key:"pipeEvents",value:function(t){this._pipeDestinations.push(t)}},{key:"unpipeEvents",value:function(t){var e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)}},{key:"on",value:function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if("function"!=typeof e)throw new TypeError;var n=this._events[t]||(this._events[t]=[]);return-1!==n.indexOf(e)||(n.push(e),this._maxListeners&&n.length>this._maxListeners&&(r.Z.warn("EventEmitter","Possible memory leak detected, added ".concat(n.length," `").concat(t,"` listeners (current limit is ").concat(this._maxListeners,")")),"undefined"!=typeof console&&console.trace())),this}},{key:"once",value:function(t,e){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");var n=this;return this.on(t,(function r(){n.off(t,r),e.apply(null,arguments)}))}},{key:"off",value:function(t){if(void 0===t)throw new Error("Invalid event type: `"+t+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var n=this._events[t];if(!n||!n.length)return this;var r=n.indexOf(e);return-1===r||n.splice(r,1),this}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(void 0===t)throw new Error("Invalid event type: `"+t+"`");this._pipeDestinations.forEach((function(e){e.emit.apply(e,[t].concat(n))}));var i=this._events[t];return!(!i||!i.length||(i.slice(0).forEach((function(t){return t.apply(null,n)})),0))}},{key:"setMaxListeners",value:function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},2578:(t,e,n)=>{n.d(e,{Z:()=>m});var r=n(2293);const i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=0,this._buf=e}var e;return(e=[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1];return t?(n<<8)+e:(e<<8)+n}},{key:"peekInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2];return t?(r<<16)+(n<<8)+e:(e<<16)+(n<<8)+r}},{key:"peekInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._buf[this._head],n=this._buf[this._head+1],r=this._buf[this._head+2],i=this._buf[this._head+3];return t?(i<<32)+(r<<16)+(n<<8)+e:(e<<32)+(n<<16)+(r<<8)+i}},{key:"writeInt8",value:function(t){this._buf[this._head]=255&t}},{key:"writeInt16",value:function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t}},{key:"readInt8",value:function(){var t=this.peekInt8();return this._head+=1,t}},{key:"readInt16",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt16(t);return this._head+=2,e}},{key:"readInt24",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt24(t);return this._head+=3,e}},{key:"readInt32",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.peekInt32(t);return this._head+=4,e}},{key:"readString",value:function(t){for(var e="",n=0;n<t;n++){var r=this.readInt8();e+=String.fromCharCode(r)}return e}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(t){this._head=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var o=n(3779);const a={SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505};var s=a;const l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new i(this._buf),this._stream.setHead(0)}var e;return(e=[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==s.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var t=this._stream.readString(4),e=this._stream.readInt8();return"JFIF"===t&&0===e}},{key:"setUnitDensity",value:function(t){this._stream.setHead(11),this._stream.writeInt8(t)}},{key:"setDensityX",value:function(t){this._stream.setHead(12),this._stream.writeInt16(t)}},{key:"setDensityY",value:function(t){this._stream.setHead(14),this._stream.writeInt16(t)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}},{key:"getBuffer",value:function(){return this._buf}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var u=o.Z.invariant,c=a,f={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};const p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new i(this._buf),this._stream.setHead(0),this._parse(),this._bigEndian=!1}var e;return(e=[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===c.EXIF&&this._stream.readInt16()>0&&"Exif"===this._stream.readString(4)}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var t=this._stream.getHead();this._bigEndian=!1;var e=this._stream.readInt16();18761===e?this._bigEndian=!1:19789===e?this._bigEndian=!0:u(!1,"Invalid TIFF data: No endian type found"),u(42===this._stream.readInt16(!this._bigEndian),"Invalid TIFF data: No 0x002A");var n=this._stream.readInt32(!this._bigEndian);u(n>=8,"Invalid TIFF data: First IFD offset < 8");var r=t+n,i=this._readTags(this._stream,t,r,this._bigEndian);this._tags=i.tags,this._tagData=i.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._stream.setHead(e+8),this._stream.writeInt16(this._bigEndian?t:(255&t)<<8|t>>8&255)}}},{key:"_readTags",value:function(t,e,n,r){t.setHead(n);for(var i=t.readInt16(!r),o={},a=[],s=0;s<i;s++){var l=n+12*s+2;t.setHead(l);var u=t.readInt16(!r),c=void 0,p=void 0,h=void 0;if(f[u]){u=f[u],c=t.readInt16(!r),p=t.readInt32(!r),h=t.readInt32(!r)+e;var d=null;switch(c){case 1:case 7:if(1===p)d=t.readInt8(!r);else{d=[];for(var y=0;y<p;y++)d.push(t.readInt8(!r))}break;case 2:t.setHead(p>4?h:l+8),d=t.readString(p);break;case 3:if(t.setHead(p>2?h:l+8),1===p)d=t.readInt16(!r);else{d=[];for(var g=0;g<p;g++)d.push(t.readInt16(!r))}break;case 4:case 9:if(t.setHead(p>1?h:l+8),1===p)d=t.readInt32(!r);else{d=[];for(var m=0;m<p;m++)d.push(t.readInt32(!r))}break;case 5:case 10:if(t.setHead(h),1===p)d=t.readInt32(!r)/t.readInt32(!r);else{d=[];for(var v=0;v<p;v++){var b=t.readInt32(!r)/t.readInt32(!r);d.push(b)}}}o[u]=d,a[u]={value:d,numValues:p,entryOffset:l,valueOffset:h,type:c}}}return{tags:o,tagData:a}}},{key:"getBuffer",value:function(){return this._buf}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o.Z.invariant;var d=a,y="data:image/jpeg;base64,",g=new RegExp("^".concat(y),"i");const m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buf=e,this._stream=new i(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new p(this._getMarkerBuffer(d.EXIF)),this._jfifData=new l(this._getMarkerBuffer(d.JFIF))}var e,n,o;return e=t,o=[{key:"toDataURL",value:function(t){return y+r.Z.encode(t)}},{key:"fromDataURL",value:function(t){var e=t.replace(y,"");return r.Z.decode(e)}},{key:"isJPEG",value:function(t){return g.test(t)}},{key:"bufferIsJPEG",value:function(t){return 255===t[0]&&216===t[1]&&255===t[2]}},{key:"fromBase64String",value:function(e){var n=e.replace(y,"");return new t(r.Z.decode(n))}}],(n=[{key:"restoreSegmentsInArray",value:function(t){return t=this.restoreExifTagsToImageData(t),this.restoreJfifSegmentToImageData(t)}},{key:"restoreSegments",value:function(e){var n=t.fromDataURL(e);return n=this.restoreSegmentsInArray(n),t.toDataURL(n)}},{key:"restoreExifTagsToImageData",value:function(t){if(!this._exifData.isValid())return t;var e=this._sliceIntoSegments(t)[1][0],n=t.slice(0,e),r=t.slice(e);return n.concat(this._exifData.getBuffer()).concat(r)}},{key:"restoreJfifSegmentToImageData",value:function(t){if(!this._jfifData.isValid())return t;var e=this._sliceIntoSegments(t),n=this._findSegment(d.JFIF,e);if(!n)return t;var r=n[0],i=n[1],o=t.slice(0,r),a=t.slice(r,i),s=t.slice(i),u=new l(a);return u.setDensityX(this._jfifData.getDensityX()),u.setDensityY(this._jfifData.getDensityY()),u.setUnitDensity(this._jfifData.getUnitDensity()),o.concat(a).concat(s)}},{key:"restoreExifTags",value:function(e){var n=t.fromDataURL(e),r=this.restoreExifTagsToImageData(n);return t.toDataURL(r)}},{key:"restoreJfifSegment",value:function(e){if(!this._jfifData.isValid())return e;var n=t.fromDataURL(e),r=this.restoreJfifSegmentToImageData(n);return t.toDataURL(r)}},{key:"setOrientation",value:function(t){return this._exifData.setOrientation(t)}},{key:"_findSegment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];this._stream.setHead(r);var o=this._stream.peekInt16();if(o===t)return[r,i]}return!1}},{key:"_getLastSegment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._segments;return t[t.length-1]}},{key:"_getMarkerBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,n=this._findSegment(t,e);if(n){var r=n[0],i=n[1];return this._buf.slice(r,i)}return!1}},{key:"_sliceIntoSegments",value:function(t){for(var e=new i(t),n=[];e.getHead()<t.length;){var r=e.readInt16();if(r!==d.SOI){if(r===d.SOS)break;if(!(r>=65280&&r<=65535))throw new Error("Invalid marker: 0x"+r.toString(16));var o=e.readInt16(),a=e.getHead()+o-2;n.push([e.getHead()-4,a]),e.setHead(a)}}return this._stream.setHead(0),n}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}])&&h(e.prototype,n),o&&h(e,o),t}()},3066:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(3678);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const o={checkFramebufferStatus:function(t,e){var n,o=e.checkFramebufferStatus(e.FRAMEBUFFER),a=(i(n={},e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),i(n,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),i(n,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),i(n,e.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),n);o!==e.FRAMEBUFFER_COMPLETE&&r.Z.warn(t,"Framebuffer incomplete: ".concat(a[o]))},determineGPUName:function(t){var e=null,n=null;t||(t=(n=document.createElement("canvas")).getContext("experimental-webgl")||n.getContext("webgl"));var r=t&&t.getExtension("WEBGL_debug_renderer_info");return r&&(e=t.getParameter(r.UNMASKED_RENDERER_WEBGL),n&&n.remove()),e},isGPUBlacklisted:function(t){return!1}}},4518:(t,e,n)=>{n.d(e,{Z:()=>r});const r=window.Image},2009:(t,e,n)=>{n.d(e,{v:()=>q,Z:()=>Y});var r=n(3779);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var s,l=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,u=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t);var r=n?u:l,o=r.exec(e);r.lastIndex=0,this._major=o[1],this._minor=o[2],this._patch=o[3]||0}return a(t,[{key:"major",get:function(){return this._major}},{key:"minor",get:function(){return this._minor}},{key:"patch",get:function(){return this._patch}}]),a(t,[{key:"equals",value:function(t){return this._major===t._major&&this._minor===t._minor&&this._patch===t._patch}},{key:"isMoreRecentThan",value:function(t){return!(this._major<t.major)&&(this._major>t.major||!(this._minor<t.minor)&&(this._minor>t.minor||!(this._patch<=t.patch)&&(this._patch>t.patch||void 0)))}}]),t}(),f=f||{};function p(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function h(){return new p(null)}"Microsoft Internet Explorer"==f.appName?(p.prototype.am=function(t,e,n,r,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var l=32767&this[t],u=this[t++]>>15,c=s*l+u*a;i=((l=a*l+((32767&c)<<15)+n[r]+(1073741823&i))>>>30)+(c>>>15)+s*u+(i>>>30),n[r++]=1073741823&l}return i},s=30):"Netscape"!=f.appName?(p.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var a=e*this[t++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i},s=26):(p.prototype.am=function(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var l=16383&this[t],u=this[t++]>>14,c=s*l+u*a;i=((l=a*l+((16383&c)<<14)+n[r]+i)>>28)+(c>>14)+s*u,n[r++]=268435455&l}return i},s=28),p.prototype.DB=s,p.prototype.DM=(1<<s)-1,p.prototype.DV=1<<s,p.prototype.FV=Math.pow(2,52),p.prototype.F1=52-s,p.prototype.F2=2*s-52;var d,y,g=new Array;for(d="0".charCodeAt(0),y=0;y<=9;++y)g[d++]=y;for(d="a".charCodeAt(0),y=10;y<36;++y)g[d++]=y;for(d="A".charCodeAt(0),y=10;y<36;++y)g[d++]=y;function m(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function v(t,e){var n=g[t.charCodeAt(e)];return null==n?-1:n}function b(t){var e=h();return e.fromInt(t),e}function _(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function w(t){this.m=t}function x(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function O(t,e){return t&e}function S(t,e){return t|e}function k(t,e){return t^e}function T(t,e){return t&~e}function E(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function C(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function R(){}function D(t){return t}function P(t){this.r2=h(),this.q3=h(),p.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}w.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},w.prototype.revert=function(t){return t},w.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},w.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},w.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},x.prototype.convert=function(t){var e=h();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(p.ZERO)>0&&this.m.subTo(e,e),e},x.prototype.revert=function(t){var e=h();return t.copyTo(e),this.reduce(e),e},x.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},x.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},x.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},p.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},p.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},p.prototype.fromString=function(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=8==n?255&t[r]:v(t,r);a<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&p.ZERO.subTo(this,this)},p.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},p.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},p.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},p.prototype.lShiftTo=function(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},p.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},p.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},p.prototype.multiplyTo=function(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&p.ZERO.subTo(e,e)},p.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},p.prototype.divRemTo=function(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=h());var o=h(),a=this.s,s=t.s,l=this.DB-_(r[r.t-1]);l>0?(r.lShiftTo(l,o),i.lShiftTo(l,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,c=o[u-1];if(0!=c){var f=c*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),d=this.FV/f,y=(1<<this.F1)/f,g=1<<this.F2,m=n.t,v=m-u,b=null==e?h():e;for(o.dlShiftTo(v,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),p.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--v>=0;){var w=n[--m]==c?this.DM:Math.floor(n[m]*d+(n[m-1]+g)*y);if((n[m]+=o.am(0,w,n,v,0,u))<w)for(o.dlShiftTo(v,b),n.subTo(b,n);n[m]<--w;)n.subTo(b,n)}null!=e&&(n.drShiftTo(u,e),a!=s&&p.ZERO.subTo(e,e)),n.t=u,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&p.ZERO.subTo(n,n)}}},p.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},p.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},p.prototype.exp=function(t,e){if(t>4294967295||t<1)return p.ONE;var n=h(),r=h(),i=e.convert(this),o=_(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)},p.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=m(n));a>=0;)s<e?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=m(n));return i?o:"0"},p.prototype.negate=function(){var t=h();return p.ZERO.subTo(this,t),t},p.prototype.abs=function(){return this.s<0?this.negate():this},p.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},p.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+_(this[this.t-1]^this.s&this.DM)},p.prototype.mod=function(t){var e=h();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(p.ZERO)>0&&t.subTo(e,e),e},p.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new w(e):new x(e),this.exp(t,n)},p.ZERO=b(0),p.ONE=b(1),R.prototype.convert=D,R.prototype.revert=D,R.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},R.prototype.sqrTo=function(t,e){t.squareTo(e)},P.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=h();return t.copyTo(e),this.reduce(e),e},P.prototype.revert=function(t){return t},P.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},P.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},P.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=(1<<26)/I[I.length-1];p.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},p.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=b(n),i=h(),o=h(),a="";for(this.divRemTo(r,i,o);i.signum()>0;)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a},p.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,s=0;s<t.length;++s){var l=v(t,s);l<0?"-"==t.charAt(s)&&0==this.signum()&&(i=!0):(a=e*a+l,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&p.ZERO.subTo(this,this)},p.prototype.fromNumber=function(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(p.ONE.shiftLeft(t-1),S,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(p.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=1+(t>>3),e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},p.prototype.bitwiseTo=function(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()},p.prototype.changeBit=function(t,e){var n=p.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n},p.prototype.addTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()},p.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},p.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},p.prototype.multiplyLowerTo=function(t,e,n){var r,i=Math.min(this.t+t.t,e);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,t[i],n,i,0,this.t);for(r=Math.min(t.t,e);i<r;++i)this.am(0,t[i],n,i,0,e-i);n.clamp()},p.prototype.multiplyUpperTo=function(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)},p.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n},p.prototype.millerRabin=function(t){var e=this.subtract(p.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);(t=t+1>>1)>I.length&&(t=I.length);for(var i=h(),o=0;o<t;++o){i.fromInt(I[Math.floor(Math.random()*I.length)]);var a=i.modPow(r,this);if(0!=a.compareTo(p.ONE)&&0!=a.compareTo(e)){for(var s=1;s++<n&&0!=a.compareTo(e);)if(0==(a=a.modPowInt(2,this)).compareTo(p.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0},p.prototype.clone=function(){var t=h();return this.copyTo(t),t},p.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},p.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},p.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},p.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},p.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e},p.prototype.equals=function(t){return 0==this.compareTo(t)},p.prototype.min=function(t){return this.compareTo(t)<0?this:t},p.prototype.max=function(t){return this.compareTo(t)>0?this:t},p.prototype.and=function(t){var e=h();return this.bitwiseTo(t,O,e),e},p.prototype.or=function(t){var e=h();return this.bitwiseTo(t,S,e),e},p.prototype.xor=function(t){var e=h();return this.bitwiseTo(t,k,e),e},p.prototype.andNot=function(t){var e=h();return this.bitwiseTo(t,T,e),e},p.prototype.not=function(){for(var t=h(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},p.prototype.shiftLeft=function(t){var e=h();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},p.prototype.shiftRight=function(t){var e=h();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},p.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+E(this[t]);return this.s<0?this.t*this.DB:-1},p.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=C(this[n]^e);return t},p.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},p.prototype.setBit=function(t){return this.changeBit(t,S)},p.prototype.clearBit=function(t){return this.changeBit(t,T)},p.prototype.flipBit=function(t){return this.changeBit(t,k)},p.prototype.add=function(t){var e=h();return this.addTo(t,e),e},p.prototype.subtract=function(t){var e=h();return this.subTo(t,e),e},p.prototype.multiply=function(t){var e=h();return this.multiplyTo(t,e),e},p.prototype.divide=function(t){var e=h();return this.divRemTo(t,e,null),e},p.prototype.remainder=function(t){var e=h();return this.divRemTo(t,null,e),e},p.prototype.divideAndRemainder=function(t){var e=h(),n=h();return this.divRemTo(t,e,n),new Array(e,n)},p.prototype.modPow=function(t,e){var n,r,i=t.bitLength(),o=b(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new w(e):e.isEven()?new P(e):new x(e);var a=new Array,s=3,l=n-1,u=(1<<n)-1;if(a[1]=r.convert(this),n>1){var c=h();for(r.sqrTo(a[1],c);s<=u;)a[s]=h(),r.mulTo(c,a[s-2],a[s]),s+=2}var f,p,d=t.t-1,y=!0,g=h();for(i=_(t[d])-1;d>=0;){for(i>=l?f=t[d]>>i-l&u:(f=(t[d]&(1<<i+1)-1)<<l-i,d>0&&(f|=t[d-1]>>this.DB+i-l)),s=n;0==(1&f);)f>>=1,--s;if((i-=s)<0&&(i+=this.DB,--d),y)a[f].copyTo(o),y=!1;else{for(;s>1;)r.sqrTo(o,g),r.sqrTo(g,o),s-=2;s>0?r.sqrTo(o,g):(p=o,o=g,g=p),r.mulTo(g,a[f],o)}for(;d>=0&&0==(t[d]&1<<i);)r.sqrTo(o,g),p=o,o=g,g=p,--i<0&&(i=this.DB-1,--d)}return r.revert(o)},p.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return p.ZERO;for(var n=t.clone(),r=this.clone(),i=b(1),o=b(0),a=b(0),s=b(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(t,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(s,o)):(r.subTo(n,r),e&&a.subTo(i,a),s.subTo(o,s))}return 0!=r.compareTo(p.ONE)?p.ZERO:s.compareTo(t)>=0?s.subtract(t):s.signum()<0?(s.addTo(t,s),s.signum()<0?s.add(t):s):s},p.prototype.pow=function(t){return this.exp(t,new R)},p.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},p.prototype.isProbablePrime=function(t){var e,n=this.abs();if(1==n.t&&n[0]<=I[I.length-1]){for(e=0;e<I.length;++e)if(n[0]==I[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<I.length;){for(var r=I[e],i=e+1;i<I.length&&r<A;)r*=I[i++];for(r=n.modInt(r);e<i;)if(r%I[e++]==0)return!1}return n.millerRabin(t)},p.prototype.square=function(){var t=h();return this.squareTo(t),t};const F=p;var j=n(2293),M=n(9706);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}var U=function(t){return r.Z.byteArrayToString(j.Z.decode(t))},W="YXBwX2lkZW50aWZpZXJz",H="ZmVhdHVyZXM=",V="ZXhwaXJlc19hdA==",G="c2lnbmF0dXJl",Z="dmVyc2lvbg==",X=function(){function t(e){L(this,t),this._version="2.4",this._l="string"==typeof e?e.trim():e,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return N(t,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(t){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[U(W)].length)return!0;var t=window.location.hostname,e=!1;return this._decLic[U(W)].forEach((function(n){r.Z.wildCardMatch(t,n)&&(e=!0)})),e}},{key:"_platformValid",value:function(){return"HTML5"===this._decLic[U("cGxhdGZvcm0=")]}},{key:"c",value:function(){var t=this;return new Promise((function(e,n){var r=t._validateError();null!==r&&n(r),e()}))}},{key:"validate",value:function(){return null===this._validateError()}},{key:"_validateError",value:function(){if("string"!==z(this._l)||!this._jsonValid()){var t=new Error;return t.code="ELICINVFMT",t}if(!this._sigValid()){var e=new Error;return e.code="ELICINV",e}if(!this._hostnameValid()){var n=new Error;return n.code="ELICINVHOST",n}if(!this._platformValid()){var r=new Error;return r.code="ELICINVPLAT",r}if(this.isExp()){var i=new Error;return i.code="ELICEXP",i}return null}},{key:"isToolAllowed",value:function(t){return this._includesFeature(t)}},{key:"isWhiteLabel",value:function(){return this._includesFeature("whitelabel",new c("2.4",!0))}},{key:"areCustomAssetsAllowed",value:function(){return this._includesFeature("customassets",new c("2.4",!0))}},{key:"t",value:function(){if(this._decLic.enterprise_license)return Promise.resolve();if(this._includesFeature("noexporttracking",new c("2.4",!0)))return Promise.resolve();var t=this._decLic[U("ZG9tYWlucw==")][0]+U(U("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[U("YXBpX3Rva2Vu")];return new M.Z(t).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[U("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[U(V)]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[U(V)]&&t>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[U(V)]}},{key:"_verify",value:function(t,e){return this._encodeMessage(t)===this._decodeSignature(e).substr(-64)}},{key:"_encodeMessage",value:function(t){return function(t){function e(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function n(t,e){return t>>>e|t<<32-e}function r(t,e){return t>>>e}function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function a(t){return n(t,2)^n(t,13)^n(t,22)}function s(t){return n(t,6)^n(t,11)^n(t,25)}function l(t){return n(t,7)^n(t,18)^r(t,3)}return function(t){for(var e="0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(t[r>>2]>>8*(3-r%4)+4&15)+e.charAt(t[r>>2]>>8*(3-r%4)&15);return n}(function(t,u){var c,f,p,h,d,y,g,m,v,b,_,w=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),x=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),O=new Array(64);t[u>>5]|=128<<24-u%32,t[15+(u+64>>9<<4)]=u;for(var S=0;S<t.length;S+=16){c=x[0],f=x[1],p=x[2],h=x[3],d=x[4],y=x[5],g=x[6],m=x[7];for(var k=0;k<64;k++)O[k]=k<16?t[k+S]:e(e(e(n(_=O[k-2],17)^n(_,19)^r(_,10),O[k-7]),l(O[k-15])),O[k-16]),v=e(e(e(e(m,s(d)),i(d,y,g)),w[k]),O[k]),b=e(a(c),o(c,f,p)),m=g,g=y,y=d,d=e(h,v),h=p,p=f,f=c,c=e(v,b);x[0]=e(c,x[0]),x[1]=e(f,x[1]),x[2]=e(p,x[2]),x[3]=e(h,x[3]),x[4]=e(d,x[4]),x[5]=e(y,x[5]),x[6]=e(g,x[6]),x[7]=e(m,x[7])}return x}(function(t){for(var e=Array(),n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<24-n%32;return e}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),8*t.length))}(t)}},{key:"_decodeSignature",value:function(t){return t=(t=j.Z.decode(t)).map((function(t){return("0"+(255&t).toString(16)).slice(-2)})).join(""),(t=this._parseBigInt(t,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:function(t,e){return new F(t,e)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[U(G)]||"",delete this._decLic[U(G)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(',"'.concat(U(G),'":"([^"]*)"')),""))}},{key:"_includesFeature",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c("1.0",!0),n=new c(this._decLic[U(Z)],!0);return!!e.isMoreRecentThan(n)||this._decLic[U(H)]&&-1!==this._decLic[U(H)].indexOf(t)}}]),t}(),q=function(){function t(){L(this,t)}return N(t,[{key:"v",value:function(){return!0}},{key:"c",value:function(){return Promise.resolve()}},{key:"isToolAllowed",value:function(t){return!0}},{key:"isWhiteLabel",value:function(){return!1}},{key:"areCustomAssetsAllowed",value:function(){return!0}},{key:"t",value:function(){return Promise.resolve()}},{key:"isENT",value:function(){return!1}},{key:"exp",value:function(){return!1}},{key:"dl",value:function(){return 0}},{key:"isExp",value:function(){return!1}}]),t}();const Y=X},9698:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(8882);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,y=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,v=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,b=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,_=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,w=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;i(this,t),this.set(e,n,r,o,a,s,l,u,c,f,p,h,d,y,g,m,v,b,_,w)}var e,n,a;return e=t,a=[{key:"createBrightnessMatrix",value:function(e){var n=new t;return n.e=e,n.j=e,n.o=e,n}},{key:"createContrastMatrix",value:function(e){var n=new t,r=(1-e)/2;return n.a=n.g=n.m=e,n.e=n.j=n.o=r,n}},{key:"createSaturationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=new t,r=1-e,i=.213*r,o=.715*r,a=.072*r;return n.a=i+e,n.b=o,n.c=a,n.f=i,n.g=o+e,n.h=a,n.k=i,n.l=o,n.m=a+e,n}},{key:"createExposureMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(2,e);return new t(n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return r.a=r.g=r.m=e,r.e=r.j=r.o=n,r}},{key:"IDENTITY",get:function(){return new t}}],(n=[{key:"set",value:function(t,e,n,r,i,o,a,s,l,u,c,f,p,h,d,y,g,m,v,b){this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o,this.g=a,this.h=s,this.i=l,this.j=u,this.k=c,this.l=f,this.m=p,this.n=h,this.o=d,this.p=y,this.q=g,this.r=m,this.s=v,this.t=b}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(t){var e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e,n=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j,i=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o,o=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new r.Z(e,n,i,o)}},{key:"multiply",value:function(t){var e,n,r,i,o,a,s,l,u,c,f,p,h,d,y,g,m,v,b,_,w=t,x=this;return e=w.a*x.a+w.b*x.f+w.c*x.k+w.d*x.p,n=w.a*x.b+w.b*x.g+w.c*x.l+w.d*x.q,r=w.a*x.c+w.b*x.h+w.c*x.m+w.d*x.r,i=w.a*x.d+w.b*x.i+w.c*x.n+w.d*x.s,a=w.f*x.a+w.g*x.f+w.h*x.k+w.i*x.p,s=w.f*x.b+w.g*x.g+w.h*x.l+w.i*x.q,l=w.f*x.c+w.g*x.h+w.h*x.m+w.i*x.r,u=w.f*x.d+w.g*x.i+w.h*x.n+w.i*x.s,f=w.k*x.a+w.l*x.f+w.m*x.k+w.n*x.p,p=w.k*x.b+w.l*x.g+w.m*x.l+w.n*x.q,h=w.k*x.c+w.l*x.h+w.m*x.m+w.n*x.r,d=w.k*x.d+w.l*x.i+w.m*x.n+w.n*x.s,g=w.p*x.a+w.q*x.f+w.r*x.k+w.s*x.p,m=w.p*x.b+w.q*x.g+w.r*x.l+w.s*x.q,v=w.p*x.c+w.q*x.h+w.r*x.m+w.s*x.r,b=w.p*x.d+w.q*x.i+w.r*x.n+w.s*x.s,o=w.a*x.e+w.b*x.j+w.c*x.o+w.d*x.t+w.e,c=w.f*x.e+w.g*x.j+w.h*x.o+w.i*x.t+w.j,y=w.k*x.e+w.l*x.j+w.m*x.o+w.n*x.t+w.o,_=w.p*x.e+w.q*x.j+w.r*x.o+w.s*x.t+w.t,this.a=e,this.b=n,this.c=r,this.d=i,this.e=o,this.f=a,this.g=s,this.h=l,this.i=u,this.j=c,this.k=f,this.l=p,this.m=h,this.n=d,this.o=y,this.p=g,this.q=m,this.r=v,this.s=b,this.t=_,this}},{key:"clone",value:function(){var e=new t;return e.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),e}},{key:"equals",value:function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( ".concat(this.a,", ").concat(this.b,", ").concat(this.c,", ").concat(this.d,", ").concat(this.e,",\n      ").concat(this.f,", ").concat(this.g,", ").concat(this.h,", ").concat(this.i,", ").concat(this.j,",\n      ").concat(this.k,", ").concat(this.l,", ").concat(this.m,", ").concat(this.n,", ").concat(this.o,",\n      ").concat(this.p,", ").concat(this.q,", ").concat(this.r,", ").concat(this.s,", ").concat(this.t," )")}},{key:"toArray",value:function(){var t=this;return"abcdefghijklmnopqrst".split("").map((function(e){return t[e]}))}}])&&o(e.prototype,n),a&&o(e,a),t}()},2537:(t,e,n)=>{n.r(e),n.d(e,{Vector2:()=>r.Z,Vector3:()=>o,Range:()=>s,Rectangle:()=>l.Z,Matrix:()=>u.Z,ColorMatrix:()=>c.Z,CubicBezierCurve:()=>p});var r=n(6903);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,this.z=r,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}var e,n,r;return e=t,r=[{key:"fromObject",value:function(e){return new t(e.x,e.y,e.z)}},{key:"NULL",get:function(){return new t(0,0,0)}}],(n=[{key:"set",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"clamp",value:function(e,n){var r=null!=e,i=null!=n;return e instanceof t||!r||(e=new t(e,e,e)),n instanceof t||!i||(n=new t(n,n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y),this.z=Math.max(e.z,this.z)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y),this.z=Math.min(n.z,this.z)),this}},{key:"divide",value:function(e){return e instanceof t?(this.x/=e.x,this.y/=e.y,this.z/=e.z):(this.x/=e,this.y/=e,this.z/=e),this}},{key:"subtract",value:function(e){return e instanceof t?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=e,this.z-=e),this}},{key:"multiply",value:function(e){return e instanceof t?(this.x*=e.x,this.y*=e.y,this.z*=e.z):(this.x*=e,this.y*=e,this.z*=e),this}},{key:"add",value:function(e){return e instanceof t?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=e,this.z+=e),this}},{key:"equals",value:function(e){return e instanceof t?e.x===this.x&&e.y===this.y&&e.z===this.z:e===this.x&&e===this.y&&e===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: ".concat(this.x,", y: ").concat(this.y,", z: ").concat(this.z," })")}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t)),this}}])&&i(e.prototype,n),r&&i(e,r),t}();var a=n(3678);const s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.min=e,this.max=n}var e;return(e=[{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"getLength",value:function(){return this.max-this.min}},{key:"contains",value:function(t){return this.min<=t&&t<=this.max}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var l=n(9385),u=n(688),c=n(9698);function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}const p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Z(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Z(1,1),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Z(2,-1),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.Z(2,0);f(this,t),this._p0=e.clone(),this._p1=n.clone(),this._p2=i.clone(),this._p3=o.clone(),this._segments=[],this._length=-1,this._sample=[]}var e;return(e=[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Z(0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Z(1,1),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r.Z(2,1),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.Z(2,0);this._p0=t.clone(),this._p1=e.clone(),this._p2=n.clone(),this._p3=i.clone()}},{key:"getLength",value:function(){return this._length}},{key:"calculateSegments",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=0,n=0,r=[],i=1/t,o=this._p0.clone(),a=1;a<=t;a++){var s=[];s.push({t:e,s:n,point:o}),e+=i,e=Math.min(e,1);var l=this.evalAt(e),u=l.clone().subtract(o);n+=u.len(),s.push({t:e,s:n,point:l}),r.push(s),o=l}return this._segments=r,this._length=n,n}},{key:"evalAt",value:function(t){t=this.normalizeParameter(t);var e=this._p0.clone().multiply(Math.pow(1-t,3)),n=this._p1.clone().multiply(3*(1-t)*(1-t)*t),r=this._p2.clone().multiply(3*(1-t)*t*t),i=this._p3.clone().multiply(t*t*t);return e.add(n).add(r).add(i)}},{key:"isInSegment",value:function(t,e){return(t=this.normalizeArcLength(t))>=e[0].s&&t<=e[1].s}},{key:"getArcLengthSegment",value:function(t){t=this.normalizeArcLength(t);for(var e=0;e<this._segments.length;e++){var n=this._segments[e];if(this.isInSegment(t,n))return n}return null}},{key:"normalizeArcLength",value:function(t){return Math.max(Math.min(this._length,t),0)}},{key:"normalizeParameter",value:function(t){return Math.max(Math.min(1,t),0)}},{key:"getParameterForArcLength",value:function(t){var e=this.normalizeArcLength(t),n=this.getArcLengthSegment(e);if(!n)return a.Z.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;var r=(e-n[1].s)/(n[0].s-n[1].s);return r*n[0].t+(1-r)*n[1].t}},{key:"evalAtArcLength",value:function(t){return this.evalAt(this.getParameterForArcLength(t))}},{key:"approximateAtArcLength",value:function(t){var e=this.normalizeArcLength(t),n=this.getArcLengthSegment(e);if(!n)return-1;var r=(e-n[1].s)/(n[0].s-n[1].s);return n[0].point.clone().multiply(r).add(n[1].point.clone().multiply(1-r))}},{key:"parameterSample",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=1/t,n=[],r=0,i=0;i<=t+1;i++)n.push(this.evalAt(r)),r+=e;return this._sample=n,[].concat(n)}},{key:"arcLengthApproxSample",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._length/t,i=[],o=0,a=e?1:0;a<t+1;a++)i.push(this.approximateAtArcLength(o)),o+=r;return n&&i.pop(),this._sample=i,[].concat(i)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},688:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(6903);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}var e,n,o;return e=t,o=[{key:"IDENTITY",get:function(){return new t}}],(n=[{key:"multiply",value:function(t){var e,n,r,i,o,a;return e=this.a*t.a+this.b*t.c,n=this.a*t.b+this.b*t.d,r=this.c*t.a+this.d*t.c,i=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,a=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a,this}},{key:"applyToVector",value:function(t){var e=t,n=e.x,r=e.y;return(t=t.clone()).x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.tx,t}},{key:"applyInverseToVector",value:function(t){var e=1/(this.a*this.d+this.c*-this.b),n=t,r=n.x,i=n.y;return(t=t.clone()).x=this.d*e*r+-this.c*e*i+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*i+-this.b*e*r+(-this.ty*this.a+this.tx*this.b)*e,t}},{key:"rectangleToCoordinates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.Z(0,0),n=t.width*(1-e.x),i=t.width*-e.x,o=t.height*(1-e.y),a=t.height*-e.y,s=[];return s.push(new r.Z(this.a*i+this.c*a+this.tx,this.d*a+this.b*i+this.ty)),s.push(new r.Z(this.a*n+this.c*a+this.tx,this.d*a+this.b*n+this.ty)),s.push(new r.Z(this.a*n+this.c*o+this.tx,this.d*o+this.b*n+this.ty)),s.push(new r.Z(this.a*i+this.c*o+this.tx,this.d*o+this.b*i+this.ty)),s}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)}},{key:"toString",value:function(){return"Matrix({ a: ".concat(this.a,", b: ").concat(this.b,", c: ").concat(this.c,", d: ").concat(this.d,", tx: ").concat(this.tx,", ty: ").concat(this.ty," })")}}])&&i(e.prototype,n),o&&i(e,o),t}()},9385:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(6903);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=n,this.width=r,this.height=o}var e,n,a;return e=t,a=[{key:"FromDiagonalPoints",value:function(e,n){var r=!1;n.x-e.x<0&&(r=!0);var i=r?n:e,o=r?e:n,a=o.x-i.x,s=o.y-i.y;return new t(i.x,i.y,a,s)}}],(n=[{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}},{key:"equals",value:function(e,n,r,i){return e instanceof t?e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height:e===this.x&&n===this.y&&r===this.width&&i===this.height}},{key:"translate",value:function(t,e){return t instanceof r.Z&&(e=t.y,t=t.x),this.x+=t,this.y+=e,this}},{key:"scale",value:function(t,e){return t instanceof r.Z?(e=t.y,t=t.x):void 0===e&&(e=t),this.width*=t,this.height*=e,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new r.Z(this.x,this.y)}},{key:"getSize",value:function(){return new r.Z(this.width,this.height)}},{key:"insetBy",value:function(t,e){return this.x+=t,this.y+=e,this.width-=2*t,this.height-=2*e,this}},{key:"intersects",value:function(t){var e=new r.Z(this.x,this.y),n=new r.Z(this.x+this.width,this.y+this.height),i=new r.Z(t.x,t.y),o=new r.Z(t.x+t.width,t.y+t.height);return!(i.x>n.x||e.x>o.x||o.y<e.y||n.y<i.y)}},{key:"toString",value:function(){return"Rectangle({ x: ".concat(this.x,", y: ").concat(this.y,", width: ").concat(this.width,", height: ").concat(this.height," })")}}])&&o(e.prototype,n),a&&o(e,a),t}()},6903:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>i});const i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}var e,n,i;return e=t,i=[{key:"fromObject",value:function(e){return new t(e.x,e.y)}},{key:"NULL",get:function(){return new t(0,0)}}],(n=[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"clamp",value:function(e,n){var r=null!=e,i=null!=n;return e instanceof t||!r||(e=new t(e,e)),n instanceof t||!i||(n=new t(n,n)),r&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),i&&(this.x=Math.min(n.x,this.x),this.y=Math.min(n.y,this.y)),this}},{key:"divide",value:function(e,n){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=void 0===n?e:n),this}},{key:"subtract",value:function(e,n){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=void 0===n?e:n),this}},{key:"multiply",value:function(e,n){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=void 0===n?e:n),this}},{key:"add",value:function(e,n){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=void 0===n?e:n),this}},{key:"dot",value:function(e,n){return e instanceof t?this.x*e.x+this.y*e.y:this.x*e+this.y*(void 0===n?e:n)}},{key:"equals",value:function(e,n){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&n===this.y}},{key:"flip",value:function(){var t=this.x;return this.x=this.y,this.y=t,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: ".concat(this.x,", y: ").concat(this.y," })")}},{key:"roundDecimal",value:function(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this}},{key:"asArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?[this.y,this.x]:[this.x,this.y]}}])&&r(e.prototype,n),i&&r(e,i),t}()},7365:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(16),i=n(9313);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var e,n,o,f=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(o){var r=c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function p(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a(this,p),(t=f.call(this))._onOperationUpdate=t._onOperationUpdate.bind(u(t)),t._cacheEnabled=!0,t._stack=e,t._stack.forEach((function(e){e.on("update",t._onOperationUpdate)})),t}return(e=[{key:"clear",value:function(){var t=this;this.forEach((function(e){return t.remove(e)})),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter((function(t){return!!t})).some((function(t){return t.hasChanges()}))}},{key:"_onOperationUpdate",value:function(t,e){this.emit(r.Events.OPERATION_UPDATED,t,e)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(t){return this._stack.filter((function(t){return!!t})).forEach(t)}},{key:"render",value:function(t,e){var n=this,o=e,a=this._stack.filter((function(t){return!!t})).filter((function(t){return t.getEnabled()}));a.reverse();var s=a.filter((function(e){return!e.isDirtyForRenderer(t.getRenderer())}))[0],l=a.indexOf(s);a.reverse();var u=0;-1!==l&&(u=a.length-l-1);for(var c=0;c<u;c++)r.Log.info(this.constructor.name,"Skipping ".concat(a[c].constructor.name));for(var f=i.Z.resolve(o),p=function(t){var e=a[t],r=void 0,i=void 0;f=f.then((function(t){return e.render(t).then((function(t){return r&&t!==r&&!n._cacheEnabled&&i.disposeRenderTextures(),r=t,i=e,t}))}))},h=u;h<a.length;h++)p(h);return f.then((function(e){return{outputTexture:e,renderDone:!a.some((function(e){return e.isDirtyForRenderer(t.getRenderer())}))}}))}},{key:"validateSettings",value:function(){return i.Z.all(this._stack.filter((function(t){return!!t})).map((function(t){return t.validateSettings()})))}},{key:"setAllToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach((function(e){return e.setDirty(!0,t)}))}},{key:"updateDirtinessForRenderer",value:function(t){for(var e=!1,n=0;n<this._stack.length;n++){var r=this._stack[n];r&&(r.isDirtyForRenderer(t)&&(e=!0),e&&r.setDirtyForRenderer(!0,t))}}},{key:"push",value:function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)}},{key:"pop",value:function(){var t=this._stack.pop();t&&(t.off("update",this._onOperationUpdate),t.dispose())}},{key:"unshift",value:function(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new p(this._stack.slice(0))}},{key:"get",value:function(t){return this._stack[t]}},{key:"getByIdentifier",value:function(t){return r.Utils.Array.find(this._stack,(function(e){return e&&e.constructor.identifier===t}))}},{key:"getIndexByIdentifier",value:function(t){return r.Utils.Array.findIndex(this._stack,(function(e){return e&&e.constructor.identifier===t}))}},{key:"moveToTop",value:function(t){var e=r.Utils.Array.findIndex(this._stack,(function(e){return e&&e.constructor.identifier===t}));if(!(e<0||e===this._stack.length-1)){var n=this.getByIdentifier(t);this._stack.splice(e,1),this._stack[this._stack.length]=n}}},{key:"set",value:function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)}},{key:"remove",value:function(t){var e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))}},{key:"removeAt",value:function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach((function(t){t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(p.prototype,e),p}(n(4842).Z)},3155:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(16),i="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):n(2930);const o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._tag=e,this._name=n,this._start=i()}var e;return(e=[{key:"stop",value:function(){var t=i()-this._start,e=Math.round(1e3/t);r.Log.info(this._tag,"".concat(this._name," took ").concat(t.toFixed(2),"ms (").concat(e," FPS)"))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},5236:()=>{Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1},configurable:!0,writable:!0})},3779:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(2293);const i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"head",value:function(t){return t[0]}},{key:"tail",value:function(t){return t.slice(1)}},{key:"last",value:function(t){return t[t.length-1]}},{key:"init",value:function(t){return t.slice(0,t.length-1)}},{key:"remove",value:function(t,e){return t.filter((function(t,n,r){return!e(t,n,r)}))}},{key:"findIndex",value:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}},{key:"find",value:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}},{key:"flatten",value:function(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?t.flatten(n):n)}),[])}},{key:"range",value:function(t,e){var n=[];if(e>t)for(var r=t;r<e;r++)n.push(r);return n}},{key:"repeat",value:function(t,e){for(var n=[],r=0;r<e;r++)n[r]=t;return n}},{key:"zip",value:function(t,e){for(var n=Math.min(t.length,e.length),r=[],i=0;i<n;i++)r[i]=[t[i],e[i]];return r}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{key:"mapRange",value:function(t,e,n){return(t-e.getMin())*n.getLength()/e.getLength()+n.getMin()}},{key:"isPlainObject",value:function(t){if("object"!==u(t)||!t)return!1;if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&void 0!==n.g}},{key:"values",value:function(t){var e=[];for(var n in t)e.push(t[n]);return e}},{key:"generateUUID",value:function(){var t=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}},{key:"isDOMElement",value:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":u(HTMLElement))?t instanceof HTMLElement:t&&"object"===u(t)&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}},{key:"isTouchEvent",value:function(t){return-1!==t.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(t,e){var n=Math.min(e.x/t.x,e.y/t.y);return t.clone().multiply(n)}},{key:"resizeVectorToFill",value:function(t,e){var n=t.x/t.y;return n>e.x/e.y?e.clone().set(e.y*n,e.y):e.clone().set(e.x,e.x/n)}},{key:"isExtendable",value:function(t){return null!=t&&("object"===u(t)||"function"==typeof t)}},{key:"defaults",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];for(var o in i)void 0===e[o]&&(e[o]=i[o])}return e}},{key:"deepMerge",value:function(e){for(var n=function e(n,r){if(void 0===r)return e(null,n);if(Array.isArray(r))return s(r);if(!t.isPlainObject(r))return r;if(!t.isPlainObject(n))return a({},r);var i=a({},n);return Object.keys(r).forEach((function(t){var o=r[t];void 0!==o&&(i[t]=e(n[t],o))})),i},r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce(n,e)}},{key:"deepDefaults",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=[].concat(r).reverse();return t.deepMerge.apply(t,s(o).concat([e]))}},{key:"deepClone",value:function(e){var n={};for(var r in e)t.isExtendable(e[r])?n[r]=t.deepClone(e[r]):n[r]=e[r];return n}},{key:"getDeepProperty",value:function(t,e){return"string"==typeof e?t[e]:Array.isArray(e)?e.reduce((function(t,e){return t?"function"==typeof e?function(t,e){var n;try{n=e(t)}catch(t){if(!(t instanceof TypeError))throw t}return n}(t,e):t[e]:null}),t):void 0}},{key:"extend",value:function(t){var e={};for(var n in t)e[n]=t[n];for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];for(var o in i)e[o]=i[o]}return e}},{key:"clone",value:function(t){return this.extend({},t)}},{key:"createBlobURIFromDataURI",value:function(t){var e="undefined"==typeof window?n.g:window;if(!(e.Blob&&e.URL&&ArrayBuffer&&Uint8Array))return t;for(var i=r.Z.decode(t.split(",")[1]),o=t.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(i.length),s=new Uint8Array(a),l=0;l<i.length;l++)s[l]=i[l];var u=new e.Blob([a],{type:o});return e.URL.createObjectURL(u)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"convertHtmlImageToRGBACanvas",value:function(e,n){var r=n||t.createCanvas();r.width=e.width,r.height=e.height;var i=r.getContext("2d");return i.clearRect(0,0,r.width,r.height),i.drawImage(e,0,0,e.width,e.height),r}},{key:"isPowerOfTwo",value:function(t){return 0==(t.x&t.x-1)&&0==(t.y&t.y-1)}},{key:"nextLowestPOT",value:function(t){for(var e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)}},{key:"nextHighestPOT",value:function(t){t--;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1}},{key:"moveArrayItem",value:function(t,e,n){if(n>=t.length)for(var r=n-t.length;1+r--;)t.push(void 0);t.splice(n,0,t.splice(e,1)[0])}},{key:"ensureCanvasDimensions",value:function(t,e){return(t.width!==e.x||t.height!==e.y)&&(t.width=e.x,t.height=e.y,!0)}},{key:"byteArrayToString",value:function(t){return t.map((function(t){return String.fromCharCode(t)})).join("")}},{key:"clamp",value:function(t,e,n){return Math.max(e,Math.min(t,n))}},{key:"wildCardMatch",value:function(t,e){return new RegExp("^"+e.split("*").join(".*")+"$").test(t)}},{key:"flipObject",value:function(t){var e={};for(var n in t)e[t[n]]=n;return e}},{key:"cloneOptions",value:function(t){var e={};for(var n in t){var r=t[n];Array.isArray(r)?r=r.slice():r.clone&&(r=r.clone()),e[n]=r}return e}},{key:"ISODateString",value:function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function(t){return t?"none"!==t?t:void 0:"anonymous"}},{key:"shallowEqual",value:function(t,e){if(t===e)return!0;if("object"!==u(t)||null===t||"object"!==u(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=hasOwnProperty.bind(e),o=0;o<n.length;o++)if(!i(n[o])||t[n[o]]!==e[n[o]])return!1;return!0}},{key:"enableIf",value:function(t,e){return t?e:void 0}},{key:"invariant",value:function(t,e){if(!t)throw new Error(e)}},{key:"executePromises",value:function(t){var e=t.length,n=0,r=[],i=[];return new Promise((function(o,a){var s=function(){++n>=e&&(i.length<=0?o(r):a(i))},l=function(t){r.push(t),s()},u=function(t){i.push(t),s()};t.forEach((function(t){t.then(l).catch(u)}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();c(f,"Array",i);const p=f},9082:(t,e,n)=>{n.r(e),n.d(e,{ExifOrientationOperation:()=>d});var r=n(16),i=n(9313),o=n(6903),a=n(8513);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=r.Constants.OptionType,h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,a,s=(n=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(n);if(a){var r=f(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return c(this,t)});function p(){return l(this,p),s.apply(this,arguments)}return(e=[{key:"getRotation",value:function(){var t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t}},{key:"_getFlipVertically",value:function(){var t=this.getTags().Orientation;return-1!==[5,7].indexOf(t)}},{key:"_getFlipHorizontally",value:function(){var t=this.getTags().Orientation;return-1!==[2,4].indexOf(t)}},{key:"_getFinalOptions",value:function(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(t){var e=this._getFinalOptions(),n=e.rotation%360*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var r=this._sprite.getBounds();return this._renderTexture.resizeTo(new o.Z(r.width,r.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),i.Z.resolve()}},{key:"getNewDimensions",value:function(t){var e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t}},{key:"applyTo",value:function(t){var e=this._getFinalOptions(),n=r.Utils.createCanvas();90===Math.abs(e.rotation%180)?(n.width=t.height,n.height=t.width):(n.width=t.width,n.height=t.height);var i=n.getContext("2d"),o=e.rotation*Math.PI/180,a=.5*(n.width-t.width),s=.5*(n.height-t.height);return i.translate(a,s),i.translate(.5*t.width,.5*t.height),i.rotate(o),i.translate(-.5*t.width,-.5*t.height),e.flipVertically&&(i.translate(0,t.height),i.scale(1,-1)),e.flipHorizontally&&(i.translate(t.width,0),i.scale(-1,1)),i.drawImage(t,0,0),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(p.prototype,e),p}(a.Z);h.identifier="exif-orientation",h.prototype.availableOptions={tags:{type:p.OBJECT,default:{}}};const d=h},8513:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(5030),i=n(9313),o=n(3678),a=n(332),s=n(3990),l=n(3155);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,s,u=(n=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(s){var r=h(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return p(this,t)});function d(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,d),(e=u.call(this,n,{enabled:{type:r.OptionType.BOOLEAN,default:!0,serializable:!1}}))._sdk=t,e._cacheEnabled=!1,e._dirtiness={},e._sprite=new a.Z.Sprite,e._container=new a.Z.Container,e._container.addChild(e._sprite),e}return(e=[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(t){var e=this;if(!this.getEnabled())return o.Z.info(this.constructor.name,"Disabled - skipping"),i.Z.resolve(t);if(!this._renderTexture){var n=t.getDimensions().floor();this._renderTexture=new a.Z.RenderTexture(this._sdk.getRenderer(),n.x,n.y)}var r,s,u=this._sdk.getRenderer();if(o.Z.canLog("info")&&(s=new l.Z(this.constructor.name,"Rendering")),this.isDirtyForRenderer(u)){this._sprite.setTexture(t);var c=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(c),this._renderTexture.clear(),r=this._render(t).then((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.setDirtyForRenderer(t,u),e._renderTexture}))}else o.Z.info(this.constructor.name,"Rendering from cache"),r=i.Z.resolve(this._renderTexture);return r.then((function(t){return s&&s.stop(),t}))}},{key:"_render",value:function(t){return(this._sdk.getRenderer().isOfType(r.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)}},{key:"_renderWebGL",value:function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(t){return t.clone()}},{key:"onBeforeExport",value:function(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}},{key:"onAfterExport",value:function(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}},{key:"_onBeforeExport",value:function(){}},{key:"_onAfterExport",value:function(){}},{key:"setTemporaryTransformChange",value:function(t,e){this._tempTransformChange=t,this._tempInverseTransformChange=e}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(t){var e=this._dirtiness[t.id];return void 0===e||e}},{key:"setDirtyForRenderer",value:function(t,e){this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,{id:n},e)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var t,e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=this._sdk.getInputDimensions();return n&&r.multiply(this._sdk.getZoom()).floor(),this._sdk.getOperationsStack().forEach((function(n){t||(n!==e?r=n.getNewDimensions(r):t=!0)})),r.floor()}},{key:"clone",value:function(){return new this.constructor(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(d.prototype,e),d}(s.Z);d.identifier=null;const y=d},5034:(t,e,n)=>{n.d(e,{Z:()=>B});var r=n(5030),i=n(16),o=n(332),a=n(9082),s=n(3779),l=n(7365),u=n(4518),c=n(2578);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(l,t);var e,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(n);if(i){var r=y(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return d(this,t)});function l(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,l),(e=a.call(this,n))._sdk=t,e}return(e=[{key:"export",value:function(){var t=this,e=this._options.imageFormat,n=function e(n){return n.renderDone?n:t._sdk.render().then((function(t){return e(t)}))};return this.validateSettings().then((function(){return t._prepareSDK().then((function(t){return n(t)}))})).then((function(e){var n=e.outputTexture,i=(e.renderDone,t._sdk.getRenderer()),o=i.getCanvas();return i.isOfType(r.RendererType.WEBGL)&&(o=t._createCanvasFromTexture(n)),t._encodeImageFormat(o)})).then((function(n){return t._restoreExifMetadata(n,e)})).then((function(e){return t._restoreSDK().then((function(){return e}))}))}},{key:"_restoreExifMetadata",value:function(t,e,n){if(e===r.ImageFormat.JPEG){var i=this._sdk.getExif();i&&("string"==typeof t?t=i.restoreSegments(t):this._options.renderType)}return Promise.resolve(t)}},{key:"_encodeAsDataURL",value:function(t,e,n){return s.Z.isBrowser?Promise.resolve(t.toDataURL(e,n)):new Promise((function(r,i){t.toDataURL(e,n,(function(t,e){t?i(t):r(e)}))}))}},{key:"_encodeAsHTMLImage",value:function(t,e,n){return this._encodeAsDataURL(t,e,n).then((function(t){var e=new u.Z;return e.src=t,Promise.resolve(e)}))}},{key:"_encodeAsBuffer",value:function(t,e,n){return Promise.reject(new Error("Unsupported platform for RenderType"))}},{key:"_encodeAsMSBlob",value:function(t,e,n){return Promise.resolve(t.msToBlob())}},{key:"_encodeAsBLOB",value:function(t,e,n){return new Promise((function(r,i){t.toBlob((function(t){r(t)}),e,n)}))}},{key:"_encodeImageFormat",value:function(t){var e=this._options,n=e.imageFormat,i=e.quality,o=this._options.renderType;switch(o===r.RenderType.BLOB&&t.msToBlob&&!t.toBlob&&(o=r.RenderType.MSBLOB),o){case r.RenderType.IMAGE:return this._encodeAsHTMLImage(t,n,i);case r.RenderType.DATAURL:return this._encodeAsDataURL(t,n,i);case r.RenderType.BUFFER:return this._encodeAsBuffer(t,n,i);case r.RenderType.MSBLOB:return this._encodeAsMSBlob(t,n,i);case r.RenderType.BLOB:return this._encodeAsBLOB(t,n,i)}return Promise.reject(new Error("Unsupported RenderType: ".concat(o,"!")))}},{key:"_prepareSDK",value:function(){var t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var e=t.isOfType(r.RendererType.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);var n=this._sdk.getOperationsStack();return n.forEach((function(t){t.disposeRenderTextures()})),n.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var t=this._sdk.getRenderer(),e=t.isOfType(r.RendererType.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,e),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(t){var e=this._sdk.getRenderer(),n=this._sdk.getFinalDimensions(),r=this._sdk.getRenderer().getContext(),i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i);var a=t.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var l,u=new Uint8Array(n.x*n.y*4);if(r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,u),this._checkPixelsForTransparency(u)){var c=new o.Z.Sprite(t);c.setFilters([new o.Z.Filters.UnpremultiplyFilter]);var f=new o.Z.Container;f.addChild(c),(l=new o.Z.RenderTexture(e,n.x,n.y)).render(f);var p=l.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,p,0),r.readPixels(0,0,n.x,n.y,r.RGBA,r.UNSIGNED_BYTE,u),e.setRenderTarget(),l.dispose()}var h=s.Z.createCanvas();h.width=n.x,h.height=n.y;var d=h.getContext("2d"),y=d.createImageData(n.x,n.y);return y.data.set(u),d.putImageData(y,0,0),r.deleteFramebuffer(i),h}},{key:"_checkPixelsForTransparency",value:function(t){for(var e=this._sdk.getFinalDimensions(),n=e.x*e.y*4,r=3;r<n;r+=4)if(255!==t[r])return!0;return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(n(3990).Z);g.prototype.availableOptions={renderType:{type:r.OptionType.STRING,available:s.Z.values(r.RenderType),default:r.RenderType.IMAGE},imageFormat:{type:r.OptionType.STRING,available:s.Z.values(r.ImageFormat),default:r.ImageFormat.PNG},quality:{type:r.OptionType.NUMBER,default:.8}};const m=g;var v=n(3155);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){return R.byteArrayToString(F.decode(t))},T=i.Rectangle,E=i.Constants,C=i.Engine,R=i.Utils,D=i.EventEmitter,P=i.Events,I=i.Vector2,A=i.Log,F=i.Base64,j=i.Color,M=E.RenderType,z=E.ImageFormat,L=E.RendererType;const B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(u,t);var e,r,o,s=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=S(r);if(o){var n=S(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return x(this,t)});function u(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(this,u),(e=s.call(this))._onOperationUpdate=e._onOperationUpdate.bind(O(e)),e._onContextRestored=e._onContextRestored.bind(O(e));var o=n(9719),a=o.version;if(e.version=a,e[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,e._preferredRenderer=t,e._options=R.defaults(r,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:j.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),e._options.smoothUpscaling&&(C.BaseTexture.DefaultMagFilter=C.BaseTexture.LinearFilter),e._options.extensions=R.defaults(e._options.extensions,{operations:[],controls:[],languages:[]}),A.setLevel(e._options.logLevel),e[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,e[k("X29wdGlvbnM=")][k("bGljZW5zZQ==")]){if(!e._v())return x(e);var c=i[k("TGljZW5zZUNoZWNrZXI=")];e._l=new c(e[k("X29wdGlvbnM=")][k("bGljZW5zZQ==")]),e._cv(!0).then((function(){e._ct()})).catch((function(t){A.error(k("TGljZW5zaW5n"),t.message)}))}else e[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,e._l=new(i[k("RnJlZUxpY2Vuc2VDaGVja2Vy")]);return e._defaultRenderMode=e._options.renderMode,e._renderMode=e._options.renderMode,e._textureQuality=e._options.textureQuality,e._offset=new I,e._zoom=e._options.zoom,e._spriteScale=e._options.spriteScale,e._rotation=e._options.rotation,e._operations={},e._operationsStack=null,e.setOperationsStack(new l.Z),e._container=new C.Container,e._sprite=new C.Sprite,e._container.addChild(e._sprite),e._inputTexture=e._options.inputTexture,e._currentInputTexture=null,e._currentTexture=null,e._resizedTexture=null,e._resizedContainer=new C.Container,e._resizedSprite=new C.Sprite,e._resizedContainer.addChild(e._resizedSprite),e._texturesToDispose=[],e.setSmoothDownscaling(e._options.smoothDownscaling),e._registerOperations(),e._initRenderer(),e._renderer.constructor.type,e._options.displayWelcomeMessage,e[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&A.log(k("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS91c2Vycy9uZXcgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NC9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),e._options.image&&e.setImage(e._options.image,e._options.exif),e}return(e=[{key:"_v",value:function(){return!!this[k("X29wdGlvbnM=")][k("bGljZW5zZQ==")]||(A.error(k("TGljZW5zaW5n"),k("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),A.error(k("TGljZW5zaW5n"),k("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?A.error(k("TGljZW5zaW5n"),k("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):A.warn(k("TGljZW5zaW5n"),k("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch((function(n){t[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var r=k("SW52YWxpZCBsaWNlbnNlLg==");throw e&&(r="ELICEXP"===n.code?k("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===n.code?k("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===n.code?k("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===n.code?k("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",b(t._options.license)):"ELICINV"===n.code?k("SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu"):k("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),n.message=r,new Error(n)}))}},{key:"_t",value:function(){this._l.t()}},{key:"_fl",value:function(){return this[k("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}},{key:"_onOperationUpdate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.emit.apply(this,[P.OPERATION_UPDATED].concat(e))}},{key:"_onContextRestored",value:function(){A.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach((function(t){t.disposeRenderTextures()})),this.render()}},{key:"export",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.DATAURL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.PNG,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then((function(){return t.hasChanges()&&t._t(),t._operationsStack.forEach((function(t){t.onBeforeExport()})),new m(t,{renderType:e,imageFormat:n,quality:r}).export().then((function(e){return t._operationsStack.forEach((function(t){t.onAfterExport()})),Promise.resolve(e)}))}))}},{key:"render",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var n,r=this._renderer.getContext();r.startFrame&&r.startFrame(),A.canLog("info")&&(n=new v.Z("⚡⚡⚡","Frame rendering")),A.info("⚡⚡⚡","Rendering starts");var i=this._operationsStack;return i.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then((function(e){"export"===t._renderMode&&(e=t._inputTexture),t._currentTexture=e,t._sprite.setTexture(e),t._container.updateTransform()})).then((function(){return i.validateSettings()})).then((function(){return!t._fl()&&t[k("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]||(i.getByIdentifier("license-watermark")?i.moveToTop("license-watermark"):t.createOperation("license-watermark")),i.render(t,t._currentTexture)})).then((function(n){var r=n.outputTexture;switch(t._currentTexture=r,t._sprite.setTexture(t._currentTexture),t._renderMode){case"dynamic":var i=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom/t.getTextureScale(),t._zoom/t.getTextureScale()),t._container.setPosition(i),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(t._rotation);break;case"export":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(t._spriteScale,t._spriteScale),t._sprite.setRotation(0);break;case"adapter":t._container.setScale(1,1),t._container.setPosition(0,0),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(1,1),t._sprite.setRotation(0)}return e&&t._renderer.render(t._container),n})).then((function(e){return n&&n.stop(),r.endFrame&&r.endFrame(),t._disposeTextures(),e}))}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var t=this;return new Promise((function(e,n){var r=t.getTextureScale();if(1===t._textureQuality)return e(t._inputTexture);var i,o=t.getInputDimensions().multiply(r).floor();t._resizedTexture?t._resizedTexture.getDimensions().equals(o)||(t._resizedTexture.resizeTo(o),i=!0):(t._resizedTexture=new C.RenderTexture(t._renderer,o.x,o.y),i=!0),i&&(t._resizedSprite.setScale(r,r),t._resizedSprite.setTexture(t._inputTexture),t._resizedTexture.render(t._resizedContainer)),e(t._resizedTexture)}))}},{key:"_registerOperations",value:function(){for(var t in this._operations={},a){var e=a[t];this._operations[e.identifier]=e}this._operations=R.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(t){var e=this;t.forEach((function(t){e._operations[t.identifier]=t}))}},{key:"setAllOperationsToDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(t)}},{key:"createOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._operations[t];if(!r)throw new Error("No operation with identifier `".concat(t,"` found."));var i=new r(this,e);return n&&this.addOperation(i),i}},{key:"addOperation",value:function(t){this._operationsStack.push(t)}},{key:"removeOperation",value:function(t){this._operationsStack.remove(t)}},{key:"getInputDimensions",value:function(){var t=this._inputTexture.getFrame();return new I(t.width,t.height)}},{key:"getFinalDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getInputDimensions(),n=this._operationsStack;return n.forEach((function(t){t.getEnabled()&&(e=t.getNewDimensions(e))})),t&&e.multiply(this._spriteScale),e.floor()}},{key:"getOutputDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){var t=this.getTextureScale(),e=this.getInputDimensions().multiply(t).floor();return this._operationsStack.forEach((function(t){e=t.getNewDimensions(e)})),e}},{key:"getCrossOrigin",value:function(){return R.getCrossOrigin(this._options.crossOrigin||"Anonymous")}},{key:"_initRenderer",value:function(){var t,e,n={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};if("export"!==this._renderMode&&this._options.canvas){var r=this._options.canvas;t=r.width,e=r.height}else if(this._inputTexture){var i=this.getFinalDimensions();t=i.x,e=i.y}else t=1,e=1;switch(this._preferredRenderer){case L.WEBGL:this._renderer=C.autoDetectRenderer(t,e,n),this._renderer.on("context-restored",this._onContextRestored);break;case L.CANVAS:this._renderer=new C.CanvasRenderer(t,e,n),this._renderer.on("context-restored",this._onContextRestored);break;default:A.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `".concat(this._preferredRenderer,"` not supported. Falling back to automatically detected renderer.")),this._renderer=C.autoDetectRenderer(t,e,n)}}},{key:"resizeTo",value:function(t){this._renderer.resizeTo(t,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(t){if(t){var e,n=t.src;if(e=n,c.Z.isJPEG(n)){var r=null;try{r=c.Z.fromBase64String(e)}catch(t){}if(!r)return;return r}}}},{key:"_handleExifOrientation",value:function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,n=-1!==[2,4,5,7].indexOf(t.Orientation);if(e||n){if("undefined"==typeof navigator)this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t);else{var r=window&&window.navigator&&window.navigator.userAgent||"";!r.match(/msie|trident/i)&&-1===r.indexOf("Edge")&&CSS.supports("image-orientation","from-image")||(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t))}this._exif.setOrientation(1)}}}},{key:"correctExifOrientation",value:function(t){var e=this.parseExif(t);if(!e)return t;var n=e.getTags();if(n&&n.Orientation){var r=1!==n.Orientation&&2!==n.Orientation,i=-1!==[2,4,5,7].indexOf(n.Orientation);if(r||i){if("undefined"==typeof navigator){var o=this.createOperation("exif-orientation",{},!1);o.setTags(n),t=o.applyTo(t)}else{var a=window&&window.navigator&&window.navigator.userAgent||"";if(a.match(/msie|trident/i)||-1!==a.indexOf("Edge")||!CSS.supports("image-orientation","from-image")){var s=this.createOperation("exif-orientation",{},!1);s.setTags(n),t=s.applyTo(t)}}return e.setOrientation(1),n.Orientation=1,t}}return t}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"disposeTexture",value:function(t){this._texturesToDispose.push(t)}},{key:"_disposeTextures",value:function(){for(var t=0;t<this._texturesToDispose.length;t++)this._texturesToDispose[t].dispose();this._texturesToDispose=[]}},{key:"setImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();var r=new C.BaseTexture(this._image),i=new T(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);n&&(i.width=n.x,i.height=n.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new C.Texture(r,i),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(t){this._inputTexture=t}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(t){this._renderer.setCanvas(t)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(t){this._operationsStack&&this._operationsStack.off(P.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(P.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t,e){t instanceof I?this._offset.copy(t):this._offset.set(t,e)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(t){this._renderMode=t}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t),this._resizedSprite.setSmoothDownscaling(t)}},{key:"setRotation",value:function(t){this._rotation=t}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,e),u}(D)},6982:(t,e,n)=>{t.exports=n(787),n(3538)},3538:(t,e,n)=>{n.r(e),n.d(e,{default:()=>WO});var r={};n.r(r),n.d(r,{Brightness:()=>qt,ColorMatrixPrimitive:()=>me,Contrast:()=>oe,Desaturation:()=>Ce,DuoTone:()=>Be,Gamma:()=>Ke,Glow:()=>ln,Gobblin:()=>gn,Grayscale:()=>Sn,LookupTable:()=>jn,LookupTableImage:()=>qn,Saturation:()=>or,SoftColorOverlay:()=>gr,ThreeDLookupTableImage:()=>Gr,ToneCurve:()=>Or,X400:()=>Pr});var i={};n.r(i),n.d(i,{A15Filter:()=>ai,BWFilter:()=>_i,BWHardFilter:()=>Ei,BreezeFilter:()=>hi,CelsiusFilter:()=>Fi,ChestFilter:()=>Ui,DuoToneFilter:()=>qi,FixieFilter:()=>eo,FoodFilter:()=>lo,FridgeFilter:()=>go,FrontFilter:()=>Oo,GlamFilter:()=>Do,GobblinFilter:()=>zo,IdentityFilter:()=>$r,K1Filter:()=>Vo,K2Filter:()=>Qo,K6Filter:()=>ia,KDynamicFilter:()=>fa,LUTFilter:()=>nl,LeninFilter:()=>va,LomoFilter:()=>ka,MellowFilter:()=>Ia,MetalFilter:()=>Na,MorningFilter:()=>Xa,OrchidFilter:()=>ts,Pola669Filter:()=>ds,PolaFilter:()=>ss,QuoziFilter:()=>ws,SemiredFilter:()=>Cs,SunnyFilter:()=>js,TexasFilter:()=>Ws,ThreeDLUTFilter:()=>ul,X400Filter:()=>Ys});var o=n(787),a=n.n(o),s=n(7945),l=n.n(s);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=o.Math.ColorMatrix,d=1e-7;function y(t,e,n,r,i){return(t-e)*(i-r)/(n-e)+r}var g=function(t){return(Math.max(t.r,t.g,t.b)+Math.min(t.r,t.g,t.b))/2},m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(i){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return f(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this))._fragmentSource=n(7761),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),a=n.getContext(),s=i.getImageData(0,0,r.width,r.height),l=this._options,u=l.colorMatrix,c=l.gamma,f=l.shadows,p=l.highlights,h=l.whites,m=l.blacks,v=1!==c,b=0!==f||0!==p,_=new o.Color(0,0,0,0),w=0;w<r.width*r.height;w++){var x=4*w;if(_.r=s.data[x]/255,_.g=s.data[x+1]/255,_.b=s.data[x+2]/255,v&&(_.r=Math.pow(_.r,1/Math.max(c,d)),_.g=Math.pow(_.g,1/Math.max(c,d)),_.b=Math.pow(_.b,1/Math.max(c,d))),b){var O=g(_),S=f>=0?o.Utils.clamp(Math.pow(O,1/(f+1))+-.76*Math.pow(O,2/(f+1))-O,0,Math.max(f,1)):-o.Utils.clamp(Math.pow(O,1/(1-f))+-.76*Math.pow(O,2/(1-f))-O,0,Math.max(-f,1)),k=S*O*O,T=S-k,E=O+k+(p<0?o.Utils.clamp(1-Math.pow(1-O,1/(1-p))- -.8*Math.pow(1-O,2/(1-p))-O,-1,0):-o.Utils.clamp(1-Math.pow(1-O,1/(1+p))- -.8*Math.pow(1-O,2/(1+p))-O,-1,0));_.r=o.Utils.clamp(E*((_.r+T)/Math.max(O,d)),0,1),_.g=o.Utils.clamp(E*((_.g+T)/Math.max(O,d)),0,1),_.b=o.Utils.clamp(E*((_.b+T)/Math.max(O,d)),0,1)}(_=u.apply(_).clamp(0,1)).r=y(_.r,0,1,m/2,1+h/2),_.g=y(_.g,0,1,m/2,1+h/2),_.b=y(_.b,0,1,m/2,1+h/2),s.data[x]=255*_.r,s.data[x+1]=255*_.g,s.data[x+2]=255*_.b}a.putImageData(s,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);m.prototype.availableOptions={gamma:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT},shadows:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},highlights:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT},whites:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},blacks:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},colorMatrix:{type:o.OptionType.COLOR_MATRIX,default:new h,uniformType:o.UniformType.MAT4},colorOffset:{type:o.OptionType.ARRAY,default:[],uniformType:o.UniformType.FLOAT4}};const v=m;function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=o.Math.Vector2,S=o.Math.ColorMatrix,k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(i){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return w(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this))._fragmentSource=n(1995),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=n.getContext(),i=e.getCanvas(),a=e.getContext(),s=this._options.clarity,l=this._options.colorMatrix,u=new o.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),c=i.width,f=i.height,p=a.getImageData(0,0,c,f),h=r.createImageData(c,f);this.canvasShader(p,h,s,l,u),r.putImageData(h,0,0)}},{key:"canvasShader",value:function(t,e,n,r,i){for(var a=function(t,e,n){return Math.min(Math.max(t,e),n)},s=function(t,e,n){var r=a((n-t)/(e-t),0,1);return r*r*(3-2*r)},l=4*t.width,u=t.data.length,c=u-1,f=t.data,p=e.data,h=new o.Color,d=2295,y=function(t){return f[t=(t=t<0?0:t)>c?c:t]},g=0;g<u;g+=4){var m=y(g+0),v=y(g+1),b=y(g+2),_=y(g+3),w=(m+y(g-4-l+0)+y(g-4+0)+y(g-4+l+0)+y(g-l+0)+y(g+l+0)+y(g+4-l+0)+y(g+4+0)+y(g+4+l))/d,x=(v+y(g-4-l+1)+y(g-4+1)+y(g-4+l+1)+y(g-l+1)+y(g+l+1)+y(g+4-l+1)+y(g+4+1)+y(g+4+l+1))/d,O=(b+y(g-4-l+2)+y(g-4+2)+y(g-4+l+2)+y(g-l+2)+y(g+l+2)+y(g+4-l+2)+y(g+4+2)+y(g+4+l+2))/d,S=(_+y(g-4-l+3)+y(g-4+3)+y(g-4+l+3)+y(g-l+3)+y(g+l+3)+y(g+4-l+3)+y(g+4+3)+y(g+4+l+3))/d;_/=255;var k=a(.3*(m/=255)+.59*(v/=255)+.1*(b/=255),.111111,.999999),T=Math.min(s(1-k,0,.11),s(k,0,.11)),E=3.7*n*T,C=Math.pow(2,.27*n*T),R=a(m+a((m-w)*E,0,10),0,1)*C,D=a(v+a((v-x)*E,0,10),0,1)*C,P=a(b+a((b-O)*E,0,10),0,1)*C,I=a(_+a((_-S)*E,0,10),0,1);h.set(R,D,P,I);var A=r.apply(h).clamp(0,1);p[g+0]=255*A.r,p[g+1]=255*A.g,p[g+2]=255*A.b,p[g+3]=255*A.a}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);k.prototype.availableOptions={clarity:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},pixelDimension:{type:o.OptionType.VECTOR2,default:new O(100,100),uniformType:o.UniformType.FLOAT2},colorMatrix:{type:o.OptionType.COLOR_MATRIX,default:new S,uniformType:o.UniformType.MAT4},colorOffset:{type:o.OptionType.ARRAY,default:[],uniformType:o.UniformType.FLOAT4}};const T=k;function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o.Math.Vector3;var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(a,t);var e,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(i){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return R(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this))._fragmentSource=n(5024),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=n.getContext(),i=e.getCanvas(),o=e.getContext(),a=this._options.temperature,s=i.width,l=i.height,u=o.getImageData(0,0,s,l),c=r.createImageData(s,l);this.canvasShader(u,c,a),r.putImageData(c,0,0)}},{key:"canvasShader",value:function(t,e,n){for(var r,i=function(t,e,n){return t*(1-n)+e*n},o=function(t,e){return[t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2]]},a=t.data.length,s=a-1,l=t.data,u=e.data,c=function(t){return l[t=(t=t<0?0:t)>s?s:t]},f=[.93,.54,0],p=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],h=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],d=0;d<a;d+=4){var y=c(d+0)/255,g=c(d+1)/255,m=c(d+2)/255,v=c(d+3)/255,b=o(p,[y,g,m]);b.z=(r=b.z+0,Math.min(Math.max(r,-.5226),.5226));var _=o(h,b),w=[_[0]<.5?2*_[0]*f[0]:1-2*(1-_[0])*(1-f[0]),_[1]<.5?2*_[1]*f[1]:1-2*(1-_[1])*(1-f[1]),_[2]<.5?2*_[2]*f[2]:1-2*(1-_[2])*(1-f[2])];u[d+0]=255*i(_[0],w[0],n),u[d+1]=255*i(_[1],w[1],n),u[d+2]=255*i(_[2],w[2],n),u[d+3]=255*v}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Engine.Filter);P.prototype.availableOptions={temperature:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};const I=P;function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z=o.Math.Vector2,L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(a,t);var e,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(i){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return j(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this))._fragmentSource=n(2511),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=n.getContext(),i=e.getCanvas(),o=e.getContext(),a=this._options.sharpness,s=i.width,l=i.height,u=o.getImageData(0,0,s,l),c=r.createImageData(s,l);this.canvasShader(u,c,a),r.putImageData(c,0,0)}},{key:"canvasShader",value:function(t,e,n){for(var r=function(t,e,n){return Math.min(Math.max(t,e),n)},i=t.width,o=t.height,a=t.data,s=e.data,l=function(t,e,n){return t*(1-n)+e*n},u=function(t){return r(a[t]/255,0,1)},c=function(t,e){var n=r(t,0,i-1),a=r(e,0,o-1);return 4*(n+i*a)},f=[],p=[],h=[-1,0,0,1],d=[0,-1,1,0],y=n>0?-1:.2,g=n>0?5:.2,m=Math.abs(n),v=0;v<i;v++)for(var b=0;b<o;b++){var _=c(v,b);f[0]=u(_+0),f[1]=u(_+1),f[2]=u(_+2),f[3]=u(_+3),p[0]=g*f[0]*f[3],p[1]=g*f[1]*f[3],p[2]=g*f[2]*f[3],p[3]=g*f[3];for(var w=0;w<4;w++){var x=c(v+h[w],b+d[w]),O=u(x+3);p[3]+=y*O;for(var S=0;S<3;S++)p[S]+=y*u(x+S)*O}for(var k=0;k<3;k++)p[k]/=Math.max(p[3],1e-6),p[k]=r(p[k],0,1);p[3]=r(p[3],0,1);for(var T=0;T<4;T++)f[T]=r(l(f[T],p[T],m),0,1),s[_+T]=255*f[T]}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Engine.Filter);L.prototype.availableOptions={sharpness:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT},pixelDimension:{type:o.OptionType.VECTOR2,default:new z(100,100),uniformType:o.UniformType.FLOAT2}};const B=L;function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e,n){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=o.Math.ColorMatrix,X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(n);if(r){var i=G(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return V(this,t)});function a(){var t;U(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._clarityFilter=new T,t._temperatureFilter=new I,t._sharpnessFilter=new B,t._filter=new v,t._sprite.setFilters([t._clarityFilter,t._temperatureFilter,t._filter]),t}return(e=[{key:"_render",value:function(t){var e=t.getDimensions();e.x=1/e.x,e.y=1/e.y;var n=new Z;n.multiply(Z.createSaturationMatrix(-.3*this._options.clarity+1)),n.multiply(Z.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:e,colorMatrix:n,colorOffset:n.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:e});var r=new Z;r.multiply(Z.createExposureMatrix(this._options.exposure)),r.multiply(Z.createSaturationMatrix(this._options.saturation+1)),r.multiply(Z.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),r.multiply(Z.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:r,colorOffset:r.getOffsets()});var i=[];return 0!==this._options.clarity&&i.push(this._clarityFilter),0!==this._options.sharpness&&i.push(this._sharpnessFilter),0!==this._options.temperature&&i.push(this._temperatureFilter),i.push(this._filter),this._sprite.setFilters(i),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){W(G(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);X.identifier="adjustments",X.prototype.availableOptions={brightness:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:o.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:o.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:o.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},a().Operations.AdjustmentsOperation=X;const q=X;n(3638);var Y=n(16);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n(5034);var et=o.Math.Vector2,nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(r);if(i){var n=tt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return $(this,t)});function s(){var t;Q(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(9018),t._lastBlurRadius=null,t._lastDimensions=new et(0,0),t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("low"!==this._options.blurQuality){var o=e.getCanvas(),a=e.getContext(),s=n.getContext();this._lastBlurRadius===this._options.blurRadius&&s.drawImage(o,0,0);for(var l=a.getImageData(0,0,o.width,o.height),u=s.getImageData(0,0,o.width,o.height),c=this._options.blurRadius,f=this._options.delta,p=30,h=0;h<o.width;h++)for(var d=0;d<o.height;d++){var y=h+d*o.width,g=4*y,m=0,v=0,b=0,_=0,w=0;i&&(c=i(h/o.width,d/o.height));for(var x=this._random(h,1-d/o.height),O=-p;O<=p;O++){var S=(O+x-.5)/p,k=1-Math.abs(S),T=f.x*S*c,E=f.y*S*c,C=Math.max(Math.min(h+T,o.width-1),0),R=Math.max(Math.min(d+E,o.height-1),0),D=4*(Math.round(R)*o.width+Math.round(C)),P=l.data[D+3],I=P*l.data[D],A=P*l.data[D+1],F=P*l.data[D+2];m+=I*k,v+=A*k,b+=F*k,_+=P*k,w+=k}m/=w,v/=w,b/=w,_/=w,u.data[g]=m/_,u.data[g+1]=v/_,u.data[g+2]=b/_,u.data[g+3]=_}s.putImageData(u,0,0),this._lastDimensions.copy(new et(o.width,o.height))}else this._renderLQBlur(t,e,n,r)}},{key:"_renderLQBlur",value:function(t,e,n,r){var i=e.getDimensions(),o=!this._lastDimensions.equals(i);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),n.setPixelRatio(e.getPixelRatio()),n.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),n.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(i)}},{key:"_random",value:function(t,e){var n=12.9898*t+78.233*e,r=n-3.14*Math.floor(n/3.14),i=43758.5453*Math.sin(r);return i-Math.floor(i)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);nt.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},delta:{type:o.OptionType.VECTOR2,default:new et(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new et(100,100),uniformType:o.UniformType.FLOAT2},blurQuality:{type:o.OptionType.STRING,default:"low"}};const rt=nt;function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e,n){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ut(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ct=o.Math.Vector2,ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ut(n);if(r){var i=ut(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return lt(this,t)});function a(){var t;ot(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius;var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new rt({},s),t._verticalFilter=new rt({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new ct(.5,.5)),t._verticalFilter.setDelta(new ct(-.5,.5)),t._filter=new rt({},s),t}return(e=[{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r={blurRadius:this._options.blurRadius*n,texSize:e,blurQuality:"high"};return this._horizontalFilter.set(r),this._verticalFilter.set(r),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=this._options.blurRadius,n=t.getDimensions();return this._filter.set({blurRadius:e,texSize:n,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"transform",value:function(t){var e=this.getBlurRadius(),n=t.applyToRelativeSize(e);this.set({blurRadius:n},!1)}},{key:"dispose",value:function(){at(ut(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);ft.identifier="blur",ft.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.BlurOperation=ft;const pt=ft;function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e,n){return e&&yt(t.prototype,e),n&&yt(t,n),t}function mt(t,e){return(mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t,e){return!e||"object"!==ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}(o,t);var e,r,i=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=bt(e);if(r){var i=bt(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return vt(this,t)});function o(){var t;return dt(this,o),(t=i.call(this))._fragmentSource=n(71),t}return gt(o,[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=n.getContext(),o=this._options.filteredCanvas;i.save(),i.globalAlpha=1-this._options.intensity,i.drawImage(r,0,0),i.globalAlpha=this._options.intensity,i.drawImage(o,0,0),i.restore()}}]),o}(o.Engine.Filter);_t.prototype.availableOptions={filteredImage:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.INT},filteredCanvas:{type:o.OptionType.OBJECT,default:null},intensity:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};const wt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;dt(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new o.Engine.Container,this._sprite=new o.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new _t}return gt(t,[{key:"push",value:function(t){this._stack.push(t)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(t,e,n){if(this.isEmpty())return o.Promise.resolve();var r=t.getRenderer();this._sprite.setTexture(e);var i=this._renderTextures[r.id];if(!i){var a=t.getSprite().getTexture().getFrame();i=new o.Engine.RenderTexture(t.getRenderer(),a.width,a.height),this._renderTextures[r.id]=i}var s=n.getDimensions();i.resizeTo(s);var l=this.isDirtyForRenderer(r);if(l){this._stack.forEach((function(e){e.update(t)}));var u=this._stack.map((function(t){return t.getFilter()}));this._sprite.setFilters(u),i.render(this._container),this.setDirtyForRenderer(!1,r)}if(this._blendFilter.setIntensity(this._intensity),r.isOfType(o.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(i.getRenderTarget().getCanvas());else if(r.isOfType(o.RendererType.WEBGL)){var c=i.getBaseTexture();c.setGLUnit(this._blendFilter.getFilteredImage()),r.updateTexture(c,!1)}return this._sprite.setFilters([this._blendFilter]),n.clear(o.Color.TRANSPARENT),n.render(this._container),l&&this.disposeRenderTextures(),o.Promise.resolve()}},{key:"setIntensity",value:function(t){this._intensity=t}},{key:"isEmpty",value:function(){return 0===this._stack.length}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this._dirtiness[e]=t}},{key:"disposeRenderTextures",value:function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach((function(t){return t.dispose()})),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),t}();function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){kt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rt(n);if(r){var i=Rt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Ct(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Tt(this,a),(t=i.call(this,e,St({intensity:{type:o.OptionType.NUMBER,default:1,setter:function(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:o.OptionType.BOOLEAN,default:!0}},n)))._stack=new wt(t._options.intensity),t}return(e=[{key:"render",value:function(t,e,n){var r=this;return this._stack.render(t,e,n).then((function(t){return r.setDirty(!1),t}))}},{key:"setDirtyForRenderer",value:function(t,e){this._stack.setDirtyForRenderer(t,e)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);Dt.identifier=null,Dt.isIdentity=!1,Dt.displayName=null,Dt.PrimitivesStack=wt;const Pt=Dt;function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jt(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mt(n);if(r){var i=Mt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jt(this,t)});function o(){return At(this,o),i.apply(this,arguments)}return(e=[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ut(t,e,n){return e&&Nt(t.prototype,e),n&&Nt(t,n),t}function Wt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gt(t);if(e){var i=Gt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vt(this,n)}}function Vt(t,e){return!e||"object"!==Lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt=function(t){Wt(r,t);var e=Ht(r);function r(){var t;return Bt(this,r),(t=e.call(this))._fragmentSource=n(8234),t}return Ut(r,[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.brightness;if(0!==s){s*=255;for(var l=0;l<r.width*r.height;l++){var u=4*l;a.data[u]+=s,a.data[u+1]+=s,a.data[u+2]+=s}o.putImageData(a,0,0)}else o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);Zt.prototype.availableOptions={brightness:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};var Xt=function(t){Wt(n,t);var e=Ht(n);function n(){var t;Bt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Zt,t}return Ut(n,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),n}(zt);Xt.prototype.availableOptions=Zt.prototype.availableOptions;const qt=Xt;function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jt(t,e,n){return e&&Qt(t.prototype,e),n&&Qt(t,n),t}function $t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ne(t);if(e){var i=ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var re=function(t){$t(r,t);var e=te(r);function r(){var t;return Kt(this,r),(t=e.call(this))._fragmentSource=n(8171),t}return Jt(r,[{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.contrast;if(1!==s){for(var l=0;l<r.width*r.height;l++){var u=4*l;a.data[u]=(a.data[u]-127)*s+127,a.data[u+1]=(a.data[u+1]-127)*s+127,a.data[u+2]=(a.data[u+2]-127)*s+127}o.putImageData(a,0,0)}}}]),r}(o.Engine.Filter);re.prototype.availableOptions={contrast:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};var ie=function(t){$t(n,t);var e=te(n);function n(){var t;Kt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new re,t}return Jt(n,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),n}(zt);ie.prototype.availableOptions=re.prototype.availableOptions;const oe=ie;function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e,n){return e&&le(t.prototype,e),n&&le(t,n),t}function ce(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=he(t);if(e){var i=he(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe(this,n)}}function pe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var de=o.Math.ColorMatrix,ye=function(t){ce(r,t);var e=fe(r);function r(){var t;return se(this,r),(t=e.call(this))._fragmentSource=n(1689),t}return ue(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),a=n.getContext(),s=i.getImageData(0,0,r.width,r.height),l=this._options.colorMatrix,u=new o.Color(0,0,0,0),c=0;c<r.width*r.height;c++){var f=4*c;u.r=s.data[f]/255,u.g=s.data[f+1]/255,u.b=s.data[f+2]/255,u=l.apply(u),s.data[f]=255*u.r,s.data[f+1]=255*u.g,s.data[f+2]=255*u.b}a.putImageData(s,0,0)}}]),r}(o.Engine.Filter);ye.prototype.availableOptions={colorMatrix:{type:o.OptionType.COLOR_MATRIX,default:new de,uniformType:o.UniformType.MAT4},colorMatrixOffset:{type:o.OptionType.ARRAY,default:[],uniformType:o.UniformType.FLOAT4}};var ge=function(t){ce(n,t);var e=fe(n);function n(){var t;se(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new ye,t}return ue(n,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),n}(zt);ge.prototype.availableOptions=ye.prototype.availableOptions;const me=ge;function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function we(t,e,n){return e&&_e(t.prototype,e),n&&_e(t,n),t}function xe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ke(t);if(e){var i=ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(t,e){return!e||"object"!==ve(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Te=function(t){xe(r,t);var e=Oe(r);function r(){var t;return be(this,r),(t=e.call(this))._fragmentSource=n(8715),t}return we(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=[.3,.59,.11],l=this._options.desaturation,u=0;u<r.width*r.height;u++){var c=4*u,f=s[0]*a.data[c]/255+s[1]*a.data[c+1]/255+s[2]*a.data[c+2]/255;a.data[c]+=(255*f-a.data[c])*l,a.data[c+1]+=(255*f-a.data[c+1])*l,a.data[c+2]+=(255*f-a.data[c+2])*l}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);Te.prototype.availableOptions={desaturation:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};var Ee=function(t){xe(n,t);var e=Oe(n);function n(){var t;be(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Te,t}return we(n,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),n}(zt);Ee.prototype.availableOptions=Te.prototype.availableOptions;const Ce=Ee;function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ie(t,e,n){return e&&Pe(t.prototype,e),n&&Pe(t,n),t}function Ae(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Me(t);if(e){var i=Me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return je(this,n)}}function je(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ze=function(t){Ae(r,t);var e=Fe(r);function r(){var t;return De(this,r),(t=e.call(this))._fragmentSource=n(74),t}return Ie(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),a=n.getContext(),s=i.getImageData(0,0,r.width,r.height),l=this._options,u=l.lightColor,c=l.darkColor,f=l.intensity,p=0;p<r.width*r.height;p++){var h=4*p,d=s.data[h]/255,y=s.data[h+1]/255,g=s.data[h+2]/255,m=s.data[h+3]/255,v=new o.Color(d,y,g,m),b=this._duoToneKernel(v,u,c,f);s.data[h]=255*b.r,s.data[h+1]=255*b.g,s.data[h+2]=255*b.b,s.data[h+3]=255*b.a}a.putImageData(s,0,0)}},{key:"_duoToneKernel",value:function(t,e,n,r){if(t.clone().clamp(0,1),r>0){var i=Math.max(r+1,1e-7);t.r=1-Math.pow(1-t.r,i),t.g=1-Math.pow(1-t.g,i),t.b=1-Math.pow(1-t.b,i)}else{var o=Math.max(1-r,1e-7);t.r=Math.pow(t.r,o),t.g=Math.pow(t.g,o),t.b=Math.pow(t.b,o)}var a=.2126*t.r+.7152*t.g+.0722*t.b,s=Math.min(Math.max(a,0),1),l=n.clone().mix(e,s);return l.a*=t.a,l}}]),r}(o.Engine.Filter);ze.prototype.availableOptions={lightColor:{type:o.OptionType.COLOR,default:o.Color.RED,uniformType:o.UniformType.FLOAT4},darkColor:{type:o.OptionType.COLOR,default:o.Color.BLACK,uniformType:o.UniformType.FLOAT4},intensity:{type:o.OptionType.NUMBER,default:.5,uniformType:o.UniformType.FLOAT}};var Le=function(t){Ae(n,t);var e=Fe(n);function n(){var t;De(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new ze,t}return Ie(n,[{key:"update",value:function(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);var t=2*this._options.intensity-1;this._filter.setIntensity(t)}}]),n}(zt);Le.prototype.availableOptions=ze.prototype.availableOptions;const Be=Le;function Ne(t){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function He(t,e,n){return e&&We(t.prototype,e),n&&We(t,n),t}function Ve(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xe(t);if(e){var i=Xe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(t,e){return!e||"object"!==Ne(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qe=function(t){Ve(r,t);var e=Ge(r);function r(){var t;return Ue(this,r),(t=e.call(this))._fragmentSource=n(5119),t}return He(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.gamma,l=new Float32Array(256),u=0;u<256;u++)l[u]=255*Math.pow(u/255,s.r);for(var c=new Float32Array(256),f=0;f<256;f++)c[f]=255*Math.pow(f/255,s.g);for(var p=new Float32Array(256),h=0;h<256;h++)p[h]=255*Math.pow(h/255,s.b);for(var d=0;d<r.width*r.height;d++){var y=4*d;a.data[y]=l[a.data[y]],a.data[y+1]=c[a.data[y+1]],a.data[y+2]=p[a.data[y+2]]}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);qe.prototype.availableOptions={gamma:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var Ye=function(t){Ve(n,t);var e=Ge(n);function n(){var t;Ue(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new qe,t}return He(n,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),n}(zt);Ye.prototype.availableOptions=qe.prototype.availableOptions;const Ke=Ye;function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tn(t,e,n){return e&&$e(t.prototype,e),n&&$e(t,n),t}function en(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=on(t);if(e){var i=on(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rn(this,n)}}function rn(t,e){return!e||"object"!==Qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var an=function(t){en(r,t);var e=nn(r);function r(){var t;return Je(this,r),(t=e.call(this))._fragmentSource=n(5285),t}return tn(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r,i=e.getCanvas(),o=e.getContext(),a=n.getContext(),s=o.getImageData(0,0,i.width,i.height),l=this._options.color,u=0;u<i.width;u++)for(var c=0;c<i.height;c++){var f=4*(i.width*c+u),p=(u/i.width-.5)/.75,h=(c/i.height-.5)/.75;r=1-(p*p+h*h),r=Math.min(Math.max(r,.1),1),s.data[f]=s.data[f]*(r*l.r),s.data[f+1]=s.data[f+1]*(r*l.g),s.data[f+2]=s.data[f+2]*(r*l.b),s.data[f+3]=255}a.putImageData(s,0,0)}}]),r}(o.Engine.Filter);an.prototype.availableOptions={color:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var sn=function(t){en(n,t);var e=nn(n);function n(){var t;Je(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new an,t}return tn(n,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),n}(zt);sn.prototype.availableOptions=an.prototype.availableOptions;const ln=sn;function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dn(t);if(e){var i=dn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hn(this,n)}}function hn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yn=function(t){fn(i,t);var e,r=pn(i);function i(){var t;return cn(this,i),(t=r.call(this))._fragmentSource=n(175),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s);a.data[u+2]=.33*a.data[u+1],a.data[u]=.6*a.data[u],a.data[u+2]+=.33*a.data[u],a.data[u+1]=.7*a.data[u+1],a.data[u+3]=255}o.putImageData(a,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,e),i}(o.Engine.Filter);const gn=function(t){fn(n,t);var e=pn(n);function n(){var t;cn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new yn,t}return n}(zt);function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function _n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xn(t);if(e){var i=xn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wn(this,n)}}function wn(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var On=function(t){bn(i,t);var e,r=_n(i);function i(){var t;return vn(this,i),(t=r.call(this))._fragmentSource=n(3841),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s),c=.2125*a.data[u]+.7154*a.data[u+1]+.0721*a.data[u+2];a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,e),i}(o.Engine.Filter);const Sn=function(t){bn(n,t);var e=_n(n);function n(){var t;vn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new On,t}return n}(zt);function kn(t,e,n){return(kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=An(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rn(t,e,n){return e&&Cn(t.prototype,e),n&&Cn(t,n),t}function Dn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Pn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=An(t);if(e){var i=An(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return In(this,n)}}function In(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fn=function(t){Dn(r,t);var e=Pn(r);function r(){var t;En(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o)))._fragmentSource=n(5193),t}return Rn(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.lookupTableData,l=0;l<r.width*r.height;l++){var u=4*l,c=a.data[u];a.data[u]=s[4*c];var f=a.data[u+1];a.data[u+1]=s[1+4*f];var p=a.data[u+2];a.data[u+2]=s[2+4*p]}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);Fn.prototype.availableOptions={lookupTable:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.INT},lookupTableData:{type:o.OptionType.ARRAY,default:[]}};const jn=function(t){Dn(n,t);var e=Pn(n);function n(){var t;En(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Fn({lookupTable:t._options.textureGLUnit}),t._textures={},t._renderers={},t}return Rn(n,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(o.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(o.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),n=t.getRenderer(),r=n.id;this._renderers[r]=n,this._textures[r]||(this._textures[r]=new o.Engine.BaseTexture);var i=this._textures[r],a=new o.Engine.PixelArrayImage(256,1,e);i.setSource(a),i.setGLUnit(this._options.textureGLUnit),n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(i)}},{key:"dispose",value:function(){for(var t in kn(An(n.prototype),"dispose",this).call(this),this._textures)this._textures[t].dispose(),delete this._textures[t];delete this._options.data}}]),n}(zt);function Mn(t,e,n){return(Mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nn(t,e,n){return e&&Bn(t.prototype,e),n&&Bn(t,n),t}function Un(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vn(t);if(e){var i=Vn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gn=o.Math.Vector2,Zn=function(t){Un(r,t);var e=Wn(r);function r(){var t;return Ln(this,r),(t=e.call(this))._precomputeQuads(),t._fragmentSource=n(7165),t}return Nn(r,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new Gn;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=this._options.lookupTableImage,s=this._createImageCanvas(a).getContext("2d"),l=i.getImageData(0,0,r.width,r.height),u=s.getImageData(0,0,a.width,a.height),c=new Gn,f=0;f<r.width*r.height*4;f+=4){var p=l.data[f],h=l.data[f+1],d=l.data[f+2],y=l.data[f+3]/255,g=this._quads[d];c.x=64*g.x,c.y=64*g.y,c.x+=Math.floor(p/4),c.y+=Math.floor(h/4);var m=4*(a.width*c.y+c.x)|0,v=u.data[m];v=p*(1-y)+v*y;var b=u.data[m+1];b=h*(1-y)+b*y;var _=u.data[m+2];_=d*(1-y)+_*y,l.data[f]=v,l.data[f+1]=b,l.data[f+2]=_}o.putImageData(l,0,0)}},{key:"_createImageCanvas",value:function(t){var e=o.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),r}(o.Engine.Filter);Zn.prototype.availableOptions={lookupTable:{type:o.OptionType.NUMBER,default:3,uniformType:o.UniformType.INT},lookupTableImage:{type:o.OptionType.IMAGE,uniformType:null}};var Xn=function(t){Un(n,t);var e=Wn(n);function n(){var t;Ln(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Zn,t._textures={},t}return Nn(n,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(o.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(o.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new o.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),e.updateTexture(r)}},{key:"dispose",value:function(){for(var t in Mn(Vn(n.prototype),"dispose",this).call(this),this._textures)delete this._textures[t]}}]),n}(zt);Xn.prototype.availableOptions={image:{type:o.OptionType.IMAGE}};const qn=Xn;function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t,e,n){return e&&Qn(t.prototype,e),n&&Qn(t,n),t}function $n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nr(t);if(e){var i=nr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return er(this,n)}}function er(t,e){return!e||"object"!==Yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nr(t){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rr=function(t){$n(r,t);var e=tr(r);function r(){var t;return Kn(this,r),(t=e.call(this))._fragmentSource=n(2519),t}return Jn(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=this._options.saturation,l=0;l<r.width;l++)for(var u=0;u<r.height;u++){var c=4*(r.width*u+l),f=.2125*a.data[c]+.7154*a.data[c+1]+.0721*a.data[c+2];a.data[c]=f*(1-s)+a.data[c]*s,a.data[c+1]=f*(1-s)+a.data[c+1]*s,a.data[c+2]=f*(1-s)+a.data[c+2]*s}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);rr.prototype.availableOptions={saturation:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};var ir=function(t){$n(n,t);var e=tr(n);function n(){var t;Kn(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new rr,t}return Jn(n,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),n}(zt);ir.prototype.availableOptions=rr.prototype.availableOptions;const or=ir;function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ur(t,e,n){return e&&lr(t.prototype,e),n&&lr(t,n),t}function cr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function fr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hr(t);if(e){var i=hr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pr(this,n)}}function pr(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hr(t){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dr=function(t){cr(r,t);var e=fr(r);function r(){var t;return sr(this,r),(t=e.call(this))._fragmentSource=n(6188),t}return ur(r,[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s);a.data[u]=Math.max(255*this._options.color.r,a.data[u]),a.data[u+1]=Math.max(255*this._options.color.g,a.data[u+1]),a.data[u+2]=Math.max(255*this._options.color.b,a.data[u+2])}o.putImageData(a,0,0)}}]),r}(o.Engine.Filter);dr.prototype.availableOptions={color:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var yr=function(t){cr(n,t);var e=fr(n);function n(){var t;sr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new dr,t}return ur(n,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),n}(zt);yr.prototype.availableOptions=dr.prototype.availableOptions;const gr=yr;function mr(t){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _r(t,e){return!e||"object"!==mr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wr(n);if(r){var i=wr(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return _r(this,t)});function o(){var t;vr(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._options.rgbControlPoints||(t._options.rgbControlPoints={red:t._options.controlPoints,green:t._options.controlPoints,blue:t._options.controlPoints}),t._updateLookupTable(),t}return(e=[{key:"_updateLookupTable",value:function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),n=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,n)}},{key:"_buildLookupTable",value:function(t,e,n){for(var r=[],i=0;i<256;i++)r.push(Math.min(Math.max(i+t[i],0),255)),r.push(Math.min(Math.max(i+e[i],0),255)),r.push(Math.min(Math.max(i+n[i],0),255)),r.push(255);return r}},{key:"_calculateSplineCurve",value:function(t){t=t.sort((function(t,e){return t[0]>e[0]}));var e,n=this._getSplineCurve(t),r=n[0];if(r[0]>0)for(e=0;e<r[0];e++)n.unshift([0,0]);var i=[];for(e=0;e<n.length;e++){var o=n[e],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),i.push(s)}return i}},{key:"_getSplineCurve",value:function(t){var e,n=this._secondDerivative(t),r=n.length,i=[];for(e=0;e<r;e++)i[e]=n[e];var o=[];for(e=0;e<r-1;e++)for(var a=t[e],s=t[e+1],l=a[0];l<s[0];l++){var u=(l-a[0])/(s[0]-a[0]),c=1-u,f=u,p=s[0]-a[0],h=c*a[1]+f*s[1]+p*p/6*((c*c*c-c)*i[e]+(f*f*f-f)*i[e+1]);h>255?h=255:h<0&&(h=0),o.push([l,h])}return 255===o.length&&o.push(t[t.length-1]),o}},{key:"_secondDerivative",value:function(t){var e=t.length;if(e<=0||1===e)return null;var n,r,i=[],o=[];for(i[0]=[0,1,0],n=1;n<e-1;n++){var a=t[n-1],s=t[n],l=t[n+1];i[n]=i[n]||[],i[n][0]=(s[0]-a[0])/6,i[n][1]=(l[0]-a[0])/3,i[n][2]=(l[0]-s[0])/6,o[n]=(l[1]-s[1])/(l[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[e-1]=0,i[e-1]=[0,1,0],n=1;n<e;n++)r=i[1][0]/i[n-1][1],i[n][1]-=r*i[n-1][2],i[n][0]=0,o[n]-=r*o[n-1];for(n=e-2;n>0;n--)r=i[n][2]/i[n+1][1],i[n][1]-=r*i[n+1][0],i[n][2]=0,o[n]-=r*o[n+1];var u=[];for(n=0;n<e;n++)u[n]=o[n]/i[n][1];return u}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(jn);xr.prototype.availableOptions={rgbControlPoints:{type:o.OptionType.OBJECT},controlPoints:{type:o.OptionType.ARRAY,default:[]},textureGLUnit:{type:o.OptionType.NUMBER,default:1}};const Or=xr;function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Er(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rr(t);if(e){var i=Rr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cr(this,n)}}function Cr(t,e){return!e||"object"!==Sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dr=function(t){Tr(i,t);var e,r=Er(i);function i(){var t;return kr(this,i),(t=r.call(this))._fragmentSource=n(9532),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r=e.getCanvas(),i=e.getContext(),o=n.getContext(),a=i.getImageData(0,0,r.width,r.height),s=0;s<r.width;s++)for(var l=0;l<r.height;l++){var u=4*(r.width*l+s),c=a.data[u]/255*.3+a.data[u+1]/255*.3+a.data[u+2]/255*.3;c-=.2,c=Math.max(0,Math.min(1,c)),c+=.15,c*=1.4,c*=255,a.data[u]=c,a.data[u+1]=c,a.data[u+2]=c}o.putImageData(a,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,e),i}(o.Engine.Filter);const Pr=function(t){Tr(n,t);var e=Er(n);function n(){var t;kr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Dr,t}return n}(zt);function Ir(t,e,n){return(Ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ar(t){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mr(t,e,n){return e&&jr(t.prototype,e),n&&jr(t,n),t}function zr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nr(t);if(e){var i=Nr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Br(this,n)}}function Br(t,e){return!e||"object"!==Ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nr(t){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ur=o.Math.Vector2,Wr=o.Math.Vector3,Hr=function(t){zr(r,t);var e=Lr(r);function r(){var t;return Fr(this,r),(t=e.call(this))._precomputeQuads(),t._fragmentSource=n(7705),t}return Mr(r,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var t=0;t<256;t++){var e=t/255*63,n=new Ur;n.y=.125*(0|e)|0,n.x=(0|e)-8*n.y,this._quads.push(n)}}},{key:"_applyCanvas",value:function(t,e,n){var r=this._options,i=r.resolution,a=r.horizontalTileCount,s=r.verticalTileCount,l=e.getCanvas(),u=e.getContext(),c=n.getContext(),f=this._options.lookupTableImage,p=this._createImageCanvas(f).getContext("2d"),h={width:128,height:128};i?h={width:i,height:i}:f.width&&f.height&&(h={width:f.width,height:f.height});for(var d=u.getImageData(0,0,l.width,l.height),y=p.getImageData(0,0,h.width,h.height),g=new Wr(h.width/a-1|0,h.height/s-1|0,a*s-1|0),m=new o.Color,v=new o.Color,b=new o.Color,_=new o.Color,w=new o.Color,x=new o.Color,O=new o.Color,S=new o.Color,k=new Ur,T=new Ur,E=function(t,e,n,r){t.r=e.r*(1-r)+n.r*r,t.g=e.g*(1-r)+n.g*r,t.b=e.b*(1-r)+n.b*r},C=function(t,e,n){e=.5+e|0;var r=4*((n=.5+n|0)*h.width+e);t.r=y.data[r]/255,t.g=y.data[r+1]/255,t.b=y.data[r+2]/255,t.a=y.data[r+3]/255},R=new o.Color,D=new o.Color,P=function(t,e,n,r,i,o,a){E(R,e,r,o),E(D,n,i,o),E(t,R,D,a)},I=new Ur(h.width,h.height).divide(a,s).floor(),A=0;A<l.width*l.height*4;A+=4){m.set(d.data[A]/255,d.data[A+1]/255,d.data[A+2]/255,d.data[A+3]/255);var F=new Wr(m.r*g.x,m.g*g.y,m.b*g.z),j=F.clone().floor().toInt(),M=F.clone().ceil().toInt(),z=F.clone().fract();k.y=j.z/a|0,k.x=j.z-k.y*a|0,T.y=M.z/a|0,T.x=M.z-T.y*a|0,k.multiply(I),T.multiply(I),C(w,k.x+j.x,k.y+j.y),C(x,k.x+j.x,k.y+M.y),C(O,k.x+M.x,k.y+j.y),C(S,k.x+M.x,k.y+M.y),P(b,w,x,O,S,z.x,z.y),C(w,T.x+j.x,T.y+j.y),C(x,T.x+j.x,T.y+M.y),C(O,T.x+M.x,T.y+j.y),C(S,T.x+M.x,T.y+M.y),P(_,w,x,O,S,z.x,z.y),E(v,b,_,z.z),d.data[A]=Math.ceil(255*v.r),d.data[A+1]=Math.ceil(255*v.g),d.data[A+2]=Math.ceil(255*v.b)}c.putImageData(d,0,0)}},{key:"_createImageCanvas",value:function(t){var e=o.Utils.createCanvas();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e}}]),r}(o.Engine.Filter);Hr.prototype.availableOptions={lookupTable:{type:o.OptionType.NUMBER,default:3,uniformType:o.UniformType.INT},lookupTableImage:{type:o.OptionType.IMAGE,uniformType:null},resolution:{type:o.OptionType.NUMBER,uniformType:o.UniformType.FLOAT},horizontalTileCount:{type:o.OptionType.NUMBER,default:5,uniformType:o.UniformType.FLOAT},verticalTileCount:{type:o.OptionType.NUMBER,default:5,uniformType:o.UniformType.FLOAT}};var Vr=function(t){zr(n,t);var e=Lr(n);function n(){var t;Fr(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i)))._filter=new Hr,t._textures={},t}return Mr(n,[{key:"update",value:function(t){var e=t.getRenderer();e.isOfType(o.RendererType.WEBGL)?this._updateWebGLTexture(t):e.isOfType(o.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var n=this._options,r=n.resolution,i=n.verticalTileCount,a=n.horizontalTileCount,s=n.image;this._filter.set({resolution:r||s.width,verticalTileCount:i,horizontalTileCount:a})}},{key:"_updateWebGLTexture",value:function(t){var e=t.getRenderer(),n=e.id;this._textures[n]||(this._textures[n]=new o.Engine.BaseTexture);var r=this._textures[n];r.setSource(this._options.image),r.setGLUnit(3),r.setMinFilter(o.Engine.BaseTexture.NearestFilter),e.updateTexture(r)}},{key:"dispose",value:function(){for(var t in Ir(Nr(n.prototype),"dispose",this).call(this),this._textures)delete this._textures[t]}}]),n}(zt);Vr.prototype.availableOptions={image:{type:o.OptionType.IMAGE},resolution:{type:o.OptionType.NUMBER},horizontalTileCount:{type:o.OptionType.NUMBER,default:5},verticalTileCount:{type:o.OptionType.NUMBER,default:5}};const Gr=Vr;function Zr(t){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qr(t,e,n){return(qr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Yr(t,e){return(Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kr(t,e){return!e||"object"!==Zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qr(t){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yr(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qr(n);if(r){var i=Qr(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Kr(this,t)});function o(){var t;Xr(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._stack.push(new qt({brightness:0})),t}return(e=[{key:"render",value:function(t,e,n){return this._stack.isEmpty()&&this._stack.push(new qt({brightness:0})),qr(Qr(o.prototype),"render",this).call(this,t,e,n)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Pt);Jr.isIdentity=!0,Jr.identifier="identity";const $r=Jr;function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ni(t,e){return(ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ri(t,e){return!e||"object"!==ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ii(t){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ii(e);if(n){var i=ii(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ri(this,t)});function i(){var t;ei(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new oe({contrast:.63})),t._stack.push(new qt({brightness:.12})),t._stack.push(new Or({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),t}return i}(Pt);oi.identifier="a15";const ai=oi;function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ci(t,e){return!e||"object"!==si(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=fi(e);if(n){var i=fi(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ci(this,t)});function i(){var t;li(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Ce({desaturation:.5})),t._stack.push(new Or({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),t}return i}(Pt);pi.identifier="breeze";const hi=pi;function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gi(t,e){return(gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mi(t,e){return!e||"object"!==di(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vi(t){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=vi(e);if(n){var i=vi(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return mi(this,t)});function i(){var t;yi(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Sn),t}return i}(Pt);bi.identifier="bw";const _i=bi;function wi(t){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oi(t,e){return(Oi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Si(t,e){return!e||"object"!==wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ki(t){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ti=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ki(e);if(n){var i=ki(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Si(this,t)});function i(){var t;xi(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Sn),t._stack.push(new oe({contrast:1.5})),t}return i}(Pt);Ti.identifier="bwhard";const Ei=Ti;function Ci(t){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ri(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pi(t,e){return!e||"object"!==Ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ii(t){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ai=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ii(e);if(n){var i=Ii(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Pi(this,t)});function i(){var t;Ri(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),t}return i}(Pt);Ai.identifier="celsius";const Fi=Ai;function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zi(t,e){return(zi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Li(t,e){return!e||"object"!==ji(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bi(t){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Bi(e);if(n){var i=Bi(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Li(this,t)});function i(){var t;Mi(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),t}return i}(Pt);Ni.identifier="chest";const Ui=Ni;function Wi(t){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gi(t,e){return!e||"object"!==Wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Zi(e);if(n){var i=Zi(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Gi(this,t)});function i(){var t;Hi(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n,[{intensity:{type:o.OptionType.NUMBER,default:.5,required:!0,setter:function(t){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(t),this._stack.setIntensity(1)),this._dirty=!0,t}}}])))._filterPrimitive=new Be({lightColor:t._options.lightColor||o.Color.WHITE,darkColor:t._options.darkColor||o.Color.BLACK,intensity:t._options.intensity||.5}),t._stack.push(t._filterPrimitive),t}return i}(Pt);Xi.prototype.availableOptions={lightColor:{type:o.OptionType.COLOR,default:o.Color.WHITE,required:!0,setter:function(t){return this._filterPrimitive&&this._filterPrimitive.setLightColor(t),this.setDirty&&this.setDirty(!0),t}},darkColor:{type:o.OptionType.COLOR,default:o.Color.BLACK,required:!0,setter:function(t){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(t),this.setDirty&&this.setDirty(!0),t}},intensity:{type:o.OptionType.NUMBER,default:.5,required:!0}},Xi.identifier="duotone";const qi=Xi;function Yi(t){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ji(t,e){return!e||"object"!==Yi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $i(t){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var to=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=$i(e);if(n){var i=$i(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ji(this,t)});function i(){var t;Ki(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),t}return i}(Pt);to.identifier="fixie";const eo=to;function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oo(t,e){return!e||"object"!==no(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var so=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ao(e);if(n){var i=ao(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return oo(this,t)});function i(){var t;ro(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new or({saturation:1.35})),t._stack.push(new oe({contrast:1.1})),t}return i}(Pt);so.identifier="food";const lo=so;function uo(t){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function po(t,e){return!e||"object"!==uo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ho(t){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ho(e);if(n){var i=ho(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return po(this,t)});function i(){var t;co(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),t}return i}(Pt);yo.identifier="fridge";const go=yo;function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(t,e){return(bo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _o(t,e){return!e||"object"!==mo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bo(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=wo(e);if(n){var i=wo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return _o(this,t)});function i(){var t;vo(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),t}return i}(Pt);xo.identifier="front";const Oo=xo;function So(t){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function To(t,e){return(To=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Eo(t,e){return!e||"object"!==So(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ro=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&To(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Co(e);if(n){var i=Co(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Eo(this,t)});function i(){var t;ko(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new oe({contrast:1.1})),t._stack.push(new Or({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),t}return i}(Pt);Ro.identifier="glam";const Do=Ro;function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ao(t,e){return(Ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fo(t,e){return!e||"object"!==Po(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jo(t){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ao(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=jo(e);if(n){var i=jo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Fo(this,t)});function i(){var t;Io(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new gn),t}return i}(Pt);Mo.identifier="gobblin";const zo=Mo;function Lo(t){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uo(t,e){return!e||"object"!==Lo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wo(t){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ho=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Wo(e);if(n){var i=Wo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Uo(this,t)});function i(){var t;Bo(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),t._stack.push(new or({saturation:.9})),t}return i}(Pt);Ho.identifier="k1";const Vo=Ho;function Go(t){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xo(t,e){return(Xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qo(t,e){return!e||"object"!==Go(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yo(t){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xo(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Yo(e);if(n){var i=Yo(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return qo(this,t)});function i(){var t;Zo(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),t._stack.push(new gr({color:new o.Color(40/255,40/255,40/255)})),t}return i}(Pt);Ko.identifier="k2";const Qo=Ko;function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(t,e){return(ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ea(t,e){return!e||"object"!==Jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function na(t){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ra=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ta(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=na(e);if(n){var i=na(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ea(this,t)});function i(){var t;$o(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new or({saturation:.5})),t}return i}(Pt);ra.identifier="k6";const ia=ra;function oa(t){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sa(t,e){return(sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function la(t,e){return!e||"object"!==oa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ca=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sa(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ua(e);if(n){var i=ua(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return la(this,t)});function i(){var t;aa(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),t._stack.push(new or({saturation:.7})),t}return i}(Pt);ca.identifier="kdynamic";const fa=ca;function pa(t){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ha(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function da(t,e){return(da=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ya(t,e){return!e||"object"!==pa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ga(t){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ma=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&da(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ga(e);if(n){var i=ga(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ya(this,t)});function i(){var t;ha(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Ce({desaturation:.4})),t._stack.push(new Or({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),t}return i}(Pt);ma.identifier="lenin";const va=ma;function ba(t){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wa(t,e){return(wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xa(t,e){return!e||"object"!==ba(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oa(t){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wa(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Oa(e);if(n){var i=Oa(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return xa(this,t)});function i(){var t;_a(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),t}return i}(Pt);Sa.identifier="lomo";const ka=Sa;function Ta(t){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ea(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ca(t,e){return(Ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ra(t,e){return!e||"object"!==Ta(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Da(t){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ca(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Da(e);if(n){var i=Da(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ra(this,t)});function i(){var t;Ea(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),t}return i}(Pt);Pa.identifier="mellow";const Ia=Pa;function Aa(t){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ja(t,e){return(ja=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ma(t,e){return!e||"object"!==Aa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function za(t){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var La=o.Math.ColorMatrix,Ba=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ja(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=za(e);if(n){var i=za(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Ma(this,t)});function i(){var t;Fa(this,i);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t=r.call.apply(r,[this].concat(n));var s=new La(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);t._stack.push(new me({colorMatrix:s}));var l=new o.Color(.8,.6,.9);return t._stack.push(new Ke({gamma:l})),t}return i}(Pt);Ba.identifier="metal";const Na=Ba;function Ua(t){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ha(t,e){return(Ha=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Va(t,e){return!e||"object"!==Ua(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ga(t){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Za=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ha(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ga(e);if(n){var i=Ga(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Va(this,t)});function i(){var t;Wa(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),t._stack.push(new ln),t}return i}(Pt);Za.identifier="morning";const Xa=Za;function qa(t){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ya(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ka(t,e){return(Ka=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qa(t,e){return!e||"object"!==qa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ja(t){return(Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ka(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ja(e);if(n){var i=Ja(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Qa(this,t)});function i(){var t;Ya(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),t._stack.push(new Or({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),t._stack.push(new Ce({desaturation:.65})),t}return i}(Pt);$a.identifier="orchid";const ts=$a;function es(t){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ns(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(t,e){return(rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function is(t,e){return!e||"object"!==es(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var as=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rs(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=os(e);if(n){var i=os(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return is(this,t)});function i(){var t;ns(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),t._stack.push(new or({saturation:.8})),t._stack.push(new oe({contrast:1.5})),t}return i}(Pt);as.identifier="pola";const ss=as;function ls(t){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(t,e){return(cs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fs(t,e){return!e||"object"!==ls(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ps(t){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cs(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ps(e);if(n){var i=ps(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return fs(this,t)});function i(){var t;us(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),t._stack.push(new or({saturation:.8})),t._stack.push(new oe({contrast:1.5})),t}return i}(Pt);hs.identifier="pola669";const ds=hs;function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ms(t,e){return(ms=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vs(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bs(t){return(bs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ms(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=bs(e);if(n){var i=bs(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return vs(this,t)});function i(){var t;gs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Ce({desaturation:.65})),t._stack.push(new Or({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),t}return i}(Pt);_s.identifier="quozi";const ws=_s;function xs(t){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Os(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ss(t,e){return(Ss=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ks(t,e){return!e||"object"!==xs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Es=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ss(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ts(e);if(n){var i=Ts(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ks(this,t)});function i(){var t;Os(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),t._stack.push(new ln),t}return i}(Pt);Es.identifier="semired";const Cs=Es;function Rs(t){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ds(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){return(Ps=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Is(t,e){return!e||"object"!==Rs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function As(t){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ps(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=As(e);if(n){var i=As(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Is(this,t)});function i(){var t;Ds(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),t._stack.push(new Or({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),t}return i}(Pt);Fs.identifier="sunny";const js=Fs;function Ms(t){return(Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ls(t,e){return(Ls=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bs(t,e){return!e||"object"!==Ms(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ns(t){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Us=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ls(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ns(e);if(n){var i=Ns(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Bs(this,t)});function i(){var t;zs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Or({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),t}return i}(Pt);Us.identifier="texas";const Ws=Us;function Hs(t){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gs(t,e){return(Gs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zs(t,e){return!e||"object"!==Hs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xs(t){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gs(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Xs(e);if(n){var i=Xs(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Zs(this,t)});function i(){var t;Vs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._stack.push(new Pr),t}return i}(Pt);qs.identifier="x400";const Ys=qs;function Ks(t){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Js(t,e){return(Js=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $s(t,e){return!e||"object"!==Ks(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tl(t){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var el=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Js(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=tl(e);if(n){var i=tl(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return $s(this,t)});function i(){var t;Qs(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._lutPrimitive=new qn({image:t._options.image}),t._stack.push(t._lutPrimitive),t}return i}(Pt);el.prototype.availableOptions={image:{type:o.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},el.identifier="lut";const nl=el;function rl(t){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function il(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ol(t,e){return(ol=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function al(t,e){return!e||"object"!==rl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sl(t){return(sl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ll=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ol(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=sl(e);if(n){var i=sl(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return al(this,t)});function i(){var t;il(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=(t=r.call.apply(r,[this].concat(n)))._options,s=a.image,l=a.resolution,u=a.verticalTileCount,c=a.horizontalTileCount;return t._lutPrimitive=new Gr({image:s,resolution:l,verticalTileCount:u,horizontalTileCount:c}),t._stack.push(t._lutPrimitive),t}return i}(Pt);ll.prototype.availableOptions={image:{type:o.OptionType.IMAGE,required:!0,setter:function(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:o.OptionType.NUMBER},horizontalTileCount:{type:o.OptionType.NUMBER,default:5},verticalTileCount:{type:o.OptionType.NUMBER,default:5}},ll.identifier="3d-lut";const ul=ll;function cl(t){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dl(t,e,n){return(dl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ml(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yl(t,e){return(yl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gl(t,e){return!e||"object"!==cl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ml(t){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yl(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ml(n);if(r){var i=ml(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return gl(this,t)});function a(){return hl(this,a),i.apply(this,arguments)}return(e=[{key:"_render",value:function(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)}},{key:"render",value:function(t){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?dl(ml(a.prototype),"render",this).call(this,t):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),o.Promise.resolve(t))}},{key:"setDirtyForRenderer",value:function(t,e){dl(ml(a.prototype),"setDirtyForRenderer",this).call(this,t,e),this._selectedFilter.setDirtyForRenderer(t,e)}},{key:"disposeRenderTextures",value:function(){dl(ml(a.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){dl(ml(a.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fl(Object(n),!0).forEach((function(e){pl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);if(delete e.filter,t.filter){var n=t.filter.constructor;"3d-lut"===n.identifier?this.setFilter(new n({image:t.filter.getImage(),resolution:t.filter.getResolution(),horizontalTileCount:t.filter.getHorizontalTileCount(),verticalTileCount:t.filter.getVerticalTileCount()})):"duotone"===n.identifier?this.setFilter(new n({lightColor:t.filter.getLightColor(),darkColor:t.filter.getDarkColor(),intensity:t.filter.getIntensity()})):this.setFilter(new n)}this.set(e)}},{key:"resetToDefaultFilterIntensity",value:function(){var t=this._selectedFilter&&this._selectedFilter.availableOptions,e=t&&t.intensity.default;this.setIntensity(e||1)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);vl.identifier="filter",vl.prototype.availableOptions={identifier:{type:o.OptionType.STRING,default:"identity"},intensity:{type:o.OptionType.NUMBER,default:1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:o.OptionType.OBJECT,default:new $r,setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},vl.FilterPrimitives=r,vl.Filters=i,vl.Filter=Pt,a().Operations.FilterOperation=vl;const bl=vl;var _l=n(5030);function wl(t){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ol(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sl(t,e,n){return(Sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=El(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function kl(t,e){return(kl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tl(t,e){return!e||"object"!==wl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function El(t){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cl=o.Math.Vector2,Rl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kl(t,e)}(l,t);var e,n,r,i,a,s=(i=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=El(i);if(a){var n=El(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Tl(this,t)});function l(){var t;xl(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=s.call.apply(s,[this].concat(n)))._colorOverlayFilter=new o.Engine.Filters.ColorOverlayFilter({color:t.getTintColor()}),t._frameContainer=new o.Engine.Container,t._resetSprites(),t._options.frame&&t._createSpritesForFrame(t._options.frame),t}return e=l,r=[{key:"validateFrame",value:function(t){if(t){var e=t.imageGroups,n=t.layoutMode;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==wl(t.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var r=function(t){var n=e[t],r=n.start,i=n.end,a=n.mid;if(void 0!==e[t]){if("object"!==wl(e[t]))throw new Error("Frame: `imageGroups.".concat(t,"` needs to be of type Object."));if(void 0!==r&&!(r instanceof o.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error("Frame: `imageGroups.".concat(t,".start` needs to be of type Image."));if(void 0!==a&&!(r instanceof o.Image||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)&&"object"!==wl(a))throw new Error("Frame: `imageGroups.".concat(t,".mid` needs to be of type Image or Object."));if(void 0!==i&&!(i instanceof o.Image||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error("Frame: `imageGroups.".concat(t,".end` needs to be of type Image."))}};if(void 0!==n&&-1===["vertical-inside","horizontal-inside"].indexOf(n))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");r("top"),r("left"),r("right"),r("bottom")}}}],(n=[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(t){var e=this;if(!t)return this._disposeSprites();var n=t.imageGroups,r=t.layoutMode;this._layoutMode=r||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach((function(t){void 0!==n[t]&&["start","mid","end"].forEach((function(r){if(void 0!==n[t][r]){var i=n[t][r];"image"in i&&(i=i.image);var a=o.Engine.Texture.fromImage(i),s=new o.Engine.Sprite(a);e._spriteGroups[t][r]=s,e._sprites.push(s),e._frameContainer.addChild(s)}}))}))}},{key:"_render",value:function(t){var e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new o.Engine.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new o.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_updateSprites",value:function(t){var e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.getDimensions(),a="vertical-inside"===this._layoutMode,s=this._spriteGroups[e].start,l=this._spriteGroups[e].mid,u=this._spriteGroups[e].end,c=0,f=0;if(s){r=(n=s.getTexture().getDimensions()).y/n.x,c=Math.floor(this._frameWidth/r);var p=new Cl(0,i);p.x=a?this._frameWidth:0,s.setPosition(p),s.setHeight(this._frameWidth),s.setWidth(c)}if(u){r=(n=u.getTexture().getDimensions()).y/n.x,f=Math.floor(this._frameWidth*r);var h=new Cl(o.x-f,i);h.x-=a?this._frameWidth:0,u.setPosition(h),u.setHeight(this._frameWidth),u.setWidth(f)}if(l){r=(n=l.getTexture().getDimensions()).y/n.x;var d=new Cl(c,i),y=o.x-c-f;if(a&&(d.x+=this._frameWidth,y-=2*this._frameWidth),l.setPosition(d),l.setWidth(y),l.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth/r,m=Math.ceil(y/g),v=0;if(-1!==m){var b=Math.round(y/m);l.setWidth(b),v+=b,this._ensureRepeatSpritesExist(m-1,e,l);for(var _=0;_<m-1;_++){b=Math.round((y-v)/(m-_-1));var w=this._repeatSprites[e][_],x=d.clone().add(v,0).floor();w.setPosition(x),w.setWidth(b),w.setHeight(this._frameWidth),v+=b}}}}}},{key:"_ensureRepeatSpritesExist",value:function(t,e,n){var r=this;n.getTexture().setMaxListeners(t+1);var i=this._repeatSprites[e].length;if(t>i)for(var a=t-i,s=0;s<a;s++){var l=new o.Engine.Sprite(n.getTexture());this._repeatSprites[e].push(l),this._frameContainer.addChild(l),this._sprites.push(l)}else t<i&&this._repeatSprites[e].splice(t).forEach((function(t){var e=r._sprites.indexOf(t);-1!==e&&(r._sprites.splice(e,1),r._frameContainer.removeChild(t),t.dispose())}))}},{key:"_updateVerticalSpriteGroup",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.getDimensions(),a="horizontal-inside"===this._layoutMode,s=this._spriteGroups[e].start,l=this._spriteGroups[e].mid,u=this._spriteGroups[e].end,c=0,f=0;if(s){r=(n=s.getTexture().getDimensions()).y/n.x,c=Math.floor(this._frameWidth*r);var p=new Cl(i,0);p.y=a?this._frameWidth:0,s.setPosition(p),s.setWidth(this._frameWidth),s.setHeight(c)}if(u){r=(n=u.getTexture().getDimensions()).y/n.x,f=Math.floor(this._frameWidth*r);var h=new Cl(i,o.y-f);h.y-=a?this._frameWidth:0,u.setPosition(h),u.setWidth(this._frameWidth),u.setHeight(f)}if(l){r=(n=l.getTexture().getDimensions()).y/n.x;var d=new Cl(i,c),y=o.y-c-f;if(a&&(d.y+=this._frameWidth,y-=2*this._frameWidth),l.setPosition(d),l.setHeight(y),l.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){var g=this._frameWidth*r,m=Math.ceil(y/g),v=0;if(-1!==m){var b=Math.round(y/m);l.setHeight(b),v+=b,this._ensureRepeatSpritesExist(m-1,e,l);for(var _=0;_<m-1;_++){b=Math.round((y-v)/(m-_-1));var w=this._repeatSprites[e][_],x=d.clone().add(0,v).floor();w.setPosition(x),w.setHeight(b),w.setWidth(this._frameWidth),v+=b}}}}}},{key:"_disposeSprites",value:function(){var t=this;this._sprites.forEach((function(e){t._frameContainer.removeChild(e),e.getTexture().dispose(),e.dispose()})),this._resetSprites()}},{key:"dispose",value:function(){Sl(El(l.prototype),"dispose",this).call(this),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}}])&&Ol(e.prototype,n),r&&Ol(e,r),l}(o.Operation);Rl.identifier="frame",Rl.prototype.availableOptions={frame:{type:o.OptionType.OBJECT,validation:Rl.validateFrame,setter:function(t,e){return e||this._createSpritesForFrame(t),t},default:null},alpha:{type:o.OptionType.NUMBER,default:1},tintColor:{type:o.OptionType.COLOR,default:new o.Color(1,1,1,0)},scale:{type:o.OptionType.NUMBER,default:.1}},a().Operations.FrameOperation=Rl;const Dl=Rl;function Pl(t){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Il(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Al(t,e){return(Al=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fl(t,e){return!e||"object"!==Pl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jl(t){return(jl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ml=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Al(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jl(r);if(i){var n=jl(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Fl(this,t)});function s(){var t;Il(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(2603),t}return(e=[{key:"_applyWebGL",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getContext(),a=(i.canvas,this.getShaderForRenderer(t)),s=e.getFrame(),l=this._watermarkCanvas;l&&s.width===l.width&&s.height===l.height||this._createWatermarkCanvas(s.width,s.height);var u=o.Engine.Texture.fromCanvas(this._watermarkCanvas),c=u.getBaseTexture();t.updateTexture(c),c.setGLUnit(1),t.setRenderTarget(n),r&&n.clear(),t.setShader(a);var f=t.getCurrentRenderTarget().getProjectionMatrix().toArray();a.setUniform("u_projMatrix",f),a.syncUniforms(),i.uniform1i(i.getUniformLocation(a.getProgram(),"u_watermarkTex"),1),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,c.getGLTextureForRenderer(t)),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),u.dispose()}},{key:"_createWatermarkCanvas",value:function(t,e){var n=this._options.watermarkImage,r=o.Utils.createCanvas();r.width=t,r.height=e;var i,a,s,l=r.getContext("2d");t>e?(i=t/n.width,s=(e-n.height*i)/2,a=0):(i=e/n.height,s=0,a=(t-n.width*i)/2),l.drawImage(n,0,0,n.width,n.height,a,s,n.width*i,n.height*i),this._watermarkCanvas=r,this._watermarkContext=l}},{key:"_applyCanvas",value:function(t,e,n){var r=e.getCanvas(),i=e.getContext(),a=n.getContext();this._options.watermarkImage,this._createWatermarkCanvas(r.width,r.height);for(var s=i.getImageData(0,0,r.width,r.height),l=this._watermarkContext.getImageData(0,0,r.width,r.height),u=new o.Color,c=new o.Color,f=new o.Color,p=0;p<r.width*r.height*4;p+=4)u.set(s.data[p]/255,s.data[p+1]/255,s.data[p+2]/255,s.data[p+3]/255),c.set(l.data[p]/255,l.data[p+1]/255,l.data[p+2]/255,l.data[p+3]/255),c.r>.8?f.copy(u.clone().mix(c,.3)):f.copy(u),s.data[p]=255*f.r,s.data[p+1]=255*f.g,s.data[p+2]=255*f.b,s.data[p+3]=255*f.a;a.putImageData(s,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);Ml.prototype.availableOptions={watermarkImage:{type:o.OptionType.OBJECT,required:!0}};const zl=Ml,Ll="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg==";function Bl(t){return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ul(t,e,n){return(Ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wl(t,e){return(Wl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hl(t,e){return!e||"object"!==Bl(e)&&"function"!=typeof e?Vl(t):e}function Vl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gl(t){return(Gl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wl(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gl(n);if(r){var i=Gl(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Hl(this,t)});function a(){var t;Nl(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Zl(Vl(t=i.call.apply(i,[this].concat(n))),"_applyWatermarkFilter",(function(){return t._watermarkFilter||(t._watermarkFilter=new zl({watermarkImage:t._watermarkImage})),t._sprite.setFilters([t._watermarkFilter]),t._renderTexture.render(t._container),o.Promise.resolve()})),Zl(Vl(t),"_loadWatermarkImage",(function(){return t._watermarkImage?o.Promise.resolve():new o.Promise((function(e,n){t._watermarkImage=new o.Image,t._watermarkImage.onload=e,t._watermarkImage.src=Ll}))})),t._watermarkFilter=null,t._watermarkImage=null,t}return(e=[{key:"_render",value:function(t){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}},{key:"dispose",value:function(){this._watermarkFilter&&this._watermarkFilter.dispose(),Ul(Gl(a.prototype),"dispose",this).call(this)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Xl.identifier="license-watermark",Xl.prototype.availableOptions={},a().Operations.LicenseWatermarkOperation=Xl;const ql=Xl;function Yl(t){return(Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ql(t,e,n){return(Ql="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Jl(t,e){return(Jl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $l(t,e){return!e||"object"!==Yl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eu=o.Math.Vector2,nu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jl(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tu(r);if(i){var n=tu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return $l(this,t)});function s(){var t;Kl(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(1898),t._lastBlurRadius=null,t._lastControlPoint1=new eu,t._lastControlPoint2=new eu,t._blurFilter=new rt,t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t._maskRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=e.getDimensions(),a=!n.getDimensions().equals(o),s=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||a;if(s){var l=new eu(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(l);var u={blurRadius:this._options.blurRadius,texSize:o},c=function(t,e,n){return Math.min(Math.max(t,e),n)},f=function(t,e,n){var r=c((n-t)/(e-t),0,1);return r*r*(3-2*r)},p=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),h=this._options.blurRadius,d=function(t,e){return f(0,1,Math.abs(c(new eu(t,e).subtract(r._options.controlPoint1).dot(p)/p.dot(p),0,1)))*h};this._blurFilter.set(u),this._blurFilter._applyCanvas(t,e,n,i,d),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(t,e,n,i)}},{key:"_renderLQBlur",value:function(t,e,n){var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new eu(t.width,t.height),r=this._options.controlPoint1.clone().multiply(n),i=this._options.controlPoint2.clone().multiply(n),o=e.createLinearGradient(r.x,r.y,i.x,i.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n,r=e.getContext(),i=t.getCanvas(),o=t.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,i.width,i.height),u=l.data,c=a.getImageData(0,0,i.width,i.height).data,f=s.getImageData(0,0,i.width,i.height).data,p=0;p<i.width*i.height*4;p+=4)n=f[p]/255,u[p]=n*u[p]+(1-n)*c[p],u[p+1]=n*u[p+1]+(1-n)*c[p+1],u[p+2]=n*u[p+2]+(1-n)*c[p+2];r.putImageData(l,0,0)}},{key:"dispose",value:function(){Ql(tu(s.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);nu.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},controlPoint1:{type:o.OptionType.VECTOR2,default:new eu(0,.5),uniformType:o.UniformType.FLOAT2},controlPoint2:{type:o.OptionType.VECTOR2,default:new eu(1,.5),uniformType:o.UniformType.FLOAT2},delta:{type:o.OptionType.VECTOR2,default:new eu(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new eu(100,100),uniformType:o.UniformType.FLOAT2}};const ru=nu;function iu(t){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function au(t,e,n){return(au="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function su(t,e){return(su=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lu(t,e){return!e||"object"!==iu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uu(t){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cu=o.Math.Vector2,fu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&su(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uu(n);if(r){var i=uu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return lu(this,t)});function a(){var t;ou(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius,t._lastControlPoint1=t._options.controlPoint1.clone(),t._lastControlPoint2=t._options.controlPoint2.clone();var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new ru({},s),t._verticalFilter=new ru({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new cu(.5,.5)),t._verticalFilter.setDelta(new cu(-.5,.5)),t._filter=new ru({},s),t}return(e=[{key:"rotate",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({controlPoint1:e,controlPoint2:n})}},{key:"flip",value:function(t){var e=this._options.controlPoint1,n=this._options.controlPoint2;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({controlPoint1:e,controlPoint2:n})}},{key:"transform",value:function(t){var e=this,n={};["controlPoint1","controlPoint2"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)})),["blurRadius"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.blurRadius,a=r.controlPoint1,s=r.controlPoint2,l={blurRadius:i*n,controlPoint1:a.clone(),controlPoint2:s.clone(),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.controlPoint1,a=n.controlPoint2;return this._filter.set({blurRadius:r,controlPoint1:i.clone(),controlPoint2:a.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){au(uu(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);fu.identifier="linear-focus",fu.prototype.availableOptions={controlPoint1:{type:o.OptionType.VECTOR2,default:new cu(0,.5)},controlPoint2:{type:o.OptionType.VECTOR2,default:new cu(1,.5)},blurRadius:{type:o.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.LinearFocusOperation=fu;const pu=fu;function hu(t){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function du(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yu(t,e,n){return(yu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gu(t,e){return(gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mu(t,e){return!e||"object"!==hu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bu=o.Math.Vector2,_u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gu(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vu(r);if(i){var n=vu(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return mu(this,t)});function s(){var t;du(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(9478),t._lastBlurRadius=null,t._lastGradientRadius=null,t._lastStart=new bu,t._lastEnd=new bu,t._blurFilter=new rt,t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t._maskRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var i=e.getDimensions(),o=!n.getDimensions().equals(i),a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;if(a){var s=new bu(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(s);var l={blurRadius:this._options.blurRadius,texSize:i},u=function(t,e,n){return Math.min(Math.max(t,e),n)},c=function(t,e,n){var r=u((n-t)/(e-t),0,1);return r*r*(3-2*r)},f=this._options,p=f.blurRadius,h=f.gradientSize,d=f.size,y=f.start,g=f.end,m=f.texSize,v=new bu(y.y-g.y,g.x-y.x);v.divide(v.len());var b=function(t,e){return c(0,1,(Math.abs(m.clone().multiply(t,e).subtract(y).dot(v))-d)/h)*p};this._blurFilter.set(l),this._blurFilter._applyCanvas(t,e,n,r,b),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(t,e,n,r)}},{key:"_renderLQBlur",value:function(t,e,n){var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=this._maskRenderTarget.getPixelRatio(),r=new bu(t.width,t.height),i=this._options.size*r.min()*n,o=this._options.gradientSize*r.min()*n,a=this._options.start.clone().multiply(r),s=this._options.end.clone().multiply(r).clone().subtract(a),l=a.clone().add(s.clone().divide(2)),u=s.len(),c=s.clone().divide(u),f=l.clone().add((i+o)*c.y,-(i+o)*c.x),p=l.clone().add(-(i+o)*c.y,(i+o)*c.x),h=e.createLinearGradient(f.x,f.y,p.x,p.y),d=p.clone().subtract(f).len();h.addColorStop(0,"#000000"),h.addColorStop(o/2/d,"#FFFFFF"),h.addColorStop(1-o/2/d,"#FFFFFF"),h.addColorStop(1,"#000000"),e.fillStyle=h,e.fillRect(0,0,t.width,t.height)}},{key:"_applyMask",value:function(t,e){for(var n,r=e.getContext(),i=t.getCanvas(),o=t.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,i.width,i.height),u=l.data,c=a.getImageData(0,0,i.width,i.height).data,f=s.getImageData(0,0,i.width,i.height).data,p=0;p<i.width*i.height*4;p+=4)n=f[p]/255,u[p]=n*u[p]+(1-n)*c[p],u[p+1]=n*u[p+1]+(1-n)*c[p+1],u[p+2]=n*u[p+2]+(1-n)*c[p+2];r.putImageData(l,0,0)}},{key:"dispose",value:function(){yu(vu(s.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);_u.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},size:{type:o.OptionType.NUMBER,default:50,uniformType:o.UniformType.FLOAT},gradientSize:{type:o.OptionType.NUMBER,default:50,uniformType:o.UniformType.FLOAT},start:{type:o.OptionType.VECTOR2,default:new bu(0,.5),uniformType:o.UniformType.FLOAT2},end:{type:o.OptionType.VECTOR2,default:new bu(1,.5),uniformType:o.UniformType.FLOAT2},delta:{type:o.OptionType.VECTOR2,default:new bu(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new bu(100,100),uniformType:o.UniformType.FLOAT2}};const wu=_u;function xu(t){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Su(t,e,n){return(Su="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ku(t,e){return(ku=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tu(t,e){return!e||"object"!==xu(e)&&"function"!=typeof e?Eu(t):e}function Eu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cu(t){return(Cu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ru=o.Math.Vector2,Du=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ku(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cu(n);if(r){var i=Cu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tu(this,t)});function a(){var t;Ou(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius,t._lastSize=t._options.size,t._lastGradientSize=t._options.gradientSize;var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new wu({},s),t._verticalFilter=new wu({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new Ru(.5,.5)),t._verticalFilter.setDelta(new Ru(-.5,.5)),t._filter=new wu({},s),t._renderBlur.bind(Eu(t)),t}return(e=[{key:"rotate",value:function(t){var e=this._options.start,n=this._options.end;90===t?(e.flip(),e.x=1-e.x,n.flip(),n.x=1-n.x):-90===t&&(e.flip(),e.y=1-e.y,n.flip(),n.y=1-n.y),this.set({start:e,end:n})}},{key:"flip",value:function(t){var e=this._options.start,n=this._options.end;switch(t){case"horizontal":e.x=1-e.x,n.x=1-n.x;break;case"vertical":e.y=1-e.y,n.y=1-n.y}this.set({start:e,end:n})}},{key:"transform",value:function(t){var e=this,n={};["start","end"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativePoint(i)})),["blurRadius","size","gradientSize"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options.start.clone(),i=this._options.end.clone(),a=this._options,s={blurRadius:a.blurRadius*n,size:a.size*n,gradientSize:a.gradientSize*n,start:r.clone().multiply(e),end:i.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=t.getDimensions(),n=this._options,r=n.blurRadius,i=n.size,a=n.gradientSize,s=n.start,l=n.end;return this._filter.set({blurRadius:r,gradientSize:a,size:i,start:s.clone(),end:l.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){Su(Cu(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Du.identifier="mirrored-focus",Du.prototype.availableOptions={start:{type:o.OptionType.VECTOR2,default:new Ru(0,.5)},end:{type:o.OptionType.VECTOR2,default:new Ru(1,.5)},blurRadius:{type:o.OptionType.NUMBER,default:.025},size:{type:o.OptionType.NUMBER,default:.1},gradientSize:{type:o.OptionType.NUMBER,default:.1},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.MirroredFocusOperation=Du;const Pu=Du;var Iu=n(1385);function Au(t){return(Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ju(t,e){return(ju=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mu(t,e){return!e||"object"!==Au(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zu(t){return(zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lu=o.Math.Vector2,Bu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ju(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zu(n);if(r){var i=zu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Mu(this,t)});function a(){return Fu(this,a),i.apply(this,arguments)}return(e=[{key:"_render",value:function(t){var e=this._options.rotation%360,n=e*(Math.PI/180),r=90===e||270===e,i=this._options.flipHorizontally!==this._options.flipVertically,a=r&&i?!this._options.flipVertically:this._options.flipVertically,s=r&&i?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(s?-1:1,a?-1:1),this._sprite.setRotation(n),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var l=this._sprite.getBounds();return this._renderTexture.resizeTo(new Lu(l.width,l.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"getNewDimensions",value:function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t}},{key:"flip",value:function(t){var e=this._options.rotation;switch(90!==e&&270!==e||(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Bu.identifier="orientation",Bu.prototype.availableOptions={rotation:{type:o.OptionType.NUMBER,default:0,validation:function(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return(t+360)%360}},flipVertically:{type:o.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.OrientationOperation=Bu;const Nu=Bu;var Uu=n(2861);function Wu(t){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vu(t,e,n){return(Vu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Gu(t,e){return(Gu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zu(t,e){return!e||"object"!==Wu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xu(t){return(Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qu=o.Engine.Filters.OverlayFilter,Yu=o.Math.Vector2,Ku=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gu(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xu(n);if(r){var i=Xu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Zu(this,t)});function a(){var t;Hu(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._overlayTexture=o.Engine.Texture.fromImage(t._options.image),t._overlayContainer=new o.Engine.Container,t._overlaySprite=new o.Engine.Sprite,t._overlaySprite.setTexture(t._overlayTexture),t._overlaySprite.setAnchor(0,0),t._overlayContainer.addChild(t._overlaySprite),t._overlayFilter=new o.Engine.Filters.OverlayFilter({overlayImage:t._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:t._overlayTexture}),t._sprite.setFilters([t._overlayFilter]),t._renderedOverlaySprite=new o.Engine.Sprite,t._renderedOverlayContainer=new o.Engine.Container,t._renderedOverlayContainer.addChild(t._renderedOverlaySprite),t._overlayRendered=!1,t._lastInputDimensions=new Yu(0,0),t}return(e=[{key:"setOption",value:function(t,e){if(Vu(Xu(a.prototype),"setOption",this).call(this,t,e),"image"===t&&e&&this._sdk){var n=this._sdk.getRenderer(),r=this._overlayTexture.getBaseTexture();r.setSource(e),n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(r),this._overlayRendered=!1}}},{key:"_render",value:function(t){var e=t.getDimensions(),n=this._options,r=n.image,i=n.alpha,a=n.blendMode;return r?(this._overlayRendered&&this._lastInputDimensions.equals(e)||(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:a,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:i}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),o.Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),o.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(t){var e=this._sdk.getRenderer(),n=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new o.Engine.RenderTexture(e,n.x,n.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var r=this._options.image,i=r.width,a=r.height,s=o.Utils.resizeVectorToFill(new Yu(i,a),n),l=this._options,u=l.flipHorizontally?-1:1,c=l.flipVertically?-1:1;this._overlaySprite.setWidth(s.x*u),this._overlaySprite.setHeight(s.y*c),this._overlaySprite.setPosition(n.x*(1-u)*.5,n.y*(1-c)*.5);var f=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(n),e.isOfType(o.RendererType.WEBGL)&&(f.setGLUnit(4),e.updateTexture(f,!1)),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){Vu(Xu(a.prototype),"dispose",this).call(this),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);Ku.identifier="overlay",Ku.BLEND_MODES=qu.BLEND_MODES,Ku.prototype.availableOptions={identifier:{type:o.OptionType.STRING},image:{type:o.OptionType.IMAGE},blendMode:{type:o.OptionType.NUMBER,default:qu.BLEND_MODES.MULTIPLY,available:Object.keys(qu.BLEND_MODES).map((function(t){return qu.BLEND_MODES[t]}))},alpha:{type:o.OptionType.NUMBER,default:1},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.OverlayOperation=Ku;const Qu=Ku;function Ju(t){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tc(t,e,n){return(tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ec(t,e){return(ec=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nc(t,e){return!e||"object"!==Ju(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rc(t){return(rc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ic=o.Math.Vector2,oc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ec(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=rc(r);if(i){var n=rc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return nc(this,t)});function s(){var t;$u(this,s);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=a.call.apply(a,[this].concat(r)))._fragmentSource=n(3488),t._lastBlurRadius=null,t._lastGradientRadius=null,t._lastPosition=new ic,t._blurFilter=new rt,t._blurredRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t._maskRenderTarget=new o.Engine.CanvasRenderTarget(100,100,1),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var o=e.getDimensions(),a=!n.getDimensions().equals(o),s=this._options,l=s.blurRadius,u=s.position,c=s.texSize,f=s.gradientRadius,p=e.getBaseTexture().isDirty()||this._lastBlurRadius!==l||a;if(p){var h=new ic(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(h);var d={blurRadius:l,texSize:o},y=function(t,e,n){return Math.min(Math.max(t,e),n)},g=function(t,e,n){var r=y((n-t)/(e-t),0,1);return r*r*(3-2*r)},m=function(t,e){return g(0,1,(Math.abs(c.clone().multiply(t,e).subtract(u).len())-r._options.radius)/(2*f))*l};this._blurFilter.set(d),this._blurFilter._applyCanvas(t,e,n,i,m),this._lastBlurRadius=l}}else this._renderLQBlur(t,e,n,i)}},{key:"_renderLQBlur",value:function(t,e,n){var r=e.getDimensions(),i=!this._blurredRenderTarget.getDimensions().equals(r);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());var o=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||i,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||i;o&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,n)}},{key:"_renderMask",value:function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),n=new ic(t.width,t.height),r=this._maskRenderTarget.getPixelRatio(),i=this._options.position.clone().multiply(n),o=this._options,a=o.radius,s=o.gradientRadius;a*=t.height,s*=t.height;var l=e.createRadialGradient(i.x,i.y,0,i.x,i.y,(a+s)*r);l.addColorStop(0,"#FFFFFF"),l.addColorStop(a/(a+s),"#FFFFFF"),l.addColorStop(1,"#000000"),e.fillStyle=l,e.fillRect(0,0,n.x,n.y)}},{key:"_applyMask",value:function(t,e){for(var n,r=e.getContext(),i=t.getCanvas(),o=t.getContext(),a=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),l=o.getImageData(0,0,i.width,i.height),u=l.data,c=a.getImageData(0,0,i.width,i.height).data,f=s.getImageData(0,0,i.width,i.height).data,p=0;p<i.width*i.height*4;p+=4)n=f[p]/255,u[p]=n*u[p]+(1-n)*c[p],u[p+1]=n*u[p+1]+(1-n)*c[p+1],u[p+2]=n*u[p+2]+(1-n)*c[p+2];r.putImageData(l,0,0)}},{key:"dispose",value:function(){tc(rc(s.prototype),"dispose",this).call(this),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter);oc.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:30,uniformType:o.UniformType.FLOAT},radius:{type:o.OptionType.NUMBER,default:50,uniformType:o.UniformType.FLOAT},gradientRadius:{type:o.OptionType.NUMBER,default:25,uniformType:o.UniformType.FLOAT},position:{type:o.OptionType.VECTOR2,default:new ic(.5,.5),uniformType:o.UniformType.FLOAT2},delta:{type:o.OptionType.VECTOR2,default:new ic(1,1),uniformType:o.UniformType.FLOAT2},texSize:{type:o.OptionType.VECTOR2,default:new ic(100,100),uniformType:o.UniformType.FLOAT2}};const ac=oc;function sc(t){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uc(t,e,n){return(uc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cc(t,e){return(cc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fc(t,e){return!e||"object"!==sc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pc(t){return(pc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hc=o.Math.Vector2,dc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pc(n);if(r){var i=pc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return fc(this,t)});function a(){var t;lc(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n)))._lastBlurRadius=t._options.blurRadius,t._lastGradientRadius=t._options.gradientRadius;var s={blurQuality:{type:o.OptionType.STRING}};return t._horizontalFilter=new ac({},s),t._verticalFilter=new ac({},s),t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new hc(.5,.5)),t._verticalFilter.setDelta(new hc(-.5,.5)),t._filter=new ac({},s),t}return(e=[{key:"rotate",value:function(t){var e=this._options.position;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})}},{key:"flip",value:function(t){var e=this._options.position;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})}},{key:"transform",value:function(t){var e=this,n={},r=this.getPosition();n.position=t.applyToRelativePoint(r),["radius","blurRadius","gradientRadius"].forEach((function(r){var i=e.getOption(r);n[r]=t.applyToRelativeSize(i)})),this.set(n,!1)}},{key:"_renderWebGL",value:function(t){return this._renderBlur(t)}},{key:"_renderCanvas",value:function(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=e.min(),r=this._options,i=r.position,a={blurRadius:r.blurRadius*n,radius:r.radius*n,gradientRadius:r.gradientRadius*n,position:i.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(t){var e=this._options,n=e.blurRadius,r=e.radius,i=e.gradientRadius,a=e.position,s=t.getDimensions();return this._filter.set({blurRadius:n,radius:r,gradientRadius:i,position:a,texSize:s,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){uc(pc(a.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);dc.identifier="radial-focus",dc.prototype.availableOptions={position:{type:o.OptionType.VECTOR2,default:new hc(.5,.5)},radius:{type:o.OptionType.NUMBER,default:.25},gradientRadius:{type:o.OptionType.NUMBER,default:.125},blurRadius:{type:o.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.RadialFocusOperation=dc;const yc=dc;function gc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var mc=o.Math.Vector2,vc=o.Math.CubicBezierCurve;const bc=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;gc(this,t),this._path=e,this._drawnCanvases=[],this._position=n,this._smooth=r}var e;return(e=[{key:"getBezierCurve",value:function(t,e,n,r){if(!e)return null;var i,o,a,s;r?(i=(r.x-e.x)/this._smooth,o=(r.y-e.y)/this._smooth):(i=(n.x-e.x)/this._smooth,o=(n.y-e.y)/this._smooth),t?(a=(n.x-t.x)/this._smooth,s=(n.y-t.y)/this._smooth):(a=(n.x-e.x)/this._smooth,s=(n.y-e.y)/this._smooth);var l=e.clone().add(a,s),u=n.clone().subtract(i,o);return new vc(e,l,u,n)}},{key:"renderToCanvas",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(-1===this._drawnCanvases.indexOf(e)){var a,s=new mc(e.width,e.height),l=e.getContext("2d"),u=this._position.clone().multiply(s),c=r?r.getPosition().clone().multiply(s):null,f=n?n.getPosition().clone().multiply(s):null,p=i?i.getPosition().clone().multiply(s):null,h=(u.clone().subtract(c).len(),t.width/10),d=this.getBezierCurve(f,c,u,p);if(d){d.calculateSegments(20);var y=d.getLength();a=d.arcLengthApproxSample(Math.ceil(y/h))}else a=[u];for(var g=0;g<a.length;g++){var m=a[g],v=.5*t.width/(2*h);v=1/(1+(v*=1-o)),l.globalAlpha=v,l.drawImage(t,m.x-t.width/2,m.y-t.height/2,t.width,t.height)}l.globalAlpha=1,this._drawnCanvases.push(e)}}},{key:"setPosition",value:function(t){this._position=t}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function _c(t){return(_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wc(t,e,n){return(wc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xc(t,e){return(xc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oc(t,e){return!e||"object"!==_c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sc(t){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sc(n);if(r){var i=Sc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Oc(this,t)});function a(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._operation=t,r._canvas=n||o.Utils.createCanvas(),r._context=r._canvas.getContext("2d"),r}return(e=[{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===t?this._options.controlPoints.map((function(t){var n=t.getPosition();return e?n.toObject():n.clone()})):wc(Sc(a.prototype),"serializeOption",this).call(this,t,e)}},{key:"_optionEquals",value:function(t,e){if("controlPoints"===t){for(var n=this._options.controlPoints,r=0,i=n.length;r<i;r++)if(!n[r].getPosition().equals(e[r]))return!1;return!0}return wc(Sc(a.prototype),"_optionEquals",this).call(this,t,e)}},{key:"render",value:function(t){var e=this._options,n=e.controlPoints,r=e.size;if(!(n.length<2)){var i,a,s,l,u=this.getBrush(),c=u&&u.getHardness?u.getHardness():1;o.Utils.ensureCanvasDimensions(this._canvas,t),this._brush&&this._lastBrushSize===r&&t.equals(this._brushInputDimensions)||(this._brushInputDimensions=t.clone(),this._lastBrushSize=r);for(var f=0;f<n.length;f++)i=n[f-2],a=n[f-1],s=n[f],l=n[f+1],s.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,i,a,l,c)}}},{key:"_createBrush",value:function(t){var e=this._options,n=e.size,r=e.hardness,i=e.color,a=o.Utils.createCanvas();a.width=a.height=Math.ceil(n*t.min());var s=a.getContext("2d");if((i=i.clone()).a=1,1===a.width)s.fillStyle=i.toRGBA(),s.fillRect(0,0,1,1);else{var l=s.createRadialGradient(a.width/2,a.height/2,Math.min(a.width/2-1,a.width/2*r),a.width/2,a.height/2,a.width/2);l.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,l.addColorStop(1,u.toRGBA()),s.fillStyle=l,s.fillRect(0,0,a.width,a.height)}return a}},{key:"addControlPoint",value:function(t){var e=new bc(this,t);this._options.controlPoints.push(e),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(t){this._canvas=t,this._context=t.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach((function(t){t.setDirty()}))}},{key:"forEachControlPoint",value:function(t){this._options.controlPoints.forEach(t)}},{key:"renderToCanvas",value:function(t){var e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);kc.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},brush:{type:o.OptionType.OBJECT,required:!0},controlPoints:{type:o.OptionType.ARRAY,default:[]},closed:{type:o.OptionType.BOOLEAN,default:!1}};const Tc=kc;function Ec(t){return(Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cc(t,e,n){return(Cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rc(t,e){return(Rc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dc(t,e){return!e||"object"!==Ec(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pc(t){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ic=o.Math.Vector2;const Ac=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pc(n);if(r){var i=Pc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Dc(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._isDisposed=!1,n._operation=t,n._dirtiness={},n.id=o.Utils.getUUID(),n._renderTextures={},n._identitySprite=new o.Engine.Sprite,n._sprite=new o.Engine.Sprite,n._hitTestSprite=new o.Engine.Sprite,n._renderers=[],n}return(e=[{key:"applyScale",value:function(t){}},{key:"applyRotation",value:function(t){var e=this._operation.getInputDimensions(),n=180*this.getRotation()/Math.PI;n+=t,this.setRotation(n*Math.PI/180);var r=(t+360)%360*Math.PI/180,i=Math.cos(r),o=Math.sin(r),a=this._options.position.clone().subtract(.5).multiply(e),s=new Ic(a.x*i-a.y*o,a.x*o+a.y*i).divide(e.clone().flip());this.setPosition(new Ic(.5,.5).add(s))}},{key:"applyFlip",value:function(t){var e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)}},{key:"applyTransform",value:function(t){var e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(t){if(this._renderTexture)this._renderTexture.clear();else{var e=this._getTexture();this._renderTextureContainer=new o.Engine.Container,this._renderTextureSprite=new o.Engine.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(o.RendererType.WEBGL)}},{key:"_optionEquals",value:function(t,e){return"type"===t||Cc(Pc(a.prototype),"_optionEquals",this).call(this,t,e)}},{key:"update",value:function(t,e){this._isDisposed||(this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e))}},{key:"_updateSprite",value:function(t){var e=this;[this._sprite,this._hitTestSprite].forEach((function(n){if(n.getTexture()){n.setAnchor(e._options.anchor),n.setPosition(e._options.position.clone().multiply(t)),void 0!==e._options.alpha&&n.setAlpha(e._options.alpha);var r=e._options.dimensions;r&&(r=r.clone().multiply(e._operation.getSDK().getTextureScale()),n.setWidth(r.x),n.setHeight(r.y)),n.updateTransform();var i=n.getTexture().getFrame(),o=new Ic(i.width,i.height);n.setPivot(e._options.pivot.clone().multiply(o)),n.setRotation(e._options.rotation),n.updateTransform()}}))}},{key:"_renderToRenderTexture",value:function(t){var e=this._getTexture().getDimensions(),n=this._getRenderTexture(t.getRenderer(),e),r=e.clone();if(this._options.smoothDownscaling&&(r.x=o.Utils.nextHighestPOT(r.x),r.y=o.Utils.nextHighestPOT(r.y)),this._renderTexture.resizeTo(r),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var i=r.clone().subtract(e.x,e.y).divide(r),a=n.getUVs().getUVs();a[0].x=a[3].x=0,a[1].x=a[2].x=1-i.x,a[0].y=a[1].y=0,a[2].y=a[3].y=1-i.y}this._sprite.setTexture(n)}},{key:"isDirtyForRenderer",value:function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}},{key:"setDirtyForRenderer",value:function(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t}},{key:"setDirty",value:function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])}},{key:"_getRenderTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ic(100,100);return this._renderTextures[t.id]||(this._renderTextures[t.id]=new o.Engine.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]}},{key:"dispose",value:function(){for(var t in this._isDisposed=!0,this._renderTextures)this._renderTextures[t].dispose()}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canBeDeleted",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}},{key:"canBeTakenToFront",value:function(){return!0}},{key:"canBeFlippedHorizontally",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Fc(t){return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mc(t,e){return(Mc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zc(t,e){return!e||"object"!==Fc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lc(t){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bc=o.Math.Vector2,Nc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Lc(n);if(r){var i=Lc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return zc(this,t)});function a(){var t;jc(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._lastOptions={},t._lastInputDimensions=new Bc(0,0),t._brush=null,t}return(e=[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.image,r=e.size;n.width=n.height=Math.ceil(r*t.min());var i=o.Utils.createCanvas();i.width=n.width,i.height=n.height;var a=i.getContext("2d");a.drawImage(n,0,0,i.width,i.height);var s=this._tintImageData(a.getImageData(0,0,i.width,i.height),i.width,i.height);return a.putImageData(s,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=i,this._lastInputDimensions=t.clone(),i}},{key:"_tintImageData",value:function(t){for(var e=this._options.color,n=0;n<t.data.length;n+=4)t.data[n]+=(255*e.r-t.data[n])*e.a,t.data[n+1]+=(255*e.g-t.data[n+1])*e.a,t.data[n+2]+=(255*e.b-t.data[n+2])*e.a;return t}},{key:"clone",value:function(){return new this.constructor(this._options)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Uc(t){return(Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hc(t,e){return(Hc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vc(t,e){return!e||"object"!==Uc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gc(t){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Nc.prototype.availableOptions={identifier:{type:o.OptionType.STRING},image:{type:o.OptionType.IMAGE},size:{type:o.OptionType.NUMBER,default:.05},color:{type:o.OptionType.COLOR,default:o.Color.RED}};var Zc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gc(n);if(r){var i=Gc(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Vc(this,t)});function a(){return Wc(this,a),i.apply(this,arguments)}return(e=[{key:"getBrushImage",value:function(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;var e=this._options,n=e.size,r=e.hardness,i=e.color,a=o.Utils.createCanvas();a.width=a.height=Math.ceil(n*t.min());var s=a.getContext("2d");if((i=i.clone()).a=1,1===a.width)s.fillStyle=i.toRGBA(),s.fillRect(0,0,1,1);else{var l=s.createRadialGradient(a.width/2,a.height/2,Math.min(a.width/2-1,a.width/2*r),a.width/2,a.height/2,a.width/2);l.addColorStop(0,i.toRGBA());var u=i.clone();u.a=0,l.addColorStop(1,u.toRGBA()),s.fillStyle=l,s.fillRect(0,0,a.width,a.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=a,this._lastInputDimensions=t.clone(),a}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Nc);function Xc(t){return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yc(t,e,n){return(Yc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Kc(t,e){return(Kc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qc(t,e){return!e||"object"!==Xc(e)&&"function"!=typeof e?Jc(t):e}function Jc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $c(t){return($c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Zc.identifier="imgly_brush_radial",Zc.prototype.availableOptions=o.Utils.extend(Nc.prototype.availableOptions,{hardness:{type:o.OptionType.NUMBER,default:1}});var tf=o.Math.Vector2,ef=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kc(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$c(n);if(r){var i=$c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Qc(this,t)});function a(){var t;qc(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._persistedPaths=[],t._outputCanvasDirty=!0,t._outputCanvas=o.Utils.createCanvas(),t._outputContext=t._outputCanvas.getContext("2d"),t._persistCanvas=o.Utils.createCanvas(),t._persistContext=t._persistCanvas.getContext("2d"),t._nextCanvas=o.Utils.createCanvas(),t._texture=o.Engine.Texture.fromCanvas(t._outputCanvas),t._sprite.setTexture(t._texture),t._onPathUpdate=t._onPathUpdate.bind(Jc(t)),t}return(e=[{key:"applyFlip",value:function(t){this._options.paths.forEach((function(e){e.forEachControlPoint((function(e){var n=e.getPosition().clone();switch(t){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}e.setPosition(n)})),e.setDirty(!0)})),this._reset()}},{key:"applyRotation",value:function(t){this._options.paths.forEach((function(e){e.forEachControlPoint((function(e){var n=e.getPosition().clone();90===t?(n.flip(),n.x=1-n.x):-90===t&&(n.flip(),n.y=1-n.y),e.setPosition(n)})),e.setDirty(!0)})),this._reset()}},{key:"applyTransform",value:function(t){var e=null;this._options.paths.forEach((function(n){n.forEachControlPoint((function(e){e.setPosition(t.applyToRelativePoint(e.getPosition()))}));var r=n.getBrush();r!==e&&(r.setSize(t.applyToRelativeSize(r.getSize())),e=r),n.setDirty(!0)})),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var t=this._outputCanvas,e=t.width,n=t.height;this._outputContext.clearRect(0,0,e,n)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var t=this._persistCanvas,e=t.width,n=t.height;this._persistContext.clearRect(0,0,e,n)}}},{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Yc($c(a.prototype),"serializeOptions",this).call(this,t,e);return t||(n.type="brush"),n}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===t?this._options.paths.map((function(t){return t.serializeOptions(void 0,e)})):Yc($c(a.prototype),"serializeOption",this).call(this,t,e)}},{key:"createPath",value:function(t){var e=new Tc(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Yc($c(a.prototype),"setDirtyForRenderer",this).call(this,t,e,n),t&&n&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach((function(t){t.setDirty(!0)})))}},{key:"setDirty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[n],e)}},{key:"render",value:function(t){var e=this,n=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(n)&&(o.Utils.ensureCanvasDimensions(this._outputCanvas,t),o.Utils.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach((function(n){n.render(t),n.getClosed()&&-1===e._persistedPaths.indexOf(n)&&e._onPathPersist(n)})),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach((function(t){t.getClosed()||t.renderToCanvas(e._outputCanvas)})),this.setDirtyForRenderer(!1,n))}},{key:"update",value:function(t,e){e&&(o.Utils.ensureCanvasDimensions(this._outputCanvas,e),o.Utils.ensureCanvasDimensions(this._persistCanvas,e),this._texture.getBaseTexture().update()),this.render(e);var n=t.getRenderer();n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(this._texture.getBaseTexture()),Yc($c(a.prototype),"update",this).call(this,t,e)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"_createRadialBrush",value:function(){return new Zc}},{key:"_getTempCanvas",value:function(){return this._nextCanvas}},{key:"dispose",value:function(){Yc($c(a.prototype),"dispose",this).call(this),this._texture&&this._texture.getBaseTexture().dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);ef.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},position:{type:o.OptionType.VECTOR2,default:new tf(0,0)},scale:{type:o.OptionType.VECTOR2,default:new tf(1,1)},anchor:{type:o.OptionType.VECTOR2,default:new tf(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new tf(0,0)},rotation:{type:o.OptionType.NUMBER,default:0},paths:{type:o.OptionType.ARRAY,default:[],setter:function(t){var e=this;return t=t.map((function(t){if(t instanceof Tc)return t;var n=t.brush,r=t.closed,i=new Tc(e._operation,{brush:n,closed:r},e._nextCanvas);return t.controlPoints.forEach((function(t){i.addControlPoint(t)})),i})),this._reset(),t}}},ef.type="brush",ef.Brush=Nc,ef.Path=Tc,ef.Brushes={RadialBrush:Zc};const nf=ef;function rf(t){return(rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function of(t,e){return(of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function af(t,e){return!e||"object"!==rf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sf(t){return(sf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&of(t,e)}(a,t);var e,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=sf(r);if(i){var n=sf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return af(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this))._fragmentSource=n(9367),t}return(e=[{key:"_applyCanvas",value:function(t,e,n){for(var r,i=e.getCanvas(),o=e.getContext(),a=n.getContext(),s=this._options,l=s.maskCanvas,u=s.filterCanvas,c=l.getContext("2d"),f=u.getContext("2d"),p=c.getImageData(0,0,i.width,i.height).data,h=o.getImageData(0,0,i.width,i.height),d=h.data,y=f.getImageData(0,0,i.width,i.height).data,g=0;g<i.width*i.height*4;g+=4)r=p[g]/255,d[g]=r*y[g]+(1-r)*d[g],d[g+1]=r*y[g+1]+(1-r)*d[g+1],d[g+2]=r*y[g+2]+(1-r)*d[g+2];a.putImageData(h,0,0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Engine.Filter);lf.prototype.availableOptions={maskImage:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.INT},maskCanvas:{type:o.OptionType.OBJECT,default:null},filterImage:{type:o.OptionType.NUMBER,default:2,uniformType:o.UniformType.INT},filterCanvas:{type:o.OptionType.OBJECT,default:null}};const uf=lf;function cf(t){return(cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ff(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pf(t,e,n){return(pf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function hf(t,e){return(hf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function df(t,e){return!e||"object"!==cf(e)&&"function"!=typeof e?yf(t):e}function yf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gf(t){return(gf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mf=o.Math.Vector2,vf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hf(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gf(n);if(r){var i=gf(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return df(this,t)});function a(){var t;ff(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=(t=i.call.apply(i,[this].concat(n)))._sdk.getRenderer();t._lastBlurRadius=null,t._blurredRenderTexture=new o.Engine.RenderTexture(s,100,100,1),t._maskRenderTexture=new o.Engine.RenderTexture(s,100,100,1),t._brushSprite=new nf(yf(t)),t._brushSpriteContainer=new o.Engine.Container;var l=t._brushSprite.getDisplayObject();if(t._brushSpriteContainer.addChild(l),t._outputSprite=new o.Engine.Sprite,t._outputContainer=new o.Engine.Container,t._outputContainer.addChild(t._outputSprite),t._maskFilter=new uf,s.isOfType(o.RendererType.WEBGL)){t._horizontalFilter=new rt,t._verticalFilter=new rt,t._sprite.setFilters([t._horizontalFilter,t._verticalFilter]),t._horizontalFilter.setDelta(new mf(1,1)),t._verticalFilter.setDelta(new mf(-1,1));var u=t._maskRenderTexture.getBaseTexture();u.setGLUnit(t._maskFilter.getMaskImage()),s.updateTexture(u,!1),(u=t._blurredRenderTexture.getBaseTexture()).setGLUnit(t._maskFilter.getFilterImage()),s.updateTexture(u,!1)}else s.isOfType(o.RendererType.CANVAS)&&(t._blurFilter=new rt,t._sprite.setFilters([t._blurFilter]),t._maskFilter.setMaskCanvas(t._maskRenderTexture.getRenderTarget().getCanvas()),t._maskFilter.setFilterCanvas(t._blurredRenderTexture.getRenderTarget().getCanvas()));return t._outputSprite.setFilters([t._maskFilter]),t}return(e=[{key:"flip",value:function(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),o.Promise.resolve()}},{key:"_renderMask",value:function(t){var e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(o.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var n=this._sdk.getRenderer();n.isOfType(o.RendererType.WEBGL)&&n.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(t){var e=t.getDimensions(),n=this._blurredRenderTexture.getDimensions();n.equals(e)||this._blurredRenderTexture.resizeTo(e);var r=this._options.blurRadius;if(this._lastBlurRadius!==r||!n.equals(e)){var i,a=this._sdk.getRenderer();a.isOfType(o.RendererType.WEBGL)?(i={blurRadius:r*e.min(),texSize:e},this._horizontalFilter.set(i),this._verticalFilter.set(i)):a.isOfType(o.RendererType.CANVAS)&&(i={blurRadius:r},this._blurFilter.set(i)),this._blurredRenderTexture.render(this._container),this._lastBlurRadius=r}var s=this._sdk.getRenderer();s.isOfType(o.RendererType.WEBGL)&&s.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new nf.Brushes.RadialBrush({size:t,hardness:e,color:o.Color.WHITE}),r=this._brushSprite.createPath(n);return this._options.paths.push(r),this.setDirty(!0),r}},{key:"setDirtyForRenderer",value:function(t,e,n){pf(gf(a.prototype),"setDirtyForRenderer",this).call(this,t,e,n),this._brushSprite.setDirtyForRenderer(t,e,n)}},{key:"dispose",value:function(){pf(gf(a.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(o.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);vf.identifier="selective-blur",vf.prototype.availableOptions={blurRadius:{type:o.OptionType.NUMBER,default:.05},paths:{type:o.OptionType.ARRAY,default:[],setter:function(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},a().Operations.SelectiveBlurOperation=vf;const bf=vf;function _f(t){return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xf(t,e,n){return(xf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Of(t,e){return(Of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sf(t,e){return!e||"object"!==_f(e)&&"function"!=typeof e?kf(t):e}function kf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tf(t){return(Tf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ef=o.Math.Vector2,Cf=o.Math.ColorMatrix,Rf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Of(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Tf(n);if(r){var i=Tf(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Sf(this,t)});function a(){var t;wf(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=(t=i.call.apply(i,[this].concat(n)))._options.image,l=s.src||s.filePath||s.toDataUrl&&s.toDataURL();return t._isSVG=l&&!!l.match(/\w+\.svg(?=\?|$)/i),t._isSVG&&(t._canvas=o.Utils.createCanvas(),t._context=t._canvas.getContext("2d"),t._options.smoothDownscaling=!1),s&&t._onImageUpdate(),t._tintFilter=new o.Engine.Filters.TintFilter,t._adjustmentsFilter=new v,t._lastRenderedDimensions=Ef.NULL,t._lastRenderedInputDimensions=Ef.NULL,t._onOptionsChange=t._onOptionsChange.bind(kf(t)),t._options.adjustments.on("update",t._onOptionsChange),t}return(e=[{key:"applyScale",value:function(t){this.setDimensions(this.getDimensions().multiply(t))}},{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=xf(Tf(a.prototype),"serializeOptions",this).call(this,t,e);return t||(n.type="sticker"),n}},{key:"_rendersToRenderTexture",value:function(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(o.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(t,e){var n=this._options,r=n.dimensions,i=n.image;if(r.equals(Ef.NULL)&&r.set(i.width,i.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(r)||this._lastRenderedImage!==i)&&this._isSVG&&t.getRenderer().isOfType(o.RendererType.WEBGL)){i.width=Math.round(r.x),i.height=Math.round(r.y);var a=4096,s=i.width/i.height;i.width>a&&(i.width=a,i.height=Math.round(i.width/s)),i.height>a&&(i.height=a,i.width=Math.round(i.height*s)),this._canvas.width=i.width,this._canvas.height=i.height,this._context.clearRect(0,0,i.width,i.height),this._context.drawImage(i,0,0,i.width,i.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);var l=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){l.push(this._adjustmentsFilter);var u=this._options.adjustments,c=new Cf;c.multiply(Cf.createBrightnessMatrix(u.getBrightness())),c.multiply(Cf.createSaturationMatrix(u.getSaturation())),c.multiply(Cf.createContrastMatrix(u.getContrast())),this._adjustmentsFilter.set({colorMatrix:c})}this._options.tintMode&&"none"!==this._options.tintMode&&(l.push(this._tintFilter),this._tintFilter.set({mode:o.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(l)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(r),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=i}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale(),e=this._options,n=e.flipHorizontally,r=e.flipVertically;(n&&t.x>0||!n&&t.x<0)&&(t.x*=-1),(r&&t.y>0||!r&&t.y<0)&&(t.y*=-1),this._sprite.setScale(t)}},{key:"applyFlip",value:function(t){xf(Tf(a.prototype),"applyFlip",this).call(this,t);var e={rotation:this._options.rotation},n=e.rotation/Math.PI*180*-1;switch(e.rotation=n*Math.PI/180,t){case"horizontal":e.flipHorizontally=!this._options.flipHorizontally,this.set(e);break;case"vertical":e.flipVertically=!this._options.flipVertically,this.set(e)}}},{key:"_hasAdjustments",value:function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()}},{key:"_onImageUpdate",value:function(){var t=this._options.image,e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(o.RendererType.WEBGL)&&(t=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=o.Engine.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"scalesUniformly",value:function(){return"keepAspect"===this._options.resizeMode}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xf(Tf(a.prototype),"setOption",this).call(this,t,e,n),"image"===t&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var t=this._dirtiness;for(var e in t)t[e]=!0}},{key:"dispose",value:function(){xf(Tf(a.prototype),"dispose",this).call(this),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);Rf.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},identifier:{type:o.OptionType.STRING,default:""},image:{type:o.OptionType.IMAGE,required:!0},position:{type:o.OptionType.VECTOR2,default:Ef.NULL},dimensions:{type:o.OptionType.VECTOR2,default:Ef.NULL},anchor:{type:o.OptionType.VECTOR2,default:new Ef(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new Ef(.5,.5)},rotation:{type:o.OptionType.NUMBER,default:0},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:o.OptionType.BOOLEAN,default:!1},tintColor:{type:o.OptionType.COLOR,default:o.Color.WHITE},tintMode:{type:o.OptionType.STRING,default:"none",available:["none","solid","colorized"]},resizeMode:{type:o.OptionType.STRING,default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:o.OptionType.NUMBER,default:1},adjustments:{type:o.OptionType.CONFIGURABLE,structure:{brightness:{type:o.OptionType.NUMBER,default:0},saturation:{type:o.OptionType.NUMBER,default:1},contrast:{type:o.OptionType.NUMBER,default:1}}}},Rf.type="sticker";const Df=Rf,Pf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._context=e,this._lastFontStyle={}}var e;return(e=[{key:"getLines",value:function(){for(var t=this,e=[],n=[],r=this._lines.length,i=0;i<r;i++){for(var o=this._lines[i],a=this._buildWords(o),s=a.length,l=0;l<s;l++){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){n.length>0&&(e.push(n.join("")),n=[u]);var f=u.replace(/\s+$/i,"");if(this._getWidth(f)>this._maxWidth){var p=this._splitWord(u);e=e.concat(p.lines),p.rest&&(n=[p.rest])}}else n.push(u)}e.push(n.join("")),n=[]}return e.map((function(e){return t._trimLine(e,t._context.textAlign)}))}},{key:"_trimLine",value:function(t,e){return t}},{key:"_buildWords",value:function(t){for(var e=[],n="",r=t.length,i=0;i<r;i++){var o=t[i];n+=o," "!==o&&"-"!==o&&i!==r-1||(e.push(n),n="")}return e}},{key:"_splitWord",value:function(t){for(var e={lines:[],rest:null},n=t.length,r=[],i=0;i<n;i++){var o=t[i];this._getWidth(r.concat(o).join(""))>this._maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),i===n-1&&r.length>0&&(e.rest=r.join(""))}return e}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(t){return this._context.measureText(t).width}},{key:"setText",value:function(t){this._text=t,this._lines=t.split("\n")}},{key:"setMaxWidth",value:function(t){this._maxWidth=t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();var If=o.Math.Vector2;const Af=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._text=e,this._operation=n,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}var e;return(e=[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new Pf(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=o.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=o.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(t,e){e.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+t.fontSize+'px "'+this._text.getFontFamily()+'"',e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();var n=this._text.getOutlineWidth();n>0&&(e.lineWidth=n)}},{key:"_buildOutputLines",value:function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines().map((function(t){return t.replace(/\s+$/i,"")}))}},{key:"_renderTextLine",value:function(t,e){var n=this._text.getAlignment(),r=new If(0,e);switch(n){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,r.x,r.y))}},{key:"update",value:function(t,e){var n=this.calculateFontStyles(t,e);if(n){var r=this._calculateText(t,n,e),i=r.dimensions,o=r.lines;this._renderText(t,i,o,n,e),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var t=this._canvas,e=t.width,n=t.height,r=this.rotation,i=Math.cos(r),o=Math.sin(r),a=new If(Math.abs(e*i)+Math.abs(n*o),Math.abs(e*o)+Math.abs(n*i));this._finalCanvas.width=a.x,this._finalCanvas.height=a.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(r),this._finalContext.drawImage(this._canvas,-e/2,-n/2),this._finalContext.restore()}},{key:"_renderText",value:function(t,e,n,r,i){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*i.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(r,this._context);for(var o=0;o<n.length;o++){var a=n[o];this._renderTextLine(a,r.topPadding+r.lineHeight*o)}}},{key:"calculateFontStyles",value:function(t,e){var n=this._text.getFontFamily(),r=this._text.getFontSize()*e.y,i=this._text.getAbsoluteTextHeight(e),o=i*this._text.getLineHeight(),a={fontFamily:n,fontSize:r,lineHeight:o,topPadding:i*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===n&&this._textOptions.fontSize===r&&this._textOptions.lineHeight===o||(this._textOptions=a),a}},{key:"_calculateText",value:function(t,e,n){var r=this._text.getMaxWidth()*n.x;this._applyTextOptions(e,this._context);var i=new If,o=this._text.getText().split("\n");if(void 0!==r)i.x=r,o=this._buildOutputLines(r);else for(var a=0;a<o.length;a++){var s=o[a];i.x=Math.max(i.x,this._context.measureText(s).width)}var l=e.lineHeight;return i.y=o.length*l,{dimensions:i,lines:o}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(t,e){var n=this.calculateFontStyles(t,e);return this._calculateText(t,n,e).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Ff(t){return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mf(t,e,n){return(Mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zf(t,e){return(zf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lf(t,e){return!e||"object"!==Ff(e)&&"function"!=typeof e?Bf(t):e}function Bf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nf(t){return(Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uf=o.Math.Vector2,Wf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zf(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nf(n);if(r){var i=Nf(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Lf(this,t)});function a(){var t;jf(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._textRenderer=new Af(Bf(t),t._operation),t._textRenderer.rotation=t.getRotation(),t._sprite.setTexture(t._textRenderer.getFinalTexture()),t._hitTestSprite.setTexture(t._textRenderer.getTexture()),t}return(e=[{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Mf(Nf(a.prototype),"serializeOptions",this).call(this,t,e);return t||(n.type="text"),n}},{key:"getDOMStyle",value:function(t,e){var n=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:n+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(t){var e=this.getFontSize()*t.y,n=this.getTextMetrics();if(n){var r=1/n.unitsPerEm*e,i=n.ascender*r,o=n.descender*r;return i+Math.abs(o)}return e*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(t,e){return this._textRenderer.getDimensions(t,e)}},{key:"applyFlip",value:function(t){Mf(Nf(a.prototype),"applyFlip",this).call(this,t);var e=this._options.rotation;switch(t){case"horizontal":e+=2*(Math.PI-e),this.setRotation(e);break;case"vertical":e+=2*(Math.PI/2-e),this.setRotation(e)}}},{key:"applyTransform",value:function(t){Mf(Nf(a.prototype),"applyTransform",this).call(this,t),this.set({fontSize:t.scaleSize(this.getFontSize(),"y"),maxWidth:t.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(t){Mf(Nf(a.prototype),"applyRotation",this).call(this,t);var e=(t+360)%360,n=this._operation.getInputDimensions();90!==e&&270!==e||(this.setMaxWidth(this.getMaxWidth()/n.x*n.y),this.setFontSize(this.getFontSize()/n.y*n.x))}},{key:"setOption",value:function(t,e){var n=this._options,r=n.flipHorizontally,i=n.flipVertically;if("rotation"===t){var o=e;return r&&(o=2*Math.PI-o),i&&(o=2*Math.PI-o),this._options.rotation=o,this._textRenderer&&(this._textRenderer.rotation=o),this._rotation=o,void this.emit("update")}Mf(Nf(a.prototype),"setOption",this).call(this,t,e)}},{key:"getOption",value:function(t){return"rotation"===t?this._rotation:Mf(Nf(a.prototype),"getOption",this).call(this,t)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(t,e){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(t,e);var n=this._textRenderer.getFinalTexture();n.getBaseTexture().update();var r=t.getRenderer();r.isOfType(o.RendererType.WEBGL)&&r.updateTexture(n.getBaseTexture()),Mf(Nf(a.prototype),"update",this).call(this,t,e),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale(),e=this._options,n=e.flipHorizontally,r=e.flipVertically;(n&&t.x>0||!n&&t.x<0)&&(t.x*=-1,this.setRotation(this._rotation)),(r&&t.y>0||!r&&t.y<0)&&(t.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(t)}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){Mf(Nf(a.prototype),"dispose",this).call(this),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);Wf.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},fontSize:{type:o.OptionType.NUMBER,default:.1},characterSpacing:{type:o.OptionType.NUMBER,default:0},lineHeight:{type:o.OptionType.NUMBER,default:1.1},fontIdentifier:{type:o.OptionType.STRING},fontFamily:{type:o.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:o.OptionType.ALL,default:"normal"},fontStyle:{type:o.OptionType.STRING,default:"normal"},textMetrics:{type:o.OptionType.OBJECT,default:null},outlineWidth:{type:o.OptionType.NUMBER,default:0},outlineColor:{type:o.OptionType.COLOR,default:o.Color.BLACK},alignment:{type:o.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:o.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:o.OptionType.COLOR,default:new o.Color(1,0,0,1)},backgroundColor:{type:o.OptionType.COLOR,default:o.Color.TRANSPARENT},position:{type:o.OptionType.VECTOR2,default:new Uf(.5,.5)},anchor:{type:o.OptionType.VECTOR2,default:new Uf(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new Uf(.5,.5)},rotation:{type:o.OptionType.NUMBER,default:0},text:{type:o.OptionType.STRING,required:!0},maxWidth:{type:o.OptionType.NUMBER,default:.5},maxHeight:{type:o.OptionType.NUMBER,default:0},visible:{type:o.OptionType.BOOLEAN,default:!0},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1}},Wf.type="text";const Hf=Wf;function Vf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._seed=void 0===e?t.TimeSeed():e}var e,n,r;return e=t,r=[{key:"TimeSeed",value:function(){return Date.now()}}],(n=[{key:"seed",value:function(e){this._seed=void 0===e?t.TimeSeed():e}},{key:"next",value:function(){var e=0|this._seed,n=e/t.SEED_DIVIDER|0,r=e%t.SEED_DIVIDER|0;return(e=t.SEED_LOW_MULTIPLY*r-t.SEED_HIGH_MULTIPLY*n)<=0&&(e+=t.MAX),-1===e&&(e=t.MAX-1),this._seed=e,e}},{key:"nextInRange",value:function(t,e){return void 0===e&&(e=t,t=0),t+this.next()%(e-t+1)}},{key:"nextBool",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextInRange(t+e-1)>=t}},{key:"pickNext",value:function(t){return Array.isArray(t)?t[this.next()%t.length]:null}}])&&Vf(e.prototype,n),r&&Vf(e,r),t}();function Xf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Gf(Zf,"MAX",2147483647),Gf(Zf,"SEED_DIVIDER",127773),Gf(Zf,"SEED_LOW_MULTIPLY",16807),Gf(Zf,"SEED_HIGH_MULTIPLY",2836);var Qf=o.Math.Rectangle,Jf=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Yf(this,t),this.top=e,this.left=n,this.bottom=r,this.right=i}var e,n,r;return e=t,r=[{key:"ZERO",get:function(){return new t(0,0,0,0)}}],(n=[{key:"multiply",value:function(t){this.top*=t,this.left*=t,this.bottom*=t,this.right*=t}},{key:"toObject",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xf(Object(n),!0).forEach((function(e){qf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this)}},{key:"equals",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(t.top-this.top)<=e&&Math.abs(t.left-this.left)<=e&&Math.abs(t.bottom-this.bottom)<=e&&Math.abs(t.right-this.right)<=e}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;return void 0===e&&(e=t),this.top*=e,this.bottom*=e,this.left*=t,this.right*=t,this}},{key:"clone",value:function(){return new t(this.top,this.left,this.bottom,this.right)}},{key:"applyToRectangle",value:function(t){return new Qf(t.x+this.left,t.y+this.top,t.width-this.left-this.right,t.height-this.top-this.bottom)}}])&&Kf(e.prototype,n),r&&Kf(e,r),t}();function $f(t){return function(t){if(Array.isArray(t))return tp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return tp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tp(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ep(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var np=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.words=[],e&&this.splitIntoWords(e)}var e,n,r;return e=t,r=[{key:"fromWords",value:function(e){var n=new t;return n.words=$f(e),n}}],(n=[{key:"splitIntoWords",value:function(t){return this.words=t.match(/\S+/g)||[],$f(this.words)}},{key:"get",value:function(){return $f(this.words)}},{key:"getWord",value:function(t){return this.words[t]}},{key:"set",value:function(t){return this.words=$f(t),this}},{key:"slice",value:function(e,n){return t.fromWords(this.words.slice(e,n))}},{key:"getLowerCase",value:function(){return this.words.map((function(t){return t.toLowerCase()}))}},{key:"getUpperCase",value:function(){return this.words.map((function(t){return t.toUpperCase()}))}},{key:"size",value:function(){return this.words.length}},{key:"countNumberOfCharacters",value:function(){return this.words.reduce((function(t,e){return t+e.length}),0)}},{key:"joined",value:function(t){var e=this,n=this.size(),r=Math.floor(n/t),i=n%t,a=0,s=0;return o.Utils.Array.range(0,t).map((function(t){a=s;var l=r+(t<i?1:0);return s=Math.min(a+l,n),o.Utils.Array.range(a,s).reduce((function(t,n){return t+(n===a?"":" ")+e.words[n]}),"")}))}}])&&ep(e.prototype,n),r&&ep(e,r),t}();function rp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ip(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var op=o.Math.Rectangle,ap=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;rp(this,t),this.width=e,this.height=n}var e,n,r;return e=t,r=[{key:"fitTwoInWidth",value:function(e,n,r){var i=n.width*r.height+n.height*r.width,o=r.height*e/i,a=n.width*o,s=n.height*o;return[new t(a,s),new t(e-a,s)]}}],(n=[{key:"set",value:function(t,e){this.width=t,this.height=e}},{key:"aspect",value:function(){return this.width/this.height}},{key:"rectangle",value:function(t,e){return new op(t,e,this.width,this.height)}},{key:"clone",value:function(){return new t(this.width,this.height)}},{key:"scale",value:function(t,e){return void 0===e&&(e=t),this.width*=t,this.height*=e,this}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this}},{key:"fitInWidthWithOther",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t;return this.copy(t.fitTwoInWidth(e,this,n)[0]),this}}])&&ip(e.prototype,n),r&&ip(e,r),t}();function sp(t){return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function up(t,e){return(up=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cp(t,e){return!e||"object"!==sp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fp(t){return(fp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&up(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fp(n);if(r){var i=fp(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return cp(this,t)});function o(){return lp(this,o),i.apply(this,arguments)}return(e=[{key:"getSize",value:function(){var t=this.getRows(),e=this.getWidth(),n=t.length-1,r=t.reduce((function(t,e){return t+e.getSize().height}),0);r+=(n+1)*this.getRelativeLineSpacing()*e;var i=this.getRelativeInsets().clone().scale(e);return r+=i.top+i.bottom,new ap(e,r)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function hp(t){return(hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yp(t,e){return(yp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gp(t,e){return!e||"object"!==hp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mp(t){return(mp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}pp.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},lines:{type:o.OptionType.ARRAY,default:[]},relativeInsets:{type:o.OptionType.OBJECT,default:new Jf},relativeLineSpacing:{type:o.OptionType.NUMBER,default:0},rows:{type:o.OptionType.OBJECT,default:[]},background:{type:o.OptionType.OBJECT,default:null},width:{type:o.OptionType.NUMBER,default:0}};var vp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yp(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=mp(e);if(n){var i=mp(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return gp(this,t)});function i(){return dp(this,i),r.apply(this,arguments)}return i}(o.Configurable);function bp(t){return(bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _p(t,e){return(_p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wp(t,e){return!e||"object"!==bp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xp(t){return(xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}vp.prototype.availableOptions={tintColor:{type:o.OptionType.COLOR,default:o.Color.BLACK},textColor:{type:o.OptionType.COLOR,default:o.Color.BLACK},alignment:{type:o.OptionType.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:o.OptionType.NUMBER,default:1},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"}};var Op=o.Math.Rectangle,Sp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_p(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xp(n);if(r){var i=xp(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return wp(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).setSize(new ap(e.getWidth(),0)),e.serverImageSmoothingFix=!1,e}return(e=[{key:"_getFrame",value:function(){var t=this.getSize();return new Op(0,0,t.width,t.height)}},{key:"_getTextFrame",value:function(){return this._getFrame()}},{key:"_getTextFrameForElement",value:function(t){return t.getFrame().clone()}},{key:"_calculateLayoutElements",value:function(){o.Log.warn("TextDesignRow is an abstract class.")}},{key:"_getLayoutElements",value:function(){return this._options.elements.length<=0&&this.layout(),this.getElements()}},{key:"_fontSize",value:function(t){return o.Log.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}},{key:"layout",value:function(){return this.setElements(this._calculateLayoutElements()),this}},{key:"textFrame",value:function(t,e){return t.getFrame().clone()}},{key:"willRender",value:function(t){}},{key:"didRender",value:function(t){}},{key:"render",value:function(t){var e=this;t.save(),this._getLayoutElements().forEach((function(n){var r=n.serializeOptions(),i=(r.text,r.frame),o=r.font,a=e.getAttributes();o.draw(t,i.x,i.y,{textColor:a.getTextColor().toRGBA(),alignment:a.getAlignment()})})),t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function kp(t){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tp(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ep(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cp(t,e){return(Cp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rp(t,e){return!e||"object"!==kp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dp(t){return(Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Sp.prototype.availableOptions={words:{type:o.OptionType.OBJECT,default:null},width:{type:o.OptionType.NUMBER,default:100},attributes:{type:o.OptionType.CONFIGURABLE,default:new vp},shearingAngle:{type:o.OptionType.NUMBER,default:0},elements:{type:o.OptionType.ARRAY,default:[]},size:{type:o.OptionType.OBJECT,default:null}};var Pp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cp(t,e)}(c,t);var e,n,r,i,a,s,u=(a=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dp(a);if(s){var n=Dp(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Rp(this,t)});function c(){return Ep(this,c),u.apply(this,arguments)}return e=c,(n=[{key:"loadImages",value:(r=l().mark((function t(e){var n,r,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=0;case 2:if(!(r<e.length)){t.next=10;break}return i=e[r],t.next=6,this.addImage(i.path,i.fullPath,i.image);case 6:n.push(i);case 7:r++,t.next=2;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=r.apply(t,e);function a(t){Tp(o,n,i,a,s,"next",t)}function s(t){Tp(o,n,i,a,s,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"addImage",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous",i=this.getImages();return n?(i[t]={fullPath:e,image:n},Promise.resolve({fullPath:e,image:n})):new Promise((function(a,s){(n=new o.Image).onload=function(){i[t]={fullPath:e,image:n},a({fullPath:e,image:n})},n.crossOrigin=o.Utils.getCrossOriginValue(r),n.onerror=s,n.src=e}))}},{key:"getImage",value:function(t){var e=this.getImages()[t];return e?e.image:null}},{key:"getVariation",value:function(t){return this.getFonts()[t]}},{key:"addFont",value:function(t,e){return this.getFonts()[t]=e,e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),c}(o.Configurable);Pp.prototype.availableOptions={images:{type:o.OptionType.OBJECT,default:{}},fonts:{type:o.OptionType.OBJECT,default:{}}};var Ip=new Pp;function Ap(t){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fp(Object(n),!0).forEach((function(e){Mp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zp(t,e,n){return(zp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Np(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Lp(t,e){return(Lp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bp(t,e){return!e||"object"!==Ap(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Np(t){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Up=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lp(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Np(n);if(r){var i=Np(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Bp(this,t)});function a(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this,t);var n=Ip.getVariation(e.getFontIdentifier());return n||o.Log.warn("TextDesignFont: Unable to find font '".concat(e._fontIdentifier,"'")),e.set({fontVariation:n}),e._metrics=null,e._canvas=o.Utils.createCanvas(),e._context=e._canvas.getContext("2d"),e._isDirty=!0,e}return(e=[{key:"_onOptionsChange",value:function(){this._isDirty=!0}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];zp(Np(a.prototype),"setOption",this).call(this,t,e,n,r),"fontIdentifier"!==t||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var t=Ip.getVariation(this.getFontIdentifier());return t||o.Log.warn("TextDesignFont: Unable to find font '".concat(this._fontIdentifier,"'")),this.setFontVariation(t),t}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=jp(jp({},this._options),t),this._isDirty=!0}},{key:"_applyTextOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=jp(jp({},this._options),e),r=n.fontSize,i=n.fontVariation,o=n.lineHeight,a=n.textColor,s=n.alignment,l=i.serializeOptions(),u=l.fontStyle,c=l.fontWeight,f=l.fontFamily;t.font="".concat(u," ").concat(c," ").concat(r,"px / ").concat(o," ").concat(f),t.fillStyle=a,t.textBaseline="alphabetic",t.textAlign=s||"left"}},{key:"getTextMetrics",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),jp({},this._metrics)}},{key:"getSizeValue",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),new ap(this._metrics.width,this._metrics.height)}},{key:"fitWidth",value:function(t){if(this.getFontVariation()){this._applyTextOptions(this._context,{fontSize:50});var e=t/this._context.measureText(this.getText()).width,n=Math.floor(50*e);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}o.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"fitHeight",value:function(t){if(this.getFontVariation()){var e=t/this._calculateTextMetrics({fontSize:50}).height,n=Math.floor(50*e);return this.setFontSize(n),this._calculateTextMetrics(),this.getTextMetrics()}o.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"_calculateTextMetrics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._canvas,n=this._context,r=jp(jp({},this._options),t),i=this.getText();this._applyTextOptions(n,r);var o=Math.ceil(n.measureText(i).width),a=Math.floor(o+2*r.fontSize),s=Math.floor(3*r.fontSize);e.width=a,e.height=s;var l=Math.floor(r.fontSize),u=Math.floor(.6*s);this._applyTextOptions(n,r),n.fillText(i,l,u);var c=n.getImageData(0,0,e.width,e.height).data,f=Zp(c,a,s,u,this._options.excludeAccents),p=Gp(c,a,s,u,this._options.excludeAccents),h=o,d=f+p;return this._metrics={width:h,height:d,ascender:f,descender:p},this._isDirty=!1,jp({},this._metrics)}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.save(),this._metrics&&!this._isDirty||this._calculateTextMetrics(),this._applyTextOptions(t,r),t.fillText(this.getText(),e,n+this._metrics.ascender),i&&(Yp(t,e,n,this._metrics.width,this._metrics.height),qp(t,n+this._metrics.ascender,e,e+this._metrics.width)),t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable),Wp=function(t,e,n,r){var i=n*(4*r)+4*e;return{r:t[i],g:t[i+1],b:t[i+2],a:t[i+3]}},Hp=function(t){return t.a<=254},Vp=function(t,e,n){for(var r=!0,i=0;i<n;i++){var o=Wp(t,i,e,n);if(!Hp(o)){r=!1;break}}return r},Gp=function(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=r+1;a<n;a++)if(Vp(t,a,e)){if(i)break}else o=a-r+1;return o},Zp=function(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=r-1;a>=0;a--)if(Vp(t,a,e)){if(i)break}else o=r-a;return o},Xp=function(t,e,n,r,i){t.beginPath(),t.moveTo(e,n),t.lineTo(r,i),t.stroke()},qp=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";t.save(),t.strokeStyle=i,Xp(t,n,e,r,e),t.restore()},Yp=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"blue";t.save(),t.strokeStyle=o,t.strokeRect(e,n,r,i),t.restore()};function Kp(t){return(Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jp(t,e){return(Jp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $p(t,e){return!e||"object"!==Kp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function th(t){return(th=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Up.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:o.OptionType.OBJECT,default:null},lineHeight:{type:o.OptionType.NUMBER,default:1},fontSize:{type:o.OptionType.NUMBER,default:22},textColor:{type:o.OptionType.STRING,default:"black"},strokeStyle:{type:o.OptionType.STRING,default:"black"},outlineWidth:{type:o.OptionType.NUMBER,default:0},textBaseline:{type:o.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:o.OptionType.BOOLEAN,default:!1}};var eh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jp(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=th(e);if(n){var i=th(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return $p(this,t)});function i(){return Qp(this,i),r.apply(this,arguments)}return i}(o.Configurable);function nh(t){return(nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ih(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rh(Object(n),!0).forEach((function(e){oh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ah(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sh(t,e){return(sh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lh(t,e){return!e||"object"!==nh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uh(t){return(uh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}eh.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},frame:{type:o.OptionType.OBJECT,default:null},font:{type:o.OptionType.OBJECT,default:null}};var ch=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sh(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uh(n);if(r){var i=uh(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return lh(this,t)});function o(){return ah(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateLayoutElements",value:function(){var t=this.serializeOptions(),e=t.attributes,n=t.imageInsets,r=t.size,i=(t.width,this.getWords().joined(1)[0]||""),o=e.fontIdentifier,a=new Up({text:i,fontIdentifier:o});a.fitWidth(this._getTextFrame().width);var s=a.getTextMetrics().height+n.top+n.bottom;r.height=s;var l=this._getTextFrame();return[new eh({text:i,frame:l,font:a})]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Sp);function fh(t){return(fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ph(t){return function(t){if(Array.isArray(t))return hh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hh(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dh(t,e){return(dh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yh(t,e){return!e||"object"!==fh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gh(t){return(gh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ch.prototype.availableOptions=ih(ih({},Sp.prototype.availableOptions),{},{imageInsets:{type:o.OptionType.OBJECT,default:new Jf}});var vh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dh(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gh(n);if(r){var i=gh(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return yh(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._relativeInsets=new Jf,e._background=null,e._fontRandomizer=new Zf(0),e._lineNumberRandomizer=new Zf(0),e._wordsPerLineRandomizer=new Zf(0),e._seedPool=[e._fontRandomizer,e._lineNumberRandomizer,e._wordsPerLineRandomizer],e}return(e=[{key:"seed",value:function(t){this._seedPool.forEach((function(e){return e.seed(t)}))}},{key:"getImagePaths",value:function(){return[]}},{key:"onImagesLoaded",value:function(){}},{key:"getMaximumNumberOfTries",value:function(){return 10}},{key:"getMinLineCountOfRandom",value:function(){return 4}},{key:"getRandomAdditionalLinePercentage",value:function(){return.4}},{key:"_fontForRow",value:function(t,e){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}},{key:"_modifiedText",value:function(t){return t.replace("\n"," ").replace("\t"," ")}},{key:"_minimumNumberOfLines",value:function(t){return Math.ceil(Math.sqrt(t.size()))}},{key:"_maximumNumberOfLines",value:function(t){return t.size()}},{key:"_calculatedNumberOfLines",value:function(t){var e=this._minimumNumberOfLines(t);if(t.size()>=this.getMinLineCountOfRandom()){var n=Math.floor(Math.max(1,e*this.getRandomAdditionalLinePercentage()));e+=this._lineNumberRandomizer.nextInRange(0,n)}return Math.min(e,this._maximumNumberOfLines(t))}},{key:"_randomizedNumberOfWordsPerLine",value:function(t,e){var n=this;if(t>e)return o.Log.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),e;var r=o.Utils.Array.repeat(1,t);return o.Utils.Array.range(t,e).forEach((function(e){var i=n._wordsPerLineRandomizer.nextInRange(0,t-1);r[i]+=1})),r}},{key:"_textLines",value:function(t){var e=new np(t),n=this._calculatedNumberOfLines(e);return this._randomizedNumberOfWordsPerLine(n,e.size()).reduce((function(t,n){return{index:t.index+n,lines:[].concat(ph(t.lines),[e.slice(t.index,Math.min(t.index+n,e.size()))])}}),{index:0,lines:[]}).lines}},{key:"_validTextLines",value:function(t){var e=this._textLines(t),n=0;do{if((n=o.Utils.Array.findIndex(e,(function(t){return t.countNumberOfCharacters()<3})))>=0){var r=e[n-1],i=e[n+1];(r?r.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)<(i?i.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)&&r?(r.words=[].concat(ph(r.words),ph(e[n].words)),e=[].concat(ph(e.slice(0,n)),ph(e.slice(n+1)))):i&&(i.words=[].concat(ph(e[n].words),ph(i.words)),e=[].concat(ph(e.slice(0,n)),ph(e.slice(n+1))))}}while(n>-1&&e.length>1);return e}},{key:"_modifiedLines",value:function(t){return t}},{key:"_getBackground",value:function(){return this._background}},{key:"generateLayoutData",value:function(t,e){var n=this._modifiedText(t),r=this._modifiedLines(this._validTextLines(n)),i=e*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(r,i);return new pp({text:n,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:r,rows:o,width:e})}},{key:"_layoutRows",value:function(t,e){var n=this;return t.map((function(t,r){return n._randomLayoutRow(t,r,e,new vp({fontIdentifier:n._fontForRow(r,t)})).layout()}))}},{key:"_randomLayoutRow",value:function(t,e,n,r){return new ch({words:t,width:n,attributes:r})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function bh(t){return(bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_h(Object(n),!0).forEach((function(e){Th(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oh(t,e){return(Oh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sh(t,e){return!e||"object"!==bh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kh(t){return(kh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Th(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}mh(vh,"defaultFontIdentifiers",[]),mh(vh,"identifier","textdesign"),vh.prototype.availableOptions={fontIdentifiers:{type:o.OptionType.ARRAY,default:[]},relativeLineSpacing:{type:o.OptionType.NUMBER,default:0}};var Eh=o.Math.Rectangle,Ch=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oh(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kh(n);if(r){var i=kh(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Sh(this,t)});function a(){return xh(this,a),i.apply(this,arguments)}return(e=[{key:"_calculateLayoutElements",value:function(){if(this.getWords().size()<=0)return[];var t=this.serializeOptions(),e=t.orientation,n=t.width,r=t.size,i=t.relativeRowOffset,s=t.attributes.fontIdentifier,l=this.getWords().joined(3),u=e===a.Orientations.Left?[l[0],l[1],l[2]]:[l[1],l[2],l[0]],c=o.Utils.Array.range(0,2).map((function(t){return new Up({text:u[t],fontIdentifier:s,fontSize:60})})),f=c.map((function(t){return t.getSizeValue()})),p=f[0].width>f[1].width?0:1,h=(p+1)%2;c[h].fitWidth(f[p].width),f[h]=c[h].getSizeValue();var d=(f[h].height+f[p].height)/(1-i),y=new Up({text:u[2],fontIdentifier:s});y.fitHeight(d);var g=y.getSizeValue().width,m=f[p].width,v=n/(g+m),b=v*g,_=v*m,w=v*d,x=i*w;r.set(n,w);var O=o.Utils.Array.range(0,3).map((function(t){return new Up({text:u[t],fontIdentifier:s})}));O[0].fitWidth(_),O[1].fitWidth(_),O[2].fitWidth(b);var S=e===a.Orientations.Left?0:b,k=[S,S,e===a.Orientations.Left?_:0],T=[0,O[0].getSizeValue().height+x,0],E=O.map((function(t,e){return new Eh(k[e],T[e],t.getSizeValue().width,t.getSizeValue().height)}));return O.map((function(t,e){return new eh({text:u[e],font:O[e],frame:E[e]})}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Sp);function Rh(t){return(Rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ph(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ih(t,e){return(Ih=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ah(t,e){return!e||"object"!==Rh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fh(t){return(Fh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Th(Ch,"Orientations",{Right:"RIGHT",Left:"LEFT"}),Ch.prototype.availableOptions=wh(wh({},Sp.prototype.availableOptions),{},{orientation:{type:o.OptionType.STRING,default:Ch.Orientations.Left,available:[Ch.Orientations.Right,Ch.Orientations.Left]},relativeRowOffset:{type:o.OptionType.NUMBER,default:.05}});var jh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ih(t,e)}(s,t);var e,n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fh(i);if(o){var n=Fh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ah(this,t)});function s(){return Dh(this,s),a.apply(this,arguments)}return e=s,r=[{key:"Small",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new Jf(.05,.2,.05,.2)})}},{key:"Rectangle",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new Jf(.05,.05,.05,.05),needsImageSmoothingFix:!0})}},{key:"Celebrate1",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Jf(.05,.2,.05,.2)})}},{key:"Celebrate2",get:function(){return new s({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new Jf(.05,.2,.05,.2)})}}],(n=[{key:"insetsForWidth",value:function(t){return this.getRelativeInsets().clone().scale(t)}}])&&Ph(e.prototype,n),r&&Ph(e,r),s}(o.Configurable);function Mh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return zh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zh(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}jh.prototype.availableOptions={image:{type:o.OptionType.IMAGE,default:null},imagePath:{type:o.OptionType.STRING,default:null},relativeInsets:{type:o.OptionType.OBJECT,default:new Jf},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:o.OptionType.BOOLEAN,default:!1}};var Lh=o.Math.Rectangle,Bh=o.Math.Vector2,Nh=function(t,e,n,r){t.drawImage(e,n.x,n.y,n.width,n.height,r.x,r.y,r.width,r.height)},Uh=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.save(),t.fillStyle=n.toRGBA(),t.globalCompositeOperation=r,t.fillRect(e.x,e.y,e.width,e.height),i&&(t.strokeStyle=n.toRGBA(),t.strokeWith=1,t.strokeRect(e.x,e.y,e.width,e.height)),t.restore()},Wh=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-over",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];t.save(),t.fillStyle=r.toRGBA(),t.globalCompositeOperation=i,n=Math.min(Math.max(n,0),.5*Math.min(e.height,e.width));var a=e.x,s=e.x+e.width,l=e.y,u=e.y+e.height;t.beginPath(),t.moveTo(a+n,l),t.arcTo(s,l,s,u,n),t.arcTo(s,u,a,u,n),t.arcTo(a,u,a,l,n),t.arcTo(a,l,s,l,n),t.closePath(),t.fill(),o&&t.stroke(),t.restore()},Hh=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;t.save(),t.strokeStyle=n.toRGBA(),t.lineWidth=r,t.strokeRect(e.x,e.y,e.width,e.height),t.restore()},Vh=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over";t.save();var i=e.height/2,o=e.y+i,a=e.x+i,s=e.x+e.width;for(t.fillStyle=n.toRGBA(),t.globalCompositeOperation=r;a<s;)t.beginPath(),t.arc(a,o,i,0,2*Math.PI),t.fill(),a+=4*i;t.restore()},Gh=function(t,e){var n=e.applyToRectangle(t),r=t.x,i=t.y,o=t.width,a=t.height;return{corners:[Lh.FromDiagonalPoints(new Bh(0,0),new Bh(n.x,n.y)),Lh.FromDiagonalPoints(new Bh(0,n.y+n.height),new Bh(n.x,a)),Lh.FromDiagonalPoints(new Bh(n.x+n.width,n.y+n.height),new Bh(o,a)),Lh.FromDiagonalPoints(new Bh(n.x+n.width,0),new Bh(o,n.y))].map((function(t){return t.translate(r,i)})),bars:[Lh.FromDiagonalPoints(new Bh(n.x,0),new Bh(n.x+n.width,n.y)),Lh.FromDiagonalPoints(new Bh(0,n.y),new Bh(n.x,n.y+n.height)),Lh.FromDiagonalPoints(new Bh(n.x,n.y+n.height),new Bh(n.x+n.width,a)),Lh.FromDiagonalPoints(new Bh(n.x+n.width,n.y),new Bh(o,n.y+n.height))].map((function(t){return t.translate(r,i)})),center:n}},Zh=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-atop";if(t.save(),r&&(t.globalAlpha=r.a),t.drawImage(e,n.x,n.y,n.width,n.height),r&&(t.globalAlpha=1),r){var o=r.clone();o.a=1,Uh(t,n,o,i)}t.restore()};function Xh(t){return(Xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qh(Object(n),!0).forEach((function(e){Kh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jh(t,e,n){return(Jh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ed(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $h(t,e){return($h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function td(t,e){return!e||"object"!==Xh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ed(t){return(ed=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$h(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ed(n);if(r){var i=ed(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return td(this,t)});function a(){return Qh(this,a),i.apply(this,arguments)}return(e=[{key:"_getTextColor",value:function(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(o.Color.WHITE)?o.Color.BLACK:o.Color.WHITE:this.getAttributes().getTextColor().clone()}},{key:"_getTextFrame",value:function(){return this.getImageInsets().applyToRectangle(this._getFrame())}},{key:"_getTextFrameForElement",value:function(t){var e=Jh(ed(a.prototype),"_getTextFrameForElement",this).call(this,t),n=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(e.y-=n.top),e}},{key:"willRender",value:function(t){this.getAttributes().setTextColor(this._getTextColor());var e=this.getImage();if(e){var n=this.getCapInsets(),r=this._getFrame();n&&!n.equals(Jf.ZERO)?function(t,e,n,r){var i=e.naturalWidth||e.width,a=e.naturalHeight||e.height,s=Gh(new Lh(0,0,i,a),r),l=Gh(n,r);Nh(t,e,s.center,l.center),o.Utils.Array.zip(s.corners,l.corners).forEach((function(n){var r=Mh(n,2),i=r[0],o=r[1];return Nh(t,e,i,o)})),o.Utils.Array.zip(s.bars,l.bars).forEach((function(n){var r=Mh(n,2),i=r[0],o=r[1];return Nh(t,e,i,o)}))}(t,e,r,n):t.drawImage(e,r.x,r.y,r.width,r.height),Uh(t,r,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e&&(t.save(),t.globalCompositeOperation="destination-out")}},{key:"didRender",value:function(t){Jh(ed(a.prototype),"didRender",this).call(this,t),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(ch);function rd(t){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function id(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function od(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?id(Object(n),!0).forEach((function(e){dd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):id(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ad(t){return function(t){if(Array.isArray(t))return sd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return sd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sd(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ld(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ud(t,e,n){return(ud="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cd(t,e){return(cd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fd(t,e){return!e||"object"!==rd(e)&&"function"!=typeof e?pd(t):e}function pd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hd(t){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nd.prototype.availableOptions=Yh(Yh({},ch.prototype.availableOptions),{},{image:{type:o.OptionType.IMAGE,default:null},capInsets:{type:o.OptionType.OBJECT,default:new Jf},backgroundColor:{type:o.OptionType.COLOR,default:o.Color.WHITE},autoAdjustTextColor:{type:o.OptionType.BOOLEAN,default:!0},isMasked:{type:o.OptionType.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:o.OptionType.BOOLEAN,default:!1}});var yd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cd(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=hd(n);if(r){var i=hd(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return fd(this,t)});function a(){var t;ld(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return dd(pd(t=i.call.apply(i,[this].concat(n))),"getImagePaths",(function(){var e=t.getBanderoles();return e&&e.map((function(t){return t.getImagePath()}))||[]})),dd(pd(t),"onImagesLoaded",(function(){var e=t.getBanderoles();e&&e.forEach((function(t){var e=Ip.getImage(t.getImagePath());e?t.setImage(e):o.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '".concat(t.getImagePath(),"'"))}))})),t._rowTypeLessThan3WordsRandomizer=new Zf(0),t._rowTypeMoreThan3WordsRandomizer=new Zf(0),t._banderolesRandomizer=new Zf(0),t._seedPool=[].concat(ad(t._seedPool),[t._rowTypeLessThan3WordsRandomizer,t._rowTypeMoreThan3WordsRandomizer,t._banderolesRandomizer]),t}return(e=[{key:"_modifiedText",value:function(t){return ud(hd(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"generateLayoutData",value:function(t,e){return this._options.hasMaskedText=!1,ud(hd(a.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_randomLayoutRow",value:function(t,e,n,r){if(t.size()<3){var i=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(t,n,r,i)}var o=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(o){case 0:return new Ch({words:t,width:n,attributes:r,orientation:Ch.Orientations.Left});case 1:return new Ch({words:t,width:n,attributes:r,orientation:Ch.Orientations.Right});case 2:return this._layoutRow(t,n,r,!0);case 3:return new ch({words:t,width:n,attributes:r});default:throw new Error("TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ".concat(o,"."))}}},{key:"_layoutRow",value:function(t,e,n,r){if(this.getHasMaskedText()&&(r=!1),r){this.setHasMaskedText(!0);var i=this._banderolesRandomizer.pickNext(this.getBanderoles()),a=new nd({words:t,width:e,attributes:new vp({alignment:"left",fontIdentifier:i.getFontIdentifier()}),image:i.getImage(),imageInsets:i.insetsForWidth(e),capInsets:null,backgroundColor:o.Color.WHITE});return i.getNeedsImageSmoothingFix()&&(a.serverImageSmoothingFix=!0),a}return new ch({words:t,width:e,attributes:n})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);function gd(t){return(gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function md(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?md(Object(n),!0).forEach((function(e){Sd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _d(t,e,n){return(_d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Od(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function wd(t,e){return(wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xd(t,e){return!e||"object"!==gd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Od(t){return(Od=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}dd(yd,"defaultFontIdentifiers",["imgly_font_campton_bold"]),dd(yd,"identifier","imgly_text_design_blocks"),dd(yd,"defaultBanderoles",[jh.Rectangle,jh.Small]),yd.prototype.availableOptions=od(od({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:yd.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025/3},hasMaskedText:{type:o.OptionType.BOOLEAN,default:!1},banderoles:{type:o.OptionType.ARRAY,default:yd.defaultBanderoles}});var kd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Od(n);if(r){var i=Od(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return xd(this,t)});function o(){var t;bd(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._exclusiveFont=null,t}return(e=[{key:"generateLayoutData",value:function(t,e){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),_d(Od(o.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_fontForRow",value:function(t,e){return this._exclusiveFont||_d(Od(o.prototype),"_fontForRow",this).call(this,t,e)}},{key:"_layoutRow",value:function(t,e,n,r){return new ch({words:t,width:e,attributes:n})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(yd);function Td(t){return(Td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ed(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Cd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ed(Object(n),!0).forEach((function(e){Ad(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ed(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dd(t,e){return(Dd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pd(t,e){return!e||"object"!==Td(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Id(t){return(Id=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ad(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Sd(kd,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]),Sd(kd,"identifier","imgly_text_design_blocks_condensed"),kd.prototype.availableOptions=vd(vd({},yd.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:kd.defaultFontIdentifiers}});var Fd=o.Math.Rectangle,jd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Id(n);if(r){var i=Id(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Pd(this,t)});function o(){var t;Rd(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).setSize(new ap(t.getWidth(),t.getHeight())),t}return(e=[{key:"_calculateLayoutElements",value:function(){return[new eh({frame:this._getTextFrame()})]}},{key:"render",value:function(t){var e=this._getFrame(),n=this.getType(),r=this.getAttributes().getTextColor(),i=e.height/3,a=new Fd(e.x,e.y,e.width,i),s=new Fd(e.x,e.y+2*i,e.width,i);switch(n){case o.FormType.Rect:Uh(t,e,r);break;case o.FormType.DoubleRect:Uh(t,a,r),Uh(t,s,r);break;case o.FormType.DoubleRectFirstPunctuated:Vh(t,a,r),Uh(t,s,r);break;case o.FormType.DoubleRectSecondPunctuated:Uh(t,a,r),Vh(t,s,r);break;case o.FormType.LongLine:var l=e.height/2,u=new Fd(e.x,e.y,e.width,l);Wh(t,u,.5*u.height,r);break;case o.FormType.LongAndShortLine:var c=.2*e.height,f=.75*c;a=new Fd(e.x,e.y+c,e.width,c);var p=e.x+.25*e.width,h=e.y+e.height-f;s=new Fd(p,h,.5*e.width,f),Wh(t,a,.5*a.height,r),Wh(t,s,.5*s.height,r)}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Sp);function Md(t){return(Md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ld(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zd(Object(n),!0).forEach((function(e){Gd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ud(t,e,n){return(Ud="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wd(t,e){return(Wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hd(t,e){return!e||"object"!==Md(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vd(t){return(Vd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ad(jd,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"}),jd.prototype.availableOptions=Cd(Cd({},Sp.prototype.availableOptions),{},{height:{type:o.OptionType.NUMBER,default:100},type:{type:o.OptionType.STRING,default:jd.FormType.Rect,available:o.Utils.values(jd.FormType)}});var Zd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vd(n);if(r){var i=Vd(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Hd(this,t)});function o(){return Nd(this,o),i.apply(this,arguments)}return(e=[{key:"_layoutRow",value:function(t,e,n,r){return new ch({words:t,width:e,attributes:n})}},{key:"_layoutRows",value:function(t,e){var n=Ud(Vd(o.prototype),"_layoutRows",this).call(this,t,e),r=.08*e,i=new jd({width:e,height:.032*e,type:jd.FormType.LongLine,shearingAngle:0}).layout(),a=new jd({width:e,height:r,type:jd.FormType.LongAndShortLine,shearingAngle:0}).layout();return[i].concat(function(t){return function(t){if(Array.isArray(t))return Bd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Bd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bd(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n),[a])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(yd);function Xd(t){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qd(Object(n),!0).forEach((function(e){ty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qd(t,e){return(Qd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jd(t,e){return!e||"object"!==Xd(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $d(t){return($d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Gd(Zd,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),Gd(Zd,"identifier","imgly_text_design_blocks_light"),Zd.prototype.availableOptions=Ld(Ld({},yd.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Zd.defaultFontIdentifiers}});var ey=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qd(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$d(n);if(r){var i=$d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Jd(this,t)});function o(){return Kd(this,o),i.apply(this,arguments)}return(e=[{key:"_layoutRows",value:function(t,e){var n=this;return t.map((function(t,r){return n._randomLayoutRow(t,r,e,new vp({fontIdentifier:n._fontForRow(r,t)})).layout()}))}},{key:"_layoutRow",value:function(t,e,n,r){return new ch({words:t,width:e,attributes:n})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Zd);function ny(t){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ry(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function iy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ry(Object(n),!0).forEach((function(e){cy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ry(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ay(t,e,n){return(ay="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function sy(t,e){return(sy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ly(t,e){return!e||"object"!==ny(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uy(t){return(uy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ty(ey,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),ty(ey,"identifier","imgly_text_design_blocks_light-v3_1_0"),ey.prototype.availableOptions=Yd(Yd({},Zd.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:ey.defaultFontIdentifiers}});var fy=o.Math.Rectangle,py=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sy(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uy(n);if(r){var i=uy(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return ly(this,t)});function o(){return oy(this,o),i.apply(this,arguments)}return(e=[{key:"getImageSize",value:function(){var t=this.getLeftImage(),e=this.getRightImage(),n=this.getWords(),r=this.getAttributes().getFontIdentifier(),i=t?new ap(t.width,t.height):new ap,o=n.joined(1)[0];if(!o)return i;var a=new Up({text:o,fontIdentifier:r,fontSize:50}).getSizeValue(),s=e?2:1;i.scale(s,1);var l=i.clone().fitInWidthWithOther(this._getFrame().width,a);return l.scale(1/s,1),l}},{key:"_getTextFrame",value:function(){var t=ay(uy(o.prototype),"_getTextFrame",this).call(this).clone(),e=this.getImageSize(),n=this.getRightImage(),r=this.getImagePosition();return n?(t.x+=e.width,t.width-=2*e.width):r===o.ImagePosition.Left&&(t.x+=e.width),t}},{key:"_calculateLayoutElements",value:function(){var t=ay(uy(o.prototype),"_calculateLayoutElements",this).call(this),e=this._getFrame(),n=this.getRightImage(),r=this.getImageSize(),i=this.getImagePosition(),a=this._getTextFrame(),s=this.getAttributes().getFontIdentifier(),l=new Up({text:"stickerClock",fontIdentifier:s});l.fitWidth(this._getTextFrame().width);var u=(new fy).set(e.x,e.y,r.width,r.height);if(n||i!==o.ImagePosition.Right||(u.x+=a.width),t.push(new eh({text:"stickerClock",frame:u,font:l})),n){var c=t[0];if(c){var f=u.clone();f.translate(c.getFrame().width+f.width,0),t.push(new eh({text:"stickerClock",frame:f,font:l}))}}return t}},{key:"render",value:function(t){var e=this._getLayoutElements(),n=this.getAttributes(),r=n.getTextColor(),i=this.getLeftImage(),o=this.getRightImage(),a=e[0],s=e[1],l=a.serializeOptions().font,u=this._getTextFrameForElement(a);if(l.draw(t,u.x,u.y,{textColor:n.getTextColor().toRGBA(),alignment:n.getAlignment()}),i){var c=s.getFrame();t.drawImage(i,c.x,c.y,c.width,c.height),Uh(t,c,r,"source-atop")}if(e.length>2){var f=e[2].getFrame().clone();t.drawImage(o,f.x,f.y,f.width,f.height),Uh(t,f,r,"source-atop")}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(ch);function hy(t){return(hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dy(Object(n),!0).forEach((function(e){wy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function my(t,e,n){return(my="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function vy(t,e){return(vy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function by(t,e){return!e||"object"!==hy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _y(t){return(_y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}cy(py,"ImagePosition",{Left:"LEFT",right:"RIGHT"}),py.prototype.availableOptions=iy(iy({},ch.prototype.availableOptions),{},{leftImage:{type:o.OptionType.IMAGE,default:null},rightImage:{type:o.OptionType.IMAGE,default:null},imagePosition:{type:o.OptionType.STRING,default:py.ImagePosition.Left,available:[py.ImagePosition.Left,py.ImagePosition.Right]}});var xy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vy(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_y(n);if(r){var i=_y(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return by(this,t)});function a(){return gy(this,a),i.apply(this,arguments)}return(e=[{key:"_fontForRow",value:function(t,e){var n=this.getFontIdentifiers();return n[t%n.length]}},{key:"_minimumNumberOfLines",value:function(t){return Math.max(Math.floor(.7*my(_y(a.prototype),"_minimumNumberOfLines",this).call(this,t)),1)}},{key:"_maximumNumberOfLines",value:function(t){return Math.max(Math.floor(t.countNumberOfCharacters()/5),1)}},{key:"_randomLayoutRow",value:function(t,e,n,r){return this._createSingleRow(a.RowType.Single,t,n,r)}},{key:"_createSingleRow",value:function(t,e,n,r){var i=r.getFontIdentifier(),s="imgly_font_amberlight"===i||"imgly_font_handycheera_regular"===i?(new np).set(e.getLowerCase()):e;switch(t){case a.RowType.Single:return new ch({words:s,width:n,attributes:r});case a.RowType.SingleImage:return new py({words:s,width:n,attributes:r});default:return o.Log.warn("TextDesignCelebrate#_createSingleRow: Invalid row type '".concat(t,"'")),null}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(yd);function Oy(t){return(Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ky(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sy(Object(n),!0).forEach((function(e){Dy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ty(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ey(t,e){return(Ey=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cy(t,e){return!e||"object"!==Oy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ry(t){return(Ry=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}wy(xy,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]),wy(xy,"defaultBanderoles",[jh.Celebrate1,jh.Celebrate2]),wy(xy,"identifier","imgly_text_design_celebrate"),wy(xy,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"}),xy.prototype.availableOptions=yy(yy({},yd.prototype.availableOptions),{},{relativeLineSpacing:{type:o.OptionType.NUMBER,default:.01875},fontIdentifiers:{type:o.OptionType.ARRAY,default:xy.defaultFontIdentifiers},banderoles:{type:o.OptionType.ARRAY,default:xy.defaultBanderoles}});var Py=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ey(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ry(n);if(r){var i=Ry(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Cy(this,t)});function o(){var t;Ty(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n))).setSize(new ap(t.getWidth(),t.getHeight())),t}return(e=[{key:"_getImageFrame",value:function(){var t=this._getTextFrame().clone(),e=this.getImage();if(this.getDrawingModeAspectFit()&&e){var n=Math.min(t.width/e.width,t.height/e.height),r=e.width*n,i=e.height*n;t.x+=(t.width-r)/2,t.y+=(t.height-i)/2,t.width=r,t.height=i}return t}},{key:"_calculateLayoutElements",value:function(){return[new eh({text:"",frame:this._getImageFrame(),font:new Up})]}},{key:"render",value:function(t){var e=this.getImage(),n=this._getImageFrame(),r=this.getAttributes().getTextColor();Zh(t,e,n,r)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Sp);function Iy(t){return(Iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ay(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ay(Object(n),!0).forEach((function(e){Hy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jy(t){return function(t){if(Array.isArray(t))return My(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return My(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?My(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function My(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ly(t,e,n){return(Ly="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function By(t,e){return(By=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ny(t,e){return!e||"object"!==Iy(e)&&"function"!=typeof e?Uy(t):e}function Uy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wy(t){return(Wy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Dy(Py,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"}),Py.prototype.availableOptions=ky(ky({},Sp.prototype.availableOptions),{},{words:{type:o.OptionType.OBJECT,default:new np},height:{type:o.OptionType.NUMBER,default:0},image:{type:o.OptionType.IMAGE,default:null},imagePath:{type:o.OptionType.STRING,default:Py.RowImages.decorative1},drawingModeAspectFit:{type:o.OptionType.BOOLEAN,default:!1},attributes:{type:o.OptionType.CONFIGURABLE,default:new vp}});var Vy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&By(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wy(n);if(r){var i=Wy(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Ny(this,t)});function a(){var t;zy(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Hy(Uy(t=i.call.apply(i,[this].concat(n))),"getImagePaths",(function(){var e=t.getBanderoles();return[].concat(jy(e&&e.map((function(t){return t.getImagePath()}))||[]),jy(t._celebrateTypes))})),Hy(Uy(t),"onImagesLoaded",(function(){var e=t.getBanderoles();e&&e.forEach((function(t){var e=Ip.getImage(t.getImagePath());e?t.setImage(e):o.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '".concat(t.getImagePath(),"'"))}))})),t._celebrateTypes=[Py.RowImages.celebrate1,Py.RowImages.celebrate2,Py.RowImages.celebrate3],t._exclusiveFont=null,t._typeRandomizer=new Zf(0),t._useMaskedRandomizer=new Zf(0),t._seedPool.push(t._typeRandomizer),t._seedPool.push(t._useMaskedRandomizer),t}return(e=[{key:"_fontForRow",value:function(t,e){var n=this.getFontIdentifiers();return n[t%(n.length-1)]}},{key:"_layoutRows",value:function(t,e){var n=this._typeRandomizer.pickNext(this._celebrateTypes),r=Ip.getImage(n);r||o.Log.warn("TextDesignCelebrateSimple#_layoutRows: Image not fount '".concat(n,"'"));var i=new Py({width:e,height:.5*e,drawingModeAspectFit:!0,image:r}).layout(),s=Ly(Wy(a.prototype),"_layoutRows",this).call(this,t,e);return[i].concat(jy(s))}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=t.countNumberOfCharacters();i<4&&r.setFontIdentifier("imgly_font_rasa_regular");var o=this._useMaskedRandomizer.nextBool(2,1);return i<13&&o&&!this.getHasMaskedText()?this._layoutRow(t,n,r,!0):Ly(Wy(a.prototype),"_randomLayoutRow",this).call(this,t,e,n,r)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(xy);function Gy(t){return(Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xy(t,e){return(Xy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qy(t,e){return!e||"object"!==Gy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yy(t){return(Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Hy(Vy,"identifier","imgly_text_design_celebrate_simple"),Hy(Vy,"defaultFontIdentifiers",["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"]),Vy.prototype.availableOptions=Fy(Fy({},xy.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Vy.defaultFontIdentifiers}});var Ky=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xy(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yy(n);if(r){var i=Yy(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return qy(this,t)});function a(){return Zy(this,a),i.apply(this,arguments)}return(e=[{key:"render",value:function(t,e,n,r,i){o.Log.warn("TextDesignBackground#render: Abstract class")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Qy(t){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $y(t,e){return($y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tg(t,e){return!e||"object"!==Qy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eg(t){return(eg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Ky.prototype.availableOptions={};var ng=o.Math.Rectangle,rg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$y(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=eg(n);if(r){var i=eg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return tg(this,t)});function o(){return Jy(this,o),i.apply(this,arguments)}return(e=[{key:"getImagePaths",value:function(){var t=this._options;return[t.topImagePath,t.bottomImagePath,t.leftImagePath,t.rightImagePath].filter((function(t){return""!==t}))}},{key:"render",value:function(t,e,n,r,i){var o=n.clone().scale(e.width),a=e.rectangle(0,0),s=Ip.getImage(this.getTopImagePath()),l=Ip.getImage(this.getLeftImagePath()),u=Ip.getImage(this.getRightImagePath()),c=Ip.getImage(this.getBottomImagePath());if(s){var f=s.width/s.height,p=o.top*this.getTopImageFillRate(),h=p*f,d=a.width/2,y=new ng(d-h/2,0,h,p);Zh(t,s,y,r)}if(c){var g=c.width/c.height,m=o.bottom*this.getBottomImageFillRate(),v=m*g,b=a.width/2,_=new ng(b-v/2,a.height-m,v,m);Zh(t,c,_,r)}if(l){var w=l.width/l.height,x=o.left*this.getLeftImageFillRate(),O=x/w,S=a.height/2,k=new ng(0,S-O/2,x,O);Zh(t,l,k,r)}if(u){var T=u.width/u.height,E=o.right*this.getRightImageFillRate(),C=E/T,R=a.height/2-C/2,D=new ng(a.width-E,R,E,C);Zh(t,u,D,r)}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Ky);function ig(t){return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function og(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ag(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?og(Object(n),!0).forEach((function(e){pg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):og(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lg(t,e,n){return(lg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ug(t,e){return(ug=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cg(t,e){return!e||"object"!==ig(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fg(t){return(fg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}rg.prototype.availableOptions={topImagePath:{type:o.OptionType.STRING,default:""},leftImagePath:{type:o.OptionType.STRING,default:""},bottomImagePath:{type:o.OptionType.STRING,default:""},rightImagePath:{type:o.OptionType.STRING,default:""},topImageFillRate:{type:o.OptionType.NUMBER,default:1},leftImageFillRate:{type:o.OptionType.NUMBER,default:1},bottomImageFillRate:{type:o.OptionType.NUMBER,default:1},rightImageFillRate:{type:o.OptionType.NUMBER,default:1}},rg.Backgrounds=[new rg({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new rg({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new rg({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new rg({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})];var hg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ug(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fg(n);if(r){var i=fg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return cg(this,t)});function a(){var t;sg(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(.1,.1,.1,.1),t._alreadyContainsARowWithScriptFont=!1,t._backgroundsRandomizer=new Zf(0),t._seedPool.push(t._backgroundsRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return o.Utils.Array.flatten(rg.Backgrounds.map((function(t){return t.getImagePaths()})))}},{key:"_getBackground",value:function(){return this._backgroundsRandomizer.pickNext(rg.Backgrounds)}},{key:"generateLayoutData",value:function(t,e){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),lg(fg(a.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_modifiedText",value:function(t){return lg(fg(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_fontForRow",value:function(t,e){var n=lg(fg(a.prototype),"_fontForRow",this).call(this,t,e);return"imgly_font_petit_formal_script"===n&&(this._alreadyContainsARowWithScriptFont&&(n="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),n}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i="imgly_font_petit_formal_script"===r.getFontIdentifier();return new ch({words:i?(new np).set(t.getLowerCase()):t,width:n,attributes:r})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);function dg(t){return(dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yg(Object(n),!0).forEach((function(e){wg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vg(t,e){return(vg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bg(t,e){return!e||"object"!==dg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _g(t){return(_g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}pg(hg,"identifier","imgly_text_design_equal_width"),pg(hg,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]),hg.prototype.availableOptions=ag(ag({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:hg.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025}});var xg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vg(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_g(n);if(r){var i=_g(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return bg(this,t)});function o(){var t;mg(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf,t}return(e=[{key:"_getBackground",value:function(){return null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(hg);function Og(t){return(Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kg(t,e){return(kg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tg(t,e){return!e||"object"!==Og(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Eg(t){return(Eg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}wg(xg,"defaultFontIdentifiers",["imgly_font_ultra"]),wg(xg,"identifier","imgly_text_design_equal_width_fat"),xg.prototype.availableOptions=gg(gg({},hg.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:xg.defaultFontIdentifiers}});var Cg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kg(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Eg(n);if(r){var i=Eg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tg(this,t)});function o(){return Sg(this,o),i.apply(this,arguments)}return(e=[{key:"insetsForWidth",value:function(t){return this.getRelativeInsets().clone().scale(t)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function Rg(t){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dg(Object(n),!0).forEach((function(e){Ig(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ig(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ag(t,e,n){return(Ag="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Fg(t,e){return(Fg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jg(t,e){return!e||"object"!==Rg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mg(t){return(Mg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Cg.prototype.availableOptions={imagePath:{type:o.OptionType.STRING,default:""},minimumHeightRatio:{type:o.OptionType.NUMBER,default:0},sizeToFitContent:{type:o.OptionType.BOOLEAN,default:!0},capInsets:{type:o.OptionType.OBJECT,default:new Jf},relativeInsets:{type:o.OptionType.OBJECT,default:new Jf}},Cg.Box=new Cg({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new Jf(.1,.1,.1,.1)}),Cg.Badge1=new Cg({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Cg.Badge2=new Cg({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Cg.Badge3=new Cg({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Cg.Badge4=new Cg({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new Jf(.3,.18,.2,.18)}),Cg.SpeechBubble1=new Cg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new Jf(.04,.07,.12,.07),capInsets:new Jf(57,171,123,51)}),Cg.SpeechBubble2=new Cg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new Jf(.04,.07,.12,.07),capInsets:new Jf(6,105,87,15)}),Cg.SpeechBubble3=new Cg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new Jf(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),Cg.SpeechBubble4=new Cg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new Jf(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),Cg.SpeechBubble5=new Cg({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new Jf(.114892823,.27,.15984926,.27)}),Cg.Watercolor1=new Cg({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new Jf(.2,.25,.2,.25)}),Cg.Watercolor2=new Cg({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new Jf(.08,.25,.3,.25)}),Cg.Watercolor3=new Cg({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new Jf(.1,.2,.15,.2)});var zg=o.Math.Vector2,Lg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fg(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mg(n);if(r){var i=Mg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jg(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._textOptions={},e._createCanvas(),e}return(e=[{key:"_createCanvas",value:function(){this._canvas=o.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new Pf(this._context),this._finalCanvas=o.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}},{key:"setOption",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ag(Mg(a.prototype),"setOption",this).call(this,t,e,n,r),"fontIdentifier"!==t||r||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var t=Ip.getVariation(this.getFontIdentifier());return t||o.Log.warn("TextDesignFont: Unable to find font '".concat(this._fontIdentifier,"'")),this.setFontVariation(t),t}},{key:"_applyTextOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._context,n=Pg(Pg({},this._options),t),r=n.fontSize,i=n.fontVariation,o=(n.lineHeight,n.textColor),a=n.alignment,s=i.serializeOptions(),l=s.fontStyle,u=s.fontWeight,c=s.fontFamily;e.font=l+" "+u+" "+r+'px "'+c+'"',e.fillStyle=o,e.textBaseline="top",e.textAlign=a||"left"}},{key:"_buildOutputLines",value:function(t){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(t,e){var n=this.getAlignment(),r=new zg(0,e);switch(n){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y)}},{key:"update",value:function(){var t=this.calculateFontStyles();if(t){var e=this._calculateText(t),n=e.dimensions,r=e.lines;this._dimensions=n,this._renderText(n,r,t)}}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.update(),t.drawImage(this._canvas,e,n,this._dimensions.x,this._dimensions.y)}},{key:"_renderText",value:function(t,e,n){this._canvas.width=t.x,this._canvas.height=t.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(n,this._context);for(var r=0;r<e.length;r++){var i=e[r];this._renderTextLine(i,n.topPadding+n.lineHeight*r)}}},{key:"getFontFamily",value:function(){return this.getFontVariation().getFontFamily()}},{key:"calculateFontStyles",value:function(){var t=this.getFontFamily(),e=this.getFontSize(),n=this.getAbsoluteTextHeight(),r={fontFamily:t,fontSize:e,textHeight:n,lineHeight:n*this.getLineHeight(),topPadding:n*(this.getLineHeight()-1)/2};return this._textOptions=Pg({},r),r}},{key:"getTextMetrics",value:function(){return this.getFontVariation().getTextMetrics()}},{key:"getAbsoluteTextHeight",value:function(){var t=this.getFontSize(),e=this.getTextMetrics();if(e){var n=1/e.unitsPerEm*t,r=e.ascender*n,i=e.descender*n;return r+Math.abs(i)}return t*this.getLineHeight()*1.1}},{key:"_calculateText",value:function(t){this._applyTextOptions(t,this._context);for(var e=new zg,n=this.getText().split("\n"),r=0;r<n.length;r++){var i=n[r];e.x=Math.max(e.x,this._context.measureText(i).width)}var o=t.lineHeight;return e.y=n.length*o,{dimensions:e,lines:n}}},{key:"getDimensions",value:function(){var t=this.calculateFontStyles();return this._calculateText(t).dimensions}},{key:"fitMaxHeight",value:function(){this.update();var t=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),t.y}},{key:"fitMaxWidth",value:function(){var t=this.getDimensions().x,e=this.getMaxWidth()/t;this.setFontSize(this.getFontSize()*e),this._textOptions.fontSize=this.getFontSize()}},{key:"fitInFrame",value:function(t){this.setMaxWidth(t.width),this.setMaxHeight(t.height),this.fitMaxWidth(),this.fitMaxHeight()}},{key:"getSize",value:function(){var t=this.getDimensions();return new ap(t.x,t.y)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Configurable);function Bg(t){return(Bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ng(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ug(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ng(Object(n),!0).forEach((function(e){Wg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ng(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vg(t,e){return(Vg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gg(t,e){return!e||"object"!==Bg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zg(t){return(Zg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Lg.prototype.availableOptions={text:{type:o.OptionType.STRING,default:""},fontIdentifier:{type:o.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:o.OptionType.OBJECT,default:null},lineHeight:{type:o.OptionType.NUMBER,default:1},fontSize:{type:o.OptionType.NUMBER,default:22},textColor:{type:o.OptionType.STRING,default:"black"},strokeStyle:{type:o.OptionType.STRING,default:"black"},outlineWidth:{type:o.OptionType.NUMBER,default:0},textBaseline:{type:o.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:o.OptionType.BOOLEAN,default:!0},maxWidth:{type:o.OptionType.NUMBER,default:100},maxHeight:{type:o.OptionType.NUMBER,default:0},alignment:{type:o.OptionType.STRING,default:"left",available:["left","center","right"]}};var Xg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vg(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zg(n);if(r){var i=Zg(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Gg(this,t)});function o(){return Hg(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateLayoutElements",value:function(){var t=this.getWords(),e=this._getTextFrame(),n=this.getAttributes().getFontIdentifier(),r=this.getImageInsets(),i=new Up({text:t.getWord(0),fontIdentifier:n});i.fitWidth(e.width);var o=new eh({text:t.getWord(0),frame:e,font:i});o.setFrame(this._getTextFrameForElement(o));var a=this.getSize();return(this.getSizeToFitContent()||a.height<=1)&&(a.height=r.top+o.getFrame().height+r.bottom),a.height=Math.max(a.height,this.getMinimumHeight()),[o]}},{key:"_getTextFrameForElement",value:function(t){var e=this.getWords().getWord(0),n=this.getAttributes(),r=n.getFontIdentifier(),i=this.getImageInsets(),o=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),a=new Lg({text:e,fontIdentifier:r,alignment:n.getAlignment(),lineHeight:1});a.fitInFrame(o);var s=a.getSize();o.height=s.height;var l=s.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(l+=i.top+i.bottom);var u=this._getFrame(),c=n.getAlignment();if(this.getCenteredVertically())o.y=u.height/2-l/2+i.top;else switch(c){case"left":o.y=u.height-l-i.bottom;break;case"center":o.y=u.height/2-l/2+l*this.getCenterOffset(),o.x=(u.width-o.width)/2;break;case"right":o.x=u.width-o.width-i.right}return o}},{key:"render",value:function(t){var e=this;t.save(),this._getLayoutElements().forEach((function(n){var r=n.serializeOptions(),i=r.text,o=r.frame,a=e.getAttributes(),s=a.getFontIdentifier(),l=new Lg({text:i,fontIdentifier:s,alignment:a.getAlignment(),lineHeight:1,textColor:a.getTextColor().toRGBA()});o=e._getTextFrameForElement(n),l.fitInFrame(o),l.draw(t,o.x,o.y)})),t.restore()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(nd);function qg(t){return(qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yg(Object(n),!0).forEach((function(e){nm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jg(t,e,n){return(Jg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=em(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $g(t,e){return($g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tm(t,e){return!e||"object"!==qg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function em(t){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Xg.prototype.availableOptions=Ug(Ug({},nd.prototype.availableOptions),{},{centerOffset:{type:o.OptionType.NUMBER,default:0},sizeToFitContent:{type:o.OptionType.BOOLEAN,default:!1},textScaleFactor:{type:o.OptionType.NUMBER,default:.95},rowScaleFactor:{type:o.OptionType.NUMBER,default:1},minimumHeight:{type:o.OptionType.NUMBER,default:0},centeredVertically:{type:o.OptionType.BOOLEAN,default:!1}});var rm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$g(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=em(n);if(r){var i=em(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return tm(this,t)});function a(){var t;Qg(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._rowType=Cg.Box,t._alignmentRandomizer=new Zf(0),t._isMaskedRandomizer=new Zf(0),t._seedPool.push(t._alignmentRandomizer),t._seedPool.push(t._isMaskedRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return[Cg.Box.getImagePath()]}},{key:"_modifiedText",value:function(t){return Jg(em(a.prototype),"_modifiedText",this).call(this,t).toLowerCase()}},{key:"_modifiedLines",value:function(t){var e=new np;return e.set([t.reduce((function(t,e){return"".concat(t).concat(""===t?"":"\n").concat(e.joined(1)[0])}),"")]),[e]}},{key:"_layoutRows",value:function(t,e){var n=Jg(em(a.prototype),"_layoutRows",this).call(this,t,e),r=n[0];if(r&&this.getSquareLayout()){var i=r.getSize();i.height=i.width}return n}},{key:"getAlignment",value:function(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||a.ValidAlignments)}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=this.getAlignment(),a=this._rowType,s=Ip.getImage(a.getImagePath());r.setAlignment(i);var l=new Xg({words:t,width:n,attributes:r,image:s,imageInsets:a.insetsForWidth(n),capInsets:a.getCapInsets(),backgroundColor:o.Color.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===Cg.Box&&(l.serverImageSmoothingFix=!0);var u=l.getSize();return this.getSquareLayout()?u.height=u.width:u.height=Math.max(u.height,u.width*a.getMinimumHeightRatio()),l}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);function im(t){return(im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function om(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function am(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?om(Object(n),!0).forEach((function(e){pm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):om(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lm(t,e,n){return(lm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function um(t,e){return(um=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cm(t,e){return!e||"object"!==im(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fm(t){return(fm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nm(rm,"defaultFontIdentifiers",["imgly_font_galano_grotesque_bold"]),nm(rm,"Alignment",{Left:"left",Center:"center",Right:"right"}),nm(rm,"ValidAlignments",[rm.Alignment.Left,rm.Alignment.Center,rm.Alignment.Right]),nm(rm,"identifier","imgly_text_design_masked"),rm.prototype.availableOptions=Kg(Kg({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:rm.defaultFontIdentifiers},squareLayout:{type:o.OptionType.BOOLEAN,default:!0}});var hm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&um(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fm(n);if(r){var i=fm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return cm(this,t)});function o(){var t;sm(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._possibleRowTypes=[Cg.Badge1,Cg.Badge2,Cg.Badge3,Cg.Badge4],t._rowTypesRandomizer=new Zf(0),t._isMaskedRandomizer=new Zf(0),t._seedPool.push(t._rowTypesRandomizer),t._seedPool.push(t._isMaskedRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map((function(t){return t.getImagePath()}))}},{key:"_randomLayoutRow",value:function(t,e,n,r){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),r.setLineSpacing(.9);var i=lm(fm(o.prototype),"_randomLayoutRow",this).call(this,t,e,n,r);return i.set({textScaleFactor:.9}),i}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(rm);function dm(t){return(dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ym(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ym(Object(n),!0).forEach((function(e){xm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ym(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vm(t,e,n){return(vm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function bm(t,e){return(bm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _m(t,e){return!e||"object"!==dm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wm(t){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}pm(hm,"defaultFontIdentifiers",["imgly_font_campton_bold"]),pm(hm,"identifier","imgly_text_design_masked_badge"),pm(hm,"ValidAlignments",[rm.Alignment.Center]),hm.prototype.availableOptions=am(am({},rm.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:hm.defaultFontIdentifiers}});var Om=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bm(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wm(n);if(r){var i=wm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return _m(this,t)});function o(){var t;mm(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._possibleRowTypes=[Cg.SpeechBubble1,Cg.SpeechBubble3],t._rowTypesRandomizer=new Zf(0),t._isMaskedRandomizer=new Zf(0),t._seedPool.push(t._rowTypesRandomizer),t._seedPool.push(t._isMaskedRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map((function(t){return t.getImagePath()}))}},{key:"_rowTypes",value:function(t){return this._possibleRowTypes}},{key:"_randomLayoutRow",value:function(t,e,n,r){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(t)),r.setLineSpacing(.9);var i=vm(wm(o.prototype),"_randomLayoutRow",this).call(this,t,e,n,r);return i.set({textScaleFactor:1,minimumHeight:n*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),i}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(rm);function Sm(t){return(Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function km(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?km(Object(n),!0).forEach((function(e){Pm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):km(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Em(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cm(t,e){return(Cm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rm(t,e){return!e||"object"!==Sm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dm(t){return(Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}xm(Om,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]),xm(Om,"identifier","imgly_text_design_masked_speech_bubble"),Om.prototype.availableOptions=gm(gm({},rm.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Om.defaultFontIdentifiers},squareLayout:{type:o.OptionType.BOOLEAN,default:!1},alignment:{type:o.OptionType.STRING,default:"left",available:rm.ValidAlignments}});var Im=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cm(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dm(n);if(r){var i=Dm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Rm(this,t)});function o(){var t;Em(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._possibleRowTypes=[Cg.SpeechBubble2,Cg.SpeechBubble4,Cg.SpeechBubble2,Cg.SpeechBubble4,Cg.SpeechBubble5],t._possibleRowTypesForMin15=t._possibleRowTypes.slice(0,2),t._possibleRowTypesForMax14=t._possibleRowTypes.slice(2),t}return(e=[{key:"_rowTypes",value:function(t){return t.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Om);function Am(t){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fm(Object(n),!0).forEach((function(e){Um(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zm(t,e,n){return(zm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Lm(t,e){return(Lm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bm(t,e){return!e||"object"!==Am(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nm(t){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Um(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Pm(Im,"defaultFontIdentifiers",["imgly_font_permanent_marker"]),Pm(Im,"identifier","imgly_text_design_masked_speech_bubble_comic"),Im.prototype.availableOptions=Tm(Tm({},Om.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Im.defaultFontIdentifiers}});var Wm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lm(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nm(n);if(r){var i=Nm(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Bm(this,t)});function a(){return Mm(this,a),i.apply(this,arguments)}return(e=[{key:"_modifiedText",value:function(t){return zm(Nm(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=this._alignmentRandomizer.pickNext(rm.ValidAlignments);return r.setAlignment(i),new Xg({words:t,width:n,attributes:r,image:null,backgroundColor:o.Color.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(rm);function Hm(t){return(Hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vm(Object(n),!0).forEach((function(e){Km(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xm(t,e){return(Xm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qm(t,e){return!e||"object"!==Hm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ym(t){return(Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Km(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Um(Wm,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]),Um(Wm,"identifier","imgly_text_design_multiline"),Wm.prototype.availableOptions=jm(jm({},rm.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Wm.defaultFontIdentifiers}});var Qm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xm(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ym(e);if(n){var i=Ym(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return qm(this,t)});function i(){var t;Zm(this,i);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=r.call.apply(r,[this].concat(n)))._possibleRowTypes=[Cg.Watercolor1,Cg.Watercolor2,Cg.Watercolor3],t}return i}(Om);function Jm(t){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$m(Object(n),!0).forEach((function(e){uv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ev(t){return function(t){if(Array.isArray(t))return rv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||nv(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nv(t,e){if(t){if("string"==typeof t)return rv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rv(t,e):void 0}}function rv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ov(t,e,n){return(ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function av(t,e){return(av=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sv(t,e){return!e||"object"!==Jm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lv(t){return(lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Km(Qm,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"]),Km(Qm,"identifier","imgly_text_design_watercolor"),Qm.prototype.availableOptions=Gm(Gm({},Om.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Qm.defaultFontIdentifiers},alignment:{type:o.OptionType.STRING,default:rm.Alignment.Center,available:rm.ValidAlignments}});var cv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&av(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lv(n);if(r){var i=lv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return sv(this,t)});function o(){var t;iv(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(0,0,0,0),t._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],t._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],t._lineCount=0,t._decorativeRowCreated=!1,t._useImageRowRandomizer=new Zf(0),t._rowTypeRandomizer=new Zf(0),t._lineDecorativeTypeRandomizer=new Zf(0),t._seedPool.push(t._useImageRowRandomizer),t._seedPool.push(t._rowTypeRandomizer),t._seedPool.push(t._lineDecorativeTypeRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return[].concat(ev(o.DecoratorImages),ev(o.RowImages))}},{key:"_fontForRow",value:function(t,e){var n=this,r=e.countNumberOfCharacters(),i=this.getFontIdentifiers();return r<4?i=i.filter((function(t){return n._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(t)<0})):r<5&&(i=i.filter((function(t){return n._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(t)<0}))),i[t%i.length]}},{key:"_modifiedText",value:function(t){return ov(lv(o.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_modifiedLines",value:function(t){return this._lineCount=t.length,t}},{key:"generateLayoutData",value:function(t,e){return this._decorativeRowCreated=!1,ov(lv(o.prototype),"generateLayoutData",this).call(this,t,e)}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=t;switch(r.getFontIdentifier()){case"imgly_font_wolesbro":i=(new np).set(t.getLowerCase());break;case"imgly_font_permanent_marker":i=(new np).set(t.getUpperCase())}var o=this.getDecorativeRowsInTheMiddleOnly()&&(0===e||e===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||o)return new ch({words:i,width:n,attributes:r});this._decorativeRowCreated=!0;var a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),2!==n.length);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t)||nv(t,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this._randomDecoratorImages()),s=a[0],l=a[1];return new py({words:t,width:n,attributes:r,leftImage:s,rightImage:l})}},{key:"_layoutRows",value:function(t,e){var n=ov(lv(o.prototype),"_layoutRows",this).call(this,t,e);if(!this.getDecorationsVisible())return n;var r=.0625*e,i=new Py({width:e,height:r,image:Ip.getImage(this._rowTypeRandomizer.pickNext(o.RowImages))}).layout(),a=new Py({width:e,height:r,image:Ip.getImage(this._rowTypeRandomizer.pickNext(o.RowImages))}).layout();return[i].concat(ev(n),[a])}},{key:"_randomDecoratorImages",value:function(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?o.DecoratorImages.slice(0,2).map((function(t){return Ip.getImage(t)})):o.DecoratorImages.slice(2).map((function(t){return Ip.getImage(t)}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(vh);function fv(t){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dv(t,e,n){return(dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yv(t,e){return(yv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gv(t,e){return!e||"object"!==fv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mv(t){return(mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}uv(cv,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),uv(cv,"identifier","imgly_text_design_sunshine"),uv(cv,"RowImages",[Py.RowImages.decorative1,Py.RowImages.decorative2,Py.RowImages.decorative3,Py.RowImages.decorative4]),uv(cv,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]),cv.prototype.availableOptions=tv(tv({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:cv.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025/3*4},decorationsVisible:{type:o.OptionType.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:o.OptionType.BOOLEAN,default:!1}});var vv,bv,_v,wv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yv(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mv(n);if(r){var i=mv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return gv(this,t)});function o(){var t;hv(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(0,.3,0,.3),t}return(e=[{key:"_layoutRows",value:function(t,e){var n=dv(mv(o.prototype),"_layoutRows",this).call(this,t,e);if(!this.getDecorationsVisible())return n;var r=new Py({width:e,height:25,image:Ip.getImage(this._rowTypeRandomizer.pickNext(cv.RowImages))}).layout(),i=new Py({width:e,height:25,image:Ip.getImage(this._rowTypeRandomizer.pickNext(cv.RowImages))}).layout();return[r].concat(function(t){return function(t){if(Array.isArray(t))return pv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return pv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pv(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n),[i])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(cv);function xv(t){return(xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ov(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sv(t,e){return(Sv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kv(t,e){return!e||"object"!==xv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tv(t){return(Tv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}_v="imgly_text_design_sunshine-v3_1_0",(bv="identifier")in(vv=wv)?Object.defineProperty(vv,bv,{value:_v,enumerable:!0,configurable:!0,writable:!0}):vv[bv]=_v;var Ev=o.Math.Rectangle,Cv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sv(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Tv(n);if(r){var i=Tv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return kv(this,t)});function o(){return Ov(this,o),i.apply(this,arguments)}return(e=[{key:"getContentFrame",value:function(){var t=this.getFrame().clone(),e=.1*t.width;return t.insetBy(e,e)}},{key:"intersects",value:function(t){return this.getFrame().intersects(t.getFrame())}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Configurable);function Rv(t){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dv(Object(n),!0).forEach((function(e){Iv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Iv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Av(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fv(t,e){return(Fv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jv(t,e){return!e||"object"!==Rv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mv(t){return(Mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Cv.prototype.availableOptions={frame:{type:o.OptionType.OBJECT,default:new Ev}};var zv=o.Math.Rectangle,Lv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fv(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mv(n);if(r){var i=Mv(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jv(this,t)});function o(){var t;Av(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._MAX_TRIES=1e3,t._PRECISION=1e3,t}return(e=[{key:"render",value:function(t,e,n,r,i){var o=this._options,a=o.imagePaths,s=o.relativeParticleSize;if(!(a.length<=0)){var l=e.width/e.height,u=new zv(Math.round(n.left*this._PRECISION),Math.round(n.top*this._PRECISION*l),this._PRECISION,this._PRECISION);u.width-=u.x+Math.round(n.right*this._PRECISION),u.height-=u.y+Math.round(n.bottom*this._PRECISION*l);for(var c=[],f=0,p=0;f<this.getParticleCount()&&p<this._MAX_TRIES;){var h=s/2,d=Math.round(h*this._PRECISION),y=Math.round(h*this._PRECISION*l),g=Math.floor(this._PRECISION)-d,m=Math.floor(this._PRECISION)-y,v=i.nextInRange(d,g),b=i.nextInRange(y,m),_=new zv(v-d,b-y,2*d,2*y);_.intersects(u)||this.hasCollision(c,_)||(c.push(new Cv({frame:_})),f+=1),p+=1}for(var w=0;w<c.length;w++){var x=c[w],O=i.pickNext(a),S=Ip.getImage(O),k=i.nextInRange(140,230)/255,T=e.width/this._PRECISION,E=e.height/this._PRECISION,C=x.getContentFrame();C.x*=T,C.y*=E,C.width*=T,C.height*=E;var R=r.clone();R.a=k,Zh(t,S,C,R,"source-atop")}}}},{key:"hasCollision",value:function(t,e){for(var n=0;n<t.length;n++)if(e.intersects(t[n].getFrame()))return!0;return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(Ky);function Bv(t){return(Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Uv(Object(n),!0).forEach((function(e){Xv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vv(t,e){return(Vv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gv(t,e){return!e||"object"!==Bv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zv(t){return(Zv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Lv.prototype.availableOptions=Pv(Pv({},Ky.prototype.availableOptions),{},{particleCount:{type:o.OptionType.NUMBER,default:50},relativeParticleSize:{type:o.OptionType.NUMBER,default:.08},imagePaths:{type:o.OptionType.ARRAY,default:[]}});var qv,Yv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vv(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Zv(e);if(n){var i=Zv(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Gv(this,t)});function i(){return Hv(this,i),r.apply(this,arguments)}return i}(Lv);function Kv(t){return(Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jv(Object(n),!0).forEach((function(e){ib(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eb(t,e){return(eb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nb(t,e){return!e||"object"!==Kv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rb(t){return(rb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ib(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Xv(Yv,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]),Yv.prototype.availableOptions=Wv(Wv({},Lv.prototype.availableOptions),{},{imagePaths:{type:o.OptionType.ARRAY,default:(qv=Yv.Images,function(t){if(Array.isArray(t))return Nv(t)}(qv)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(qv)||function(t,e){if(t){if("string"==typeof t)return Nv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nv(t,e):void 0}}(qv)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},relativeParticleSize:{type:o.OptionType.NUMBER,default:.12}});var ob=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eb(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=rb(e);if(n){var i=rb(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return nb(this,t)});function i(){return tb(this,i),r.apply(this,arguments)}return i}(Lv);function ab(t){return(ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ub(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lb(Object(n),!0).forEach((function(e){db(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fb(t,e){return(fb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pb(t,e){return!e||"object"!==ab(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hb(t){return(hb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function db(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ib(ob,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]),ob.prototype.availableOptions=$v($v({},Lv.prototype.availableOptions),{},{imagePaths:{type:o.OptionType.ARRAY,default:function(t){return function(t){if(Array.isArray(t))return Qv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Qv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qv(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(ob.Images)},relativeParticleSize:{type:o.OptionType.NUMBER,default:.12}});var yb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fb(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=hb(e);if(n){var i=hb(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return pb(this,t)});function i(){return cb(this,i),r.apply(this,arguments)}return i}(Lv);function gb(t){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mb(Object(n),!0).forEach((function(e){kb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bb(t){return function(t){if(Array.isArray(t))return _b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return _b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_b(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xb(t,e){return(xb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ob(t,e){return!e||"object"!==gb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sb(t){return(Sb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}db(yb,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]),yb.prototype.availableOptions=ub(ub({},Lv.prototype.availableOptions),{},{imagePaths:{type:o.OptionType.ARRAY,default:function(t){return function(t){if(Array.isArray(t))return sb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return sb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sb(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(yb.Images)}});var Tb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xb(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sb(n);if(r){var i=Sb(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Ob(this,t)});function a(){var t;wb(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(.3,.3,.3,.3),t._backgroundRandomizer=new Zf(0),t._decoTypeRandomizer=new Zf(0),t._seedPool.push(t._backgroundRandomizer),t._seedPool.push(t._decoTypeRandomizer),t}return(e=[{key:"getImagePaths",value:function(){return[].concat(bb(cv.RowImages),bb(o.Utils.Array.flatten(a.Backgrounds.map((function(t){return t.getImagePaths()})))),bb(a.DecoratorImages))}},{key:"_getBackground",value:function(){return this._backgroundRandomizer.pickNext(a.Backgrounds)}},{key:"_randomDecoratorImages",value:function(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return a.DecoratorImages.slice(0,2).map((function(t){return Ip.getImage(t)}));case 1:case 2:return a.DecoratorImages.slice(2).map((function(t){return Ip.getImage(t)}));default:return o.Log.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),a.DecoratorImages.slice(2).map((function(t){return Ip.getImage(t)}))}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(cv);function Eb(t){return(Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cb(Object(n),!0).forEach((function(e){Mb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Db(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ib(t,e,n){return(Ib="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ab(t,e){return(Ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fb(t,e){return!e||"object"!==Eb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jb(t){return(jb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}kb(Tb,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),kb(Tb,"identifier","imgly_text_design_particles"),kb(Tb,"Backgrounds",[new Yv,new ob,new yb]),kb(Tb,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]),Tb.prototype.availableOptions=vb(vb({},cv.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:Tb.defaultFontIdentifiers},decorationsVisible:{type:o.OptionType.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:o.OptionType.BOOLEAN,default:!0}});var zb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ab(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jb(n);if(r){var i=jb(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Fb(this,t)});function a(){var t;Pb(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._relativeInsets=new Jf(.1,0,0,0),t._rowTypeRandomizer=new Zf(0),t._seedPool.push(t._rowTypeRandomizer),t}return(e=[{key:"_modifiedText",value:function(t){return Ib(jb(a.prototype),"_modifiedText",this).call(this,t).toUpperCase()}},{key:"_randomLayoutRow",value:function(t,e,n,r){var i=Ib(jb(a.prototype),"_randomLayoutRow",this).call(this,t,e,n,r);return i.setShearingAngle(this.getShearingAngle()),i}},{key:"_layoutRows",value:function(t,e){var n=Ib(jb(a.prototype),"_layoutRows",this).call(this,t,e),r=o.Utils.values(jd.FormType),i=new jd({width:e,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout(),s=new jd({width:e,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout();return[i].concat(function(t){return function(t){if(Array.isArray(t))return Db(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Db(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Db(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n),[s])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(vh);Mb(zb,"defaultFontIdentifiers",["imgly_font_campton_bold"]),Mb(zb,"identifier","imgly_text_design_rotated"),zb.prototype.availableOptions=Rb(Rb({},vh.prototype.availableOptions),{},{fontIdentifiers:{type:o.OptionType.ARRAY,default:zb.defaultFontIdentifiers},relativeLineSpacing:{type:o.OptionType.NUMBER,default:.025/3},shearingAngle:{type:o.OptionType.NUMBER,default:-.1}});var Lb=o.Math.Rectangle,Bb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new Zf}var e;return(e=[{key:"createLayout",value:function(t,e,n){this._layout=t,this._text=e,this._seed=n,t.seed(n),this._layoutData=t.generateLayoutData(e,1e3)}},{key:"calculateAspect",value:function(){return this._layoutData?this._layoutData.getSize().aspect():(o.Log.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}},{key:"draw",value:function(t,e,n,r){var i=this,a=this._layoutData;if(this._layoutData){var s=new ap(1e3,1e3/e.aspect()),l=e.width/1e3,u=a.getRelativeInsets().clone().scale(s.width),c=a.getRelativeLineSpacing()*s.width,f=u.top;t.save(),this.randomizer.seed(this._seed);var p=a.getBackground();p&&p.render(t,e,a.getRelativeInsets(),r?o.Color.WHITE:n,this.randomizer),t.scale(l,l),a.getRows().forEach((function(e){t.save();var a=e.getAttributes();if(t.transform(1,e.getShearingAngle(),0,1,u.left,f),a.setTextColor(r?o.Color.WHITE:n.clone()),a.setTintColor(r?o.Color.WHITE:n.clone()),(e instanceof nd||e instanceof Xg)&&(e.setBackgroundColor(r?o.Color.WHITE:n.clone()),e.setIsUsedInInvertedLayout(r)),i._debugMode&&(e._debugMode=!0),e.willRender(t),e.render(t),e.didRender(t),i._debugMode){var s=e._getFrame(),l=e._getTextFrame();Hh(t,s,o.Color.GREEN),Hh(t,l,o.Color.BLUE),e._getLayoutElements().forEach((function(n){var r=n.getFrame(),i=e._getTextFrameForElement(n);Hh(t,r,new o.Color(1,1,0)),Hh(t,i,new o.Color(0,1,1))}))}f+=e.getSize().height+c,t.restore()})),this._debugMode&&Hh(t,new Lb(0,0,s.width,s.height),o.Color.RED),t.restore()}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function Nb(t){return(Nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ub(t,e,n){return(Ub="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wb(t,e){return(Wb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hb(t,e){return!e||"object"!==Nb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vb(t){return(Vb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gb=o.Math.Vector2,Zb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wb(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vb(n);if(r){var i=Vb(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Hb(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t,e))._isDisposed=!1,n._renderer=new Bb,n._canvas=o.Utils.createCanvas(),n._context=n._canvas.getContext("2d"),n._texture=o.Engine.Texture.fromCanvas(n._canvas),n._sprite.setTexture(n._texture),n._aspect=1,n._isLayoutDirty=!0,n.getSeed()<0&&n.setSeed(Zf.TimeSeed()),n}return(e=[{key:"seed",value:function(t){this.setSeed(t||Zf.TimeSeed()),this._isLayoutDirty=!0}},{key:"_updateLayout",value:function(){var t=this.getLayout();return t?(this._renderer.createLayout(t,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}},{key:"applyTransform",value:function(t){Ub(Vb(a.prototype),"applyTransform",this).call(this,t);var e={};this._options.dimensions&&(e.width=t.applyToRelativeSize(this.getWidth())),this.set(e,!1)}},{key:"applyFlip",value:function(t){Ub(Vb(a.prototype),"applyFlip",this).call(this,t);var e=this._options.rotation;switch(t){case"horizontal":e+=2*(Math.PI-e),this.setRotation(e);break;case"vertical":e+=2*(Math.PI/2-e),this.setRotation(e)}}},{key:"update",value:function(t,e){var n=this._isLayoutDirty;if(!(this._isDisposed||n&&!this._updateLayout())){var r=this.getWidth()*e.min()/t.getTextureScale(),i=r/this._aspect,s=new Gb(r,i),l=new Gb(Math.round(2*r),Math.round(2*i)).clamp(new Gb(1,1),new Gb(1/0,1/0)),u=t.getRenderer(),c=u.getMaxDimensions()||1/0;l.x>c&&(l.x=c,l.y=Math.round(l.x/this._aspect)),l.y>c&&(l.y=c,l.x=Math.round(l.y*this._aspect));var f=o.Utils.ensureCanvasDimensions(this._canvas,l);(n||f)&&(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new ap(l.x,l.y),this.getColor(),this.getInverted()),this.setDimensions(s),this._texture.getBaseTexture().update(),u.isOfType(o.RendererType.WEBGL)&&u.updateTexture(this._texture.getBaseTexture())),Ub(Vb(a.prototype),"update",this).call(this,t,e),this._applyFlip()}}},{key:"_applyFlip",value:function(){var t=this._sprite.getScale(),e=this._options,n=e.flipHorizontally,r=e.flipVertically;(n&&t.x>0||!n&&t.x<0)&&(t.x*=-1),(r&&t.y>0||!r&&t.y<0)&&(t.y*=-1),this._sprite.setScale(t)}},{key:"_optionEquals",value:function(t,e){if("layout"===t){var n=this._options.layout;return!(!n&&e||!e&&n||!e.constructor||!n.constructor||n.constructor.identifier!==e.constructor.identifier)}return Ub(Vb(a.prototype),"_optionEquals",this).call(this,t,e)}},{key:"serializeOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&this.getPadding()<0){var n=t.indexOf("padding");n>-1&&t.splice(n,1)}var r=Ub(Vb(a.prototype),"serializeOptions",this).call(this,t,e);return t||(r.type="textdesign"),r}},{key:"_getTexture",value:function(){return this._texture}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!0}},{key:"canAdjustPadding",value:function(){return!0}},{key:"dispose",value:function(){this._isDisposed=!0,this._texture.dispose(),this._sprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(Ac);Zb.Layouts={TextDesignBlocks:yd,TextDesignBlocksCondensed:kd,TextDesignBlocksLight:Zd,TextDesignCelebrate:xy,TextDesignCelebrateSimple:Vy,TextDesignEqualWidth:hg,TextDesignEqualWidthFat:xg,TextDesignMasked:rm,TextDesignMaskedBadge:hm,TextDesignMaskedSpeechBubble:Om,TextDesignMaskedSpeechBubbleComic:Im,TextDesignMultiline:Wm,TextDesignWatercolor:Qm,TextDesignSunshine:cv,TextDesignParticles:Tb,TextDesignRotated:zb},Zb.LegacyLayouts={TextDesignBlocksLightV310:ey,TextDesignSunshineV310:wv},Zb.AssetManager=Ip,Zb.prototype.availableOptions={id:{type:o.OptionType.STRING,default:function(){return o.Utils.getUUID()}},position:{type:o.OptionType.VECTOR2,default:new Gb(.5,.5)},dimensions:{type:o.OptionType.VECTOR2,default:Gb.NULL},anchor:{type:o.OptionType.VECTOR2,default:new Gb(0,0)},pivot:{type:o.OptionType.VECTOR2,default:new Gb(.5,.5)},rotation:{type:o.OptionType.NUMBER,default:0},flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1},layout:{type:o.OptionType.OBJECT,default:null,setter:function(t){return this._isLayoutDirty=!0,t}},text:{type:o.OptionType.STRING,default:"",setter:function(t){return this._isLayoutDirty=!0,t}},color:{type:o.OptionType.COLOR,default:o.Color.BLACK,setter:function(t){return this._isLayoutDirty=!0,t}},padding:{type:o.OptionType.NUMBER,default:.01,minValue:.01},width:{type:o.OptionType.NUMBER,default:.8},inverted:{type:o.OptionType.BOOLEAN,default:!1,setter:function(t){return this._isLayoutDirty=!0,t}},seed:{type:o.OptionType.NUMBER,default:-1}};const Xb=Zb;function qb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kb(t){return(Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jb(t,e,n){return(Jb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $b(t,e){return($b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function t_(t,e){return!e||"object"!==Kb(e)&&"function"!=typeof e?e_(t):e}function e_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n_(t){return(n_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r_=o.Math.Vector2,i_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$b(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=n_(n);if(r){var i=n_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return t_(this,t)});function a(){var t;Qb(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=i.call.apply(i,[this].concat(n))).setSmoothDownscaling(t._sdk.getOptions().smoothDownscaling),t._onSpriteUpdate=t._onSpriteUpdate.bind(e_(t)),t._maskCanvas=o.Utils.createCanvas();var s=t._options.sprites.slice();return s.forEach((function(e){t.removeSprite(e),t.addSprite(e)})),t}return(e=[{key:"getSpritesOfType",value:function(t){return this._options.sprites.filter((function(e){return e instanceof t}))}},{key:"rotate",value:function(t){this._options.sprites.forEach((function(e){e.applyRotation(t)}))}},{key:"flip",value:function(t){this._options.sprites.forEach((function(e){e.applyFlip(t)}))}},{key:"_onSpriteUpdate",value:function(t,e){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(t,e){this._options.sprites.forEach((function(n){return n.applyRotation(t,e)}))}},{key:"transform",value:function(t){this._options.sprites.forEach((function(e){return e.applyTransform(t)}))}},{key:"scale",value:function(t){this._options.sprites.forEach((function(e){return e.applyScale(t)}))}},{key:"serializeOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===t?this._options.sprites.map((function(t){return t.serializeOptions(void 0,e)})):Jb(n_(a.prototype),"serializeOption",this).call(this,t,e)}},{key:"createSticker",value:function(t){return new Df(this,t)}},{key:"createText",value:function(t){return new Hf(this,t)}},{key:"createBrush",value:function(t){return new nf(this,t)}},{key:"createTextDesign",value:function(t){return new Xb(this,t)}},{key:"addSprite",value:function(t){this._options.sprites.push(t);var e=this.getSmoothDownscaling();t.setSmoothDownscaling&&t.setSmoothDownscaling(e),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(t){var e=this._options.sprites,n=e.indexOf(t);return-1!==n&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(n,1),this.setDirty(!0),!0)}},{key:"_getOrientatedStageSize",value:function(){var t=this._sdk.getSprite().getTexture().getFrame(),e=this._sdk.getOperationsStack().getByIdentifier("orientation");if(e){var n=e?e.getRotation():0;return 270===n||90===n?new r_(t.height,t.width):new r_(t.width,t.height)}var r=this._sdk.getOperationsStack().getByIdentifier("output");return r?r.getOutputResolution():new r_(t.width,t.height)}},{key:"_render",value:function(t){var e=this,n=this._container,r=this._options.sprites,i=t.getDimensions().clone().floor(),a=new o.Engine.Container;return a.addChild(this._sprite),o.Promise.all(r.map((function(t){return t.validateSettings()}))).then((function(){r.forEach((function(t){return t.update(e._sdk,i)}))})).then((function(){e._renderTexture.clear(),r.forEach((function(t){t.getInverted&&t.getInverted()?(e._renderTexture.render(a),e._renderTexture.render(e._renderMaskedSprite(t.getDisplayObject(),t.getColor?t.getColor():o.Color.WHITE,t.getPadding?t.getPadding():-1)),a=new o.Engine.Container):a.addChild(t.getDisplayObject())})),e._renderTexture.render(a),n.addChild(e._sprite),r.forEach((function(t){return n.addChild(t.getDisplayObject())}))}))}},{key:"_renderMaskedSprite",value:function(t,e,n){var r=this._maskCanvas,i=t.getWorldTransform(),a=this._getOrientatedStageSize();o.Utils.ensureCanvasDimensions(r,a);var s=r.getContext("2d");if(s.clearRect(0,0,r.width,r.height),s.save(),s.fillStyle=e.toRGBA(),n<0)s.fillRect(0,0,a.x,a.y);else{var l=Math.abs(t.getWidth()/t.getScale().x),u=Math.abs(t.getHeight()/t.getScale().y),c=l*n;s.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),s.fillRect(-c,-c,l+2*c,u+2*c)}s.restore(),s.save(),s.globalCompositeOperation="destination-out",t._renderCanvas({getCurrentRenderTarget:function(){return{getPixelRatio:function(){return 1}}},beforeDraw:function(e){var n=t.getWidth(),r=t.getHeight(),i=t.getScale(),o=i.x<0,a=i.y<0;e.translate(n,r),e.scale(o?-1:1,a?-1:1),e.translate(-n,-r)},getContext:function(){return s}}),s.restore();var f=new o.Engine.Container,p=new o.Engine.Sprite(o.Engine.Texture.fromCanvas(r));return f.addChild(p),f}},{key:"takeSpriteToFront",value:function(t){var e=this._options.sprites,n=e.indexOf(t);if(-1!==n){o.Utils.moveArrayItem(e,n,e.length-1);var r=t.getDisplayObject();this._container.removeChild(r),this._container.addChild(r),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(t,e){var n=this,r=[];this._options.sprites.forEach((function(t){return t.update(n._sdk,e)}));var i=this._sdk.getSprite(),o=i.getWorldTransform().applyInverseToVector(t),a=i.getTexture().getFrame(),s=a.width,l=a.height,u=i.getAnchor().clone().multiply(-s,-l);o.subtract(u);for(var c=this._options.sprites.slice(0).reverse(),f=0,p=c.length;f<p;f++){var h=c[f];h.getHitTestDisplayObject().isAtPosition(o)&&r.push(h)}return r}},{key:"setDirtyForRenderer",value:function(t,e,n){Jb(n_(a.prototype),"setDirtyForRenderer",this).call(this,t,e,n),this._options.sprites.forEach((function(r){r.setDirtyForRenderer(t,e,n)}))}},{key:"dispose",value:function(){Jb(n_(a.prototype),"dispose",this).call(this),this._options.sprites.forEach((function(t){t.dispose()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);i_.StickerSprite=Df,i_.TextSprite=Hf,i_.BrushSprite=nf,i_.TextDesignSprite=Xb,i_.identifier="sprite",i_.prototype.availableOptions={sprites:{type:o.OptionType.ARRAY,default:[],setter:function(t,e){var n=this;return t=t.map((function(t,e){if(t instanceof Ac)return t;var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qb(Object(n),!0).forEach((function(e){Yb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t);switch(delete r.type,t.type){case"text":return new Hf(n,r);case"sticker":return new Df(n,r);case"brush":return new nf(n,r);case"textdesign":return new Xb(n,r);default:o.Log.error(n.constructor.name,"Invalid sprite type: "+t.type)}})),e||(this._options.sprites&&this._options.sprites.slice().forEach((function(t){t.dispose(),n.removeSprite(t)})),t.forEach((function(t){n.addSprite(t)}))),t}},smoothDownscaling:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.SpriteOperation=i_;const o_=i_;var a_=o.Math.Vector2;const s_=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=n,this._oldOptions={start:e.getStart().clone(),end:e.getEnd().clone(),rotation:e.getRotation(),textureScale:e.getTextureScale()},this._inputDimensions=e.getInputDimensions(!1),this._rotationDelta=n.rotation-e.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=n.end.clone().subtract(n.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(n.start).multiply(this._inputDimensions),this._scaleRatio=e.calculateScale(n.rotation)/e.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/e.getTextureScale()}var e;return(e=[{key:"applyToRelativePoint",value:function(t){var e=this._oldOptions.start,n=this._oldOptions.end,r=e.clone().add(n.clone().subtract(e).divide(2)).multiply(this._inputDimensions),i=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=r.clone().add(i).clone().subtract(this._inputDimensions.clone().divide(2)),a=new a_(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),s=this._inputDimensions.clone().divide(2).add(a),l=this._options.start.clone().multiply(this._inputDimensions);return s.clone().subtract(l).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t}},{key:"scaleSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return t/this._sizeFactor[e]}},{key:"applyToRotation",value:function(t){return(t+this._rotationDelta)%(2*Math.PI)}},{key:"invert",value:function(){var t=this._options.start.clone(),e=this._options.end.clone(),n=this._inputDimensions,r=-this._rotationDelta,i=Math.cos(r),o=Math.sin(r),a=this._oldAbsoluteSize,s=this._newAbsoluteSize,l=t.clone().subtract(e).multiply(n),u=1/this._scaleRatio,c=new a_(1/this._sizeFactor.x,1/this._sizeFactor.y),f=1/this._textureScaleFactor,p=this._oldOptions;return this._oldOptions=this._options,this._options=p,this._inputDimensions=n,this._rotationDelta=r,this._deltaCos=i,this._deltaSin=o,this._oldAbsoluteSize=s,this._newAbsoluteSize=a,this._absoluteStartDiff=l,this._scaleRatio=u,this._sizeFactor=c,this._textureScaleFactor=f,this}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function l_(t){return(l_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c_(t,e){return(c_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f_(t,e){return!e||"object"!==l_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p_(t){return(p_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h_=o.Math.Vector2,d_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c_(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p_(n);if(r){var i=p_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return f_(this,t)});function a(){return u_(this,a),i.apply(this,arguments)}return(e=[{key:"_render",value:function(t){this._sprite.setRotation(0);var e=t.getDimensions(),n=this._options,r=n.start,i=n.end,a=n.rotation,s=n.textureScale,l=i.clone().subtract(r).clone().divide(2),u=r.clone().add(l),c=this.calculateScale()*s,f=e.clone().multiply(c).multiply(l);return this._sprite.setAnchor(u),this._sprite.setRotation(a),this._sprite.setScale(c,c),this._sprite.setPosition(f),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"calculateScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,e=this.getInputDimensions(!1),n=new h_(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),r=e.clone().subtract(n.clone()).divide(2).abs();return r.y>r.x?2*r.y/e.y+1:2*r.x/e.x+1}},{key:"getNewDimensions",value:function(t){var e=this._options,n=e.start,r=e.end,i=e.textureScale,o=this.calculateScale();return t.clone().multiply(i*o).multiply(r.clone().subtract(n)).round()}},{key:"flip",value:function(t){var e=this._options,n=e.start,r=e.end,i=n.clone();"horizontal"===t?(n.set(1-r.x,n.y),r.set(1-i.x,r.y)):"vertical"===t&&(n.set(n.x,1-r.y),r.set(r.x,1-i.y))}},{key:"rotate",value:function(t){for(var e=this._options,n=e.start,r=e.end,i=(t+360)%360,o=Math.floor(i/90),a=0;a<o;a++){var s=n.clone();n.set(1-r.y,s.x),r.set(1-s.y,r.x)}}},{key:"_onBeforeExport",value:function(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}},{key:"_onAfterExport",value:function(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);d_.identifier="transform",d_.prototype.availableOptions={start:{type:o.OptionType.VECTOR2,default:new h_(0,0)},end:{type:o.OptionType.VECTOR2,default:new h_(1,1)},textureScale:{type:o.OptionType.NUMBER,default:1},rotation:{type:o.OptionType.NUMBER,default:0}},d_.TransformChange=s_,a().Operations.TransformOperation=d_;const y_=d_;function g_(t){return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v_(t,e,n){return(v_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function b_(t,e){return(b_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function __(t,e){return!e||"object"!==g_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w_(t){return(w_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x_=o.Math.Vector2,O_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b_(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w_(n);if(r){var i=w_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return __(this,t)});function a(){var t;m_(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._watermarkSprite=new o.Engine.Sprite,t._watermarkSprite.setAnchor(.5,.5),t._container.addChild(t._watermarkSprite),t}return(e=[{key:"_render",value:function(t){this._watermarkTexture||(this._watermarkTexture=o.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getDimensions(),n=this._options.image,r=n.width,i=n.height,a=o.Utils.resizeVectorToFit(new x_(r,i),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(a.x),this._watermarkSprite.setHeight(a.y),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"dispose",value:function(){v_(w_(a.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);O_.identifier="watermark",O_.prototype.availableOptions={image:{type:o.OptionType.OBJECT,required:!0}},a().Operations.WatermarkOperation=O_;const S_=O_;var k_=n(1207);function T_(t){return(T_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C_(t,e,n){return(C_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function R_(t,e){return(R_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D_(t,e){return!e||"object"!==T_(e)&&"function"!=typeof e?P_(t):e}function P_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I_(t){return(I_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R_(t,e)}(s,t);var e,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I_(r);if(i){var n=I_(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return D_(this,t)});function s(){var t;E_(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return A_(P_(t=a.call.apply(a,[this].concat(n))),"_fragmentSource",null),t._inputTextureSizeMap={},t._inputLogicalSizeMap={},t._inputShapeMap={},t}return(e=[{key:"requiresFloatTextures",value:function(){return!0}},{key:"setTargetTextureSize",value:function(t){this._targetTextureSize=t}},{key:"setTargetLogicalSize",value:function(t){this._targetSize=t}},{key:"setTextureSizeForInputWithName",value:function(t,e){this._inputTextureSizeMap[e]=t}},{key:"setLogicalSizeForInputWithName",value:function(t,e){this._inputLogicalSizeMap[e]=t}},{key:"getShaderForRenderer",value:function(t){return this._fragmentSource||(this._fragmentSource=this._buildFragmentShader()),C_(I_(s.prototype),"getShaderForRenderer",this).call(this,t)}},{key:"outputLogicalShape",value:function(){if(!this._options.outputLogicalShape){var t=this._calculateOutputShape();this._options.outputLogicalShape=t}return this._options.outputLogicalShape}},{key:"_applyWebGL",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=o;a||(a=this.getShaderForRenderer(t));var s=t.getContext(),l={},u=t.getCurrentRenderTarget().getProjectionMatrix().toArray();l.u_projMatrix=u,l.output_texRC=this._targetTextureSize,l.output_sizeRC=this._targetSize,l.output_shape=this.outputLogicalShape(),this._options.inputs.forEach((function(t){try{l["".concat(t.name,"_texRC")]=r._inputTextureSizeMap[t.name],l["".concat(t.name,"_sizeRC")]=r._inputLogicalSizeMap[t.name],l["".concat(t.name,"_shape")]=t.logicalShape}catch(e){throw new Error("Missing texture or logical size for input ".concat(t.name," in filter ").concat(r.constructor.name,"."))}}),this),this._updateAdditionalUniforms(a),a.setUniforms(l),a.syncUniforms();var c=e.getBaseTexture(),f=t.getOrCreateGLTexture(c);s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,f),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,c.getGLRepeat(s,"x")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,c.getGLRepeat(s,"y")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,c.getGLFilter(s,"min")),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,c.getGLFilter(s,"mag")),s.bindFramebuffer(s.FRAMEBUFFER,n._framebuffer),i&&s.clear(s.COLOR_BUFFER_BIT),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)}},{key:"getShaderIdentifier",value:function(){var t=this.outputLogicalShape().length,e=this.getInputs().map((function(t){return"".concat(t.name,"_").concat(t.logicalShape.length)})).join("");return this.constructor.name+"_"+t+"_"+e+"_"+this._getTensorOperationSource()}},{key:"_updateAdditionalUniforms",value:function(t){}},{key:"_calculateOutputShape",value:function(){return this.getInputs()[0].logicalShape}},{key:"prepareUniforms",value:function(){var t=this;this._uniforms.output_texRC={type:o.UniformType.FLOAT2,value:[0,0]},this._uniforms.output_sizeRC={type:o.UniformType.FLOAT2,value:[0,0]};var e=this._calculateOutputShape();this._uniforms.output_shape={type:2===e.length?o.UniformType.INT2:o.UniformType.INT4,value:e};var n=1,r=[];this.getInputs().forEach((function(e){if(-1!==r.indexOf(e.name))throw new Error("Input names must be unique.");var i="".concat(e.name,"_texRC"),a="".concat(e.name,"_sizeRC"),s="".concat(e.name,"_shape");switch(t._uniforms[i]={type:o.UniformType.FLOAT2,value:[0,0]},t._uniforms[a]={type:o.UniformType.FLOAT2,value:[0,0]},t._uniforms[s]={type:2===e.logicalShape.length?o.UniformType.INT2:o.UniformType.INT4,value:e.logicalShape},e.type){case j_.PREVIOUS:t._uniforms[e.name]={type:o.UniformType.SAMPLER2D,value:0};break;case j_.DATA:t._uniforms[e.name]={type:o.UniformType.SAMPLER2D,value:n++}}})),this.getInputs().forEach((function(e){e.type===j_.INDEX&&(t._uniforms[e.name]={type:o.UniformType.SAMPLER2D,value:n++})})),delete this._availableUniforms.u_image,delete this._uniforms.u_image}},{key:"_getTensorOperationSource",value:function(){return"\n      void main () {\n        setOutput(0.0);\n      }\n    "}},{key:"_buildFragmentShader",value:function(){var t=this,e=n(9960),r=this.outputLogicalShape();return 2===r.length?e+=this._create2DOutputInterfaceSnippet():4===r.length&&(e+=this._create4DOutputInterfaceSnippet()),this._options.inputs.forEach((function(n){e+=t._createInputInterfaceSnippet(n)})),e+=this._createOutputSnippet(),e+=this._getTensorOperationSource()}},{key:"_createOutputSnippet",value:function(){return"\n      void setOutput(float val) {\n        gl_FragColor = vec4(val, 0, 0, 0);\n      }\n    "}},{key:"_create2DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec2 output_shape;\n      ivec2 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n        int r = index / output_shape[1];\n        int c = index - r * output_shape[1];\n\n        return ivec2(r, c);\n      }\n    "}},{key:"_create4DOutputInterfaceSnippet",value:function(){return"\n      uniform ivec4 output_shape;\n      ivec4 getOutputCoords() {\n        vec2 adjustedFragCoord = gl_FragCoord.xy - halfCR;\n        int index = int(adjustedFragCoord.y * output_sizeRC.y + adjustedFragCoord.x);\n\n        int stride2 = output_shape[3];\n        int stride1 = output_shape[2] * stride2;\n        int stride0 = output_shape[1] * stride1;\n\n        int r = index / stride0;\n        index -= r * stride0;\n\n        int c = index / stride1;\n        index -= c * stride1;\n\n        int d = index / stride2;\n        int d2 = index - d * stride2;\n\n        return ivec4(r, c, d, d2);\n      }\n    "}},{key:"_createInputInterfaceSnippet",value:function(t){var e="",n=t.name,r=t.logicalShape,i="".concat(n,"_texRC"),o="".concat(n,"_sizeRC"),a="".concat(n,"_shape"),s=2===r.length?"ivec2":"ivec4";e+="\n      uniform sampler2D ".concat(n,";\n      uniform vec2 ").concat(i,";\n      uniform vec2 ").concat(o,";\n      uniform ").concat(s," ").concat(a,";\n    ");var l="get".concat(this._capitalize(n),"Flat");return e+="\n      float ".concat(l,"(int index) {\n        vec2 uv = UVfrom1D(").concat(i,", ").concat(o,", index);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "),2===r.length?e+="\n        float get".concat(this._capitalize(n),"(int row, int col) {\n          vec2 uv = UVfrom2D(").concat(i,", ").concat(o,", ").concat(a,"[1], row, col);\n          return sampleTexture(").concat(n,", uv);\n        }\n      "):4===r.length&&(e+="\n      float get".concat(this._capitalize(n),"(int row, int col, int depth, int depth2) {\n        int stride2 = ").concat(a,"[3];\n        int stride1 = ").concat(a,"[2] * stride2;\n        int stride0 = ").concat(a,"[1] * stride1;\n\n        vec2 uv = UVfrom4D(").concat(i,", ").concat(o,", stride0, stride1, stride2, row, col, depth, depth2);\n        return sampleTexture(").concat(n,", uv);\n      }\n\n      float get").concat(this._capitalize(n),"(ivec4 coords) {\n        return get").concat(this._capitalize(n),"(coords.x, coords.y, coords.z, coords.w);\n      }\n    ")),e}},{key:"_capitalize",value:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"_getInputWithName",value:function(t){return o.Utils.Array.find(this._options.inputs,(function(e){return e.name===t}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(o.Engine.Filter),j_={PREVIOUS:"previous",INDEX:"index",DATA:"data"};F_.prototype.availableOptions={inputs:{type:o.OptionType.ARRAY},outputLogicalShape:{type:o.OptionType.ARRAY},outputTextureDimensions:{type:o.OptionType.ARRAY}};const M_=F_;function z_(t){return(z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B_(t,e){return(B_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N_(t,e){return!e||"object"!==z_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U_(t){return(U_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const W_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B_(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=U_(n);if(r){var i=U_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return N_(this,t)});function o(){return L_(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x").logicalShape;if(2!==t.length)throw new Error("UnpackRGBAFilter expects 2D inputs");return[1,t[0],t[1],3]}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        //       x, y, z, w\n        // e.g. [0, 4, 3, 2] (which is the blue channel of the pixel at x: 3, y: 4)\n        ivec4 outputCoords = getOutputCoords();\n        \n        int row = outputCoords.y;\n        int col = outputCoords.z;\n        int offset = outputCoords.w;\n\n        int index = row * int(x_sizeRC.y) + col;\n        int logR = index / int(x_sizeRC.y);\n        int logC = index - logR * int(x_sizeRC.y);\n        vec2 uv = (vec2(logC, logR) + halfCR) / x_texRC.yx;\n        vec4 color = texture2D(x, uv);\n\n        float component = 0.0;\n        if (offset == 0) {\n          component = color.r;\n        } else if (offset == 1) {\n          component = color.g;\n        } else if (offset == 2) {\n          component = color.b;\n        }\n        gl_FragColor = vec4(component, 0.0, 0.0, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_),H_=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"getSizeOfLogicalShape",value:function(t){for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}},{key:"getTextureDimensionsForLogicalShape",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048,r=t.getSizeOfLogicalShape(e);if(e.length<=1&&r<=n)return[r,1];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];for(var i=Math.floor(Math.sqrt(r));i>1;--i)if(r%i==0)return[i,r/i];return[1,r]}},{key:"isSameShape",value:function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function V_(t){return(V_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z_(t,e){return(Z_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X_(t,e){return!e||"object"!==V_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q_(t){return(q_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z_(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=q_(n);if(r){var i=q_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return X_(this,t)});function o(){return G_(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x").logicalShape;if(4!==t.length)throw new Error("UnpackRGBAFilter expects 4D inputs");var e=t[0];if(3!==t[3])throw new Error("Expected RGB values");if(1!==e)throw new Error("PackRGBAFilter does not support batches of images.");var n=this._options.outputSize;if(2!==n.length)throw new Error("Expected outputSize of length 2");if(n[0]*n[1]!=H_.getSizeOfLogicalShape(t)/3)throw new Error("Input shape ".concat(t," can't be broken up into 3 channels."));return n}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec2 outputCoords = getOutputCoords();\n        int row = outputCoords.x;\n        int col = outputCoords.y;\n        float r = getX(0, row, col, 0);\n        float g = getX(0, row, col, 1);\n        float b = getX(0, row, col, 2);\n        gl_FragColor = vec4(r, g, b, 1.0);\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);Y_.prototype.availableOptions=Object.assign({outputSize:{type:o.OptionType.ARRAY}},M_.prototype.availableOptions);const K_=Y_;function Q_(t){return(Q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $_(t,e){return($_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tw(t,e){return!e||"object"!==Q_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ew(t){return(ew=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$_(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ew(n);if(r){var i=ew(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return tw(this,t)});function a(){var t;J_(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._uniforms.blendLeftTopRightBottom={type:o.UniformType.FLOAT4,value:t.availableOptions.blendLeftTopRightBottom.default},t._uniforms.blendRadius={type:o.UniformType.FLOAT,value:t.availableOptions.blendRadius.default},t.prepareUniforms(),t}return(e=[{key:"requiresFloatTextures",value:function(){return!1}},{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x"),e=this._getInputWithName("y");if(t.logicalShape[0]!==e.logicalShape[0]||t.logicalShape[1]!==e.logicalShape[1])throw new Error("X and Y inputs of ".concat(this.constructor.name," must have same shape."));return t.logicalShape}},{key:"_updateAdditionalUniforms",value:function(t){t.setUniform("blendLeftTopRightBottom",this.getBlendLeftTopRightBottom()),t.setUniform("blendRadius",this.getBlendRadius())}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec4 blendLeftTopRightBottom;\n      uniform float blendRadius;\n\n      void main() {\n        vec2 coords = vec2(getOutputCoords());\n\n        vec2 blendVertical = vec2(coords.x, x_sizeRC.x - coords.x) / vec2(x_sizeRC.x * blendRadius); // topBlend, bottomBlend\n        vec2 blendHorizontal = vec2(coords.y, x_sizeRC.y - coords.y) / vec2(x_sizeRC.y * blendRadius); // leftBlend, rightBlend\n        vec4 factorLeftTopRightBottom = clamp(vec4(blendHorizontal.x, blendVertical.x, blendHorizontal.y, blendVertical.y), vec4(0.0), vec4(1.0));\n        vec4 maskVector = (vec4(1.0) - blendLeftTopRightBottom) * vec4(2.0); // [0, 1, 1, 1] becomes [2, 0, 0, 0]\n        vec4 maskedFactorLeftTopRightBottom = factorLeftTopRightBottom + maskVector; // [0.25, 0.5, 1.0, 1.0] becomes [2.25, 1.0, 1.0]\n        float factor = min(min(maskedFactorLeftTopRightBottom.x, maskedFactorLeftTopRightBottom.y), min(maskedFactorLeftTopRightBottom.z, maskedFactorLeftTopRightBottom.w)); // Choose the smallest blending factor\n        \n        vec2 uv = UVfrom2D(x_texRC, x_sizeRC, int(x_sizeRC.y), int(coords.x), int(coords.y));\n        vec4 xColor = texture2D(x, uv);\n        vec4 yColor = texture2D(y, uv);\n\n        gl_FragColor = mix(yColor, xColor, factor);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(M_);nw.prototype.availableOptions=Object.assign({blendLeftTopRightBottom:{type:o.OptionType.ARRAY,default:[1,1,1,1]},blendRadius:{type:o.OptionType.NUMBER,default:.2}},M_.prototype.availableOptions);const rw=nw;function iw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ow=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),iw(this,"_targetTextureFormatMap",new Map),iw(this,"_floatTargetPool",[]),iw(this,"_intTargetPool",[]),this._renderer=e,this._internalFloatType=n.renderTextureType,this._internalFloatTextureFormat=n.renderTextureFormat}var e;return(e=[{key:"prebuildRenderTargets",value:function(t,e,n){for(var r=this,i=[],o=0;o<t;o++)i.push(new Promise((function(t){var i=r._createRenderTarget(e,n),o=r._uniqueIDForTarget(i);r._targetTextureFormatMap.set(o,n),r.pushRenderTarget(i),t()})));return Promise.all(i)}},{key:"pushRenderTarget",value:function(t){var e=this._uniqueIDForTarget(t),n=this._targetTextureFormatMap.get(e);if(n)switch(n){case aw.FLOAT:this._floatTargetPool.push(t);break;case aw.INT:this._intTargetPool.push(t)}}},{key:"popRenderTarget",value:function(t,e){var n=null;e===aw.FLOAT?n=this._extractTargetFromPool(this._floatTargetPool,t):e===aw.INT&&(n=this._extractTargetFromPool(this._intTargetPool,t)),n||(n=this._createRenderTarget(t,e));var r=this._uniqueIDForTarget(n);return this._targetTextureFormatMap.set(r,e),n}},{key:"getFormatOfRenderTarget",value:function(t){return null===t?null:this._targetTextureFormatMap.get(t._baseTexture.id)}},{key:"dispose",value:function(){this._targetTextureFormatMap.clear(),this._floatTargetPool.forEach((function(t){t.dispose()})),this._floatTargetPool=null,this._intTargetPool.forEach((function(t){t.dispose()})),this._intTargetPool=null}},{key:"_uniqueIDForTarget",value:function(t){return null===t?null:null!==t.getBaseTexture()?t.getBaseTexture().id:null}},{key:"_extractTargetFromPool",value:function(t,e){var n=t.filter((function(t){var n=t.getFrame().getSize();return n.x===e.x&&n.y&&e.y})).shift();if(n){var r=t.indexOf(n);t.splice(r,1)}return n}},{key:"_createRenderTarget",value:function(t,e){var n=new o.Engine.WebGLRenderTarget(this._renderer,t.x,t.y,1);n.getBaseTexture().setMinFilter(o.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMagFilter(o.Engine.BaseTexture.NearestFilter),n.getBaseTexture().setMipMappingEnabled(!1),n.setFrame(new Y.Rectangle(0,0,t.x,t.y));var r=this._renderer.getContext();r.bindTexture(r.TEXTURE_2D,n.getBaseTexture().getGLTextureForRenderer(this._renderer));var i=e===aw.FLOAT?this._internalFloatType:r.UNSIGNED_BYTE,a=e===aw.FLOAT?this._internalFloatTextureFormat:r.RGBA;return r.texImage2D(r.TEXTURE_2D,0,a,t.x,t.y,0,a,i,null),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),aw={FLOAT:"float",INT:"int"};const sw=ow,lw=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"_filterInputToTextureMap",new Map),this._renderer=e;var r=this._renderer.getContext();this._internalFloatType=n.weightTextureType,this._internalFloatTextureFormat=n.weightTextureFormat,this._numChannels=n.weightTextureFormat===r.RGBA?4:1,this._internalFloatType!==r.FLOAT&&this._prepareFloatConversionTables()}var e;return(e=[{key:"createAndLoadTexturesForFilter",value:function(t,e){var n=this;return new Promise((function(r){t.getInputs().forEach((function(r,i){if(r.type===j_.DATA){var o=r.data,a=r.logicalShape,s=n._createTexture(),l=n._uploadDataToTexture(s,o,a,n._numChannels),u="".concat(e,"_").concat(r.name);n._filterInputToTextureMap.set(u,l),n._renderer.getContext().flush(),t.getInputs()[i].data=null}})),r()}))}},{key:"bindTexturesForFilter",value:function(t,e,n){var r=this,i=this._renderer.getContext(),o=0;return t.getInputs().forEach((function(a,s){if(a.type===j_.DATA){var l=r._filterInputToTextureMap.get("".concat(e,"_").concat(a.name)),u=l.texture,c=l.size;if(!u)throw new Error("Missing texture for filter ".concat(s,"."));i.activeTexture(i.TEXTURE0+n+o),i.bindTexture(i.TEXTURE_2D,u),t.setTextureSizeForInputWithName(c,a.name),t.setLogicalSizeForInputWithName(c,a.name),o++}})),o}},{key:"updateTexturesForFilter",value:function(t,e){var n=this;t.getInputs().forEach((function(t){if(t.type===j_.DATA&&null!==t.data){var r=n._filterInputToTextureMap.get("".concat(e,"_").concat(t.name)).texture;n._uploadDataToTexture(r,t.data,t.logicalShape,n._numChannels)}}),this)}},{key:"dispose",value:function(){var t=this._renderer.getContext();this._filterInputToTextureMap.forEach((function(e){"undefined"!==e&&t.deleteTexture(e.texture)})),this._filterInputToTextureMap.clear()}},{key:"_createTexture",value:function(){var t=this._renderer.getContext(),e=t.createTexture();return t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}},{key:"_uploadDataToTexture",value:function(t,e,n,r){var i=H_.getTextureDimensionsForLogicalShape(n),o=H_.getSizeOfLogicalShape(n);if(e.length!==o)throw new Error("Not enough or too many values (".concat(e.length,") for shape ").concat(n,"."));var a=this._renderer.getContext(),s=this._internalFloatType!==a.FLOAT,l=this._createArrayBufferForUpload(e,i,r,s);return a.bindTexture(a.TEXTURE_2D,t),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),1===r&&a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,this._internalFloatTextureFormat,i[1],i[0],0,this._internalFloatTextureFormat,this._internalFloatType,l),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.pixelStorei(a.UNPACK_ALIGNMENT,4),{texture:t,size:i}}},{key:"_createArrayBufferForUpload",value:function(t,e,n,r){if(1===n&&!1===r)return t;for(var i=e[0]*e[1]*n,o=r?new Uint16Array(i):new Float32Array(i),a=4===n,s=0,l=0;l<t.length;l++)o[s]=r?this._toHalfFloat(t[l]):t[l],a&&(o[s+3]=1),s+=n;return o}},{key:"_prepareFloatConversionTables",value:function(){var t=new ArrayBuffer(4);this._floatView=new Float32Array(t),this._uint32View=new Uint32Array(t);for(var e=new Uint32Array(512),n=new Uint32Array(512),r=0;r<256;++r){var i=r-127;i<-27?(e[0|r]=0,e[256|r]=32768,n[0|r]=24,n[256|r]=24):i<-14?(e[0|r]=1024>>-i-14,e[256|r]=1024>>-i-14|32768,n[0|r]=-i-1,n[256|r]=-i-1):i<=15?(e[0|r]=i+15<<10,e[256|r]=i+15<<10|32768,n[0|r]=13,n[256|r]=13):i<128?(e[0|r]=31744,e[256|r]=64512,n[0|r]=24,n[256|r]=24):(e[0|r]=31744,e[256|r]=64512,n[0|r]=13,n[256|r]=13)}this._baseTable=e,this._shiftTable=n}},{key:"_toHalfFloat",value:function(t){this._floatView[0]=t;var e=this._uint32View[0],n=e>>23&511;return this._baseTable[n]+((8388607&e)>>this._shiftTable[n])}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),uw=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"determineSupportedConfiguration",value:function(e){var n=!1;if(t._cachedConfigs||(t._cachedConfigs={},n=!0),t._cachedConfigs[e.id])return t._cachedConfigs[e.id];var r=e.getExtension("OES_texture_float"),i=e.FLOAT,a=e.getExtension("OES_texture_half_float"),s=null!==a?a.HALF_FLOAT_OES:null,l=null!==r,u=t._canCreateTexture(e,i,e.LUMINANCE),c=null!==a&&t._canCreateTexture(e,s,e.RGBA),f=t._canCreateTexture(e,s,e.LUMINANCE),p=l&&(e.getExtension("WEBGL_color_buffer_float")||t._canBindBuffer(e,i,e.RGBA)),h=t._canBindBuffer(e,i,e.LUMINANCE),d=t._canBindBuffer(e,s,e.LUMINANCE),y=e.FLOAT,g=e.RGBA,m="?";f?(m="Float16 Luminance",y=s,g=e.LUMINANCE):c?(m="Float16 RGBA",y=s):u?(m="Float32 Luminance",g=e.LUMINANCE):m="Float32 RGBA";var v=i,b=e.RGBA,_="?";d?(_="Float16 Luminance",v=s,b=e.LUMINANCE):h?(_="Float32 Luminance",v=i,b=e.LUMINANCE):_="Float32 RGBA",n&&o.Log.info("\nArt Filter configuration:\nWeight Textures: ".concat(m,"\nRender Textures: ").concat(_));var w={environmentSupported:p,weightTextureType:y,weightTextureFormat:g,renderTextureType:v,renderTextureFormat:b};return t._cachedConfigs[e.id]=w,w}},{key:"_canCreateTexture",value:function(t,e,n){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=n===t.RGBA?4:1,o=new Uint16Array(i);e===t.FLOAT&&(o=new Float32Array(i)),1===i&&t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,n,e,o),t.pixelStorei(t.UNPACK_ALIGNMENT,4);var a=t.isTexture(r),s=t.getError()!==t.NO_ERROR;return t.deleteTexture(r),a&&!s}},{key:"_canBindBuffer",value:function(t,e,n){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,n,e,null);var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.deleteTexture(r),t.deleteFramebuffer(i),o===t.FRAMEBUFFER_COMPLETE}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function cw(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function fw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const pw=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),fw(this,"_measurePerformance",!1),fw(this,"_filterStack",[]),fw(this,"_intermediateReadDependencies",[]),fw(this,"_intermediateWriteDependencies",[]),fw(this,"_finished",!1),this._renderer=e,this._gl=e.getContext();var o=uw.determineSupportedConfiguration(this._gl);this._renderTargetManager=new sw(e,o),this._textureManager=new lw(e,o),this._weightMap=n,this._shaderCache=new Map,this._inputTileDimensions=r,this._inferenceEdgeLength=i,this._featheredMaskFilter=new rw({inputs:[{name:"x",type:j_.PREVIOUS,logicalShape:[r.y,r.x]},{name:"y",type:j_.INDEX,logicalShape:[r.y,r.x]}]}),this._setupRGBAUnpackFilter()}var e,n,r,i;return e=t,(n=[{key:"addFilter",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._finished)throw new Error("Can't add filters to an already finished graph.");var r=this._filterStack.length,i=r-1,o=this._filterStack[i];return this._filterStack.push(t),this._intermediateReadDependencies.push([]),this._intermediateWriteDependencies.push([]),t.getInputs().forEach((function(a,s,l){switch(a.type){case j_.PREVIOUS:n&&(a.logicalShape=o.outputLogicalShape());break;case j_.INDEX:if(a.data===i)throw new Error("Accessing the previous filter through indexing is not supported. Use InputType.PREVIOUS instead.");var u=e._filterStack[a.data];if(!u)throw new Error("Indexed input does not exist: ".concat(a.data," for input ").concat(a.name," in ").concat(t.constructor.name," at ").concat(r,"."));n&&(a.logicalShape=u.outputLogicalShape()),e._intermediateReadDependencies[r].push(a),e._intermediateWriteDependencies[a.data].push(r);break;case j_.DATA:var c=a.data,f=e._weightMap[c];l[s].logicalShape=f.logicalShape,l[s].data=new Float32Array(f.data),l[s].key=c,delete e._weightMap[c]}}),this),t.prepareUniforms(),r}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._measurePerformance;this._renderer=t,this._gl=t.getContext();var r=this._gl,i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this._maxRequiredTextureDimensions=this._calculateMaximumIntermediateTextureDimensions();var o=this;return Promise.resolve().then((function(){return o._loadTextures(n)})).then((function(){return o._compileShaders(t,i,n)})).then((function(){return o._prepareRenderTargets(n)})).then((function(){return o._intermediateResults=o._filterStack.map((function(){return null})),o._quad=new Uu.Z(t),e._weightMap=null,o._finished=!0,o})).then((function(){n&&(performance.measure("texture_loading","begin_texture_loading","finish_texture_loading"),performance.measure("shader_compilation","begin_shader_compilation","finish_shader_compilation"),performance.measure("target_preparation","begin_target_preparation","finish_target_preparation"),performance.getEntriesByType("measure").forEach((function(t){console.log("".concat(t.name,": ").concat(t.duration,"ms")),performance.clearMarks(),performance.clearMeasures()})))}))}},{key:"dispose",value:function(){this._disposed||(this._textureManager.dispose(),this._renderTargetManager.dispose(),this._shaderCache.forEach((function(t){t.dispose()})),this._textureManager=null,this._renderTargetManager=null,this._shaderCache=null,this._intermediateReadDependencies=null,this._intermediateWriteDependencies=null,this._filterStack=null,this._disposed=!0)}},{key:"_loadTextures",value:function(t){var e=this;t&&performance.mark("begin_texture_loading");var n=[];return this._filterStack.forEach((function(t,r){n.push(e._textureManager.createAndLoadTexturesForFilter(t,r))}),this),Promise.all(n).then((function(){t&&performance.mark("finish_texture_loading")}))}},{key:"_compileShaders",value:function(t,e,n){var r=this;n&&performance.mark("begin_shader_compilation");var i=[];return this._filterStack.concat([this._featheredMaskFilter]).forEach((function(n,o){if(o<r._filterStack.length){var a=1+n.getInputs().filter((function(t){return t.type===j_.DATA})).length+r._intermediateReadDependencies[o].length;if(a>e)throw new Error("This environment does only offer support for ".concat(e,", but filter ").concat(n.constructor.name," requires ").concat(a,"."))}var s=n.getShaderIdentifier(),l=r;r._shaderCache.has(s)||i.push(new Promise((function(e){var r=n.getShaderForRenderer(t);if(!r)throw new Error("Could not compile filter: ".concat(n.constructor.name,"!"));l._shaderCache.set(s,r),t.getContext().finish(),e(r)})))})),Promise.all(i).then((function(){n&&performance.mark("finish_shader_compilation")}))}},{key:"_prepareRenderTargets",value:function(t){var e=this;t&&performance.mark("begin_target_preparation");var n=this._maxRequiredTextureDimensions,r=this._inputTileDimensions;return Promise.resolve().then((function(t){return e._renderTargetManager.prebuildRenderTargets(5,n,aw.FLOAT)})).then((function(t){return e._renderTargetManager.prebuildRenderTargets(3,r,aw.INT)})).then((function(e){t&&performance.mark("finish_target_preparation")}))}},{key:"isFinished",value:function(){return this._finished}},{key:"updateWeights",value:function(t){var e=this;return this._finished?(this._filterStack.forEach((function(n,r,i){var o=!1;n.getInputs().forEach((function(e,n){if(e.type===j_.DATA&&e.key){var a=t[e.key];if(!a)return;i[r].getInputs()[n].data=new Float32Array(a.data),o=!0,delete t[e.key]}})),o&&e._textureManager.updateTexturesForFilter(n,r)})),0===!Object.keys(t).length&&Promise.reject(new Error("Not all weights in the given weight map were in use.")),Promise.resolve()):Promise.reject(new Error("Graph hasn't been loaded. Unable to update weights."))}},{key:"render",value:(r=l().mark((function t(e,n,r,i,o,a){var s,u,c,f,p,h,d,y,g,m,v,b,_,w,x=this,O=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=O.length>6&&void 0!==O[6]?O[6]:this._measurePerformance,!this._disposed){t.next=3;break}return t.abrupt("return",Promise.resolve(r));case 3:if(s&&performance.mark("begin_render"),u=this._gl,s&&performance.mark("begin_preparation"),this._featheredMaskFilter.setBlendLeftTopRightBottom(o),this._featheredMaskFilter.setBlendRadius(.5*a),c=this._maxRequiredTextureDimensions,f=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,aw.INT),p=this._renderTargetManager.popRenderTarget(c,aw.FLOAT),h=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,aw.INT),this._copyTextureContents(n,f,i,Y.Vector2.NULL),this._copyTextureContents(r,h,i,Y.Vector2.NULL),d=this._filterStack[0],y=d.getInputs()[0].name,g=i.height,m=i.width,v=[g,m],d.setTextureSizeForInputWithName(this._inputTileDimensions.asArray(!0),y),d.setLogicalSizeForInputWithName(v,y),s&&performance.mark("finish_preparation"),b=new Iu.Ae,_=new Iu.Ae,this._filterStack.forEach((function(t,n){var r=1;s&&performance.mark("begin_conversion_".concat(n));var i=t.requiresFloatTextures()?aw.FLOAT:aw.INT,o=n===x.getLastIndex()?x._inputTileDimensions:x._maxRequiredTextureDimensions,a=x._renderTargetManager.getFormatOfRenderTarget(p);null===p?p=x._renderTargetManager.popRenderTarget(o,i):a!==i&&(x._renderTargetManager.pushRenderTarget(p),p=x._renderTargetManager.popRenderTarget(o,i)),s&&performance.mark("finish_conversion_".concat(n));var l=f.getFrame().getSize().asArray(!0),c=p.getFrame().getSize().asArray(!0),h=Y.Utils.Array.find(t.getInputs(),(function(t){return t.type===j_.PREVIOUS}));void 0!==h&&(t.setTextureSizeForInputWithName(l,h.name),t.setLogicalSizeForInputWithName(v,h.name)),s&&performance.mark("begin_suppl_".concat(n,"_prep")),r+=x._textureManager.bindTexturesForFilter(t,n,r),s&&performance.mark("finish_suppl_".concat(n,"_prep")),s&&performance.mark("begin_intermediate_".concat(n,"_prep"));var d=x._intermediateReadDependencies[n];x._bindIntermediateReadDependencies(t,d,r),s&&performance.mark("finish_intermediate_".concat(n,"_prep"));var y=f.getFrame(),g=p.getFrame();y.equals(b)&&g.equals(_)||(x._quad.map(y,g),x._configureVertexAttributesForShader(t.getShaderForRenderer(e)),b=y,_=g),e.setRenderTarget(p);var m=H_.getTextureDimensionsForLogicalShape(t.outputLogicalShape());t.setTargetTextureSize(c),t.setTargetLogicalSize(m),u.viewport(0,0,m[1],m[0]),s&&performance.mark("begin_filter_".concat(n));var w=x._shaderCache.get(t.getShaderIdentifier());u.useProgram(w.getProgram()),t._applyWebGL(e,f,p,!0,w),s&&performance.mark("finish_filter_".concat(n)),s&&performance.mark("begin_postprocess_".concat(n)),x._storeIntermediateResultsIfNeeded(f,n,v,l)&&(f=null),d.forEach((function(t){var e=x._intermediateResults[t.data];e&&0===e.pendingReads&&(x._renderTargetManager.pushRenderTarget(e.target),x._intermediateResults.slice(t.data,1))}),x);var O=p;p=f,f=O,v=m,s&&performance.mark("finish_postprocess_".concat(n))}),this),s&&performance.mark("begin_masking"),this._renderTargetManager.pushRenderTarget(p),p=this._renderTargetManager.popRenderTarget(this._inputTileDimensions,aw.INT),this._applyFeatheredMasking(e,f,h,p,[g,m],o),s&&performance.mark("finish_masking"),s&&performance.mark("begin_out_copy"),this._copyTextureContents(p,r,new Iu.Ae(0,0,m,g),i.getPosition()),s&&performance.mark("finish_out_copy"),this._renderTargetManager.pushRenderTarget(f),this._renderTargetManager.pushRenderTarget(p),this._renderTargetManager.pushRenderTarget(h),s&&performance.mark("finish_render"),s){for(performance.measure("total","begin_render","finish_render"),performance.measure("preparation","begin_preparation","finish_preparation"),performance.measure("masking","begin_masking","finish_masking"),performance.measure("out_copy","begin_out_copy","finish_out_copy"),w=0;w<this._filterStack.length;w++)performance.measure("conversion_".concat(w),"begin_conversion_".concat(w),"finish_conversion_".concat(w)),performance.measure("suppl_".concat(w,"_prep"),"begin_suppl_".concat(w,"_prep"),"finish_suppl_".concat(w,"_prep")),performance.measure("intermediate_".concat(w,"_prep"),"begin_intermediate_".concat(w,"_prep"),"finish_intermediate_".concat(w,"_prep")),performance.measure("filter_".concat(w,"_").concat(this._filterStack[w].constructor.name),"begin_filter_".concat(w),"finish_filter_".concat(w)),performance.measure("postprocess_".concat(w),"begin_postprocess_".concat(w),"finish_postprocess_".concat(w));performance.getEntriesByType("measure").forEach((function(t){t.duration>50&&console.log("".concat(t.name,": ").concat(t.duration,"ms"))})),performance.clearMarks(),performance.clearMeasures()}return t.abrupt("return",Promise.resolve(r));case 38:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=r.apply(t,e);function a(t){cw(o,n,i,a,s,"next",t)}function s(t){cw(o,n,i,a,s,"throw",t)}a(void 0)}))},function(t,e,n,r,o,a){return i.apply(this,arguments)})},{key:"_applyFeatheredMasking",value:function(t,e,n,r,i){var o=this._gl;o.activeTexture(o.TEXTURE0+1),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var a=r.getFrame().getSize().asArray(!0);this._featheredMaskFilter.setTargetTextureSize(a),this._featheredMaskFilter.setTargetLogicalSize(i),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"x"),this._featheredMaskFilter.setLogicalSizeForInputWithName(i,"x"),this._featheredMaskFilter.setTextureSizeForInputWithName(a,"y"),this._featheredMaskFilter.setLogicalSizeForInputWithName(i,"y");var s=this._featheredMaskFilter.getShaderIdentifier(),l=this._shaderCache.get(s);o.useProgram(l.getProgram()),this._featheredMaskFilter._applyWebGL(t,e,r,!0,l)}},{key:"_copyTextureContents",value:function(t,e,n,r){var i=this._gl;t.activate(),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.copyTexSubImage2D(i.TEXTURE_2D,0,r.x,r.y,n.x,n.y,n.width,n.height)}},{key:"_bindIntermediateReadDependencies",value:function(t,e,n){var r=this,i=this._gl,o=n;e.forEach((function(e){var n=r._intermediateResults[e.data];i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,n.target.getTexture()),t.setTextureSizeForInputWithName(n.textureSize,e.name),t.setLogicalSizeForInputWithName(n.logicalSize,e.name),n.pendingReads--,o++}))}},{key:"_configureVertexAttributesForShader",value:function(t){var e=this._gl,n=this._quad.getVertexBuffer(),r=this._quad.getIndexBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r);var i=t.getAttributeLocations();e.vertexAttribPointer(i.a_position,2,e.FLOAT,!1,0,0),e.vertexAttribPointer(i.a_texCoord,2,e.FLOAT,!1,0,32),e.vertexAttribPointer(i.a_color,4,e.FLOAT,!1,0,64)}},{key:"_storeIntermediateResultsIfNeeded",value:function(t,e,n,r){var i=e-1;return i>=0&&this._intermediateWriteDependencies[i].length>0&&(this._intermediateResults[i]={target:t,pendingReads:this._intermediateWriteDependencies[i].length,textureSize:r,logicalSize:n},!0)}},{key:"getInitialInputLogicalShape",value:function(){return this._filterStack[0].outputLogicalShape()}},{key:"getLastFilterLogicalShape",value:function(){return this.getLogicalShapeAtIndex(this._filterStack.length-1)}},{key:"getFilterCount",value:function(){return this._filterStack.length}},{key:"getLastIndex",value:function(){return this._filterStack.length-1}},{key:"getLogicalShapeAtIndex",value:function(t){return this._filterStack[t].outputLogicalShape()}},{key:"getDebugDescription",value:function(){var t=this,e="",n=0,r=0;return this._filterStack.forEach((function(i,o){var a=i.constructor.name,s=i._options.inputs.map((function(t){return"".concat(t.name,": [").concat(t.logicalShape,"]")})).join(", "),l="Out: [".concat(i.outputLogicalShape(),"]"),u="[".concat(t._supplementaryTextures[o].map((function(t){return"".concat(t.loadedTexture.getGLUnit(),": ").concat(t.loadedTexture.id)})).join(", "),"]"),c="R: [".concat(t._intermediateReadDependencies[o].map((function(t){return t.data})).join(", "),"] | W: [").concat(t._intermediateWriteDependencies[o].join(", "),"]");e+="[".concat(o,"] - ").concat(a," | ").concat(s," | ").concat(l," | ").concat(u," | ").concat(c,"\n"),n+=t._intermediateReadDependencies[o].length,r+=t._supplementaryTextures[o].length})),e+="Max intermediate texture size: ".concat(this._maxRequiredTextureDimensions,"\n"),e+="Required render targets: ".concat(n+2,"\n"),e+="Required weight textures: ".concat(r)}},{key:"_setupRGBAUnpackFilter",value:function(){var t=this._inputTileDimensions,e=[t.y,t.x],n=new W_({inputs:[{name:"x",logicalShape:e,type:j_.PREVIOUS}]});this.addFilter(n,!1)}},{key:"_removeLastFilter",value:function(){this._filterStack.pop(),this._supplementaryTextures.pop(),this._intermediateReadDependencies.pop(),this._intermediateWriteDependencies.pop()}},{key:"_calculateMaximumIntermediateTextureDimensions",value:function(){var t=new Y.Vector2(this._inputTileDimensions.x,this._inputTileDimensions.y);return this._filterStack.forEach((function(e){var n=H_.getTextureDimensionsForLogicalShape(e.outputLogicalShape());n[1]>t.x&&(t.x=n[1]),n[0]>t.y&&(t.y=n[0])})),t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),t}();function hw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yw=o.Math.Vector2;const gw=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4;hw(this,t),dw(this,"_renderedTileIndices",[]),dw(this,"_unrenderedTileIndices",[]),this._originalInputDimensions=e,this._tilingConfiguration=this._calculateTilingConfiguration(e,n,r),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._maskCache={}}var e;return(e=[{key:"_generateRandomTileIndices",value:function(t){for(var e=this,n=t.totalTileCount,r=function(){return Math.floor(Math.random()*e._tilingConfiguration.totalTileCount)},i=[];i.length<n;){for(var o=r();i.indexOf(o)>-1;)o=r();i.push(o)}return i}},{key:"_generateSpiralingTileIndices",value:function(t){var e=t.numHorizontalTiles,n=t.numVerticalTiles;return this._generateSpiralingIndicies(e,n)}},{key:"_generateSpiralingIndicies",value:function(t,e){for(var n=[],r=0,i=0,o=[0,-1],a=t%2==0,s=e%2==0,l=Math.floor(t/2)-a,u=Math.floor(e/2)-s,c=Math.pow(Math.max(t,e),2);c>0;c--)-t/2<r&&r<=t/2&&-e/2<i&&i<=e/2&&n.push((u+i)*t+(l+r)),(r===i||r<0&&r===-i||r>0&&r===1-i)&&(o=[-o[1],o[0]]),r+=o[0],i+=o[1];return n.reverse()}},{key:"calculateMaximumTileDimensions",value:function(){for(var t=this._tilingConfiguration.totalTileCount,e=new yw(0,0),n=0;n<t;n++){var r=this.getOriginalInputCoordinatesForTileAtIndex(n).getSize();e.x=Math.max(r.x,e.x),e.y=Math.max(r.y,e.y)}return e}},{key:"reset",value:function(){var t=this._tilingConfiguration,e=t.tileEdgeLength,n=t.overlappingFactor;this._tilingConfiguration=this._calculateTilingConfiguration(this._originalInputDimensions,e,n),this._unrenderedTileIndices=this._generateSpiralingTileIndices(this._tilingConfiguration),this._renderedTileIndices=[],this._nextTileIndex=null}},{key:"getOriginalInputDimensions",value:function(){return this._originalInputDimensions}},{key:"getNextTileIndex",value:function(){return this.hasRenderedAllTiles()?-1:(this._nextTileIndex||(this._nextTileIndex=this._unrenderedTileIndices.pop()),this._nextTileIndex)}},{key:"getTilingConfiguration",value:function(){return this._tilingConfiguration}},{key:"getRenderedTileCount",value:function(){return this._renderedTileIndices.length}},{key:"getRenderingProgress",value:function(){return this.getRenderedTileCount()/this._tilingConfiguration.totalTileCount}},{key:"getTileCoordinates",value:function(t){return{rowIndex:Math.floor(t/this._tilingConfiguration.numHorizontalTiles),columnIndex:Math.floor(t%this._tilingConfiguration.numHorizontalTiles)}}},{key:"getOriginalInputCoordinatesForTileAtIndex",value:function(t){var e=this._tilingConfiguration,n=e.tileEdgeLength,r=e.overlappingFactor,i=e.fittedInputDimensions,a=e.numHorizontalTiles,s=e.numVerticalTiles,l=this.getTileCoordinates(t),u=l.rowIndex,c=l.columnIndex,f=Math.ceil(u*(n*(1-r))),p=Math.ceil(c*(n*(1-r))),h=this._originalInputDimensions.x/i.x,d=this._originalInputDimensions.y/i.y,y=Math.ceil(f*d),g=Math.ceil(p*h),m=Math.ceil(n*d),v=Math.ceil(n*h);return u===s-1&&y+m<this._originalInputDimensions.y&&(y+=this._originalInputDimensions.y-(y+m)),c===a-1&&g+v<this._originalInputDimensions.x&&(g+=this._originalInputDimensions.x-(g+v)),new o.Math.Rectangle(g,y,v,m)}},{key:"hasRenderedAllTiles",value:function(){return!(!this._tilingConfiguration||!this._renderedTileIndices)&&this._tilingConfiguration.totalTileCount-this._renderedTileIndices.length==0}},{key:"markTileAsRendered",value:function(){null!==this._nextTileIndex&&(!this._renderedTileIndices.indexOf(this._nextTileIndex)>-1&&this._renderedTileIndices.push(this._nextTileIndex),this._nextTileIndex=null)}},{key:"_calculateTilingConfiguration",value:function(t,e,n){var r=Math.ceil((1-n)*e),i=Math.ceil((t.x-e)/r)*r,a=e+i,s=Math.ceil((t.y-e)/r)*r,l=e+s,u=new o.Math.Vector2(a,l),c=Math.max(1,1+Math.round(s/r)),f=Math.max(1,1+Math.round(i/r));return{tileEdgeLength:e,overlappingFactor:n,fittedInputDimensions:u,numVerticalTiles:c,numHorizontalTiles:f,totalTileCount:c*f}}},{key:"getBlendLeftTopRightBottomForTile",value:function(t){var e=this.getTileCoordinates(t),n=e.rowIndex,r=e.columnIndex,i=this._tilingConfiguration,o=i.numVerticalTiles;return[0!==r?1:0,0!==n?1:0,r!==i.numHorizontalTiles-1?1:0,n!==o-1?1:0]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function mw(t){return(mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bw(t,e){return(bw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _w(t,e){return!e||"object"!==mw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ww(t){return(ww=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const xw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bw(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ww(n);if(r){var i=ww(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return _w(this,t)});function o(){return vw(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("AddFilter requires two inputs: x and y.");var t=this._getInputWithName("x"),e=this._getInputWithName("y");if(!H_.isSameShape(t.logicalShape,e.logicalShape))throw Error("AddFilter inputs must have matching input shapes (".concat(t.logicalShape," vs. ").concat(e.logicalShape,")."));return t.logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n        float yVal = getY(coords.x, coords.y, coords.z, coords.w);\n        \n        float result = xVal + yVal;\n        setOutput(result);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);function Ow(t){return(Ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kw(t,e){return(kw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tw(t,e){return!e||"object"!==Ow(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ew(t){return(Ew=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Cw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kw(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ew(n);if(r){var i=Ew(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Tw(this,t)});function o(){return Sw(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main() {\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // WebGL doesn't offer tanh, taken from TFJS\n        float e2x = exp(-2.0 * abs(x));\n        float tanh = sign(x) * (1.0 - e2x) / (1.0 + e2x);\n\n        float rgbValue = (tanh * 150.0) + 127.5;\n        float clamped = clamp(rgbValue, 0.0, 255.0);\n        setOutput(clamped / 255.0);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);var Rw=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"calculatePadding",value:function(t,e,n,r,i,o,a){var s,l,u;if("same"===t){var c=((s=Math.ceil(e/r))-1)*r+o-e,f=((l=Math.ceil(n/i))-1)*i+a-n,p=Math.floor(c/2),h=c-p,d=Math.floor(f/2);u={top:p,bottom:h,left:d,right:f-d,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: ".concat(t));u={top:0,bottom:0,left:0,right:0,type:"VALID"},s=Math.ceil((e-o+1)/r),l=Math.ceil((n-a+1)/i)}return{padInfo:u,outHeight:s,outWidth:l}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,e),t}();function Dw(t){return(Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Iw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fw(t,e){return(Fw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jw(t,e){return!e||"object"!==Dw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mw(t){return(Mw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fw(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mw(n);if(r){var i=Mw(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return jw(this,t)});function o(){return Aw(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){if(2!==this._options.inputs.length)throw Error("Conv2DFilter requires two inputs: x and w.");var t=this._getInputWithName("x"),e=this._getInputWithName("w"),n=Pw(t.logicalShape,4),r=n[0],i=n[1],o=n[2],a=(n[3],Pw(e.logicalShape,4)),s=a[0],l=a[1],u=a[3],c=this._options.stride,f=this._options.stride,p=Rw.calculatePadding(this._options.padding,i,o,c,f,s,l),h=p.padInfo,d=p.outHeight,y=p.outWidth;return this._outChannels=u,this._padInfo=h,[r,d,y,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var t=this._getInputWithName("x").logicalShape[3],e=this._padInfo.top,n=this._padInfo.left,r=4*Math.floor(t/4),i=t%4,o=this._options.stride;return"\n    const ivec2 strides = ivec2(".concat(o,", ").concat(o,");\n    const ivec2 pads = ivec2(").concat(e,", ").concat(n,");\n\n    const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int batch = coords[0];\n      int d2 = coords[3];\n\n      ivec2 xRCCorner = coords.yz * strides - pads;\n      int xRCorner = xRCCorner.x;\n      int xCCorner = xRCCorner.y;\n\n      // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n      // ? = to be determined. : = across all values in that axis.\n      float dotProd = 0.0;\n      for (int wR = 0; wR < max_filter_iterations; wR++) {\n        if (wR >= w_shape[0]) { break; }\n        int xR = xRCorner + wR;\n        if (xR < 0 || xR >= x_shape[1]) {\n          continue;\n        }\n\n        for (int wC = 0; wC < max_filter_iterations; wC++) {\n          if (wC >= w_shape[1]) { break; }\n          int xC = xCCorner + wC;\n\n          if (xC < 0 || xC >= x_shape[2]) {\n            continue;\n          }\n\n          for (int d1 = 0; d1 < ").concat(r,"; d1 += 4) {\n            vec4 xValues = vec4(\n              getX(batch, xR, xC, d1),\n              getX(batch, xR, xC, d1 + 1),\n              getX(batch, xR, xC, d1 + 2),\n              getX(batch, xR, xC, d1 + 3)\n            );\n            vec4 wValues = vec4(\n              getW(wR, wC, d1, d2),\n              getW(wR, wC, d1 + 1, d2),\n              getW(wR, wC, d1 + 2, d2),\n              getW(wR, wC, d1 + 3, d2)\n            );\n\n            dotProd += dot(xValues, wValues);\n          }\n\n          if (").concat(1===i,") {\n            dotProd +=\n              getX(batch, xR, xC, ").concat(r,") *\n              getW(wR, wC, ").concat(r,", d2);\n          } else if (").concat(2===i,") {\n            vec2 xValues = vec2(\n              getX(batch, xR, xC, ").concat(r,"),\n              getX(batch, xR, xC, ").concat(r," + 1)\n            );\n            vec2 wValues = vec2(\n              getW(wR, wC, ").concat(r,", d2),\n              getW(wR, wC, ").concat(r," + 1, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          } else if (").concat(3===i,") {\n            vec3 xValues = vec3(\n              getX(batch, xR, xC, ").concat(r,"),\n              getX(batch, xR, xC, ").concat(r," + 1),\n              getX(batch, xR, xC, ").concat(r," + 2)\n            );\n            vec3 wValues = vec3(\n              getW(wR, wC, ").concat(r,", d2),\n              getW(wR, wC, ").concat(r," + 1, d2),\n              getW(wR, wC, ").concat(r," + 2, d2)\n            );\n            dotProd += dot(xValues, wValues);\n          }\n        }\n      }\n      setOutput(dotProd);\n    }")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);zw.prototype.availableOptions=Object.assign({stride:{type:o.OptionType.NUMBER,default:1},padding:{type:o.OptionType.STRING,default:"same"}},M_.prototype.availableOptions);const Lw=zw;function Bw(t){return(Bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Uw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ww(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hw(t,e){return(Hw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vw(t,e){return!e||"object"!==Bw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gw(t){return(Gw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hw(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gw(n);if(r){var i=Gw(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Vw(this,t)});function o(){return Ww(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){if(2!==this.getInputs().length)throw Error("DepthwiseConv2DFilter requires two inputs: x and w.");var t=this._getInputWithName("x"),e=this._getInputWithName("w"),n=Nw(t.logicalShape,4),r=n[0],i=n[1],o=n[2],a=n[3],s=Nw(e.logicalShape,4),l=s[0],u=s[1],c=s[3];if(l>9||u>9)throw new Error("Filter heights are limited to 9. Change shader source if larger ones are required.");var f=this._options.stride,p=this._options.stride,h=Rw.calculatePadding(this._options.padding,i,o,f,p,l,u),d=h.padInfo,y=h.outHeight,g=h.outWidth;return this._outChannels=c*a,this._padInfo=d,[r,y,g,this._outChannels]}},{key:"_getTensorOperationSource",value:function(){var t,e=this._padInfo.top,n=this._padInfo.left,r=this._options,i=r.stride,o=r.padMethod;switch(o){case"zero":t="return coords;";break;case"edge":t="return ivec4(clamp(vec4(coords), vec4(0.0), vec4(x_shape - 1)));"}var a="\n    ivec4 convertCoordinatesForPadding(ivec4 coords) {\n      ".concat(t,"\n    }\n    "),s="zero"===o?"if (xR < 0 || xR >= x_shape[1]) { continue; }":"",l="zero"===o?"if (xC < 0 || xC >= x_shape[2]) { continue; }":"";return"\n      const ivec2 strides = ivec2(".concat(i,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(e,", ").concat(n,");\n      const int max_filter_iterations = 9; // Required to achieve fixed size loop\n\n      ").concat(a,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads; // current coordinates in x\n        int d2 = coords.w; // current channel index\n        int outChannels = w_shape[3] * x_shape[3];\n        int d1 = d2; // currently probed channel\n        int q = d2 - d1; // current filter index\n\n        int xRCorner = xRCCorner.x; // row index\n        int xCCorner = xRCCorner.y; // column index\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < max_filter_iterations; wR++) {\n          if (wR >= w_shape[0]) { break; }\n\n          int xR = xRCorner + wR; // x row index = current index + offset * y dilation\n          ").concat(s,"\n\n          for (int wC = 0; wC < max_filter_iterations; wC++) {\n            if (wC >= w_shape[1]) { break; }\n\n            int xC = xCCorner + wC; // x column index = current index + offset * x dilation\n            ").concat(l,"\n\n            float xVal = getX(convertCoordinatesForPadding(ivec4(batch, xR, xC, d1))); // Get value at current [batch, y, x, channel]\n            float wVal = getW(wR, wC, d1, q); // Get kernel value at current \n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);Zw.prototype.availableOptions=Object.assign({stride:{type:o.OptionType.NUMBER},padding:{type:o.OptionType.STRING,default:"same"},padMethod:{type:o.OptionType.STRING,default:"zero"}},M_.prototype.availableOptions);const Xw=Zw;function qw(t){return(qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Kw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $w(t,e){return($w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tx(t,e){return!e||"object"!==qw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ex(t){return(ex=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$w(t,e)}(s,t);var e,n,r,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ex(i);if(o){var n=ex(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return tx(this,t)});function s(){return Qw(this,s),a.apply(this,arguments)}return e=s,r=[{key:"addFiltersForReduceSumOperationToGraph",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,2],r=t.getLogicalShapeAtIndex(e),i=s._computeOutAndReduceShape(r,n),o=Yw(i,2),a=(o[0],o[1]),l=H_.getSizeOfLogicalShape(a),u=H_.getSizeOfLogicalShape(r)/l,c=[l,u],f=e===t.getLastIndex(),p={name:"x",logicalShape:c,type:f?j_.PREVIOUS:j_.INDEX};f||(p.data=e);var h=s._buildReduceFilter(p);t.addFilter(h,!1);for(var d=h.outputLogicalShape();1!==d[0];){var y={name:"x",type:j_.PREVIOUS,logicalShape:h.outputLogicalShape()};d=(h=s._buildReduceFilter(y)).outputLogicalShape(),t.addFilter(h)}return t.getLastIndex()}},{key:"_buildReduceFilter",value:function(t){var e=Yw(t.logicalShape,2),n=e[0],r=e[1],i=s._computeWindowSize(n);return new s({inputs:[t],windowSize:i,batchSize:r})}},{key:"_computeWindowSize",value:function(t){if(t<=30)return t;for(var e=Math.floor(Math.sqrt(t));e<t;++e)if(t%e==0)return e;return t}},{key:"_computeOutAndReduceShape",value:function(t,e){for(var n=[],r=t.length,i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map((function(e){return t[e]}))]}}],(n=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x").logicalShape[0],e=this._options,n=e.batchSize,r=e.windowSize;return[Math.ceil(t/r),n]}},{key:"_getTensorOperationSource",value:function(){var t=this._options.windowSize,e=this._getInputWithName("x").logicalShape[0],n=4*Math.floor(t/4),r=t%4,i="";return e%t>0&&(i="\n      if (inIdx < 0 || inIdx >= x_shape[0]) {\n        return initalizationValue;\n      }\n      "),"\n      const float initializationValue = 0.0;\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(i,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        // row, col\n        ivec2 coords = getOutputCoords();\n        int batch = coords[1];\n        int outIdx = coords[0];\n        int inOffset = outIdx * ").concat(t,";\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(n,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            // row, col\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            getValue(inIdx + 3, batch)\n          );\n\n          sumValue += dot(values, ones);\n        }\n\n        int inIdx = inOffset + ").concat(n,";\n        if (").concat(1===r,") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if (").concat(2===r,") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            initializationValue,\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        } else if (").concat(3===r,") {\n          vec4 values = vec4(\n            getValue(inIdx, batch),\n            getValue(inIdx + 1, batch),\n            getValue(inIdx + 2, batch),\n            initializationValue\n          );\n\n          sumValue += dot(values, ones);\n        }\n        setOutput(sumValue);\n      }\n    ")}}])&&Jw(e.prototype,n),r&&Jw(e,r),s}(M_);nx.prototype.availableOptions=Object.assign({axes:{type:o.OptionType.ARRAY,default:[1,2]},windowSize:{type:o.OptionType.NUMBER},batchSize:{type:o.OptionType.NUMBER}},M_.prototype.availableOptions);const rx=nx;function ix(t){return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ox(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ax(t,e){return(ax=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sx(t,e){return!e||"object"!==ix(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lx(t){return(lx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ux=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ax(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lx(n);if(r){var i=lx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return sx(this,t)});function o(){return ox(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      void main ()\n      {\n        ivec4 coords = getOutputCoords();\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n\n        // 'Sum' input consists of a single value which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n\n        // 'X' is a 4D tensor holding arbitrary float values\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // Calculate the mean\n        float mean = xSum / numValuesPerChannel;\n\n        // Calculate a single variance component (x_i - mean)^2\n        float result = pow((x - mean), 2.0);\n        setOutput(result);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);function cx(t){return(cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function px(t,e){return(px=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hx(t,e){return!e||"object"!==cx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dx(t){return(dx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&px(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dx(n);if(r){var i=dx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return hx(this,t)});function o(){return fx(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._getInputWithName("x"),e=this._getInputWithName("variance"),n=this._getInputWithName("sum"),r=t.logicalShape[3];if(e.logicalShape[1]!==r||n.logicalShape[1]!==r)throw new Error("Variance and sum input depth must match x inputs channels for InstanceNormReluFilter.");return t.logicalShape}},{key:"_getTensorOperationSource",value:function(){var t=this.getAddRelu()?"\n      if (isNaN(result)) {\n        setOutput(result);\n      } else {\n        float relu = (result < 0.0) ? 0.0 : result;\n        setOutput(relu);\n      }\n    ":"setOutput(result);";return"\n      void main ()\n      {\n        float numValuesPerChannel = float(x_shape[1] * x_shape[2]);\n        ivec4 coords = getOutputCoords();\n        float x = getX(coords.x, coords.y, coords.z, coords.w);\n\n        // 'variance' input consists of a single value per channel which holds the sum of all values in x reduced by it's mean and squared afterwards\n        float nonMeanedVariance = getVarianceFlat(coords.w);\n        float variance = nonMeanedVariance / numValuesPerChannel;\n\n        // 'sum' input consists of a single value per channel which holds the sum of all elements in x\n        float xSum = getSumFlat(coords.w);\n        float mean = xSum / numValuesPerChannel;\n\n        float netmu = x - mean;\n        float sigmaEpsilonSqrt = sqrt(variance + 0.001);\n\n        float normalized = netmu / sigmaEpsilonSqrt;\n        \n        // Calculate the instance normalized value of x\n        float shift = getShiftFlat(coords.w);\n        float scale = getScaleFlat(coords.w);\n        float result = (scale * normalized) + shift;\n\n        // If it's not NaN, calculate relu\n        ".concat(t,"\n      }\n    ")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);yx.prototype.availableOptions=Object.assign({shift:{type:o.OptionType.NUMBER},scale:{type:o.OptionType.NUMBER},addRelu:{type:o.OptionType.BOOLEAN,default:!0}},M_.prototype.availableOptions);const gx=yx;function mx(t){return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return bx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bx(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wx(t,e){return(wx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xx(t,e){return!e||"object"!==mx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ox(t){return(Ox=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wx(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ox(n);if(r){var i=Ox(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return xx(this,t)});function a(){var t;_x(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._uniforms.sourceSizeRC={type:o.UniformType.FLOAT2,value:[0,0]},t._uniforms.targetSizeRC={type:o.UniformType.FLOAT2,value:[0,0]},t}return(e=[{key:"_calculateOutputShape",value:function(){var t=vx(this._getInputWithName("x").logicalShape,4),e=t[0],n=t[3],r=vx(this._options.size,2);return[e,r[0],r[1],n]}},{key:"_updateAdditionalUniforms",value:function(t){var e=vx(this._getInputWithName("x").logicalShape,3),n=(e[0],e[1]),r=e[2],i={targetSizeRC:this.getSize(),sourceSizeRC:[n,r]};t.setUniforms(i)}},{key:"_getTensorOperationSource",value:function(){return"\n      uniform vec2 sourceSizeRC;\n      uniform vec2 targetSizeRC;\n\n      void main() {\n        vec2 effectiveInSize = sourceSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveOutSize = targetSizeRC - vec2(1.0, 1.0);\n        vec2 effectiveInputOverOutputRatioRC = effectiveInSize / effectiveOutSize;\n\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(min(sourceSizeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(M_);Sx.prototype.availableOptions=Object.assign({size:{type:o.OptionType.ARRAY,required:!0},alignCorners:{type:o.OptionType.BOOLEAN,default:!0}},M_.prototype.availableOptions);const kx=Sx;function Tx(t){return(Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ex(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cx(t,e){return(Cx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rx(t,e){return!e||"object"!==Tx(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dx(t){return(Dx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Px=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cx(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dx(n);if(r){var i=Dx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Rx(this,t)});function o(){return Ex(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var e=this.getInputs()[0].logicalShape;if(t.length!==e.length)throw new Error("Not enough or too many paddings for input shape ".concat(e));return t.map((function(t,n){return t[0]+e[n]+t[1]}))}},{key:"_getTensorOperationSource",value:function(){var t=this.getInputs()[0].logicalShape.length,e=this._options.paddings.map((function(t){return t[0]})).join(","),n="vec".concat(t),r=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,t).join(",");return"\n      i".concat(n," start = i").concat(n,"(").concat(e,");\n\n      void main () {\n        i").concat(n," outC = getOutputCoords();\n        ").concat(n," coordsInInput = ").concat(n,"(outC - start);\n        i").concat(n," coords = i").concat(n,"(clamp(coordsInInput, ").concat(n,"(0.0), ").concat(n,"(x_shape - 1)));\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);Px.prototype.availableOptions=Object.assign({paddings:{type:o.OptionType.ARRAY,required:!0}},M_.prototype.availableOptions);const Ix=Px;function Ax(t){return(Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jx(t,e){return(jx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mx(t,e){return!e||"object"!==Ax(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zx(t){return(zx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Lx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jx(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zx(n);if(r){var i=zx(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return Mx(this,t)});function o(){return Fx(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._getInputWithName("x").logicalShape}},{key:"_getTensorOperationSource",value:function(){return"\n      float kernel[9];\n      vec2 offset[9];\n      float factor = 0.1;\n    \n      void main ()\n      {\n        kernel[0] = 0.;\n        kernel[1] = -1. * factor;\n        kernel[2] = 0.;\n        kernel[3] = -1. * factor;\n        kernel[4] = 1. + 4. * factor;\n        kernel[5] = -1. * factor;\n        kernel[6] = 0.;\n        kernel[7] = -1. * factor;\n        kernel[8] = 0.;\n\n        float step_w = 1.0 / float(x_sizeRC.y);\n        float step_h = 1.0 / float(x_sizeRC.x);\n\n        offset[0] = vec2(-step_w, -step_h);\n        offset[1] = vec2(0.0, -step_h);\n        offset[2] = vec2(step_w, -step_h);\n        offset[3] = vec2(-step_w, 0.0);\n        offset[4] = vec2(0.0, 0.0);\n        offset[5] = vec2(step_w, 0.0);\n        offset[6] = vec2(-step_w, step_h);\n        offset[7] = vec2(0.0, step_h);\n        offset[8] = vec2(step_w, step_h);\n\n        vec2 uv = (gl_FragCoord.xy + halfCR) / x_texRC.yx;\n        vec4 sum = vec4(0.0);\n        for (int i = 0; i < 9; i++) {\n          vec4 color = texture2D(x, uv.xy + offset[i]);\n          sum += color * kernel[i];\n        }\n\n        gl_FragColor = sum;\n      }\n    "}},{key:"requiresFloatTextures",value:function(){return!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);function Bx(t){return(Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ux(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ux(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ux(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wx(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Hx(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Wx(o,r,i,a,s,"next",t)}function s(t){Wx(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Vx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zx(t,e,n){return e&&Gx(t.prototype,e),n&&Gx(t,n),t}function Xx(t,e){return(Xx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qx(t,e){return!e||"object"!==Bx(e)&&"function"!=typeof e?Yx(t):e}function Yx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kx(t){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xx(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kx(r);if(i){var n=Kx(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return qx(this,t)});function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return Vx(this,a),Qx(Yx(t=o.call(this,e)),"_onWeightsUpdatedCallback",null),Qx(Yx(t),"_finalConvIndex",-1),t._tilingController=n,t._disposed=!1,t}return Zx(a,[{key:"isDirty",value:function(){return!this._tilingController||!this._tilingController.hasRenderedAllTiles()}},{key:"isDisposed",value:function(){return null===this._graph}},{key:"isReady",value:function(){return!this.isDisposed()&&this._graph.isFinished()}},{key:"getTilingController",value:function(){return this._tilingController}},{key:"onWeightsUpdated",value:function(t){this._onWeightsUpdatedCallback=t}}],[{key:"createWithOptions",value:function(t,e,n){var r=t.tileEdgeLength||a.prototype.availableOptions.tileEdgeLength.default,i=t.overlappingFactor||a.prototype.availableOptions.overlappingFactor.default,o=new a(t,new gw(e,r,i));return o.initGraph(n).then((function(){return o}))}}]),Zx(a,[{key:"updateInputDimensions",value:function(t){var e=this._options.tileEdgeLength||a.prototype.availableOptions.tileEdgeLength.default,n=this._options.overlappingFactor||a.prototype.availableOptions.overlappingFactor.default;this._tilingController=new gw(t,e,n)}},{key:"updateWithWeightsFromURL",value:(n=Hx(l().mark((function t(e){var n,r,i,o,a,s,u,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new k_.JSONLoader(e),t.next=3,n.load();case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return",Promise.reject(new Error("Could not load weight map from ".concat(e))));case 6:for(i=0;r["transform/residual/res_".concat(i+1,"/conv1/depthwise_weights")];)i++;if(o=r["transform/expand/final_conv/depthwise_weights"].logicalShape,a=this._graph._filterStack[this._finalConvIndex]._getInputWithName("w").logicalShape,s=H_.isSameShape(a,o),u=this._residualBlockCount===i,c=this,!s||!u){t.next=17;break}return t.abrupt("return",this._graph.updateWeights(r).then((function(){c._onWeightsUpdatedCallback&&c._onWeightsUpdatedCallback(),c.getTilingController().reset()})));case 17:return t.abrupt("return",Promise.reject(new Error("Model architectures differ.")));case 18:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"execute",value:function(t,e,n){var r=this._tilingController,i=this._graph,o=r.getNextTileIndex();if(!i.isFinished())throw new Error("Can't execute an unfinished graph.");var a=this._tilingController.getOriginalInputCoordinatesForTileAtIndex(o),s=a.x,l=a.y,u=a.height,c=a.width,f=new Y.Rectangle(s,l,c,u),p=this._tilingController.getBlendLeftTopRightBottomForTile(o),h=this._tilingController.getTilingConfiguration().overlappingFactor;return i.render(t,e,n,f,p,h).then((function(){r.markTileAsRendered(o)}))}},{key:"initGraph",value:(e=Hx(l().mark((function t(e){var n,r,i,o,a,s,u,c,f,p=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._options,r=n.weightURL,i=n.tileEdgeLength,o=this.getTilingController(),a=o.calculateMaximumTileDimensions(),s=o.getOriginalInputCoordinatesForTileAtIndex(0).getSize(),u=new k_.JSONLoader(r),t.next=7,u.load();case 7:for(c=t.sent,f=0;c["transform/residual/res_".concat(f+1,"/conv1/depthwise_weights")];)f++;return this._residualBlockCount=f,this._graph=new pw(e,c,a,i),this._graph.addFilter(new kx({inputs:[{name:"x",type:j_.PREVIOUS}],size:[i,i]})),this._addStyleTransferOperationsToGraph(this._graph,c,s),t.abrupt("return",this._graph.load(e).then((function(){p._tilingController.reset()})));case 15:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_addStyleTransferOperationsToGraph",value:function(t,e,n){this._weightMap=e;for(var r=this._addDepthwiseSeparableConvolution("transform/contract/conv1",t,1,1,"same"),i=this._addDepthwiseSeparableConvolution("transform/contract/conv2",t,r,2,"same"),o=this._addDepthwiseSeparableConvolution("transform/contract/conv3",t,i,2,"same"),a=1;a<=this._residualBlockCount;a++){var s="transform/residual/res_".concat(a);o=this._addResidualBlock(s,t,o)}var l=this._addUpsampling("transform/expand/up_1",t,o),u=this._addUpsampling("transform/expand/up_2",t,l);this._addDepthwiseSeparableConvolution("transform/expand/final_conv",t,u,1,"same",!1),t.addFilter(new Cw({inputs:[{name:"x",type:j_.PREVIOUS}]}));var c=t.addFilter(new kx({inputs:[{name:"x",type:j_.PREVIOUS}],size:[n.y,n.x]})),f=this._addEdgePadding(t,c,3,1),p=this._addPackFilterToStack(t,f);this._addSharpening(t,p),this._weightMap=null}},{key:"_addDepthwiseSeparableConvolution",value:function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=t+"/depthwise_weights",s=t+"/pointwise_weights",l=e.getLastIndex()===n,u=e.addFilter(new Xw({inputs:[{name:"x",type:l?j_.PREVIOUS:j_.DATA,data:n},{name:"w",type:j_.DATA,data:a}],stride:r,padding:"same",padMethod:"edge"}));a.indexOf("final_conv")>=0&&(this._finalConvIndex=u);var c=e.addFilter(new Lw({inputs:[{name:"x",type:j_.PREVIOUS},{name:"w",type:j_.DATA,data:s}],stride:1,padding:"valid"})),f=rx.addFiltersForReduceSumOperationToGraph(e,c,[1,2]),p=e.addFilter(new ux({inputs:[{name:"sum",type:j_.PREVIOUS},{name:"x",type:j_.INDEX,data:c}]}));rx.addFiltersForReduceSumOperationToGraph(e,p,[1,2]);var h=t+"/instance_norm/shift",d=t+"/instance_norm/scale";return e.addFilter(new gx({inputs:[{name:"variance",type:j_.PREVIOUS},{name:"sum",type:j_.INDEX,data:f},{name:"x",type:j_.INDEX,data:c},{name:"shift",type:j_.DATA,data:h},{name:"scale",type:j_.DATA,data:d}],addRelu:o})),e.getLastIndex()}},{key:"_addResidualBlock",value:function(t,e,n){var r=this._addDepthwiseSeparableConvolution(t+"/conv1",e,n,1,"same"),i=this._addDepthwiseSeparableConvolution(t+"/conv2",e,r,1,"same",!1),o=e.getLastIndex()===i;return e.addFilter(new xw({inputs:[{name:"x",type:j_.INDEX,data:n},{name:"y",type:o?j_.PREVIOUS:j_.INDEX,data:i}]})),e.getLastIndex()}},{key:"_addUpsampling",value:function(t,e,n){var r=Nx(e.getLogicalShapeAtIndex(n),3),i=(r[0],r[1]),o=r[2],a=e.getLastIndex()===n,s=e.addFilter(new kx({inputs:[{name:"x",type:a?j_.PREVIOUS:j_.INDEX,data:n}],size:[2*i,2*o]}));return this._addDepthwiseSeparableConvolution(t+"/conv",e,s,1,"same")}},{key:"_addEdgePadding",value:function(t,e,n,r){var i=Nx(t.getLogicalShapeAtIndex(e),4),o=i[1],a=i[2],s=(i[3],t.getLastIndex()===e),l=Rw.calculatePadding("same",o,a,r,r,n,n).padInfo,u=[[0,0],[l.top,l.bottom],[l.left,l.right],[0,0]];return t.addFilter(new Ix({inputs:[{name:"x",type:s?j_.PREVIOUS:j_.INDEX,data:e}],paddings:u}))}},{key:"_addPackFilterToStack",value:function(t,e){var n=t.getLogicalShapeAtIndex(e),r=t.getLastIndex()===e,i=new K_({inputs:[{name:"x",type:r?j_.PREVIOUS:j_.INDEX,data:e}],outputSize:n.slice(1,3)});if(3===n[3])return t.addFilter(i);throw new Error("Couldn't add pack filter due to channel count mismatch (expected RGB output).")}},{key:"_addSharpening",value:function(t,e){var n=t.getLastIndex()===e;t.addFilter(new Lx({inputs:[{name:"x",type:n?j_.PREVIOUS:j_.INDEX,data:e}]}))}},{key:"dispose",value:function(){this._graph&&this._graph.dispose(),this._graph=null}}]),a}(o.Configurable);Jx.prototype.availableOptions={weightURL:{type:o.OptionType.STRING,required:!0},tileEdgeLength:{type:o.OptionType.NUMBER,default:256},overlappingFactor:{type:o.OptionType.NUMBER,default:.4}};const $x=Jx;function tO(t){return(tO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nO(t,e){return(nO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rO(t,e){return!e||"object"!==tO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function iO(t){return(iO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const oO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nO(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=iO(n);if(r){var i=iO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return rO(this,t)});function o(){return eO(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){return this._options.inputs[0].logicalShape}},{key:"_getTensorOperationSource",value:function(){var t="\nconst float FLOAT_MAX = 1.70141184e38;\nconst float FLOAT_MIN = 1.17549435e-38;\n\nlowp vec4 encode_float(highp float v) {\n  if (isNaN(v)) {\n    return vec4(255, 255, 255, 255);\n  }\n\n  highp float av = abs(v);\n\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  highp float e = floor(log2(av));\n  highp float m = exp2(fract(log2(av))) - 1.0;\n\n  c[2] = floor(128.0 * m);\n  m -= c[2] / 128.0;\n  c[1] = floor(32768.0 * m);\n  m -= c[1] / 32768.0;\n  c[0] = floor(8388608.0 * m);\n\n  highp float ebias = e + 127.0;\n  c[3] = floor(ebias / 2.0);\n  ebias -= c[3] * 2.0;\n  c[2] += floor(ebias) * 128.0;\n\n  c[3] += 128.0 * step(0.0, -v);\n\n  return c / 255.0;\n}\n    ";return 4===this._options.inputs[0].logicalShape.length?t+="\nvoid main ()\n{\n  ivec4 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y, coords.z, coords.w);\n  gl_FragColor = encode_float(xVal);\n}\n    ":t+="\nvoid main ()\n{\n  ivec2 coords = getOutputCoords();\n  float xVal = getX(coords.x, coords.y);\n  gl_FragColor = encode_float(xVal);\n}\n    ",t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);function aO(t){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lO(t,e){return(lO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uO(t,e){return!e||"object"!==aO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cO(t){return(cO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lO(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=cO(n);if(r){var i=cO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return uO(this,t)});function o(){return sO(this,o),i.apply(this,arguments)}return(e=[{key:"_calculateOutputShape",value:function(){var t=this._options.paddings;if(1===!this.getInputs().length||0===this.getInputs().length)throw new Error("ReflectionPadFilter requires single input.");var e=this.getInputs()[0].logicalShape;if(t.length!==e.length)throw new Error("Not enough or too many paddings for input shape ".concat(e));return t.map((function(t,n){return t[0]+e[n]+t[1]}))}},{key:"_getTensorOperationSource",value:function(){var t=this.getInputs()[0].logicalShape.length,e=this._options.paddings.map((function(t){return t[0]})).join(","),n=this._options.paddings.map((function(t){return t[1]})).join(","),r="\n      int reflectedIndexInInputForPadBefore(int coord, int start) {\n        return int(abs(float(start - coord)));\n      }\n\n      int reflectedIndexInInputForPadAfter(int coord, int start,\n        int length, int afterPad) {\n        int indexInPad = coord - start - length;\n        int index = length - indexInPad - 2;\n        return index;\n      }\n    ",i="\n      ivec2 get2DCoordinates(\n        ivec2 outC,\n        ivec2 coords,\n        ivec2 start,\n        ivec2 end,\n        ivec2 afterPad,\n        int height,\n        int width) {\n\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          // Select non-padding rows\n          if (outC.x >= start.x && outC.x < start.x + height) {\n            // Select before pad columns\n            if (outC.y < start.y) {\n              int yIndex =\n                reflectedIndexInInputForPadBefore(outC.y, start.y);\n              return ivec2(coords.x, yIndex);\n            // Select after pad columns\n            } else if (outC.y >= start.y + width) {\n              int yIndex =\n                reflectedIndexInInputForPadAfter(outC.y, start.y,\n                  width, afterPad.y);\n              return ivec2(coords.x, yIndex);\n            }\n\n          // Select top and bottom rows, but only non-padding columns\n          } else if (outC.y >= start.y && outC.y < start.y + height) {\n            // Select top padding rows\n            if (outC.x < start.x) {\n              int xIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              return ivec2(xIndex, coords.y);\n            // Select bottom padding rows\n            } else {\n              int xIndex =\n                reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                  afterPad.x);\n              return ivec2(xIndex, coords.y);\n            }\n\n          // Handle diagonal corner cases\n          } else if (outC.x < start.x && outC.y < end.y) { // Top Left\n            ivec2 index = outC - start;\n            vec2 absIndex = vec2(abs(float(index.x)), abs(float(index.y)));\n            return ivec2(int(absIndex.x), int(absIndex.y));\n          } else if (outC.x < start.x && outC.y >= end.y) { // Top Right\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            int targetRow =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y < end.y) { // Bottom Left\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadBefore(outC.y, start.y);\n            return ivec2(targetRow, targetCol);\n          } else if (outC.x >= end.x && outC.y >= end.y) { // Bottom Right\n            int targetRow =\n              reflectedIndexInInputForPadAfter(outC.x, start.x, height,\n                afterPad.x);\n            int targetCol =\n              reflectedIndexInInputForPadAfter(outC.y, start.y, width,\n                afterPad.y);\n            return ivec2(targetRow, targetCol);\n          }\n        } else {\n          return coords;\n        }\n      }\n    ";return 1===t?"\n        int start = ".concat(e,";\n        int end = start + x_shape;\n        int width = x_shape[0];\n        int afterPad = ").concat(n,";\n\n        ").concat(r,"\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            int index = reflectedIndexInInputForPadBefore(outC, start);\n            setOutput(getX(index));\n          } else if (outC >= end) {\n            int index =\n            reflectedIndexInInputForPadAfter(outC, start, width, afterPad);\n            setOutput(getX(index));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "):2===t?"\n        ivec2 start = ivec2(".concat(e,");\n        ivec2 end = start + x_shape;\n        ivec2 afterPad = ivec2(").concat(n,");\n        int height = x_shape[0];\n        int width = x_shape[1];\n\n        ").concat(r,"\n        ").concat(i,"\n\n        void main() {\n          ivec2 outC = getOutputCoords();\n          ivec2 coords = outC - start;\n          ivec2 coordsInSrcVec = get2DCoordinates(\n            outC,\n            coords,\n            start,\n            end,\n            afterPad,\n            height,\n            width\n          );\n          setOutput(getX(coordsInSrcVec.x, coordsInSrcVec.y));\n        }\n      "):4===t?"\n        ivec4 start = ivec4(".concat(e,");\n        ivec4 end = start + x_shape;\n        ivec4 afterPad = ivec4(").concat(n,");\n        int length = x_shape[0];\n\n        ").concat(r,"\n        ").concat(i,"\n        ").concat("\n      ivec3 get3DCoordinates(\n        ivec3 outC,\n        ivec3 coords,\n        ivec3 start,\n        ivec3 end,\n        ivec3 afterPad,\n        int length,\n        int height,\n        int width) {\n        if (any(lessThan(outC, start))\n          || any(greaterThanEqual(outC, end))) {\n\n          // Calculate the current positions inner indices in the original\n          // input tensor\n          ivec2 innerIndices = get2DCoordinates(\n            ivec2(outC.y, outC.z),\n            ivec2(coords.y, coords.z),\n            ivec2(start.y, start.z),\n            ivec2(end.y, end.z),\n            ivec2(afterPad.y, afterPad.z),\n            height,\n            width\n          );\n\n          if (outC.x < start.x) {\n            int outerIndex =\n              reflectedIndexInInputForPadBefore(outC.x, start.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else if (outC.x >= end.x) {\n            int outerIndex = reflectedIndexInInputForPadAfter(\n              outC.x, start.x, length, afterPad.x);\n            return ivec3(outerIndex, innerIndices.x, innerIndices.y);\n          } else {\n            return ivec3(coords.x, innerIndices.x, innerIndices.y);\n          }\n        } else {\n          return coords;\n        }\n      }\n    ","\n\n        void main() {\n          ivec4 outC = getOutputCoords();\n          ivec4 coords = outC - start; // Coords in input\n\n          if (any(lessThan(outC, start))\n              || any(greaterThanEqual(outC, end))) {\n\n            ivec3 innerIndices = get3DCoordinates(\n              ivec3(outC.y, outC.z, outC.w),\n              ivec3(coords.y, coords.z, coords.w),\n              ivec3(start.y, start.z, start.w),\n              ivec3(end.y, end.z, end.w),\n              ivec3(afterPad.y, afterPad.z, afterPad.w),\n              x_shape[1],\n              x_shape[2],\n              x_shape[3]\n            );\n\n            if (outC.x < start.x) {\n              int outerIndex =\n                reflectedIndexInInputForPadBefore(outC.x, start.x);\n              setOutput(getX(\n                  outerIndex,\n                  innerIndices.x,\n                  innerIndices.y,\n                  innerIndices.z\n                ));\n            } else if (outC.x >= end.x) {\n              int outerIndex = reflectedIndexInInputForPadAfter(\n                outC.x, start.x, length, afterPad.x);\n              setOutput(getX(\n                outerIndex,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z\n              ));\n            } else {\n              setOutput(getX(\n                coords.x,\n                innerIndices.x,\n                innerIndices.y,\n                innerIndices.z));\n            }\n          } else {\n            setOutput(getX(coords.x, coords.y, coords.z, coords.w));\n          }\n        }\n      "):void 0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(M_);fO.prototype.availableOptions=Object.assign({paddings:{type:o.OptionType.ARRAY,required:!0}},M_.prototype.availableOptions);const pO={AddFilter:xw,Conv2DDepthwiseFilter:Xw,Conv2DFilter:Lw,EdgePadFilter:Ix,EncodeFloatFilter:oO,FeatheredMaskingFilter:rw,FinalizeStyleFilter:Cw,InstanceNormReluFilter:gx,PackRGBAFilter:K_,ReduceSumFilter:rx,ReflectionPadFilter:fO,ResizeBilinearFilter:kx,SharpenFilter:Lx,TensorFilter:M_,UnpackRGBAFilter:W_,VariancePreparationFilter:ux};function hO(t){return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dO(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function yO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gO(t,e,n){return(gO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xO(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vO(t,e,n){return e&&mO(t.prototype,e),n&&mO(t,n),t}function bO(t,e){return(bO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _O(t,e){return!e||"object"!==hO(e)&&"function"!=typeof e?wO(t):e}function wO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xO(t){return(xO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var SO=o.Engine.Filters.OverlayFilter,kO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bO(t,e)}(s,t);var e,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xO(r);if(i){var n=xO(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _O(this,t)});function s(){var t;yO(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return OO(wO(t=a.call.apply(a,[this].concat(n))),"_renderStart",null),t._renderedOverlaySprite=new o.Engine.Sprite,t._renderedOverlayContainer=new o.Engine.Container,t._renderedOverlayContainer.addChild(t._renderedOverlaySprite),t._overlayFilter=new SO,t._overlayFilter.getShaderForRenderer(t._sdk.getRenderer()),t._sdk.on("new-image",t._onNewImage.bind(wO(t))),t._prepareRenderTargets(),t}return vO(s,null,[{key:"isSupported",value:function(t){if(t.getRenderer().isOfType(_l.RendererType.WEBGL)){var e=t.getRenderer().getContext(),n=uw.determineSupportedConfiguration(e).environmentSupported,r=!o.Utils.isMobile();return n&&r}return!1}}]),vO(s,[{key:"setOption",value:function(t,e){var n=this;if("styleTransferModel"===t){var r=this._options.styleTransferModel;r&&r!==e&&this._renderInputImageIntoOverlayTarget()}if(gO(xO(s.prototype),"setOption",this).call(this,t,e),"identifier"===t||"styleTransferModel"===t){var i=this._options.styleTransferModel;i&&i.onWeightsUpdated((function(){n._renderInputImageIntoOverlayTarget()}))}}},{key:"_onNewImage",value:function(){this.dispose(),this._prepareRenderTargets();var t=this.getStyleTransferModel();t&&t.updateInputDimensions(this._exifAdjustedInputDimensions)}},{key:"_prepareRenderTargets",value:function(){var t=this._sdk.getRenderer(),e=t.getContext(),n=this._sdk.getInputTexture(),r=n.getDimensions(),i=this._sdk.getOperationsStack().getByIdentifier("exif-orientation");if(i){r=i.getNewDimensions(r);var a=new o.Engine.WebGLRenderTarget(t,r.x,r.y,1);a.setFrame(new o.Math.Rectangle(0,0,r.x,r.y));var s=t.getOrCreateGLTexture(a.getBaseTexture()),l=i.applyTo(this._sdk.getImage());e.bindTexture(e.TEXTURE_2D,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l),this._modelInputTarget=a}else{var u=new o.Engine.WebGLRenderTarget(t,r.x,r.y,1);u.setFrame(new o.Math.Rectangle(0,0,r.x,r.y)),u._baseTexture=n.getBaseTexture();var c=u._baseTexture.getGLTextureForRenderer(t);c||(c=e.createTexture(),u._baseTexture.setGLTextureForRenderer(c,t)),u._texture=c,e.bindTexture(e.TEXTURE_2D,c),e.bindFramebuffer(e.FRAMEBUFFER,u._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,c,0),this._modelInputTarget=u}this._overlayRenderTexture=new o.Engine.RenderTexture(t,r.x,r.y);var f=this._overlayRenderTexture.getBaseTexture();f.setGLUnit(5),this._sdk.getRenderer().updateTexture(f,!1),this._overlayRenderTarget=this._overlayRenderTexture.getRenderTarget(),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture),this._exifAdjustedInputDimensions=r,this._renderInputImageIntoOverlayTarget()}},{key:"_renderInputImageIntoOverlayTarget",value:function(){var t=this._sdk.getRenderer().getContext(),e=this._modelInputTarget.getFrame().getSize();this._modelInputTarget.activate(),t.bindTexture(t.TEXTURE_2D,this._overlayRenderTarget.getTexture()),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,e.x,e.y,0)}},{key:"_render",value:(e=l().mark((function t(e){var n,r,i,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._options,r=n.intensity,i=n.blendMode,a=this.getStyleTransferModel()){t.next=6;break}return this._sprite.setFilters([]),this._renderTexture.render(this._container),t.abrupt("return",o.Promise.resolve());case 6:if(!a.isDisposed()){t.next=9;break}return t.next=9,a.initGraph(this._sdk.getRenderer());case 9:if(!a.isDirty()){t.next=12;break}return t.next=12,a.execute(this._sdk.getRenderer(),this._modelInputTarget,this._overlayRenderTarget);case 12:return this._overlayFilter.set({blendMode:i,overlayImage:this._overlayRenderTarget.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),t.abrupt("return",o.Promise.resolve(a.isDirty()));case 16:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(t){dO(o,r,i,a,s,"next",t)}function s(t){dO(o,r,i,a,s,"throw",t)}a(void 0)}))},function(t){return n.apply(this,arguments)})},{key:"dispose",value:function(){if(gO(xO(s.prototype),"dispose",this).call(this),this._renderedOverlaySprite.dispose(),this._overlayFilter.dispose(),this._overlayRenderTarget.dispose(),this._modelInputTarget){var t=this._modelInputTarget._framebuffer;this._sdk.getRenderer().getContext().deleteFramebuffer(t),this._modelInputTarget=null}var e=this._options.styleTransferModel;e&&e.dispose()}}]),s}(o.Operation);kO.identifier="artfilter",kO.prototype.availableOptions={identifier:{type:o.OptionType.STRING,default:""},styleTransferModel:{type:o.OptionType.OBJECT,default:null},intensity:{type:o.OptionType.NUMBER,default:1},blendMode:{type:o.OptionType.NUMBER,default:SO.BLEND_MODES.NORMAL,available:Object.keys(SO.BLEND_MODES).map((function(t){return SO.BLEND_MODES[t]}))}},kO.StyleTransferModel=$x,kO.TensorFilters=pO,a().Operations.ArtFilterOperation=kO;const TO=kO;function EO(t){return(EO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RO(t,e){return(RO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function DO(t,e){return!e||"object"!==EO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function PO(t){return(PO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IO=o.Math.Vector2,AO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RO(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=PO(n);if(r){var i=PO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return DO(this,t)});function a(){var t;CO(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._flipContainer=new o.Engine.Container,t}return(e=[{key:"_render",value:function(t){var e=this._options,n=e.position,r=e.rotation,i=e.scale,a=e.pivot,s=e.outputResolution,l=this._sdk.getTextureScale(),u=s.clone().multiply(l).ceil();return this._renderTexture.resizeTo(u),this._sprite.setRotation(r),this._sprite.setPosition(n),this._sprite.setPivot(a),this._sprite.setScale(i),this._renderTexture.render(this._container),o.Promise.resolve()}},{key:"getNewDimensions",value:function(t){var e=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(e).ceil()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);AO.identifier="output",AO.prototype.availableOptions={position:{type:o.OptionType.VECTOR2,default:new IO(0,0)},rotation:{type:o.OptionType.NUMBER,default:0},scale:{type:o.OptionType.VECTOR2,default:new IO(1,1)},pivot:{type:o.OptionType.VECTOR2,default:new IO(0,0)},outputResolution:{type:o.OptionType.VECTOR2,default:new IO(100,100)}},a().Operations.OutputOperation=AO;const FO=AO;function jO(t){return(jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zO(t,e){return(zO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function LO(t,e){return!e||"object"!==jO(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function BO(t){return(BO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}o.Math.Vector2;var NO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zO(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=BO(n);if(r){var i=BO(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return LO(this,t)});function a(){var t;MO(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=i.call.apply(i,[this].concat(n)))._flipContainer=new o.Engine.Container,t}return(e=[{key:"_render",value:function(t){var e=this._options,n=(e.outputResolution,e.flipHorizontally),r=e.flipVertically;if(n||r){var i=t.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(i):(this._flipRenderTexture=new o.Engine.RenderTexture(this._sdk.getRenderer(),i.x,i.y),this._flipSprite=new o.Engine.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));var a=n?-1:1,s=r?-1:1;this._flipSprite.setScale(a,s),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(i.x*(1-a)*.5,i.y*(1-s)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return o.Promise.resolve()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(o.Operation);NO.identifier="flip",NO.prototype.availableOptions={flipHorizontally:{type:o.OptionType.BOOLEAN,default:!1},flipVertically:{type:o.OptionType.BOOLEAN,default:!1}},a().Operations.FlipOperation=NO;var UO=[q,pt,bl,Dl,ql,pu,Pu,Nu,Qu,yc,bf,o_,y_,S_,TO,FO,NO];a().AllOperations=UO;const WO=UO},3638:t=>{var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function r(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}t.exports={stackBlurCanvasRGBA:function(t,i,o,a,s,l){if(!(isNaN(l)||l<1)){l|=0;var u,c,f,p,h,d,y,g,m,v,b,_,w,x,O,S,k,T,E,C,R,D,P,I,A,F=t.data,j=l+l+1,M=a-1,z=s-1,L=l+1,B=L*(L+1)/2,N=new r,U=N;for(f=1;f<j;f++)U=U.next=new r,f==L&&(A=U);U.next=N;var W=null,H=null;y=d=0;var V=e[l],G=n[l];for(c=0;c<s;c++){for(S=k=T=E=g=m=v=b=0,_=L*(C=F[d]),w=L*(R=F[d+1]),x=L*(D=F[d+2]),O=L*(P=F[d+3]),g+=B*C,m+=B*R,v+=B*D,b+=B*P,U=N,f=0;f<L;f++)U.r=C,U.g=R,U.b=D,U.a=P,U=U.next;for(f=1;f<L;f++)p=d+((M<f?M:f)<<2),g+=(U.r=C=F[p])*(I=L-f),m+=(U.g=R=F[p+1])*I,v+=(U.b=D=F[p+2])*I,b+=(U.a=P=F[p+3])*I,S+=C,k+=R,T+=D,E+=P,U=U.next;for(W=N,H=A,u=0;u<a;u++)F[d+3]=P=b*V>>G,0!==P?(P=255/P,F[d]=(g*V>>G)*P,F[d+1]=(m*V>>G)*P,F[d+2]=(v*V>>G)*P):F[d]=F[d+1]=F[d+2]=0,g-=_,m-=w,v-=x,b-=O,_-=W.r,w-=W.g,x-=W.b,O-=W.a,p=y+((p=u+l+1)<M?p:M)<<2,g+=S+=W.r=F[p],m+=k+=W.g=F[p+1],v+=T+=W.b=F[p+2],b+=E+=W.a=F[p+3],W=W.next,_+=C=H.r,w+=R=H.g,x+=D=H.b,O+=P=H.a,S-=C,k-=R,T-=D,E-=P,H=H.next,d+=4;y+=a}for(u=0;u<a;u++){for(k=T=E=S=m=v=b=g=0,_=L*(C=F[d=u<<2]),w=L*(R=F[d+1]),x=L*(D=F[d+2]),O=L*(P=F[d+3]),g+=B*C,m+=B*R,v+=B*D,b+=B*P,U=N,f=0;f<L;f++)U.r=C,U.g=R,U.b=D,U.a=P,U=U.next;for(h=a,f=1;f<=l;f++)d=h+u<<2,g+=(U.r=C=F[d])*(I=L-f),m+=(U.g=R=F[d+1])*I,v+=(U.b=D=F[d+2])*I,b+=(U.a=P=F[d+3])*I,S+=C,k+=R,T+=D,E+=P,U=U.next,f<z&&(h+=a);for(d=u,W=N,H=A,c=0;c<s;c++)F[3+(p=d<<2)]=P=b*V>>G,P>0?(P=255/P,F[p]=g*V>>G,F[p+1]=m*V>>G,F[p+2]=v*V>>G):F[p]=F[p+1]=F[p+2]=0,g-=_,m-=w,v-=x,b-=O,_-=W.r,w-=W.g,x-=W.b,O-=W.a,p=u+((p=c+L)<z?p:z)*a<<2,g+=S+=W.r=F[p],m+=k+=W.g=F[p+1],v+=T+=W.b=F[p+2],b+=E+=W.a=F[p+3],W=W.next,_+=C=H.r,w+=R=H.g,x+=D=H.b,O+=P=H.a,S-=C,k-=R,T-=D,E-=P,H=H.next,d+=a}}}}},1512:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(6982);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return o(this,c),i.apply(this,arguments)}return(e=[{key:"getLabel",value:function(){var t=u[this._options.fontWeight];switch(this._options.fontStyle){case"italic":t+=" Italic"}return t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(r.Configurable);c.prototype.availableOptions={identifier:{type:r.OptionType.STRING,required:!0},fontFamily:{type:r.OptionType.STRING,required:!0},fontWeight:{type:r.OptionType.ALL,default:400},fontStyle:{type:r.OptionType.STRING,default:"normal"},textMetrics:{type:r.OptionType.OBJECT,default:null},provider:{type:r.OptionType.STRING,available:["google","file"]},filePath:{type:r.OptionType.STRING},default:{type:r.OptionType.BOOLEAN,default:!1},font:{type:r.OptionType.OBJECT}}},5576:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(6982);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var i=l(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function i(){return o(this,i),r.apply(this,arguments)}return i}(r.Configurable);u.prototype.availableOptions={identifier:{type:r.OptionType.STRING,required:!0},defaultName:{type:r.OptionType.STRING,required:!0},ratio:{type:r.OptionType.ALL,required:!1,default:null},selected:{type:r.OptionType.BOOLEAN,required:!1},dimensions:{type:r.OptionType.VECTOR2,required:!1},lockDimensions:{type:r.OptionType.BOOLEAN,required:!1,default:null},forceDimensions:{type:r.OptionType.BOOLEAN,required:!1,default:null}}},3596:(t,e,n)=>{n.d(e,{z:()=>r,Z:()=>i});var r={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};const i={DEFAULTS:{ART_FILTERS:[{defaultName:"Natasha Wescoat",identifier:"imgly_art_filter_june_tree",rootPath:"art-filters/imgly_june_tree",thumbnail:"art-filters/imgly_june_tree/thumbnail.jpg"},{defaultName:"Hive",identifier:"imgly_art_filter_hive",rootPath:"art-filters/imgly_hive",thumbnail:"art-filters/imgly_hive/thumbnail.jpg"},{defaultName:"Udnie",identifier:"imgly_art_filter_udnie",rootPath:"art-filters/imgly_udnie",thumbnail:"art-filters/imgly_udnie/thumbnail.jpg"},{defaultName:"Vince Low",identifier:"imgly_art_filter_vince_low",rootPath:"art-filters/imgly_vince_low",thumbnail:"art-filters/imgly_vince_low/thumbnail.jpg"},{defaultName:"Mosaic",identifier:"imgly_art_filter_mosaic",rootPath:"art-filters/imgly_mosaic",thumbnail:"art-filters/imgly_mosaic/thumbnail.jpg"},{defaultName:"Wave",identifier:"imgly_art_filter_wave",rootPath:"art-filters/imgly_wave",thumbnail:"art-filters/imgly_wave/thumbnail.jpg"},{defaultName:"Malikova Darya",identifier:"imgly_art_filter_watercolor",rootPath:"art-filters/imgly_watercolor",thumbnail:"art-filters/imgly_watercolor/thumbnail.jpg"}],FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},4696:(t,e,n)=>{function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:()=>o});const o={load:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"},i=function(){return t.substr(0,5),Promise.resolve([t,t])};return i().then((function(t){var i=r(t,2),o=i[0],a=i[1];return e._createAndLoadImage(o,a,n)}))},loadImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return this._loadWithoutExif(t,e)},_loadWithoutExif:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new Promise((function(n,r){var i=new window.Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(){r(new Error("Failed to load image at ".concat(t)))})),e.cors&&(i.crossOrigin=e.value),i.src=t}))},_createAndLoadImage:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new Promise((function(t,i){var o=n._loadWithoutExif(e,r).then((function(e){return t(e)})),a=new Promise((function(t,i){n._loadAsDataURL(e,r).then((function(e){var n=new window.Image;n.addEventListener("load",(function(){t(n)})),n.src=e,n.rawSource=e})).catch((function(e){o.then((function(e){return t(e)}))}))}));return n._stringEndsWith(e,".svg")?o.then((function(e){return t(e)})):a.then((function(e){return t(e)}))}))},_stringEndsWith:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e},_loadAsDataURL:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return new Promise((function(n,r){var i=new XMLHttpRequest;i.onload=function(){var t=new FileReader;t.onloadend=function(){t.error&&r(t.error),n(t.result)},t.readAsDataURL(i.response)},i.open("GET",t),i.responseType="blob",i.withCredentials=e.cors&&"use-credentials"===e.value,i.send()}))},loadXHR:function(t,e){return new Promise((function(n,r){var i;window.XDomainRequest?(i=new window.XDomainRequest,e&&i.overrideMimeType(e),i.onload=function(){n(i)},i.onerror=function(t){r(t)}):window.XMLHttpRequest&&(i=new window.XMLHttpRequest,e&&i.overrideMimeType(e),i.onreadystatechange=function(t){4===i.readyState&&(200===i.status?n(i):r(new Error("HTTP Status ".concat(i.status))))}),i.open("GET",t,!0),i.send()}))}}},1207:(t,e,n)=>{n.r(e),n.d(e,{ImageLoader:()=>r.Z,JSONLoader:()=>i.Z});var r=n(4696),i=n(9706)},9706:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(9313),i=n(1662),o="undefined"!=typeof window?window:n.g,a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e,this._parsedUrl=i.Qc(this._url,!0)}var e;return(e=[{key:"_isJSONPRequest",value:function(){var t=this._parsedUrl.query;for(var e in t)if("?"===t[e])return!0;return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var t=this;return new r.Z((function(e,n){var r;o.XDomainRequest?((r=new o.XDomainRequest).onload=function(){var t=JSON.parse(r.responseText);e(t)},r.onerror=function(t){n(t)},r.open("GET",t._url,!0),r.send()):o.XMLHttpRequest&&((r=new XMLHttpRequest).onreadystatechange=function(t){if(4===r.readyState)if(200===r.status){var i=JSON.parse(r.responseText);e(i)}else n(new Error("HTTP Status ".concat(r.status)))},r.open("GET",t._url,!0),r.send())}))}},{key:"_loadJSONP",value:function(){var t=this,e=!1,n=!1,i="pesdk"+Math.round(99999999999999*Math.random());return new r.Z((function(r,a){var s=t._createJSONPNode(i);o[i]=function(i){t._removeJSONPNode(s),e||(n=!0,r(i))},o.setTimeout((function(){n||(t._removeJSONPNode(s),e=!0,a(new Error("Timeout of 5 seconds exceeded.")))}),5e3)}))}},{key:"_createJSONPNode",value:function(t){var e=this._buildJSONPUrl(t),n=document.querySelector("head"),r=document.createElement("script");return r.src=e,n.appendChild(r),r}},{key:"_removeJSONPNode",value:function(t){t.parentNode.removeChild(t)}},{key:"_buildJSONPUrl",value:function(t){var e=this._parsedUrl.query,n=null;for(var r in e)if("?"===e[r]){n=r;break}return delete this._parsedUrl.search,e[n]=t,i.WU(this._parsedUrl)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},3678:(t,e,n)=>{n.d(e,{Z:()=>h});var i=n(3779);function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],u=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},c=function(){return(!r||r&&r.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},f=function(t,e){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: ".concat(t,"; color: ").concat(e,"; line-height: 20px; padding: 4px 0; font-weight: bold"),"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]},p=new(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;s(this,t),this._levels=o(r),this._maxLevel=this.getLevelIndexByName(n),this._consoleFuncs={trace:function(){var t,e;u()?((t=console).groupCollapsed.apply(t,arguments),console.trace(),console.groupEnd()):(e=console).trace.apply(e,arguments)}},this._levels.forEach((function(t){var n=t.name;e[n]=function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e._log.apply(e,[n,t].concat(i))}}))}var e;return(e=[{key:"getLevelIndexByName",value:function(t){return i.Z.Array.findIndex(this._levels,(function(e){return e.name===t}))}},{key:"getLevelObjectByName",value:function(t){return i.Z.Array.find(this._levels,(function(e){return e.name===t}))}},{key:"canLog",value:function(t){var e=this.getLevelIndexByName(t);return!(e<0)&&e>=this._maxLevel}},{key:"setLevel",value:function(t){var e=this.getLevelIndexByName(t);e<0||(this._maxLevel=e)}},{key:"_log",value:function(t,e){var n=this.getLevelObjectByName(t);if(n&&this.canLog(t)){n.name;for(var r=n.type,a=n.background,s=n.color,l=arguments.length,p=new Array(l>2?l-2:0),h=2;h<l;h++)p[h-2]=arguments[h];var d,y=p.filter((function(t){return void 0!==t})).map((function(t){return t.toObject?JSON.parse(JSON.stringify(t.toObject())):t})),g=this._consoleFuncs[r]||console[r]?function(){var t;return(t=console)[r].apply(t,arguments)}:function(){var t;return(t=console).log.apply(t,arguments)},m=y.length,v=f(a,s);if(!c()){var b=y.length;return b<=0?void g("PhotoEditorSDK | ".concat(e," ")):1===b&&"string"==typeof y[0]?void g("PhotoEditorSDK | ".concat(e," | ").concat(y[0])):void g.apply(void 0,["PhotoEditorSDK | ".concat(e," | ")].concat(o(y)))}m<=0?g.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c %c  ")].concat(o(v))):1!==m||"string"!=typeof y[0]?u()?((d=console).groupCollapsed.apply(d,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c")].concat(o(i.Z.Array.init(v)))),g.apply(void 0,o(y)),console.groupEnd()):g.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c")].concat(o(i.Z.Array.init(v)),o(y))):g.apply(void 0,["%c  %c PhotoEditorSDK %c  %c ".concat(e," %c  ").concat(y[0],"  %c  ")].concat(o(v)))}}},{key:"image",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=new window.Image,r=function(){var e=n.width,r=n.height;t&&console.log(t),console.log("%c+","\n        font-size: 1px;\n        padding: 0px ".concat(Math.floor(e/2),"px;\n        line-height: ").concat(r,"px;\n        background: url(").concat(n.src,");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: ").concat(e,"px ").concat(r,"px;"))};return n.onload=r,e instanceof window.HTMLCanvasElement?n.src=e.toDataURL():e instanceof window.Image?(n=e,r()):"string"==typeof e?n.src=e:this.log(t,e),n}},{key:"texture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if(e){var n=e.getBaseTexture(),r=n.getRenderers(),o=i.Z.Array.find(r,(function(t){return t&&"WebGL"===t.constructor.type})),a=n.getFrame(),s=a.width,l=a.height;if(o){var u=o.getContext(),c=n.getGLTextureForRenderer(o);this.logGlTexture(u,c,s,l,t)}else p.image(t,n.getSource())}else this.log(t,"texture: null or undefined")}},{key:"logGlTexture",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,i=arguments.length>4?arguments[4]:void 0;t.bindTexture(t.TEXTURE_2D,e);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var a=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,a),t.deleteFramebuffer(o);var s=document.createElement("canvas");s.width=n,s.height=r;var l=s.getContext("2d"),u=l.createImageData(n,r);return u.data.set(a),l.putImageData(u,0,0),p.image(i,s)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}())("warn");const h=p},6312:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(7857);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,l=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this._ui=e,this._options=n,this._categoriesById={},this._filtersByIdentifier={identity:r.Bq.Operations.FilterOperation.Filters.IdentityFilter},this._categories=r.cQ.wrapFiltersInCategories(r.yO.DEFAULTS.FILTERS.slice(0),t.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=o||e.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=r.cQ.wrapFiltersInCategories(this._options.categories,t.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}var e;return(e=[{key:"instantiateFilterWithIdentifier",value:function(t){var e=this,n={value:this._ui._options.crossOrigin,cors:!0},i=this.getFilterByIdentifier(t);if(!i)return Promise.reject(new Error("Unknown filter with identifier `".concat(t,"`!")));if(i.prototype instanceof r.Bq.Operations.FilterOperation.Filter)return Promise.resolve(new i);var o,a=i.lutImage,s=i.resolution,l=i.horizontalTileCount,u=i.verticalTileCount,c=i.lightColor,f=i.darkColor;return c&&f?(c=r.Il.fromHex(c),f=r.Il.fromHex(f),Promise.resolve(new r.Bq.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:c,darkColor:f}))):(this._ui.getPreloader&&(o=this._ui.getPreloader().getAsset(a)),(o?Promise.resolve(o):r.S3.loadImage(this._ui.getAssetPath(a),n)).then((function(){return r.S3.loadImage(e._ui.getAssetPath(a),n).then((function(t){return new r.Bq.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:t,resolution:s,horizontalTileCount:l,verticalTileCount:u})}))})))}},{key:"_initCategories",value:function(){var e=this;if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=r.cQ.wrapFiltersInCategories(this._options.categories,t.CATEGORY_ITEMS_PROPERTY):this._categories=r.cQ.mergeCategories(this._categories,this._options.categories,t.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){var n=[];this._categories.forEach((function(t){var r=t.filters.filter((function(t){return-1!==e._options.availableFilters.indexOf(t.identifier)}));r.length>0&&n.push({identifier:t.identifier,defaultName:t.defaultName,filters:r})})),this._categories=n}var i={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map((function(t){return t.filters})).reduce((function(t,e){return t.concat(e)}))};this._categories.unshift(i),this._categoriesById.all=i,this._categories.forEach((function(t){e._categoriesById[t.identifier]=t})),i.filters.forEach((function(t){e._filtersByIdentifier[t.identifier]=t}))}},{key:"getFiltersForCategory",value:function(t){if(!this._categoriesById[t])throw new Error("Unknown filter category '".concat(t,"'"));return this._categoriesById[t].filters}},{key:"getItemsByCategory",value:function(t){return this.getFiltersForCategory(t)}},{key:"getFilterByIdentifier",value:function(t){return this._filtersByIdentifier[t]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(t){return this._categoriesById[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();s="filters",(a="CATEGORY_ITEMS_PROPERTY")in(o=l)?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s},7288:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(6982),i=n(7857);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=u(e);if(n){var i=u(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return l(this,t)});function i(){return a(this,i),r.apply(this,arguments)}return i}(r.Configurable);c.prototype.availableOptions={fontFamily:{type:r.OptionType.STRING,required:!0},variations:{type:r.OptionType.ARRAY,required:!0}};var f=n(3678),p=n(1512);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}var e;return(e=[{key:"_initFonts",value:function(){var t,e=this,n=this._options,r=n.fonts,o=n.replaceFonts,a=n.availableVariations,s=n.isTextDesign;t=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();var l,u=s?i.gT.DEFAULTS.TEXT_DESIGN_FONTS:i.gT.DEFAULTS.FONTS;t&&(u=o?r:u.concat(r||[])),u=u.map((function(n){var r=n.fontFamily,i=n.variations;if(t&&a&&(i=i.filter((function(t){return-1!==a.indexOf(t.identifier)}))),0===i.length)return null;var o=new c({fontFamily:r});return i=i.map((function(t){var n=new p.Z(t);return n.setFontFamily(r),n.setFont(o),t.default&&!l&&(l=n),null==n.getTextMetrics()&&f.Z.warn("Missing font metrics for ".concat(n.getIdentifier(),". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.")),e._variationsByIdentifier[n.getIdentifier()]=n,n})),o.setVariations(i),e._fontsByFontFamily[r]=o,o})).filter((function(t){return t})),l||(l=u[0].getVariations()[0]),this._defaultVariation=l,this._fonts=u}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(t){return this._fontsByFontFamily[t]}},{key:"getVariationByIdentifier",value:function(t){return this._variationsByIdentifier[t]}},{key:"getVariationsByIdentifier",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this._variationsByIdentifier)}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},3045:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(6982),i=n(7857),o=n(3596),a=n(9706);const s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._assetsByGroupId={}}var e;return(e=[{key:"addAsset",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._assetsByGroupId[t]?n?this._assetsByGroupId[t].unshift(e):this._assetsByGroupId[t].push(e):this._assetsByGroupId[t]=[e]}},{key:"setAssets",value:function(t,e){this._assetsByGroupId[t]=e}},{key:"getAssets",value:function(t){return this._assetsByGroupId[t]=this._assetsByGroupId[t]||[],this._assetsByGroupId[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f="imgly_sticker_custom",p=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new s,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=r.Utils.createCanvas(),this.reload()}var e,n,u;return e=t,u=[{key:"getURLForSticker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",n=t.images,r="base"===e&&n.mediaBase||n.mediaThumb,o=r.uris||[r.uri];if(void 0===i.cQ.Browser||i.cQ.Browser.getIEVersion()){var a=o.filter((function(t){return!/\.svg$/i.test(t)}));return a.length?a[0]:o[0]}var s=o.filter((function(t){return/\.svg$/i.test(t)}));return s.length?s[0]:o[0]}}],(n=[{key:"reload",value:function(){this._categoriesById={},this._categories=[],this._stickersById={};var t=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(o.Z.DEFAULTS.STICKER_CATEGORIES);var e=this._options,n=e.categories,r=e.replaceCategories;if(t&&this._options.categories?this._addCategories(n,r):(this._updateCategoriesMap(),this._updateAllCategory()),t){var i=this._dynamicAssetsLibrary.getAssets("sticker");if(i.length>0){var a=this._createCustomStickerCategory(i);this._addCategories([a],!1,!0)}}}},{key:"loadExternal",value:function(t){var e=this;return new a.Z(t).load().then((function(t){e._addCategories(t.categories,e._options.replaceCategories)}))}},{key:"_addCategories",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._categories=e?t.slice(0):n?this._mergeCategories(t,this._categories):this._mergeCategories(this._categories,t),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_mergeCategories",value:function(t,e){t=i.cQ.cloneCategories(t,"stickers");var n,r=l(e);try{for(r.s();!(n=r.n()).done;){var o,a=n.value,s=!1,u=l(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(a.identifier===c.identifier){var f,p=l(a.stickers);try{for(p.s();!(f=p.n()).done;){var h,d=f.value,y=!1,g=l(c.stickers);try{for(g.s();!(h=g.n()).done;){var m=h.value;if(d.identifier===m.identifier){Object.assign(m,d),y=!0;break}}}catch(t){g.e(t)}finally{g.f()}y||c.stickers.push(d)}}catch(t){p.e(t)}finally{p.f()}s=!0;break}}}catch(t){u.e(t)}finally{u.f()}s||t.push(a)}}catch(t){r.e(t)}finally{r.f()}return t}},{key:"_updateCategoriesMap",value:function(){var t=this;this._categoriesById={},this._categories.forEach((function(e){t._categoriesById[e.identifier]=e})),this._categories.forEach((function(e){e.stickers.forEach((function(e){t._stickersById[e.identifier]=e}))})),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach((function(e){e.identifier!==f&&(e.stickers=e.stickers.filter((function(e){return-1!==t._options.availableStickers.indexOf(e.identifier)})))})),this._categories=this._categories.filter((function(t){return t.stickers.length>0}))),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map((function(t){return t.stickers})).reduce((function(t,e){return t.concat(e)}),[])},this._categoriesById.all=this._allCategory}},{key:"renderStickerThumbnailFromImage",value:function(t){var e=this._customStickerCanvas,n=e.getContext("2d");n.save();var r=62/t.width,i=r*t.height;e.width=62,e.height=62,n.clearRect(0,0,t.width,t.height),n.translate(0,.5*(e.height-i)),n.scale(r,r),n.drawImage(t,0,0);var o=e.toDataURL("image/png");return n.restore(),{data:o,width:62,height:i}}},{key:"addCustomStickerFromImage",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",a=function(t){var e=n._ui.getEditor().getSDK().getRenderer(),r=new i.FM(t.width,t.height),o=1e6*n._ui.getEditor().getMaxMegapixels(),a=e.getMaxDimensions(),s=r.x*r.y>o,l=null!==a&&(r.x>a||r.y>a);if(s){var u=t.width/t.height,c=t.height/t.width;a=new i.FM(Math.sqrt(o*u),Math.sqrt(o*c)).floor().max()}var f=r.clone();return(s||l)&&(r.x/r.y>1?(f.x=a,f.y=a/r.x*r.y):(f.x=a/r.y*r.x,f.y=a)),f},s=function(t,e){var n=t.x/t.y;return n>1?new i.FM(e,e/n):new i.FM(e*n,e)},l="data:image/svg"===t.src.substring(0,14),u=this._ui.getEditor().getSDK();t=u.correctExifOrientation(t);var c=s(new i.FM(t.width,t.height),2048),p=l?c:a(t),h=this._customStickerCanvas,d=h.getContext("2d");d.save();var y=this.renderStickerThumbnailFromImage(t);l?(t.width>t.height?(h.width=2048,h.height=2048/t.width*t.height):(h.height=2048,h.width=2048/t.height*t.width),t.width=h.width,t.height=h.height):(h.width=p.x,h.height=p.y,d.scale(p.x/t.width,p.y/t.height)),d.drawImage(t,0,0,t.width,t.height);var g=h.toDataURL();d.restore();var m={identifier:r.Utils.generateUUID(),defaultName:e||"",tintMode:o,images:{mediaThumb:{uris:[y.data],rawData:!0,width:y.width,height:y.height},mediaBase:{uris:l?[g,t.src]:[g],rawData:!0,isSVG:l,width:p.x,height:p.y}}},v=this._dynamicAssetsLibrary;v.addAsset("sticker",m,!0);var b=v.getAssets("sticker");if(1===b.length){var _=this._createCustomStickerCategory(b);this._addCategories([_],!1,!0)}else this.getCategory(f).stickers=b,this._updateAllCategory();this._updateCategoriesMap()}},{key:"_createCustomStickerCategory",value:function(t){return{identifier:f,defaultName:"Custom",metaData:{backgroundImage:t[t.length-1].images.mediaBase.uris[0],rawData:!0},stickers:t}}},{key:"getStickersForCategory",value:function(t){if(!this._categoriesById[t])throw new Error("Unknown sticker category '".concat(t,"'"));return this._categoriesById[t].stickers}},{key:"getStickerByIdentifier",value:function(t){return this._stickersById[t]}},{key:"getCategories",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(t){return this._categoriesById[t]}}])&&c(e.prototype,n),u&&c(e,u),t}()},4923:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(7857);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),this._ui=e,this._options=n,this._defaultLayouts=r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}var e;return(e=[{key:"_init",value:function(){var t=this._options.availableLayouts,e=s(s({},this._defaultLayouts),this._legacyLayouts);this._layouts=Object.keys(e).map((function(t){return{identifier:e[t].identifier,layout:e[t]}})),t&&(t.push.apply(t,i(Object.values(this._legacyLayouts).map((function(t){return t.identifier})))),this._layouts=this._layouts.filter((function(e){return t.indexOf(e.identifier)>=0})))}},{key:"getLayoutByIdentifier",value:function(t){var e=r.xx.Array.find(this._layouts,(function(e){return e.identifier===t}));return e&&e.layout}},{key:"getLayouts",value:function(){return i(this._layouts)}},{key:"getDefaultLayout",value:function(){return this.getLayouts()[0]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},3996:(t,e,n)=>{n.d(e,{Z:()=>v});var r,i=n(7857),o=n(7945),a=n.n(o),s=n(6312),l=n(3045),u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._brushes=[],this._brushesById={},this._addBrushes(i.gT.DEFAULTS.BRUSHES);var r=this._options,o=r.brushes,a=r.replaceBrushes,s=r.availableBrushes;this._options.brushes&&this._addBrushes(o,a),s&&(this._brushes=this._brushes.filter((function(t){return-1!==s.indexOf(t.identifier)})))}var e;return(e=[{key:"_addBrushes",value:function(t,e){var n=this;e&&(this._brushes=[],this._brushesById={}),t.forEach((function(t){n._brushes.push(t),n._brushesById[t.identifier]=t}))}},{key:"getBrushByIdentifier",value:function(t){return this._brushesById[t]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:function(){return this._brushes[0]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),c=n(7288),f=n(4340);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}void 0!==i.Bq.Operations.SpriteOperation&&(r=i.Bq.Operations.SpriteOperation.BrushSprite);var v=function(){function t(e,n){m(this,t),this._editor=e,this._ui=this._editor.getUI(),this._data=n,this._filterManager=new s.Z(this._ui,this._getOptions("filter")),this._stickerManager=new l.Z(this._ui,this._getOptions("sticker")),this._brushManager=new u(this._ui,this._getOptions("brush")),this._fontManager=new c.Z(this._ui,this._getOptions("text"))}var e,n,o,p;return e=t,(n=[{key:"_getOptions",value:function(t){var e=this._editor.controls,n={};e&&e.get(t)&&(n=e.get(t).defaultOptions);var r=this._editor.getOptions();return i.xx.deepDefaults({},r.editor.controlsOptions[t]||{},n)}},{key:"deserialize",value:function(){var t=this;return this._validateVersion().then((function(){return t._deserializeInputImage()})).then((function(){return t._deserializeOperations()}))}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?Promise.reject(new Error("Invalid version ".concat(this._data.version,", expected ").concat(this.constructor.version))):Promise.resolve()}},{key:"_deserializeInputImage",value:function(){var t=this;return new Promise((function(e,n){var r=t._data.inputImage,i=r.data,o=r.type;if(i&&o){var a=new window.Image;a.addEventListener("load",(function(){t._editor.setImage(a),e()})),a.src="data:".concat(o,";base64,").concat(i)}else e()}))}},{key:"_deserializeOperations",value:(o=a().mark((function t(){var e,n,r,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this._data.operations,n=[],r=0;case 3:if(!(r<e.length)){t.next=12;break}return i=e[r],t.next=7,this._deserializeOperation(i);case 7:o=t.sent,n.push(o);case 9:r++,t.next=3;break;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this)})),p=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){g(i,n,r,a,s,"next",t)}function s(t){g(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return p.apply(this,arguments)})},{key:"_deserializeOperation",value:function(t){switch(t.type){case"crop":return this._deserializeCropOperation(t);case"orientation":return this._deserializeOrientationOperation(t);case"filter":return this._deserializeFilterOperation(t);case"adjustments":return this._deserializeAdjustmentsOperation(t);case"sprite":return this._deserializeSpriteOperation(t);case"focus":return this._deserializeFocusOperation(t)}}},{key:"_deserializeCropOperation",value:function(t){var e=t.options,n=e.rotation,r=i.FM.fromObject(e.start),o=i.FM.fromObject(e.end);n>Math.PI&&(n-=2*Math.PI);var a={start:r,end:o};void 0!==n&&(a.rotation=n);var s=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(s,a),s.set(a),Promise.resolve(s)}},{key:"_deserializeOrientationOperation",value:function(t){var e=t.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(e),Promise.resolve(n)):Promise.resolve()}},{key:"_deserializeFilterOperation",value:function(t){var e=this,n=t.options;return this._filterManager.getFilterByIdentifier(n.name)?this._filterManager.instantiateFilterWithIdentifier(n.name).then((function(t){var r=e._editor.operations.getOrCreate("filter");return r.set({identifier:n.name,filter:t,intensity:n.intensity}),r})):(i.Zb.warn("Deserializer","Unknown filter `".concat(n.name,"`")),Promise.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(t){var e=i.Bq.Operations.AdjustmentsOperation,n=t.options,r={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(t){if(void 0!==n[t]){var i=e.prototype.availableOptions[t],o=i.minValue,a=i.midValue,s=i.maxValue,l=n[t];l=l<0?a+(a-o)*l:a+(s-a)*l,r[t]=l}})),Promise.resolve(this._editor.operations.getOrCreate("adjustments",r))}},{key:"_deserializeSpriteOperation",value:function(t){var e=this,n=t.options,r=this._editor.operations.getOrCreate("sprite");if(!r)return Promise.resolve();var i=n.sprites.map((function(t){return e._deserializeSprite(r,t)})).filter((function(t){return t}));return Promise.all(i).then((function(t){return r.setSprites(t.filter((function(t){return t}))),r}))}},{key:"_deserializeSprite",value:function(t,e){switch(e.type){case"sticker":return this._deserializeSticker(t,e);case"text":return this._deserializeText(t,e);case"brush":return this._deserializeBrush(t,e);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(t,e)}}},{key:"_deserializeSticker",value:function(t,e){var n=this,r=i.Bq.Operations.SpriteOperation,o=e.options,a=this._stickerManager.getStickerByIdentifier(o.name),s=this._stickerManager.getURLForSticker(a);return a?new Promise((function(e,a){var l=new window.Image;l.addEventListener("load",(function(){var n=r.StickerSprite.prototype.availableOptions.adjustments.structure,a=o.rotation,s=o.flipHorizontally,u=o.flipVertically,c={identifier:o.name,image:l,position:i.FM.fromObject(o.position),dimensions:i.FM.fromObject(o.dimensions),rotation:a,flipHorizontally:s,flipVertically:u,adjustments:{}};void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach((function(t){void 0!==o.adjustments[t]&&(c.adjustments[t]=o.adjustments[t]+n[t].default)})),e(t.createSticker(c))})),l.crossOrigin=n._editor.getCrossOrigin(),l.src=n._editor.getUI().getAssetPath(s)})):(i.Zb.warn("Deserializer","Unknown sticker '".concat(o.name,"'. Skipping sprite.")),Promise.resolve())}},{key:"_deserializeText",value:function(t,e){var n=e.options,r=n.fontSize,o=n.lineHeight,a=n.fontFamily,s=n.fontWeight,l=n.alignment,u=n.rotation,c=n.maxWidth,p=n.color,h=n.backgroundColor,d=new f.Z(this._ui),y=this._fontManager.getFontByFontFamily(a);return y||(y=this._fontManager.getDefaultFont()),d.setFonts([y]),d.load().then((function(){var e=t.createText({fontSize:r,lineHeight:o,fontFamily:a,fontWeight:s,alignment:l,rotation:u,maxWidth:c,text:n.text,color:i.Il.fromArray(p),backgroundColor:i.Il.fromArray(h),position:i.FM.fromObject(n.position)});return e._edited=!0,e}))}},{key:"_deserializeBrush",value:function(t,e){var n=this,r=e.options.paths,i=t.createBrush();return r.forEach((function(t){n._deserializeBrushPath(i,t)})),Promise.resolve(i)}},{key:"_deserializeBrushPath",value:function(t,e){var n=e.points,r=this._createBrushForPath(e),o=t.createPath(r);o.setClosed(!0),n.forEach((function(t){o.addControlPoint(i.FM.fromObject(t))}))}},{key:"_createBrushForPath",value:function(t){var e=t.color,n=t.size,o={color:i.Il.fromArray(e),size:n},a=this._brushManager.getFirstBrush();if(a.prototype&&a.prototype instanceof r)return new a(o);var s=i.xx.extend({},a);delete s.image;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=y(e);if(n){var i=y(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return d(this,t)});function i(){return m(this,i),r.apply(this,arguments)}return i}(r);return l.identifier=a.identifier,new l(i.xx.extend({},s,o))}},{key:"_deserializeFocusOperation",value:function(t){var e=t.options.options;switch(t.options.type){case"radial":var n=e.position,r=e.radius,o=e.gradientRadius,a=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:i.FM.fromObject(n),radius:r,gradientRadius:o,blurRadius:a}));case"linear":var s=e.start,l=e.end,u=e.size,c=e.gradientSize,f=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:i.FM.fromObject(s),end:i.FM.fromObject(l),size:u,gradientSize:c,blurRadius:f}))}}},{key:"_getInputDimensionsForOperation",value:function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(r){r===t&&(e=!0),e||(n=r.getNewDimensions(n))})),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),t}();v.version="1.0.0"},1233:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(4441),i=n(3996),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="1.0.0"},4441:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(7857),i=2*Math.PI,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e,this._serializeOperations=this._serializeOperations.bind(this)}var e;return(e=[{key:"serialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=r.xx.defaults(t,{image:!0});var e={version:this.constructor.version};return this._serializeInputImage(e).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(t){var e=this._editor.getImage(),n=e.width,i=e.height;if(!this._options.image)return t.inputImage={width:n,height:i},Promise.resolve(t);var o=r.xx.createCanvas();o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(e,0,0);var a=o.toDataURL(r.D3.PNG);return t.inputImage={type:r.D3.PNG,data:a.replace(/^data:image\/(.*?);base64,/,""),width:n,height:i},Promise.resolve(t)}},{key:"_serializeOperations",value:function(t){var e=this,n=[];return this._editor.operations.getStack().forEach((function(t){var r=e._serializeOperation(t,n);r&&n.push(r)})),t.operations=n.filter((function(t){return t})),Promise.resolve(t)}},{key:"_serializeOperation",value:function(t,e){switch(t.constructor.identifier){case"transform":return this._serializeTransformOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t,e);case"radial-focus":return this._serializeRadialFocusOperation(t);case"mirrored-focus":return this._serializeLinearFocusOperation(t);default:r.Zb.warn("Unable to serialize operation of type ".concat(t.constructor.identifier))}}},{key:"_serializeTransformOperation",value:function(t){var e=t.serializeOptions(["start","end","rotation"],!0);return e.rotation=(e.rotation+i)%i,{type:"crop",options:e}}},{key:"_serializeOrientationOperation",value:function(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(t){return"identity"===t.getIdentifier()?null:{type:"filter",options:{intensity:t.getIntensity(),name:t.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(t){var e=t.availableOptions,n={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((function(r){var i=e[r],o=t.getOption(r),a=i.minValue,s=i.midValue,l=i.maxValue;n[r]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),{type:"adjustments",options:n}}},{key:"_serializeSpriteOperation",value:function(t,e){var n,r=this,i=e.filter((function(t){return"sprite"===t.type})),o=!0;if(i.length?(n=i.pop(),o=!1):n={type:"sprite",options:{sprites:[]}},t.getSprites().forEach((function(e){var i=null;e instanceof t.constructor.StickerSprite?i=r._serializeSticker(t,e):e instanceof t.constructor.TextSprite?i=r._serializeText(t,e):e instanceof t.constructor.BrushSprite?i=r._serializeBrush(t,e):e instanceof t.constructor.TextDesignSprite&&(i=r._serializeTextDesign&&r._serializeTextDesign(t,e)),i&&n.options.sprites.push(i)})),o)return n}},{key:"_serializeSticker",value:function(t,e){var n=e.getAdjustments(),r=e.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);r.name=r.identifier,delete r.identifier,r.rotation=(r.rotation+i)%i;var o=n.availableOptions;return r.adjustments={brightness:n.getBrightness()-o.brightness.default,saturation:n.getSaturation()-o.saturation.default,contrast:n.getContrast()-o.contrast.default},{type:"sticker",options:r}}},{key:"_serializeText",value:function(t,e){var n=e.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return n.rotation=(n.rotation+i)%i,{type:"text",options:n}}},{key:"_serializeBrush",value:function(t,e){var n=this;return{type:"brush",options:{paths:e.getPaths().map((function(t){return n._serializePath(t)}))}}}},{key:"_serializePath",value:function(t){var e=t.getBrush().serializeOptions(["color","size"],!0);return e.points=t.getControlPoints().map((function(t){return t.getPosition().toObject()})),e}},{key:"_serializeRadialFocusOperation",value:function(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(t){var e=!1,n=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((function(r){r===t&&(e=!0),e||(n=r.getNewDimensions(n))})),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="1.0.0"},6638:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(7857);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(f,t);var e,n,i,c=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(i){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function f(){return o(this,f),c.apply(this,arguments)}return(e=[{key:"_deserializeOperation",value:function(t){return"selective-blur"===t.type?this._deserializeSelectiveBlurOperation(t):a(u(f.prototype),"_deserializeOperation",this).call(this,t)}},{key:"_deserializeCropOperation",value:function(t){var e=t.options,n=e.rotation,i=r.FM.fromObject(e.start),o=r.FM.fromObject(e.end),a=e.dimensions?r.FM.fromObject(e.dimensions):null;if(o.x-i.x<=0||o.y-i.y<=0)throw new Error("A crop should not result in negative or zero dimensions - start: ".concat(i," - end: ").concat(o));n>Math.PI&&(n-=2*Math.PI);var s={start:i,end:o};void 0!==n&&(s.rotation=n);var l=this._editor.operations.getOrCreate("transform");if(!l)return Promise.resolve();if(this._editor.broadcastTransform(l,s),l.set(s),a){var u=o.clone().subtract(i),c=l.getInputDimensions(!1).multiply(u);l.setTextureScale(a.x/c.x)}return Promise.resolve(l)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(n(3996).Z);c.version="1.0.1"},463:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(1047),i=n(6638),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="1.0.1"},1047:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(4441);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=2*Math.PI,c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,i=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return o(this,c),i.apply(this,arguments)}return(e=[{key:"_serializeTransformOperation",value:function(t){var e=t.serializeOptions(["start","end","rotation","textureScale"],!0);return e.rotation=(e.rotation+u)%u,1!==e.textureScale&&(e.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete e.textureScale,{type:"crop",options:e}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(r.Z);c.version="1.0.1"},9944:(t,e,n)=>{var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>a});var o=n(7857).Bq.Engine.Filters.OverlayFilter;const a=(i(r={},o.BLEND_MODES.NORMAL,"normal"),i(r,o.BLEND_MODES.OVERLAY,"overlay"),i(r,o.BLEND_MODES.HARD_LIGHT,"hard light"),i(r,o.BLEND_MODES.SOFT_LIGHT,"soft light"),i(r,o.BLEND_MODES.MULTIPLY,"multiply"),i(r,o.BLEND_MODES.DARKEN,"darken"),i(r,o.BLEND_MODES.LIGHTEN,"lighten"),i(r,o.BLEND_MODES.SCREEN,"screen"),i(r,o.BLEND_MODES.COLOR_BURN,"color burn"),r)},1071:(t,e,n)=>{n.d(e,{Z:()=>k});var r=n(7857),i=n(4696),o=n(6638),a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(r.yO.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=e.getEditor().getSDK()._l.areCustomAssetsAllowed();var i=this._options,o=i.categories,a=i.replaceCategories;this._customAssetsAllowed&&this._options.categories?this._addCategories(o,a):this._updateAllCategory()}var e;return(e=[{key:"_addCategories",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=n?t.slice(0):r.cQ.mergeCategories(this._categories,t,"frames"),this._categoriesById={},this._categories.forEach((function(t){e._categoriesById[t.identifier]=t}));var i=this._options.availableFrames;this._customAssetsAllowed&&i&&this._categories.forEach((function(t){t.frames=t.frames.filter((function(t){return-1!==i.indexOf(t.identifier)}))})),this._categories.forEach((function(t){t.frames.forEach((function(t){e._framesById[t.identifier]=t}))})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map((function(t){return t.frames})).reduce((function(t,e){return t.concat(e)}),[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(t){if(!this._categoriesById[t])throw new Error("Unknown frame category '".concat(t,"'"));return this._categoriesById[t].frames}},{key:"getFrameByIdentifier",value:function(t){return this._framesById[t]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(t){return this._categoriesById[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._overlays=r.yO.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};var o=e.getEditor().getSDK()._l.areCustomAssetsAllowed();o&&n.overlays&&(n.replaceOverlays?this._overlays=n.overlays:this._overlays=this._overlays.concat(n.overlays)),o&&n.availableOverlays&&(this._overlays=this._overlays.filter((function(t){return-1!==n.availableOverlays.indexOf(t.identifier)}))),this._overlays.forEach((function(t){i._overlaysByIdentifier[t.identifier]=t}))}var e;return(e=[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(t){return this._overlaysByIdentifier[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),l=n(3045);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=r.Bq.OptionType,y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(s,t);var e,n,o,a=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(o){var r=h(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return p(this,t)});function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,s),(e=a.call(this,n))._loaded=!1,e._loading=!1,e._ui=t,e._frame=r.Bq.Utils.deepClone(e._options),e}return(e=[{key:"load",value:function(){var t=this;if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var e=this._frame.imageGroups,n=[];return["top","left","right","bottom"].forEach((function(r){if(r in e){var i=e[r];["start","mid","end"].forEach((function(e){e in i&&n.push(t._loadPart(r,e))}))}})),Promise.all(n).then((function(){t._loaded=!0,t._loading=!1})).catch((function(e){t._loaded=!1,t._loading=!1}))}},{key:"_loadPart",value:function(t,e){var n=this,r=this._frame.imageGroups[t][e],o=r;return"string"!=typeof r&&"image"in r&&(o=r.image),i.Z.load(this._ui.getAssetPath(o)).then((function(i){return"string"!=typeof r?n._frame.imageGroups[t][e].image=i:n._frame.imageGroups[t][e]=i,i}))}},{key:"getFrame",value:function(){return this._frame}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(r.Bq.Configurable);y.prototype.availableOptions={identifier:{type:d.STRING,required:!0},defaultName:{type:d.STRING},thumbnail:{type:d.STRING},tintable:{type:d.BOOLEAN,default:!1},layoutMode:{type:d.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:d.OBJECT,required:!0}};var g=n(4340),m=n(9944);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=r.xx.flipObject(m.Z),k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(c,t);var e,n,o,u=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=O(n);if(o){var r=O(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return x(this,t)});function c(){var t;b(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=u.call.apply(u,[this].concat(n)))._frameManager=new a(t._ui,t._getOptions("frame"));var i=t._getOptions("overlay");return i&&(t._overlayManager=new s(t._ui,i)),t}return(e=[{key:"_deserializeSprite",value:function(t,e){return"frame"===e.type?this._deserializeFrame(t,e):"overlay"===e.type?this._deserializeOverlay(t,e):_(O(c.prototype),"_deserializeSprite",this).call(this,t,e)}},{key:"_deserializeOperation",value:function(t){return"transform"===t.type?this._deserializeTransformOperation(t):_(O(c.prototype),"_deserializeOperation",this).call(this,t)}},{key:"_deserializeOrientationOperation",value:function(t){if(this._data.meta&&"html5"!==this._data.meta.platform)return _(O(c.prototype),"_deserializeOrientationOperation",this).call(this,t);var e=t.options,n=e.rotation,r=e.flipHorizontally,i=e.flipVertically,o=90===n&&!r&&!i;return o|=90===n&&r&&i,o|=270===n&&!r&&!i,(o|=270===n&&r&&i)&&(t.options.flipHorizontally=!t.options.flipHorizontally,t.options.flipVertically=!t.options.flipVertically),_(O(c.prototype),"_deserializeOrientationOperation",this).call(this,t)}},{key:"_deserializeTransformOperation",value:function(t){var e=this;return _(O(c.prototype),"_deserializeCropOperation",this).call(this,t).then((function(t){if(t){var n=r.xx.Array.find(e._data.operations,(function(t){return"orientation"===t.type}));if(n){var i=n.options,o=i.rotation,a=i.flipHorizontally,s=i.flipVertically;90!==o&&270!==o||(!a&&s||a&&!s)&&(a=!a,s=!s),t.rotate(i.rotation),a&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),s&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t}}))}},{key:"_deserializeFrame",value:function(t,e){var n=this,i=e.options.identifier,o=this._frameManager.getFrameByIdentifier(i);if(!o)return r.Zb.warn("Deserializer","Unknown frame `".concat(i,"`. Skipping frame.")),Promise.resolve();var a=new y(this._ui,o);return a.load().then((function(){n._editor.operations.getOrCreate("frame",{frame:a.getFrame()})}))}},{key:"_deserializeOverlay",value:function(t,e){var n=this,o=e.options,a=o.blendMode,s=o.intensity,l=o.identifier,u=this._overlayManager.getOverlayByIdentifier(l);if(!u)return r.Zb.warn("Deserializer","Unknown overlay `".concat(l,"`. Skipping overlay.")),Promise.resolve();var c=this._editor.getUI().getAssetPath(u.image);return i.Z.load(c).then((function(t){n._editor.operations.getOrCreate("overlay",{alpha:s,identifier:l,blendMode:parseInt(S[a||u.blendMode],10),image:t})}))}},{key:"_createBrushForPath",value:function(t){var e=_(O(c.prototype),"_createBrushForPath",this).call(this,t);return void 0!==t.hardness&&e.hasOption("hardness")&&e.setHardness(t.hardness),e}},{key:"_deserializeSticker",value:function(t,e){var n=this,i=r.Bq.Operations.SpriteOperation,o=e.options,a=this._stickerManager.getStickerByIdentifier(o.identifier),s=l.Z.getURLForSticker(a,"base");if(!a)return r.Zb.warn("Deserializer","Unknown sticker `".concat(o.identifier,"`. Skipping sprite.")),Promise.resolve();var u=t.getInputDimensions(!1);return new Promise((function(e,l){var c=new window.Image;c.addEventListener("load",(function(){var n=i.StickerSprite.prototype.availableOptions.adjustments.structure,s=o.rotation,l=o.flipHorizontally,f=o.flipVertically,p={identifier:o.identifier,image:c,position:r.FM.fromObject(o.position),dimensions:r.FM.fromObject(o.dimensions).multiply(u.min()),rotation:s,flipHorizontally:l,flipVertically:f,adjustments:{}};void 0!==o.adjustments&&["brightness","contrast","saturation"].forEach((function(t){void 0!==o.adjustments[t]&&(p.adjustments[t]=o.adjustments[t]+n[t].default)})),void 0!==o.tintColor&&void 0!==a.tintMode&&(p.tintColor=r.Il.fromArray(o.tintColor),p.tintMode=a.tintMode),e(t.createSticker(p))})),c.crossOrigin=n._editor.getCrossOrigin(),c.src=n._editor.getUI().getAssetPath(s)}))}},{key:"_deserializeFilterOperation",value:function(t){var e=this,n=t.options;return this._filterManager.getFilterByIdentifier(n.identifier)?this._filterManager.instantiateFilterWithIdentifier(n.identifier).then((function(t){var r=e._editor.operations.getOrCreate("filter");if(r)return r.set({identifier:n.identifier,filter:t,intensity:n.intensity}),r})):(r.Zb.warn("Deserializer","Unknown filter `".concat(n.identifier,"`")),Promise.resolve())}},{key:"_deserializeFocusOperation",value:function(t){var e=t.options,n=e.options;if("radial"!==e.type)return _(O(c.prototype),"_deserializeFocusOperation",this).call(this,t);var i=this._editor.getImage(),o=i.width/i.height,a=n.start,s=n.end,l=n.gradientRadius,u=n.blurRadius,f=r.FM.fromObject(s).subtract(r.FM.fromObject(a)).multiply(o,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:r.FM.fromObject(a),radius:f,gradientRadius:l,blurRadius:u}))}},{key:"_deserializeText",value:function(t,e){var n=e.options,i=n.fontSize,o=n.lineHeight,a=n.fontIdentifier,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor,p=new g.Z(this._ui),h=this._fontManager.getVariationByIdentifier(a);return h?p.setFonts([h.getFont()]):h=this._fontManager.getDefaultFont(),p.load().then((function(){var e=t.getInputDimensions(!1),a=u*e.min()/e.x,p=t.createText({fontSize:i,lineHeight:o,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),alignment:s,rotation:l,maxWidth:a,text:n.text,color:r.Il.fromArray(c),backgroundColor:r.Il.fromArray(f),position:r.FM.fromObject(n.position)});return p._edited=!0,p}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(o.Z);k.version="2.0.0"},9608:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(429),i=n(1071),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="2.0.0"},429:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(1047),i=n(9944);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,o=(n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(r){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function f(){return a(this,f),o.apply(this,arguments)}return(e=[{key:"_serializeSticker",value:function(t,e){var n=t.getInputDimensions(!1),r=s(c(f.prototype),"_serializeSticker",this).call(this,t,e);return"none"!==e.getTintMode()&&(r.options.tintColor=e.serializeOption("tintColor",!0)),r.options.dimensions=e.getDimensions().clone().divide(n.min()).toObject(),r.options.identifier=r.options.name,delete r.options.name,r}},{key:"_serializePath",value:function(t){var e=s(c(f.prototype),"_serializePath",this).call(this,t),n=t.getBrush();return n.hasOption("hardness")&&(e.hardness=n.getOption("hardness")),e}},{key:"_serializeOperation",value:function(t,e){return"frame"===t.constructor.identifier?(this._serializeFrameOperation(t,e),null):"overlay"===t.constructor.identifier?(this._serializeOverlayOperation(t,e),null):s(c(f.prototype),"_serializeOperation",this).call(this,t,e)}},{key:"_serializeFrameOperation",value:function(t,e){var n,r=e.filter((function(t){return"sprite"===t.type}));r.length?n=r.pop():(n={type:"sprite",options:{sprites:[]}},e.push(n)),n.options.sprites.push({type:"frame",options:this._getFrameOptions(t)})}},{key:"_serializeOverlayOperation",value:function(t,e){if(t.getIdentifier()){var n,r=e.filter((function(t){return"sprite"===t.type}));r.length?n=r.pop():(n={type:"sprite",options:{sprites:[]}},e.push(n)),n.options.sprites.push({type:"overlay",options:{identifier:t.getIdentifier(),intensity:t.getAlpha(),blendMode:i.Z[t.getBlendMode()]}})}}},{key:"_getFrameOptions",value:function(t){return{identifier:t.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function(t){var e=s(c(f.prototype),"_serializeOrientationOperation",this).call(this,t);return 90!==e.options.rotation&&270!==e.options.rotation||(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),e}},{key:"_serializeTransformOperation",value:function(t){var e=this._editor.operations;if(e.exists("orientation")){t=t.clone();var n=e.get("orientation");t.rotate(-n.getRotation()),n.getFlipVertically()&&(t.flip("vertical"),t.setRotation(-1*t.getRotation())),n.getFlipHorizontally()&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation()))}var r=s(c(f.prototype),"_serializeTransformOperation",this).call(this,t);return r.type="transform",r}},{key:"_serializeText",value:function(t,e){var n=s(c(f.prototype),"_serializeText",this).call(this,t,e),r=t.getInputDimensions(!1);return n.options.fontIdentifier=e.getFontIdentifier(),n.options.maxWidth=n.options.maxWidth*r.x/r.min(),delete n.options.fontFamily,n}},{key:"_serializeFilterOperation",value:function(t){var e=s(c(f.prototype),"_serializeFilterOperation",this).call(this,t);return e?(e.options.identifier=e.options.name,delete e.options.name,e):null}},{key:"_serializeRadialFocusOperation",value:function(t){var e=s(c(f.prototype),"_serializeRadialFocusOperation",this).call(this,t),n=e.options.options;return n.start=n.position,delete n.position,n.end={x:n.start.x+n.radius,y:n.start.y},delete n.radius,e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(r.Z);f.version="2.0.0"},1346:(t,e,n)=>{n.d(e,{Z:()=>_});var r,i=n(7857),o=n(1071),a=n(3045),s=n(4923),l=n(4696),u=n(7288);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}void 0!==i.Bq.Operations.SpriteOperation&&(r=i.Bq.Operations.SpriteOperation.BrushSprite.Brush);var _=function(t){g(o,t);var e,n=m(o);function o(){return d(this,o),n.apply(this,arguments)}return(e=[{key:"_deserializeSticker",value:function(t,e){var n=i.Bq.Operations.SpriteOperation,r=e.options,o=this._stickerManager.getStickerByIdentifier(r.identifier);if(!o)return i.Zb.warn("Deserializer","Unknown sticker `".concat(r.identifier,"`. Skipping sprite.")),Promise.resolve();var s=o.images.mediaBase,u=a.Z.getURLForSticker(o,"base"),c=s.rawData?s.uris[0]:this._editor.getUI().getAssetPath(u),f=t.getInputDimensions(!1);return l.Z.load(c).then((function(e){var a=n.StickerSprite.prototype.availableOptions.adjustments.structure,s=r.rotation,l=r.flipHorizontally,u=r.flipVertically,c={identifier:r.identifier,image:e,position:i.FM.fromObject(r.position),dimensions:i.FM.fromObject(r.dimensions).multiply(f.min()),rotation:s||0,flipHorizontally:l,flipVertically:u,resizeMode:o.resizeMode||"keepAspect",adjustments:{}};return void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach((function(t){void 0!==r.adjustments[t]&&(c.adjustments[t]=r.adjustments[t]+a[t].default)})),void 0!==r.tintMode&&void 0!==r.tintColor?(c.tintColor=i.Il.fromArray(r.tintColor.rgba),c.tintMode=r.tintMode):void 0!==r.tintColor&&void 0!==o.tintMode&&(c.tintColor=i.Il.fromArray(r.tintColor.rgba),c.tintMode=o.tintMode),void 0!==r.alpha&&(c.alpha=r.alpha),t.createSticker(c)}))}},{key:"_deserializeTransformOperation",value:function(t){return y(b(o.prototype),"_deserializeTransformOperation",this).call(this,t).then((function(t){if(t)return t._ratio=null,t}))}},{key:"_deserializeInputImage",value:function(){var t=this,e=this._data.image,n=e.data,r=e.type,i=e.uri;return n&&r&&(i="data:".concat(r,";base64,").concat(n)),i?l.Z.load(i).then((function(e){t._editor.setImage(e)})):Promise.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(t){var e=i.Bq.Operations.AdjustmentsOperation;return y(b(o.prototype),"_deserializeAdjustmentsOperation",this).call(this,t).then((function(n){if(!n)return null;var r=t.options,i={};return["gamma","whites","blacks","temperature"].forEach((function(t){if(void 0!==r[t]){var n=e.prototype.availableOptions[t],o=n.minValue,a=n.midValue,s=n.maxValue,l=r[t];l=l<0?a+(a-o)*l:a+(s-a)*l,i[t]=l}})),n.set(i),n}))}},{key:"_deserializeFocusOperation",value:function(t){var e=t.options.options;switch(t.options.type){case"radial":return y(b(o.prototype),"_deserializeFocusOperation",this).call(this,t);case"linear":var n=e.start,r=e.end,a=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:i.FM.fromObject(n),controlPoint2:i.FM.fromObject(r),blurRadius:a}));case"mirrored":var s=e.start,l=e.end,u=e.size,c=e.gradientSize,f=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:i.FM.fromObject(s),end:i.FM.fromObject(l),size:u,gradientSize:c,blurRadius:f}));case"gaussian":var p=e.blurRadius;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:p}))}}},{key:"_deserializeText",value:function(t,e){var n=e.options,r=n.fontSize,o=n.lineHeight,a=n.fontIdentifier,s=n.alignment,l=n.rotation,u=n.maxWidth,c=n.color,f=n.backgroundColor,p=this._ui.getFontLoader(),h=this._fontManager.getVariationByIdentifier(a);return h?p.setFonts([h.getFont()]):h=this._fontManager.getDefaultVariation(),p.load().then((function(){var e=t.getInputDimensions(!1),a=u*e.min()/e.x,p=t.createText({fontSize:r,lineHeight:o,fontFamily:h.getFontFamily(),fontWeight:h.getFontWeight(),fontIdentifier:h.getIdentifier(),textMetrics:h.getTextMetrics(),alignment:s,rotation:l,maxWidth:a,text:n.text,color:i.Il.fromArray(c.rgba),backgroundColor:i.Il.fromArray(f.rgba),position:i.FM.fromObject(n.position)});return p._edited=!0,p}))}},{key:"_createBrushForPath",value:function(t){var e=t.brush,n=e.identifier,o=e.color,a=e.size,s=e.hardness,l={color:i.Il.fromArray(o.rgba),size:a};void 0!==s&&(l.hardness=s);var u=this._brushManager.getBrushByIdentifier(n);if(u||(u=this._brushManager.getFirstBrush()),u.prototype&&u.prototype instanceof r)return new u(l);var c=i.xx.extend({},u);delete c.image;var f=function(t){g(n,t);var e=m(n);function n(){return d(this,n),e.apply(this,arguments)}return n}(r);return f.identifier=u.identifier,new f(i.xx.extend({},c,l))}},{key:"_deserializeFrame",value:function(t,e){var n=this;return y(b(o.prototype),"_deserializeFrame",this).call(this,t,e).then((function(){var t=n._editor.operations.get("frame"),r=e.options,o=r.size,a=r.alpha,s=r.tintColor,l={};void 0!==o&&(l.scale=o),void 0!==a&&(l.alpha=a),void 0!==s&&(l.tintColor=i.Il.fromArray(s.rgba)),t.set(l)}))}},{key:"_deserializeTextDesign",value:function(t,e){var n=this,r=e.options,o=r.position,a=r.rotation,l=r.flipHorizontally,c=r.flipVertically,f=r.text,h=r.color,d=r.width,y=r.seed,g=r.inverted,m=r.identifier;m===i.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?m=i.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:m===i.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(m=i.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v=new s.Z(this._ui,this._getOptions("textdesign")),b=new u.Z(this._ui,{fonts:i.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),_=t.constructor.TextDesignSprite.AssetManager,w=this._ui.getFontLoader(),x=new(v.getLayoutByIdentifier(m));return w.setFonts(b.getFonts()),_.setFonts(p(p({},_.getFonts()),b.getVariationsByIdentifier())),w.load().then((function(){var e=x.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return _.loadImages(e).then((function(){return x.onImagesLoaded(),t.createTextDesign({position:o,rotation:a,flipHorizontally:l,flipVertically:c,text:f,color:i.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:x})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(o.Z);_.version="3.0.0"},9879:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(6690),i=n(1346),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.0.0"},6690:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(429),o=n(5576);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(s,t);var e,n,i,a=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function s(){return c(this,s),a.apply(this,arguments)}return(e=[{key:"serialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(d(s.prototype),"serialize",this).call(this,e).then((function(e){return e.meta={platform:"html5",version:t._editor.getSDK().version,createdAt:r.xx.ISODateString(new Date)},e.image=e.inputImage,delete e.inputImage,e}))}},{key:"_serializeSticker",value:function(t,e){var n=f(d(s.prototype),"_serializeSticker",this).call(this,t,e);return n.options.alpha=e.getAlpha(),n.options.tintColor&&(n.options.tintColor={rgba:n.options.tintColor}),n}},{key:"_serializeText",value:function(t,e){var n=f(d(s.prototype),"_serializeText",this).call(this,t,e);return n.options.color={rgba:n.options.color},n.options.backgroundColor={rgba:n.options.backgroundColor},n.options.flipHorizontally=!1,n.options.flipVertically=!1,delete n.options.fontWeight,n}},{key:"_serializePath",value:function(t){var e=f(d(s.prototype),"_serializePath",this).call(this,t);delete e.hardness,delete e.size,delete e.color;var n=t.getBrush();e.brush=n.serializeOptions(["identifier","size","color"],!0),void 0===e.brush.identifier&&delete e.brush.identifier,e.brush.color={rgba:e.brush.color};var r=n.getOption("hardness");return"undefined"!==r&&(e.brush.hardness=r),e}},{key:"_serializeFrameOperation",value:function(t,e){f(d(s.prototype),"_serializeFrameOperation",this).call(this,t,e);var n=e.filter((function(t){return"sprite"===t.type}));if(n.length){var i=n.pop().options.sprites.filter((function(t){return"frame"===t.type}))[0];t.getTintColor().equals(new r.Il(1,1,1,0))||(i.options.tintColor={rgba:t.serializeOption("tintColor",!0)});var o=t.serializeOptions(["scale","alpha"],!0);i.options=r.xx.extend(i.options,o),i.options.size=i.options.scale,delete i.options.scale}}},{key:"_serializeTransformOperation",value:function(t){var e,n=f(d(s.prototype),"_serializeTransformOperation",this).call(this,t);return t._ratio&&(e=t._ratio instanceof o.Z?t._ratio.getIdentifier():t._ratio.identifier,n.options.meta={identifier:e}),delete n.options.scale,n}},{key:"_serializeAdjustmentsOperation",value:function(t){var e=f(d(s.prototype),"_serializeAdjustmentsOperation",this).call(this,t),n=t.availableOptions,r={};return["gamma","whites","blacks","temperature"].forEach((function(e){var i=n[e],o=t.getOption(e),a=i.minValue,s=i.midValue,l=i.maxValue;r[e]=o<=s?(o-a)/(s-a)-1:(o-s)/(l-s)})),e.options=l(l({},e.options),r),e}},{key:"_serializeOperation",value:function(t,e){switch(t.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(t);case"linear-focus":return this._serializeLinearFocusOperation(t);case"blur":return this._serializeBlurOperation(t);default:return f(d(s.prototype),"_serializeOperation",this).call(this,t,e)}}},{key:"_serializeMirroredFocusOperation",value:function(t){return{type:"focus",options:{type:"mirrored",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(t){var e=t.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return e.start=e.controlPoint1,delete e.controlPoint1,e.end=e.controlPoint2,delete e.controlPoint2,{type:"focus",options:{type:"linear",options:e}}}},{key:"_serializeBlurOperation",value:function(t){return{type:"focus",options:{type:"gaussian",options:t.serializeOptions(["blurRadius"],!0)}}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(i.Z);y.version="3.0.0"},6252:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(1346),o=n(4923),a=n(7288);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(l,t);var e,n,i,s=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function l(){return f(this,l),s.apply(this,arguments)}return(e=[{key:"_deserializeTextDesign",value:function(t,e){var n=this,i=e.options,s=i.position,l=i.rotation,c=i.flipHorizontally,f=i.flipVertically,p=i.text,h=i.color,d=i.width,y=i.seed,g=i.inverted,m=i.identifier;m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v=new o.Z(this._ui,this._getOptions("textdesign")),b=new a.Z(this._ui,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),_=t.constructor.TextDesignSprite.AssetManager,w=this._ui.getFontLoader(),x=new(v.getLayoutByIdentifier(m));return w.setFonts(b.getFonts()),_.setFonts(u(u({},_.getFonts()),b.getVariationsByIdentifier())),w.load().then((function(){var e=x.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return _.loadImages(e).then((function(){return x.onImagesLoaded(),t.createTextDesign({position:s,rotation:l,flipHorizontally:c,flipVertically:f,text:p,color:r.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:x})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(i.Z);y.version="3.1.0"},7309:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(9149),i=n(6252),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.1.0"},9149:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l}),n(7857);var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r,l=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(r){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return a(this,t)});function u(){return i(this,u),l.apply(this,arguments)}return(e=[{key:"_serializeTextDesign",value:function(t,e){var n=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);n.color={rgba:n.color};var r=e.getLayout();return r&&(n.identifier=r.constructor.identifier),{type:"textdesign",options:n}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,e),u}(n(6690).Z);l.version="3.1.0"},3646:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(6252),o=n(4923),a=n(7288);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(l,t);var e,n,i,s=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function l(){return f(this,l),s.apply(this,arguments)}return(e=[{key:"_deserializeTextDesign",value:function(t,e){var n=this,i=e.options,s=i.position,l=i.rotation,c=i.flipHorizontally,f=i.flipVertically,p=i.text,h=i.color,d=i.width,y=i.seed,g=i.inverted,m=i.identifier;m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:m===r.Bq.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(m=r.Bq.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);var v="padding"in i?i.padding/d:-1,b=new o.Z(this._ui,this._getOptions("textdesign")),_=new a.Z(this._ui,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=t.constructor.TextDesignSprite.AssetManager,x=this._ui.getFontLoader(),O=new(b.getLayoutByIdentifier(m));return x.setFonts(_.getFonts()),w.setFonts(u(u({},w.getFonts()),_.getVariationsByIdentifier())),x.load().then((function(){var e=O.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return w.loadImages(e).then((function(){return O.onImagesLoaded(),t.createTextDesign({position:s,rotation:l,flipHorizontally:c,flipVertically:f,text:p,color:r.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:O,padding:v})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(i.Z);y.version="3.2.0"},7362:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(1943),i=n(3646),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.2.0"},1943:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r,l=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(n);if(r){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return a(this,t)});function u(){return i(this,u),l.apply(this,arguments)}return(e=[{key:"_serializeTextDesign",value:function(t,e){var n=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);n.color={rgba:n.color};var r=e.getLayout();return r&&(n.identifier=r.constructor.identifier),n.padding*=n.width,{type:"textdesign",options:n}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(u.prototype,e),u}(n(9149).Z);l.version="3.2.0"},542:(t,e,n)=>{n.d(e,{Z:()=>g});var r=n(7857),i=n(3646);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(4923),n(7288);var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ui=e,this._options=n,this._categoriesByIdentifier={},this._categories=[],this._artFiltersByIdentifier={},this._initCategories()}var e;return(e=[{key:"_initCategories",value:function(){var t=this,e={identifier:"standard",defaultName:"Standard",artFilters:r.yO.DEFAULTS.ART_FILTERS||[]};if(this._categories=[e],this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=r.cQ.mergeCategories(this._categories,this._options.categories,"artFilters")),this._options.availableArtFilters){var n=[];this._categories.forEach((function(e){var r=e.artFilters.filter((function(e){return-1!==t._options.availableArtFilters.indexOf(e.identifier)}));r.length>0&&n.push({identifier:e.identifier,defaultName:e.defaultName,artFilters:r})})),this._categories=n}var i={identifier:"all",defaultName:"All",artFilters:this._categories.length<=0?[]:this._categories.map((function(t){return t.artFilters})).reduce((function(t,e){return t.concat(e)}))};this._categories.unshift(i),this._categoriesByIdentifier.all=i,this._categories.forEach((function(e){t._categoriesByIdentifier[e.identifier]=e})),i.artFilters.forEach((function(e){t._artFiltersByIdentifier[e.identifier]=e}))}},{key:"instantiateStyleTransferModelForArtFilterWithIdentifier",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getArtFilterByIdentifier(t);if(!n)return Promise.reject(new Error("Unknown style with identifier `".concat(t,"`!")));var i=n.rootPath,o=this._ui.getEditor().getSDK(),a=o.getRenderer();e.weightURL=this._ui.getAssetPath(i+"/weights.json");var s=o.getInputTexture().getDimensions(),l=o.getOperationsStack().getByIdentifier("exif-orientation");return l&&(s=l.getNewDimensions(s)),r.Bq.Operations.ArtFilterOperation.StyleTransferModel.createWithOptions(e,s,a)}},{key:"updateLoadedModelWithWeightsForIdentifier",value:function(t,e){var n=this.getArtFilterByIdentifier(e);if(!n)return Promise.reject(new Error("Unknown style with identifier `".concat(e,"`!")));var r=n.rootPath,i=this._ui.getAssetPath(r+"/weights.json");return t.updateWithWeightsFromURL(i)}},{key:"getArtFiltersForCategory",value:function(t){if(!this._categoriesByIdentifier[t])throw new Error("Unknown art filter category '".concat(t,"'"));return this._categoriesByIdentifier[t].artFilters}},{key:"getArtFilterByIdentifier",value:function(t){return this._artFiltersByIdentifier[t]}},{key:"getCategories",value:function(){return this._categories}},{key:"getArtFilters",value:function(){var t=this,e=[];return this._categories.map((function(n){var r;e.push.apply(e,function(t){if(Array.isArray(t))return o(t)}(r=t.getArtFiltersForCategory(n.identifier))||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),e}},{key:"getCategoryByIdentifier",value:function(t){return this._categoriesByIdentifier[t]}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}(),s=n(9944);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=r.xx.flipObject(s.Z),y=r.Bq.Operations.ArtFilterOperation,g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(s,t);var e,n,i,o=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(i){var r=h(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return p(this,t)});function s(){return u(this,s),o.apply(this,arguments)}return(e=[{key:"_deserializeOperation",value:function(t){return"artFilter"===t.type?this._deserializeStyle(t):c(h(s.prototype),"_deserializeOperation",this).call(this,t)}},{key:"_deserializeOrientationOperation",value:function(t){var e=t.options,n=this._editor.operations.getOrCreate("orientation");return n?(n.set(e),Promise.resolve(n)):Promise.resolve()}},{key:"_deserializeStyle",value:function(t){var e=this,n=t.options,i=n.identifier,o=n.intensity,s=n.blendMode,l=n.tileEdgeLength,u=n.overlappingFactor;return i?y.isSupported(this._editor.getSDK())?new a(this._ui,this._getOptions("artfilter")).instantiateStyleTransferModelForArtFilterWithIdentifier(i,{tileEdgeLength:l,overlappingFactor:u}).catch((function(t){r.Zb.warn("Could not deserialize art filter: ".concat(t))})).then((function(t){e._editor.operations.getOrCreate("artfilter",{identifier:i,styleTransferModel:t,intensity:o,blendMode:parseInt(d[s||s],10)})})):(r.Zb.warn("Can't restore Art Filters, as they're not supported on this platform."),Promise.resolve()):(r.Zb.warn("Found invalid Art Filter serialization."),Promise.resolve())}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(s.prototype,e),s}(i.Z);g.version="3.4.0"},6021:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(4284),i=n(542),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.4.0"},4284:(t,e,n)=>{n.d(e,{Z:()=>f});var r=n(1943),i=n(9944);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,o=(n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(r){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function f(){return a(this,f),o.apply(this,arguments)}return(e=[{key:"_serializeOperation",value:function(t,e){switch(t.constructor.identifier){case"artfilter":return this._serializeStyle(t);default:return s(c(f.prototype),"_serializeOperation",this).call(this,t,e)}}},{key:"_serializeOrientationOperation",value:function(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeStyle",value:function(t){var e=t.getOptions(),n=e.identifier,r=e.intensity,o=e.blendMode,a=t.getStyleTransferModel().getOptions(),s=a.tileEdgeLength,l=a.overlappingFactor;return{type:"artFilter",options:{identifier:n,intensity:r,blendMode:i.Z[o],tileEdgeLength:s,overlappingFactor:l}}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(r.Z);f.version="3.4.0"},3167:(t,e,n)=>{n.d(e,{Z:()=>y});var r=n(7857),i=n(542),o=n(4923),a=n(7288);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(l,t);var e,n,i,s=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(i){var r=d(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function l(){return f(this,l),s.apply(this,arguments)}return(e=[{key:"_deserializeTextDesign",value:function(t,e){var n=this,i=e.options,s=i.position,l=i.rotation,c=i.flipHorizontally,f=i.flipVertically,p=i.text,h=i.color,d=i.width,y=i.seed,g=i.inverted,m=i.identifier,v="padding"in i?i.padding/d:-1,b=new o.Z(this._ui,this._getOptions("textdesign")),_=new a.Z(this._ui,{fonts:r.gT.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),w=t.constructor.TextDesignSprite.AssetManager,x=this._ui.getFontLoader(),O=new(b.getLayoutByIdentifier(m));return x.setFonts(_.getFonts()),w.setFonts(u(u({},w.getFonts()),_.getVariationsByIdentifier())),x.load().then((function(){var e=O.getImagePaths().map((function(t){return{path:t,fullPath:n._ui.getAssetPath(t),image:null}}));return w.loadImages(e).then((function(){return O.onImagesLoaded(),t.createTextDesign({position:s,rotation:l,flipHorizontally:c,flipVertically:f,text:p,color:r.Il.fromArray(h.rgba),width:d,seed:y,inverted:g,layout:O,padding:v})}))}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(l.prototype,e),l}(i.Z);y.version="3.5.0"},3102:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(2527),i=n(3167),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.5.0"},2527:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(l,t);var e,n,r=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function l(){return i(this,l),r.apply(this,arguments)}return l}(n(4284).Z);l.version="3.5.0"},9030:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(7857);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(f,t);var e,n,i,c=(n=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(i){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return l(this,t)});function f(){return o(this,f),c.apply(this,arguments)}return(e=[{key:"_deserializeAdjustmentsOperation",value:function(t){var e=r.Bq.Operations.AdjustmentsOperation;return a(u(f.prototype),"_deserializeAdjustmentsOperation",this).call(this,t).then((function(n){if(!n)return null;var r=t.options,i={};if(void 0!==r.sharpness){var o=e.prototype.availableOptions.sharpness,a=o.minValue,s=o.midValue,l=o.maxValue,u=r.sharpness;return u=u<0?s+(s-a)*u:s+(l-s)*u,i.sharpness=u,n.set(i),n}}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(f.prototype,e),f}(n(3167).Z);c.version="3.6.0"},4146:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(3903),i=n(9030),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.6.0"},3903:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>p});var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,t);var e,n,r,i=(n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(n);if(r){var i=f(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return c(this,t)});function a(){return s(this,a),i.apply(this,arguments)}return(e=[{key:"_serializeAdjustmentsOperation",value:function(t){var e=l(f(a.prototype),"_serializeAdjustmentsOperation",this).call(this,t),n={},r=t.availableOptions.sharpness,i=t.getOption("sharpness"),s=r.minValue,u=r.midValue,c=r.maxValue;return n.sharpness=i<=u?(i-s)/(u-s)-1:(i-u)/(c-u),e.options=o(o({},e.options),n),e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,e),a}(n(2527).Z);p.version="3.6.0"},5474:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(6982);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,i,u=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(i){var r=l(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return s(this,t)});function c(){return o(this,c),u.apply(this,arguments)}return(e=[{key:"deserialize",value:function(){var t=this;return this._validateVersion().then((function(){return t._deserializeAssetLibrary()})).then((function(){return t._deserializeInputImage()})).then((function(){return t._deserializeOperations()}))}},{key:"_deserializeAssetLibrary",value:function(){var t=this;return new Promise((function(e,n){var r=t._data;if(r.assetLibrary){var i=r.assetLibrary.assets,o=[];for(var a in i)o.push(t._deserializeCustomAssets(a,i[a]));return Promise.all(o).then((function(){e()})).catch((function(t){console.error(t),n(t)}))}e()}))}},{key:"_deserializeCustomAssets",value:function(t,e){switch(t){case"stickers":return this._deserializeCustomStickerAssets(e);default:return Promise.reject(new Error("Unknown asset type: ".concat(t)))}}},{key:"_deserializeCustomStickerAssets",value:function(t){var e=this,n="none",i=this._editor.getOptions().editor;i&&i.controlsOptions&&i.controlsOptions.sticker&&(n=i.controlsOptions.sticker.customStickerTintMode||"none");var o=t.map((function(t){return new Promise((function(i,o){var a=t.identifier,s=t.raster,l=void 0!==t.svg,u="data:".concat(s.type,";base64,").concat(s.data),c=new r.Image;c.onload=function(){var r,o=e._editor.getSDK();(c=o.correctExifOrientation(c)).toDataURL&&(u=c.toDataURL()),r=e._stickerManager.renderStickerThumbnailFromImage(c);var s={identifier:a,defaultName:t.name||"",tintMode:n,images:{mediaBase:{uris:[u],rawData:!0,isSVG:l,width:c.width,height:c.height},mediaThumb:{uris:[r.data],rawData:!0,width:r.width,height:r.height}}};if(l){var f="data:image/svg+xml;base64,".concat(t.svg.data);s.images.mediaBase.uris.push(f)}i(s)},c.onerror=function(){o(new Error("Invalid base64 data: ".concat(u)))},c.src=u}))}));return Promise.all(o).then((function(t){e._editor.getDynamicAssetsLibrary().setAssets("sticker",t),e._stickerManager.reload()}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(n(9030).Z);u.version="3.7.0"},9848:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(8629),i=n(5474),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.7.0"},8629:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,u=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return i(this,c),u.apply(this,arguments)}return(e=[{key:"serialize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(l(c.prototype),"serialize",this).call(this,e).then((function(e){return t._serializeAssetLibrary(e).then((function(t){return t}))}))}},{key:"_serializeAssetLibrary",value:function(t){if(!this._editor.getDynamicAssetsLibrary)return Promise.resolve(t);var e=this._editor.getDynamicAssetsLibrary(),n=this._serializeCustomStickerAssets(t,e);return 0===n.length||(t.assetLibrary={assets:{stickers:n}}),Promise.resolve(t)}},{key:"_serializeCustomStickerAssets",value:function(t,e){var n=e.getAssets("sticker");if(0===n.length)return[];var r=t.operations.filter((function(t){return"sprite"===t.type})).flatMap((function(t){return t.options.sprites})).filter((function(t){return"sticker"===t.type})).map((function(t){return t.options.identifier})),i={};return r.forEach((function(t){i[t]=!0})),n.filter((function(t){return i[t.identifier]})).map((function(t){var e=t.identifier,n=t.defaultName,r=t.images,i=r.mediaBase.uris[0],o=r.mediaBase.isSVG,a=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(i),s={identifier:e,name:n,raster:{type:a[1],data:a[3]}};return n&&(s.name=n),o&&(s.svg={data:r.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),s}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(n(3903).Z);u.version="3.7.0"},2574:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>l});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(l,t);var e,n,r=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function l(){return i(this,l),r.apply(this,arguments)}return l}(n(5474).Z);l.version="3.8.0"},5699:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(9786),i=n(2574),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new r.Z(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new i.Z(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();o.version="3.8.0"},9786:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:()=>u});var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t);var e,n,r,u=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(r){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return s(this,t)});function c(){return i(this,c),u.apply(this,arguments)}return(e=[{key:"_serializeSticker",value:function(t,e){var n=o(l(c.prototype),"_serializeSticker",this).call(this,t,e);return n.options.tintMode=e.getTintMode(),n}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(c.prototype,e),c}(n(8629).Z);u.version="3.8.0"},8481:(t,e,n)=>{n.d(e,{Z:()=>w});var r=n(9786),i=n(5576);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=2*Math.PI,p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(p,t);var e,n,r,o=(n=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(r){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return u(this,t)});function p(){return a(this,p),o.apply(this,arguments)}return(e=[{key:"_serializeTransformOperation",value:function(t){var e=this._editor.operations;if(e.exists("orientation")){t=t.clone();var n=e.get("orientation");n.getFlipVertically()&&(t.flip("vertical"),t.setRotation(-1*t.getRotation())),n.getFlipHorizontally()&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),t.rotate(-n.getRotation())}var r=t.serializeOptions(["start","end","rotation","textureScale"],!0);r.rotation=(r.rotation+f)%f,1!==r.textureScale&&(r.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete r.textureScale;var o,a={type:"transform",options:r};return t._ratio&&(o=t._ratio instanceof i.Z?t._ratio.getIdentifier():t._ratio.identifier,a.options.meta={identifier:o}),delete a.options.scale,a}},{key:"_serializeText",value:function(t,e){var n=t.getInputDimensions(!1),r=s(c(p.prototype),"_serializeText",this).call(this,t,e);return r.options.fontSize=r.options.fontSize*n.y/n.min(),r}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(p.prototype,e),p}(r.Z);p.version="3.9.0";var h=n(7857);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(o,t);var e,n,r,i=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(n);if(r){var i=b(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return v(this,t)});function o(){return y(this,o),i.apply(this,arguments)}return(e=[{key:"_deserializeTransformOperation",value:function(t){var e=this;return g(b(o.prototype),"_deserializeCropOperation",this).call(this,t).then((function(t){if(t){var n=h.xx.Array.find(e._data.operations,(function(t){return"orientation"===t.type}));if(n){var r=n.options;t.rotate(r.rotation),r.flipHorizontally&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),r.flipVertically&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t._ratio=null,t}}))}},{key:"_deserializeText",value:function(t,e){var n=e.options,r=n.fontSize,i=n.lineHeight,o=n.fontIdentifier,a=n.alignment,s=n.rotation,l=n.maxWidth,u=n.color,c=n.backgroundColor,f=this._ui.getFontLoader(),p=this._fontManager.getVariationByIdentifier(o);return p?f.setFonts([p.getFont()]):p=this._fontManager.getDefaultVariation(),f.load().then((function(){var e=t.getInputDimensions(!1),o=e.min(),f=e.x,d=e.y,y=l*o/f,g=r*o/d,m=t.createText({fontSize:g,lineHeight:i,fontFamily:p.getFontFamily(),fontWeight:p.getFontWeight(),fontIdentifier:p.getIdentifier(),textMetrics:p.getTextMetrics(),alignment:a,rotation:s,maxWidth:y,text:n.text,color:h.Il.fromArray(u.rgba),backgroundColor:h.Il.fromArray(c.rgba),position:h.FM.fromObject(n.position)});return m._edited=!0,m}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(o.prototype,e),o}(n(2574).Z);_.version="3.9.0";var w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._editor=e}var e;return(e=[{key:"serialize",value:function(){var t=new p(this._editor);return t.serialize.apply(t,arguments)}},{key:"deserialize",value:function(t){return new _(this._editor,t).deserialize()}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}();w.version="3.9.0"},9313:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,{Z:()=>s});var o=void 0===n.g?window:n.g,a="undefined"!=typeof Promise?Promise:function(){var t,e,n,o=Object.prototype.toString,a=void 0!==i?function(t){return i(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(t,e,n){return t[e]=n,t}}function s(t,r){n.add(t,r),e||(e=a(n.drain))}function l(t){var e,n=r(t);return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function u(){for(var t=0;t<this.chain.length;t++)c(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function c(t,e,n){var r,i;try{!1===e?n.reject(t.msg):(r=!0===e?t.msg:e.call(void 0,t.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(i=l(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(t){n.reject(t)}}function f(t){var e,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(e=l(t))?s((function(){var r=new d(n);try{e.call(t,(function(){f.apply(r,arguments)}),(function(){p.apply(r,arguments)}))}catch(t){p.call(r,t)}})):(n.msg=t,n.state=1,n.chain.length>0&&s(u,n))}catch(t){p.call(new d(n),t)}}}function p(t){var e=this;e.triggered||(e.triggered=!0,e.def&&(e=e.def),e.msg=t,e.state=2,e.chain.length>0&&s(u,e))}function h(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then((function(t){n(i,t)}),r)}(i)}function d(t){this.def=t,this.triggered=!1}function y(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var e=new y(this);this.then=function(t,n){var r={success:"function"!=typeof t||t,failure:"function"==typeof n&&n};return r.promise=new this.constructor((function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");r.resolve=t,r.reject=e})),e.chain.push(r),0!==e.state&&s(u,e),r.promise},this.catch=function(t){return this.then(void 0,t)};try{t.call(void 0,(function(t){f.call(e,t)}),(function(t){p.call(e,t)}))}catch(t){p.call(e,t)}}n=function(){var t,n,r;function i(t,e){this.fn=t,this.self=e,this.next=void 0}return{add:function(e,o){r=new i(e,o),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var r=t;for(t=n=e=void 0;r;)r.fn.call(r.self),r=r.next}}}();var m=t({},"constructor",g,!1);return g.prototype=m,t(m,"__NPO__",0,!1),t(g,"resolve",(function(t){return t&&"object"==r(t)&&1===t.__NPO__?t:new this((function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)}))})),t(g,"reject",(function(t){return new this((function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)}))})),t(g,"all",(function(t){var e=this;return"[object Array]"!=o.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,o=Array(i),a=0;h(e,t,(function(t,e){o[t]=e,++a===i&&n(o)}),r)}))})),t(g,"race",(function(t){var e=this;return"[object Array]"!=o.call(t)?e.reject(TypeError("Not an array")):new e((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");h(e,t,(function(t,e){n(e)}),r)}))})),g}();o.Promise=o.Promise||a;const s=a},2930:function(t){(function(){var e,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=r&&r.hrtime?(t.exports=function(){return(e()-i)/1e6},n=r.hrtime,i=(e=function(){var t;return 1e9*(t=n())[0]+t[1]})()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)},3456:t=>{function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var l=t.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,f,p,h,d=t[u].replace(a,"%20"),y=d.indexOf(r);y>=0?(c=d.substr(0,y),f=d.substr(y+1)):(c=d,f=""),p=decodeURIComponent(c),h=decodeURIComponent(f),e(o,p)?Array.isArray(o[p])?o[p].push(h):o[p]=[o[p],h]:o[p]=h}return o}},4514:t=>{var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,r,i){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map((function(t){return o+encodeURIComponent(e(t))})).join(n):o+encodeURIComponent(e(t[i]))})).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}},7526:(t,e,n)=>{e.decode=e.parse=n(3456),e.encode=e.stringify=n(4514)},5994:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},888:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},2426:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},8737:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},9059:t=>{t.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},5209:t=>{t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},9960:t=>{t.exports="varying vec2 v_texCoord;\n\n// Added to the calculated (x,y) texture coordinates, to actually sample the 'center' of a pixel\nconst vec2 halfCR = vec2(0.5, 0.5);\n\n// A uniform holding the dimensions (height/rows, width/cols) of the texture we're rendering to\nuniform vec2 output_texRC;\n\n// A uniform holding the virtual output dimensions when rendering to larger textures. This allows\n// making use of the viewport and only two very large textures to perform all tensor rendering.\nuniform vec2 output_sizeRC;\n\nbool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n}\n\nbool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n}\n\nfloat getNaN(vec4 values) {\n    return dot(vec4(1), values);\n}\n\nint round(float value) {\n    return int(floor(value + 0.5));\n}\n\nint imod(int x, int y) {\n    return x - y * (x / y);\n}\n\n//Based on the work of Dave Hoskins\n//https://www.shadertoy.com/view/4djSRW\n#define HASHSCALE1 443.8975\nfloat random(float seed){\n    vec2 p = v_texCoord * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\nvec2 UVfrom1D(vec2 texNumRC, vec2 sizeRC, int index) {\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom2D(vec2 texNumRC, vec2 sizeRC, int numC, int row, int col) {\n  // Calculate x & y in logical size\n  int index = row * numC + col;\n  int logR = index / int(sizeRC.y);\n  int logC = index - logR * int(sizeRC.y);\n\n  // Return relative positions of row & col in texture size\n  return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nvec2 UVfrom4D(vec2 texNumRC, vec2 sizeRC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n    int logR = index / int(sizeRC.y);\n    int logC = index - logR * int(sizeRC.y);\n\n    return (vec2(logC, logR) + halfCR) / texNumRC.yx;\n}\n\nfloat sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n}\n"},2603:t=>{t.exports="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"},1898:t=>{t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},9478:t=>{t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},3488:t=>{t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n"},7761:t=>{t.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"},1995:t=>{t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},2511:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"},5024:t=>{t.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"},71:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},9018:t=>{t.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},9367:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},7705:t=>{t.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},8234:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},1689:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},8171:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},8715:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},74:t=>{t.exports='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'},5119:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},5285:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},175:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},3841:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},7165:t=>{t.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},5193:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},2519:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},6188:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},9532:t=>{t.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},1602:t=>{var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var l=c(t,e,n);if("normal"===l.type){if(r=n.done?d:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",y={};function g(){}function m(){}function v(){}var b={};b[o]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(R([])));w&&w!==n&&r.call(w,o)&&(b=w);var x=v.prototype=g.prototype=Object.create(b);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function R(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:e,done:!0}}return m.prototype=x.constructor=v,v.constructor=m,m.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},O(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,s,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=R,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},7333:function(t,e,n){var r;t=n.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,l=36,u=/^xn--/,c=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,d=String.fromCharCode;function y(t){throw RangeError(p[t])}function g(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+g((t=t.replace(f,".")).split("."),e).join(".")}function v(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return g(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+d(t)})).join("")}function _(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,n){var r=0;for(t=n?h(t/700):t>>1,t+=h(t/e);t>455;r+=l)t=h(t/35);return h(r+36*t/(t+38))}function x(t){var e,n,r,i,o,a,u,c,f,p,d,g=[],m=t.length,v=0,_=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,a=1,u=l;i>=m&&y("invalid-input"),((c=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l)>=l||c>h((s-v)/a))&&y("overflow"),v+=c*a,!(c<(f=u<=x?1:u>=x+26?26:u-x));u+=l)a>h(s/(p=l-f))&&y("overflow"),a*=p;x=w(v-o,e=g.length+1,0==o),h(v/e)>s-_&&y("overflow"),_+=h(v/e),v%=e,g.splice(v++,0,_)}return b(g)}function O(t){var e,n,r,i,o,a,u,c,f,p,g,m,b,x,O,S=[];for(m=(t=v(t)).length,e=128,n=0,o=72,a=0;a<m;++a)(g=t[a])<128&&S.push(d(g));for(r=i=S.length,i&&S.push("-");r<m;){for(u=s,a=0;a<m;++a)(g=t[a])>=e&&g<u&&(u=g);for(u-e>h((s-n)/(b=r+1))&&y("overflow"),n+=(u-e)*b,e=u,a=0;a<m;++a)if((g=t[a])<e&&++n>s&&y("overflow"),g==e){for(c=n,f=l;!(c<(p=f<=o?1:f>=o+26?26:f-o));f+=l)O=c-p,x=l-p,S.push(d(_(p+O%x,0))),c=h(O/x);S.push(d(_(c,0))),o=w(n,b,r==i),n=0,++r}++n,++e}return S.join("")}a={version:"1.3.2",ucs2:{decode:v,encode:b},decode:x,encode:O,toASCII:function(t){return m(t,(function(t){return c.test(t)?"xn--"+O(t):t}))},toUnicode:function(t){return m(t,(function(t){return u.test(t)?x(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,n,e,t))||(t.exports=r)}()},1662:(t,e,n)=>{var r=n(7333),i=n(9597);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.Qc=b,e.WU=function(t){return i.isString(t)&&(t=b(t)),t instanceof o?t.format():o.prototype.format.call(t)};var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),f=["%","/","?",";","#"].concat(c),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(7526);function b(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(s);u[0]=u[0].replace(/\\/g,"/");var b=t=u.join(s);if(b=b.trim(),!n&&1===t.split("#").length){var _=l.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===b.substr(0,2);!O||w&&g[w]||(b=b.substr(2),this.slashes=!0)}if(!g[w]&&(O||w&&!m[w])){for(var S,k,T=-1,E=0;E<p.length;E++)-1!==(C=b.indexOf(p[E]))&&(-1===T||C<T)&&(T=C);for(-1!==(k=-1===T?b.lastIndexOf("@"):b.lastIndexOf("@",T))&&(S=b.slice(0,k),b=b.slice(k+1),this.auth=decodeURIComponent(S)),T=-1,E=0;E<f.length;E++){var C;-1!==(C=b.indexOf(f[E]))&&(-1===T||C<T)&&(T=C)}-1===T&&(T=b.length),this.host=b.slice(0,T),b=b.slice(T),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var D=this.hostname.split(/\./),P=(E=0,D.length);E<P;E++){var I=D[E];if(I&&!I.match(h)){for(var A="",F=0,j=I.length;F<j;F++)I.charCodeAt(F)>127?A+="x":A+=I[F];if(!A.match(h)){var M=D.slice(0,E),z=D.slice(E+1),L=I.match(d);L&&(M.push(L[1]),z.unshift(L[2])),z.length&&(b="/"+z.join(".")+b),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+B,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!y[x])for(E=0,P=c.length;E<P;E++){var U=c[E];if(-1!==b.indexOf(U)){var W=encodeURIComponent(U);W===U&&(W=escape(U)),b=b.split(U).join(W)}}var H=b.indexOf("#");-1!==H&&(this.hash=b.substr(H),b=b.slice(0,H));var V=b.indexOf("?");if(-1!==V?(this.search=b.substr(V),this.query=b.substr(V+1),e&&(this.query=v.parse(this.query)),b=b.slice(0,V)):e&&(this.search="",this.query={}),b&&(this.pathname=b),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var G=this.search||"";this.path=B+G}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=t[c])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var f=Object.keys(t),p=0;p<f.length;p++){var h=f[p];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",v=n.search||"";n.path=y+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||b||n.host&&t.pathname,x=w,O=n.pathname&&n.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===O[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,O=d;else if(d.length)O||(O=[]),O.pop(),O=O.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return S&&(n.hostname=n.host=O.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var k=O.slice(-1)[0],T=(n.host||t.host||O.length>1)&&("."===k||".."===k)||""===k,E=0,C=O.length;C>=0;C--)"."===(k=O[C])?O.splice(C,1):".."===k?(O.splice(C,1),E++):E&&(O.splice(C,1),E--);if(!w&&!x)for(;E--;E)O.unshift("..");!w||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),T&&"/"!==O.join("/").substr(-1)&&O.push("");var R,D=""===O[0]||O[0]&&"/"===O[0].charAt(0);return S&&(n.hostname=n.host=D?"":O.length?O.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift())),(w=w||n.host&&O.length)&&!D&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},9597:t=>{t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},9719:t=>{t.exports=JSON.parse('{"name":"engine-wrapper","version":"4.22.3","description":"The most comprehensive photo editor SDK for HTML5","repository":"http://github.com/imgly/pesdk-html5","author":"PhotoEditorSDK (img.ly GmbH) <contact@img.ly>","license":"SEE LICENSE IN LICENSE.md","bin":{},"scripts":{"prebuild":"node ../scripts/prebuild-server.js","build":"yarn && yarn run build:prod","build:prod":"cross-env ENV=production webpack","build:dev":"cross-env ENV=development webpack"},"devDependencies":{"@babel/cli":"^7.11.5","@babel/core":"^7.11.5","@babel/plugin-proposal-class-properties":"^7.10.4","@babel/plugin-proposal-object-rest-spread":"^7.11.0","@babel/plugin-transform-runtime":"^7.11.5","@babel/preset-env":"^7.11.5","babel-loader":"^8.1.0","cross-env":"^7.0.2","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master","jsdoc":"^3.6.3","performance-now":"^0.2.0","preprocess-loader":"^0.3.0","raw-loader":"^4.0.1","rimraf":"^2.6.2","stats.js":"^0.16.0","url":"^0.11.0","webpack":"^5.0.0-beta.29","webpack-cli":"3.3.12"},"standard":{"globals":["describe","context","before","beforeEach","after","afterEach","it","expect"],"parser":"babel-eslint"},"dependencies":{"@babel/runtime":"^7.11.2","can-use-dom":"^0.1.0","canvas":"^2.6.0","gl":"^4.1.1","lodash.debounce":"^4.0.8","lodash.memoize":"^4.1.2","lodash.throttle":"^4.1.1","opn":"^5.3.0","request":"^2.88.0","resize-observer-polyfill":"^1.5.1"},"devEngines":{"node":"8.x || 9.x || 10.x || 11.x || 12.x"}}')}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n(6675)})()})));function Mt(t){return void 0!==t.x}function zt(t){return E.fromTRS(t.position.x,t.position.y,t.rotation,t.scale.x,t.scale.y)}function Lt(t){var e=t.getParent(),n=function(t){return t.getBaseLocalToParentMatrix?t.getBaseLocalToParentMatrix():zt(t.getTransform())}(t);if(void 0===e)return n;var r=Lt(e);return E.multiply(r,n)}function Bt(t){var e=t.getParent(),n=function(t){return t.getLocalToParentMatrix?t.getLocalToParentMatrix():zt(t.getTransform())}(t);if(void 0===e)return n;var r=Bt(e);return E.multiply(r,n)}function Nt(t,e,n,r){void 0===r&&(r=!1);var i="output"===e.type&&r?Lt(e):Bt(e),o="output"===n.type&&r?Lt(n):Bt(n),a=E.getInverted(o);return E.transformPoint(a,E.transformPoint(i,t))}function Ut(t,e,n){var r=new k(t,0),i=new k(Nt(r,e,n)),o=new k(Nt(k.ZERO,e,n));return k.distance(o,i)}function Wt(t,e){var n=Bt(e);return E.transformPoint(n,t)}function Ht(t){var e=Bt(t),n=t.getBounds(),r={x:n.width,y:0},i={x:0,y:n.height},o=new k(E.transformPoint(e,k.ZERO)),a=new k(E.transformPoint(e,r)),s=new k(E.transformPoint(e,i));return{width:k.distance(o,a),height:k.distance(o,s)}}function Vt(t,e,n){void 0===n&&(n=!0);var r=e.getBounds();return{x:t.x*r.width+(n?0:r.minX),y:t.y*r.height+(n?0:r.minY)}}function Gt(t,e,n){void 0===n&&(n=!0);var r=e.getBounds();return{x:(t.x-(n?0:r.minX))/r.width,y:(t.y-(n?0:r.minY))/r.height}}function Zt(t,e){var n=Nt({x:1,y:0},t,e,!0),r=Nt(k.ZERO,t,e,!0);return Math.atan2(n.y-r.y,n.x-r.x)}function Xt(t){return"string"!=typeof t&&!Array.isArray(t)&&void 0===t.a}function qt(t){return"string"!=typeof t&&Array.isArray(t)&&3===t.length}function Yt(t){return"string"!=typeof t&&!Array.isArray(t)&&void 0!==t.a}function Kt(t){return"string"!=typeof t&&Array.isArray(t)&&4===t.length}!function(t){t.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",t.IMAGE_DOWNSCALED="imageDownscaled"}(yt||(yt={}));var Qt=function(){function t(t,e){this.engine=e,this.transform=S.IDENTITY,this.canvasPivot={x:0,y:0},this.previewQuality=1,this.canvas=t}return Object.defineProperty(t.prototype,"quality",{get:function(){return this.previewQuality},enumerable:!0,configurable:!0}),t.prototype.setQuality=function(t){this.previewQuality=Math.min(Math.max(t,.01),1)},t.prototype.getTransform=function(){return this.transform},t.prototype.setTransform=function(t){this.transform=t},t.prototype.getPosition=function(){return this.transform.position},t.prototype.setPosition=function(t,e){var n;n="number"==typeof t?{x:t,y:void 0===e?t:e}:t;var r=this.transform.scale,i=this.transform.rotation;this.setTransform(new S(n,r,i))},t.prototype.getScale=function(){return this.transform.scale},t.prototype.setScale=function(t,e){var n;n="number"!=typeof t?t:{x:t,y:void 0===e?t:e};var r=this.transform.position,i=this.transform.rotation;this.setTransform(new S(r,n,i))},t.prototype.getRotation=function(){return this.transform.rotation},t.prototype.setRotation=function(t){var e=this.transform.position,n=this.transform.scale;this.setTransform(new S(e,n,t))},t.prototype.getCanvasPivot=function(){return this.canvasPivot},t.prototype.setCanvasPivot=function(t,e){this.canvasPivot="number"==typeof t?{x:t,y:void 0===typeof e?t:e}:t},t.prototype.getCanvasBounds=function(){var t=this.canvasPivot,e=this.canvas,n=e.width,r=e.height;return new T(-t.x*n,-t.y*r,n,r)},t}();function Jt(t){return void 0!==t.getTransform}var $t=function(t){function e(e){var n=t.call(this)||this;return n.config=e,n}return d(e,t),e.prototype.getOutputDimensions=function(){var t=this.getOutputContainer();return t?t.getResolution():{width:0,height:0}},e.prototype.getSmallerOutputSide=function(){var t=this.getOutputContainer();if(!t)return 0;var e=t.getResolution();return Math.min(e.width,e.height)},e.prototype.convertPointFromPreviewIntoOutputSpace=function(t,e){var n=E.getInverted(zt(e));return E.transformPoint(n,t)},e.prototype.convertPointFromPreviewIntoWorldSpace=function(t,e,n){var r=E.getInverted(zt(e)),i=n?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),o=E.multiply(i,r);return E.transformPoint(o,t)},e.prototype.convertPointFromPreviewIntoFlippedPreviewSpace=function(t){var e=this.getOutputContainer().getFlipTransformMatrix();return E.transformPoint(e,t)},e.prototype.convertPointFromWorldIntoPreviewSpace=function(t,e){var n=zt(e),r=E.getInverted(this.getOutputContainer().getLocalToParentMatrix()),i=E.multiply(n,r);return E.transformPoint(i,t)},e.prototype.convertPointFromOutputIntoPreviewSpace=function(t,e){var n=zt(e);return E.transformPoint(n,t)},e.prototype.getContainersAtPreviewPoint=function(t,e){var n,r,i=new Array,o=this.convertPointFromPreviewIntoWorldSpace(t,e),a=this.getRootContainers();try{for(var s=_(a),l=s.next();!l.done;l=s.next()){var u=l.value;this.accumulateContainersAtWorldPointInHierarchy(o,u,i)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},e.prototype.isPreviewPointInContainer=function(t,e,n){var r=this.convertPointFromPreviewIntoWorldSpace(t,n);return this.isWorldPointInContainer(r,e)},e.prototype.isWorldPointInContainer=function(t,e){var n=Bt(e),r=E.getInverted(n),i=E.transformPoint(r,t);return T.contains(e.getBounds(),i)},e.prototype.accumulateContainersAtWorldPointInHierarchy=function(t,e,n){var r,i;this.isWorldPointInContainer(t,e)&&n.push(e);var o=e.getChildren();try{for(var a=_(o),s=a.next();!s.done;s=a.next()){var l=s.value;Jt(l)&&this.accumulateContainersAtWorldPointInHierarchy(t,l,n)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e}(et),te=function(){function t(t){this.engine=t,this.id=R()}return t.prototype.getID=function(){return this.id},t.prototype.getContainer=function(){return this.engine.getRootContainers()[0]},t.prototype.getIndexInParent=function(){for(var t=this.engine.rootOperations,e=0;e<t.length;e+=1)if(t[e].getID()===this.id)return e;return-1},t.prototype.setIndexInParent=function(t){this.engine.moveIndex(this,t)},t.prototype.isValid=function(){return-1!==this.getIndexInParent()},t}(),ee=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.operation=r,i.type="adjustments",i.setProperties(e),i}return d(e,t),e.prototype.getProperties=function(){var t=this.operation.getOptions(),e=t.gamma-1;return{brightness:t.brightness||0,saturation:t.saturation||0,contrast:t.contrast||0,gamma:(e<0?2*e:e)||0,clarity:t.clarity||0,exposure:t.exposure||0,shadows:.5*t.shadows||0,highlights:t.highlights||0,whites:t.whites||0,blacks:t.blacks||0,temperature:t.temperature||0,sharpness:t.sharpness||0}},e.prototype.setProperties=function(t){void 0!==t.gamma&&(t.gamma=1+(t.gamma<0?.5*t.gamma:t.gamma)),t.shadows&&(t.shadows=2*t.shadows),this.operation.set(t)},e.prototype.getOperation=function(){return this.operation},e.prototype.getTypeIdentifier=function(){return"adjustments"},e}(te),ne=function(t){if(Yt(t))return new jt.PhotoEditorSDK.Color(t.r,t.g,t.b,t.a);if(Kt(t))return new jt.PhotoEditorSDK.Color(t[0],t[1],t[2],t[3]);if(Xt(t))return new jt.PhotoEditorSDK.Color(t.r,t.g,t.b,1);if(qt(t))return new jt.PhotoEditorSDK.Color(t[0],t[1],t[2],1);if(function(t){return"string"==typeof t}(t)){var e=w(t.match(/[0-9A-fa-f]{1,2}/g),3),n=e[0],r=e[1],i=e[2];return new jt.PhotoEditorSDK.Color(parseInt(n,16)/255,parseInt(r,16)/255,parseInt(i,16)/255,1)}throw new Error("Invalid color type")},re=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){return this._x=t,this._y=e,this},t.prototype.clone=function(){return new t(this._x,this._y)},t.prototype.copy=function(t){return this._x=t.x,this._y=t.y,this},t.prototype.clamped=function(t,e){void 0===t&&(t=this),void 0===e&&(e=this);var n="number"==typeof t?{x:t,y:t}:t,r="number"==typeof e?{x:e,y:e}:e;return this._x=Math.max(n.x,this._x),this._y=Math.max(n.y,this._y),this._x=Math.min(r.x,this._x),this._y=Math.min(r.y,this._y),this},t.prototype.divide=function(t,e){return"number"==typeof t||null===t?(this._x/=t,this._y/=void 0===e?t:e):(this._x/=t.x,this._y/=t.y),this},t.prototype.subtract=function(t,e){return"number"==typeof t||null===t?(this._x-=t,this._y-=void 0===e?t:e):(this._x-=t.x,this._y-=t.y),this},t.prototype.multiply=function(t,e){return"number"==typeof t||null===t?(this._x*=t,this._y*=void 0===e?t:e):(this._x*=t.x,this._y*=t.y),this},t.prototype.add=function(t,e){return"number"==typeof t||null===t?(this._x+=t,this._y+=void 0===e?t:e):(this._x+=t.x,this._y+=t.y),this},t.prototype.dot=function(t,e){return"number"==typeof t||null===t?this._x*t+this._y*(void 0===e?t:e):this._x*t.x+this._y*t.y},t.prototype.equals=function(t,e){return"number"==typeof t||null===t?t===this._x&&e===this._y:t.x===this._x&&t.y===this._y},t.prototype.flip=function(){var t=this._x;return this._x=this._y,this._y=t,this},t.prototype.round=function(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this},t.prototype.ceil=function(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this},t.prototype.floor=function(){return this._x=0|this._x,this._y=0|this._y,this},t.prototype.abs=function(){return this._x=Math.abs(this._x),this._y=Math.abs(this._y),this},t.prototype.len=function(){return Math.sqrt(this._x*this._x+this._y*this._y)},t.prototype.min=function(){return Math.min(this._x,this._y)},t.prototype.max=function(){return Math.max(this._x,this._y)},t.prototype.toObject=function(){return{x:this._x,y:this._y}},t.prototype.toString=function(){return"Vector2({ x: "+this._x+", y: "+this._y+" })"},t.prototype.roundDecimal=function(t){return this._x=parseFloat(this._x.toFixed(t)),this._y=parseFloat(this._y.toFixed(t)),this},t.prototype.asArray=function(t){return void 0===t&&(t=!1),t?[this._y,this._x]:[this._x,this._y]},t.fromObject=function(e){return new t(e.x,e.y)},t.fromSize=function(e){return new t(e.width,e.height)},Object.defineProperty(t,"NULL",{get:function(){return new t(0,0)},enumerable:!0,configurable:!0}),t}(),ie=function(){function t(t){this.engine=t,this.id=R(),this.transform=S.IDENTITY,this.bounds=T.ZERO}return t.prototype.getID=function(){return this.id},t.prototype.getParent=function(){var t=this.engine.getRootContainers();if(0!==t.length&&this.id!==t[0].id)return t[0]},t.prototype.getIndexInParent=function(){for(var t=this.engine.rootOperations,e=0;e<t.length;e+=1)if(t[e].getID()===this.id)return e;return-1},t.prototype.setIndexInParent=function(t){this.engine.moveIndex(this,t)},t.prototype.getChildren=function(){var t=this.engine.getRootContainers();return t.length>0&&(this.id===t[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]},t.prototype.getBounds=function(){return this.bounds},t.prototype.setPivotOnSelfAndSprite=function(t,e,n){"number"==typeof e?(this.setPivotInternal(e,n),t.setPivot(new re(e,n))):(this.setPivotInternal(e),t.setPivot(re.fromObject(e)))},t.prototype.setPivot=function(t,e){this.setPivotInternal(t,e)},t.prototype.getPivot=function(){var t=this.getBounds();return{x:-t.minX/t.width,y:-t.minY/t.height}},t.prototype.getTransform=function(){return this.transform},t.prototype.setTransform=function(t){this.transform=t},t.prototype.updateTransform=function(){this.setTransform(this.transform)},t.prototype.getPosition=function(){return this.transform.position},t.prototype.setPosition=function(t,e){var n;n="number"==typeof t?{x:t,y:void 0===e?t:e}:t;var r=this.transform.scale,i=this.transform.rotation;this.setTransform(new S(n,r,i))},t.prototype.getScale=function(){return this.transform.scale},t.prototype.setScale=function(t,e){var n;n="number"!=typeof t?t:{x:t,y:void 0===e?t:e};var r=this.transform,i=r.position,o=r.rotation;this.setTransform(new S(i,n,o))},t.prototype.getRotation=function(){return this.transform.rotation},t.prototype.setRotation=function(t){var e=this.transform,n=e.position,r=e.scale;this.setTransform(new S(n,r,t))},t.prototype.getSizeInWorldSpace=function(){return Ht(this)},t.prototype.getSizeInOutputSpace=function(){return this,t=this.engine.getOutputContainer(),e=Ht(this),r=1/(n=t.getTransform().scale).x,i=1/n.y,{width:e.width*r,height:e.height*i};var t,e,n,r,i},t.prototype.setSizeInWorldSpace=function(t){var e=this.getBounds();this.setScale(t.width/e.width,t.height/e.height)},t.prototype.setSizeInOutputSpace=function(t){var e=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:t.width/e.x,height:t.height/e.y})},t.prototype.isValid=function(){return-1!==this.getIndexInParent()},t.prototype.setPivotInternal=function(t,e){var n=this.getBounds();"number"==typeof t?this.setBoundsFromSize(n.width,n.height,{x:t,y:e}):this.setBoundsFromSize(n.width,n.height,t)},t.prototype.setBoundsFromSize=function(t,e,n){void 0===n&&(n=this.getPivot()),this.bounds=new T(-n.x*t,-n.y*e,t,e)},t}(),oe=function(t){function e(e,n){var r=t.call(this,n)||this;r.type="drawing",r.drawing=e,r.operation=n.createSpriteOperation(),r.sprite=r.operation.createBrush({}),r.operation.addSprite(r.sprite),r.radialBrush=r.sprite._createRadialBrush();var i=n.getRootContainers()[0].getBounds();return r.bounds=new T(0,0,i.width,i.height),r.setTransform(S.IDENTITY),r.operation.setDirty(!0),r.setData(e),r}return d(e,t),e.prototype.beginStroke=function(t){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if("imgly_brush_radial"!==t.id)throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=t,this.currentStroke={brush:t,path:{controlPoints:[]}},this.radialBrush.setColor(ne(t.color)),this.radialBrush.setHardness(t.hardness),this.radialBrush.setSize(t.size),this.currentPath=this.sprite.createPath(this.radialBrush.clone())},e.prototype.addPointToCurrentStroke=function(t,e){if(void 0===e&&(e=!0),!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){var n=this.currentStroke.path.controlPoints,r=n[n.length-1],i=this.currentBrush.size/10;if(Math.sqrt(t.x-Math.pow(r.x,2)+(t.y-Math.pow(r.y,2)))<i)return}var o=this.engine.getOutputContainer(),a=Gt(Nt(t,this.engine.getRootContainers()[0],o,!0),o,!1),s=o.getBounds();this.currentPath.addControlPoint(re.fromObject(a)),this.currentStroke.path.controlPoints.push(t),e&&this.sprite.render(re.fromObject({x:s.width,y:s.height}))},e.prototype.endStroke=function(){if(this.currentStroke&&this.currentPath&&this.currentBrush){this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);var t=this.engine.getOutputContainer().getBounds();this.sprite.render(re.fromObject({x:t.width,y:t.height})),this.currentPath=void 0}},e.prototype.setData=function(t){this.drawing=y(y({},this.drawing),t),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(t.strokes)},e.prototype.getData=function(){return this.drawing},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.getOperation=function(){return this.operation},e.prototype.drawStrokes=function(t){var e=this;t.forEach((function(t){e.beginStroke(t.brush),t.path.controlPoints.forEach((function(t){e.addPointToCurrentStroke(t,!0)})),e.endStroke()}))},e}(ie),ae=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.filterOperation=n,o.type="duotone-filter",n.set({intensity:r.colorIntensity}),n.set({filter:e}),i.pesdk.setAllOperationsToDirty(),o}return d(e,t),e.prototype.getProperties=function(){return{colorIntensity:this.filterOperation.getOptions().intensity}},e.prototype.setProperties=function(t){var e=this.filterOperation.getOptions().intensity;void 0!==t.colorIntensity&&(e=Math.min(Math.max(t.colorIntensity,0),1)),this.filterOperation.set({intensity:e})},e.prototype.getOperation=function(){return this.filterOperation},e.prototype.getTypeIdentifier=function(){return"filter"},e}(te),se=function(){function t(t,e){this.engine=e,this.loaded=!1,this.loading=!1,this.asset=y({},t)}return t.prototype.load=function(){return v(this,void 0,void 0,(function(){var t,e,n=this;return b(this,(function(r){return this.loaded?[2,Promise.resolve()]:this.loading?[2,Promise.reject(new Error("Called Frame#load while it's already loading"))]:(this.loading=!0,t=this.asset.imageGroups,e=[],["top","left","right","bottom"].forEach((function(r){if(t[r]){var i=t[r];["start","mid","end"].forEach((function(t){t in i&&e.push(n.loadPart(r,t))}))}})),[2,Promise.all(e).then((function(){n.loaded=!0,n.loading=!1})).catch((function(){n.loaded=!1,n.loading=!1}))])}))}))},t.prototype.getFrame=function(){return y(y({},this.asset),{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})},t.prototype.getIdentifier=function(){return this.asset.identifier},t.prototype.getDefaultName=function(){return this.asset.name},t.prototype.getThumbnail=function(){return this.asset.thumbnailURI},t.prototype.getTintable=function(){return this.asset.tintable||!1},t.prototype.getLayoutMode=function(){return this.asset.layoutMode},t.prototype.getImageGroups=function(){return this.asset.imageGroups},t.prototype.loadPart=function(t,e){return v(this,void 0,void 0,(function(){var n=this;return b(this,(function(r){return[2,new Promise((function(r,i){var o=n.asset.imageGroups[t][e],a=o;"string"!=typeof o&&"image"in o&&(a=o.image);var s=new Image;s.addEventListener("load",(function(){"string"!=typeof o?n.asset.imageGroups[t][e].image=s:n.asset.imageGroups[t][e]=s,r(s)})),s.addEventListener("error",(function(){i(new Error("Failed to load image at "+s.src))})),s.crossOrigin=n.engine.configuration.crossOrigin||"anonymus",s.src=n.engine.assetProvider.getAssetSource("frame",a)}))]}))}))},t}(),le=function(t){function e(e,n,r){var i=t.call(this,r)||this;return i.frameOperation=e,i.type="frame",i.setProperties(n),r.pesdk.setAllOperationsToDirty(),i}return d(e,t),e.prototype.setProperties=function(t){if(this.props=y(y({},this.props),t),"number"==typeof t.opacity&&this.frameOperation.set({alpha:t.opacity}),t.tintColor&&this.frameOperation.set({tintColor:ne(t.tintColor)}),t.width){var e=this.engine.getOutputContainer().getBounds(),n=Math.min(e.width,e.height),r=t.width/n;this.frameOperation.set({scale:r})}this.frameOperation.setDirty(!0)},e.prototype.getProperties=function(){return this.props},e.prototype.getOperation=function(){return this.frameOperation},e.prototype.getTypeIdentifier=function(){return"frame"},e}(te),ue=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.blurOperation=r,i.type="gaussian-blur",i.setProperties(e),i}return d(e,t),e.prototype.getProperties=function(){var t=this.engine.getOutputContainer(),e=t.getBounds(),n=Math.min(e.size.width,e.size.height);return{blurRadius:Ut(this.blurOperation.getOptions().blurRadius*n,t,this.getContainer())}},e.prototype.setProperties=function(t){if(void 0!==t.blurRadius){var e=this.engine.pesdk.getOutputDimensions(),n=Math.min(e.x,e.y),r=this.getContainer(),i=this.engine.getOutputContainer(),o=Ut(t.blurRadius,r,i)/n;this.blurOperation.set({blurRadius:o})}},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"blur"},e}(te),ce=function(t){function e(e,n){var r=t.call(this,n)||this;r.data=e,r.type="image";var i=n.configuration.downscaleOptions;if(i){var o=i.maxDimensions;r.downscaleOptions={maxMegaPixels:i.maxMegaPixels,maxDimensions:{width:Math.min(n.maxTextureDimension,o?o.width:Number.MAX_VALUE),height:Math.min(n.maxTextureDimension,o?o.height:Number.MAX_VALUE)}}}else r.downscaleOptions={maxDimensions:{width:n.maxTextureDimension,height:n.maxTextureDimension}};r.setData(e);var a=r.data.image;return r.bounds=new T(k.ZERO,{width:a.width,height:a.height}),r}return d(e,t),e.prototype.setData=function(t){var e=this;if(this.data=y(y({},this.data),t),t.image){var n=t.image,r=void 0;if(n instanceof HTMLImageElement&&(r=this.engine.pesdk.parseExif(n))){var i=r.getTags();if(i&&i.Orientation){var o=1!==i.Orientation&&2!==i.Orientation,a=-1!==[2,4,5,7].indexOf(i.Orientation);if(o||a){if(Pt()||Dt()||!CSS.supports("image-orientation","from-image")){var s=this.engine.pesdk.createOperation("exif-orientation",{},!1);s.setTags(i),n=s.applyTo(n)}r.setOrientation(1),i.Orientation=1}}}var l=new nt(n,this.downscaleOptions);l.on(tt.IMAGE_DOWNSCALED,(function(){e.engine.emit(yt.IMAGE_DOWNSCALED)})),l.on(tt.BEGAN_IMAGE_DOWNSCALING,(function(){e.engine.emit(yt.BEGAN_IMAGE_DOWNSCALING)})),n=l.downscaleIfNecessary(),this.data.image=n,this.engine.pesdk.setImage(n,r),this.setBoundsFromSize(n.width,n.height)}},e.prototype.getData=function(){return this.data},e.prototype.setPivot=function(t,e){throw new Error("This container does not support modifying the pivot")},e.prototype.getOperation=function(){throw new Error("This container has no associated operation")},e}(ie),fe=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.props=e,i.blurOperation=r,i.type="linear-blur",i.setProperties(e),i}return d(e,t),e.prototype.getProperties=function(){return this.props},e.prototype.setProperties=function(t){this.props=y(y({},this.props),t);var e=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),r=n.getBounds(),i=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=Lt(i),s=E.multiply(E.getInverted(o),a),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){var u=Ut(t.blurRadius,i,n);e.blurRadius=u/l}if(void 0!==t.start){var c=Gt(E.transformPoint(s,t.start),n,!1);e.controlPoint1=c}if(void 0!==t.end){var f=Gt(E.transformPoint(s,t.end),n,!1);e.controlPoint2=f}this.blurOperation.set(e)},e.prototype.updateProperties=function(){var t=this.getProperties();this.setProperties(t)},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"linear-focus"},e}(te),pe=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.filter=e,o.filterOperation=n,o.props=r,o.type="lut-filter",n.set({intensity:r.intensity}),n.set({filter:e}),i.pesdk.setAllOperationsToDirty(),o}return d(e,t),e.prototype.getProperties=function(){return{intensity:this.filterOperation.getOptions().intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}},e.prototype.setProperties=function(t){var e=this.filterOperation.getOptions(),n="number"==typeof t.intensity?t.intensity:e.intensity;this.filterOperation.set({intensity:n})},e.prototype.getOperation=function(){return this.filterOperation},e.prototype.getTypeIdentifier=function(){return"filter"},e}(te),he=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.props=e,i.blurOperation=r,i.type="mirrored-blur",i.setProperties(e),i}return d(e,t),e.prototype.getProperties=function(){return this.props},e.prototype.setProperties=function(t){this.props=y(y({},this.props),t);var e=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),r=n.getBounds(),i=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=Lt(i),s=E.multiply(E.getInverted(o),a),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){var u=Ut(t.blurRadius,i,n);e.blurRadius=u/l}if(void 0!==t.gradientSize){var c=Ut(t.gradientSize,i,n)/l;e.gradientSize=c}if(void 0!==t.clearAreaWidth){var f=Ut(t.clearAreaWidth,i,n)/l;e.size=.5*f}if(void 0!==t.mirrorAxisOrigin){var p=Gt(E.transformPoint(s,t.mirrorAxisOrigin),n,!1);e.start=p}if(void 0!==t.mirrorAxisDirection){var h=Gt(E.transformPoint(s,t.mirrorAxisDirection),n,!1);e.end=h}this.blurOperation.set(e)},e.prototype.updateProperties=function(){var t=this.getProperties();this.setProperties(t)},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"mirrored-focus"},e}(te),de=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.settings=e,o.operation=n,o.flipOperation=r,o.type="output",o.flipTransform=E.IDENTITY,o.blockTransformUpdate=!1,o.transformUpdateWhileBlock=!1,o.bounds=new T({x:0,y:0},o.settings.resolution),o.setData(e),o}return d(e,t),e.prototype.pauseChildrenUpdates=function(){this.transformUpdateWhileBlock=!1,this.blockTransformUpdate=!0},e.prototype.resumeChildrenUpdates=function(){this.blockTransformUpdate=!1,this.transformUpdateWhileBlock&&this.updateChildrenContainers()},e.prototype.setData=function(t){if(this.settings=y(y({},this.settings),t),t.resolution&&(this.setBoundsFromSize(t.resolution.width,t.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new re(t.resolution.width,t.resolution.height)})),void 0!==t.flipHorizontally){var e=t.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:e})}void 0!==t.flipVertically&&(e=t.flipVertically,this.updateFlipTransform(),this.flipOperation.set({flipVertically:e})),this.operation.setDirty(!0),this.flipOperation.setDirty(!0)},e.prototype.getData=function(){return this.settings},e.prototype.setResolution=function(t){this.setData({resolution:t})},e.prototype.getResolution=function(){return this.getData().resolution},e.prototype.setTransform=function(t){if(this.transform.rotation!==t.rotation||this.transform.position!==t.position||this.transform.scale!==t.scale){this.transform=t;var e=this.flipTransform;this.flipTransform=E.IDENTITY;var n=Nt({x:0,y:0},this.engine.getRootContainers()[0],this),r=-t.rotation,i=re.fromObject(n).clone().subtract(re.fromObject(this.getBounds().origin));this.operation.set({pivot:new re(0,0),position:i,scale:new re(1/t.scale.x,1/t.scale.y),rotation:r}),this.flipTransform=e,this.operation.setDirty(!0),this.updateChildrenContainers()}},e.prototype.rotate90=function(t){void 0===t&&(t=!1);var e=t?.5*-Math.PI:.5*Math.PI,n=this.getResolution(),r=this.getPivot(),i=this.getBounds(),o=Wt({x:i.midX,y:i.midY},this);this.setPivot(.5,.5),this.setPosition(o),this.setRotation(this.getRotation()-e);var a={width:n.height,height:n.width};this.setResolution(a);var s=Wt({x:-a.width*(.5-r.x),y:-a.height*(.5-r.y)},this);this.setPivot(r),this.setPosition(s),this.updateChildrenContainers()},e.prototype.setPivot=function(e,n){t.prototype.setPivotInternal.call(this,e,n),this.setTransform(this.transform)},e.prototype.getTransform=function(){return this.transform},e.prototype.getBaseLocalToParentMatrix=function(){return zt(this.getTransform())},e.prototype.getLocalToParentMatrix=function(){var t=zt(this.getTransform());return E.multiply(t,this.flipTransform)},e.prototype.getFlipTransformMatrix=function(){return this.flipTransform},e.prototype.isValid=function(){return!0},e.prototype.getOperation=function(){return this.operation},e.prototype.updateFlipTransform=function(){var t=this.settings,e=t.flipHorizontally,n=t.flipVertically;if(e||n){var r=this.getPivot(),i=this.getBounds(),o=e?-1:1,a=e?-2*(r.x-.5)*i.width:0,s=n?-1:1,l=n?-2*(r.y-.5)*i.height:0;this.flipTransform=new E(o,0,0,s,a,l)}else this.flipTransform=E.IDENTITY},e.prototype.updateChildrenContainers=function(){this.blockTransformUpdate?this.transformUpdateWhileBlock=!0:this.engine.rootOperations.forEach((function(t){Jt(t)?(t.updateTransform(),"updateData"in t&&t.updateData()):"updateProperties"in t&&t.updateProperties()}))},e}(ie),ye=function(t){function e(e,n,r){var i=t.call(this,r)||this;i.overlayOperation=e,i.type="overlay";var o=n.blendMode||r.mapBlendMode(e.getBlendMode());return e.set({blendMode:r.reverseMapBlendMode(o)}),e.set({image:n.image}),r.pesdk.setAllOperationsToDirty(),i}return d(e,t),e.prototype.getProperties=function(){var t=this.overlayOperation.getOptions();return{image:t.image,blendMode:this.engine.mapBlendMode(t.blendMode),opacity:t.alpha}},e.prototype.setProperties=function(t){var e=this.overlayOperation.getOptions();"number"==typeof t.opacity&&(e.alpha=t.opacity),void 0!==t.blendMode&&(e.blendMode=this.engine.reverseMapBlendMode(t.blendMode)),this.overlayOperation.set(e),this.overlayOperation.setDirty(!0)},e.prototype.getOperation=function(){return this.overlayOperation},e.prototype.getTypeIdentifier=function(){return"overlay"},e.prototype.setFlipHorizontally=function(t){this.overlayOperation.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.overlayOperation.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.overlayOperation.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.overlayOperation.getFlipVertically()},e}(te),ge=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.props=e,i.blurOperation=r,i.type="radial-blur",i.setProperties(e),i}return d(e,t),e.prototype.getProperties=function(){return this.props},e.prototype.setProperties=function(t){this.props=y(y({},this.props),t);var e=this.blurOperation.getOptions(),n=this.engine.getOutputContainer(),r=n.getBounds(),i=this.getContainer(),o=n.getBaseLocalToParentMatrix(),a=Lt(i),s=E.multiply(E.getInverted(o),a),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){var u=Ut(t.blurRadius,i,n);e.blurRadius=u/l}if(void 0!==t.center){var c=Gt(E.transformPoint(s,t.center),n,!1);e.position=c}if(void 0!==t.radius){var f=Ut(t.radius,i,n)/l;e.radius=f}if(void 0!==t.gradientSize){var p=Ut(t.gradientSize,i,n)/l;e.gradientRadius=p}this.blurOperation.set(e)},e.prototype.updateProperties=function(){var t=this.getProperties();this.setProperties(t)},e.prototype.getOperation=function(){return this.blurOperation},e.prototype.getTypeIdentifier=function(){return"radial-focus"},e}(te),me=function(t){function e(e,n){var r=t.call(this,n)||this;r.data=e,r.type="sticker";var i=e.image,o=r.engine.pesdk.parseExif(e.image);if(o){var a=o.getTags();if(a&&a.Orientation){var s=1!==a.Orientation&&2!==a.Orientation,l=-1!==[2,4,5,7].indexOf(a.Orientation);if(s||l){var u=r.engine.pesdk.createOperation("exif-orientation",{},!1);u.setTags(a),i=u.applyTo(e.image),o.setOrientation(1),a.Orientation=1}}}return i=new nt(i,{maxMegaPixels:{desktop:10,mobile:5}}).downscaleImageIfNecessary(),r.operation=n.createSpriteOperation(),r.sprite=r.operation.createSticker({identifier:"",image:i,position:new re(0,0),dimensions:new re(1,1),rotation:0,smoothDownscaling:!1}),r.operation.addSprite(r.sprite),r.bounds=new T({x:0,y:0},{width:i.width,height:i.height}),r.setTransform(S.IDENTITY),r.sprite.setPivot(new re(0,0)),r.operation.setDirty(!0),r.setData(e),r}return d(e,t),e.prototype.setData=function(t){this.data=y(y({},this.data),t),t.id&&(this.id=t.id),t.opacity&&this.sprite.setAlpha(t.opacity),t.tintColor&&this.sprite.setTintColor(ne(t.tintColor)),t.tintMode&&this.sprite.setTintMode(t.tintMode),this.operation.setDirty(!0)},e.prototype.getData=function(){return this.data},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.setTransform=function(e){t.prototype.setTransform.call(this,e);var n=this.engine.getOutputContainer(),r=this.getParent(),i=function(t,e,n){var r=Mt(t)?t.x:t.width,i=Mt(t)?t.y:t.height;return{width:Ut(r,e,n),height:Ut(i,e,n)}}({width:this.bounds.width*e.scale.x,height:this.bounds.height*e.scale.y},r,n);this.sprite.setDimensions(re.fromSize(i));var o=Gt(Nt(e.position,r,n,!0),n,!1);this.sprite.setPosition(new re(o.x,o.y));var a=Zt(r,n),s=e.rotation+a;this.sprite.setRotation(s),this.operation.setDirty(!0)},e.prototype.setPivot=function(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)},e.prototype.getOperation=function(){return this.operation},e.prototype.setFlipHorizontally=function(t){this.sprite.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.sprite.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},e}(ie),ve=function(){function t(t){this.context=t,this.sourceLines=[],this.maxWidth=100}return t.buildWords=function(t){for(var e=[],n="",r=t.length,i=0;i<r;i+=1){var o=t[i];n+=o," "!==o&&"-"!==o&&i!==r-1||(e.push(n),n="")}return e},t.prototype.getLines=function(){for(var e=[],n=[],r=this.sourceLines.length,i=0;i<r;i+=1){for(var o=this.sourceLines[i],a=t.buildWords(o),s=a.length,l=0;l<s;l+=1){var u=a[l],c=n.concat(u).join("").replace(/\s+$/i,"");if(this.getWidth(c)>this.maxWidth){n.length>0&&(e.push(n.join("")),n=[u]);var f=u.replace(/\s+$/i,"");if(this.getWidth(f)>this.maxWidth){var p=this.splitWord(u);e=e.concat(p.lines),p.rest&&(n=[p.rest])}}else n.push(u)}e.push(n.join("")),n=[]}return e},t.prototype.splitWord=function(t){for(var e={lines:[],rest:null},n=t.length,r=[],i=0;i<n;i+=1){var o=t[i];this.getWidth(r.concat(o).join(""))>this.maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),i===n-1&&r.length>0&&(e.rest=r.join(""))}return e},t.prototype.getWidth=function(t){return this.context.measureText(t).width},t.prototype.setText=function(t){this.sourceLines=t.split("\n")},t.prototype.setMaxWidth=function(t){this.maxWidth=t},t}();function be(t,e,n,r,i,o,a){t.font=(n.fontStyle||"normal")+" "+(n.fontWeight||"normal")+" "+r+'px "'+n.fontFamily+'"';var s=new ve(t);s.setText(e),s.setMaxWidth(o);var l=s.getLines().map((function(t){return t.replace(/\s+$/i,"")})),u=function(t,e){var n=1/e.unitsPerEm*t,r=e.ascender*n,i=e.descender*n;return r+Math.abs(i)}(r,a)*i;return{width:o,height:l.length*u}}var _e,we,xe,Oe=function(t){return 2*Math.PI-t},Se=function(t){var e=t.rotation,n=t.flipHorizontally,r=t.flipVertically,i=e;return n&&(i=Oe(i)),r&&(i=function(t){return-t}(i)),i},ke=function(t){function e(n,r){var i=t.call(this,r)||this;if(i.text=n,i.type="text",!e.measureContext){var o=document.createElement("canvas");e.measureContext=o.getContext("2d")}i.operation=r.createSpriteOperation();var a=i.engine.getOutputContainer(),s=i.getParent(),l=a.getBounds();i.sprite=i.operation.createText({text:n.text,position:new re(0,0),rotation:0,fontSize:Ut(n.fontSize/l.height,s,a),lineHeight:n.lineHeight,fontIdentifier:n.fontIdentifier,alignment:n.alignment,color:ne(n.textColor),backgroundColor:ne(n.backgroundColor),maxWidth:Ut(n.width/l.width,s,a)});var u=r.assetProvider.getFontManager().getFontWithId(n.fontIdentifier);i.sprite.setFontFamily(u.fontFamily),i.sprite.setFontWeight(u.fontWeight||"normal"),i.sprite.setFontStyle(u.fontStyle||"normal"),i.sprite.setFontIdentifier(u.identifier),i.sprite.setTextMetrics(u.textMetrics),i.sprite.setPivot(new re(0,0)),i.operation.addSprite(i.sprite);var c=be(e.measureContext,n.text,u,n.fontSize,n.lineHeight,n.width,u.textMetrics);return i.bounds=new T(0,0,c.width,c.height),i.setTransform(S.IDENTITY),i.operation.setDirty(!0),i}return d(e,t),e.prototype.setData=function(t){this.text=y(y({},this.text),t);var n=this.engine.assetProvider.getFontManager().getFontWithId(t.fontIdentifier||this.text.fontIdentifier);if(t.fontIdentifier&&(this.sprite.setFontFamily(n.fontFamily),this.sprite.setFontWeight(n.fontWeight||"normal"),this.sprite.setFontStyle(n.fontStyle||"normal"),this.sprite.setFontIdentifier(n.identifier),this.sprite.setTextMetrics(n.textMetrics)),t.id&&(this.id=t.id),t.text&&this.sprite.setText(t.text),t.fontSize){var r=this.engine.getOutputContainer(),i=this.getParent(),o=Ut(t.fontSize,i,r),a=r.getBounds();this.sprite.setFontSize(o/a.height)}if(t.alignment&&this.sprite.setAlignment(t.alignment),t.lineHeight&&this.sprite.setLineHeight(t.lineHeight),t.textColor&&this.sprite.setColor(ne(t.textColor)),t.backgroundColor&&this.sprite.setBackgroundColor(ne(t.backgroundColor)),t.width){r=this.engine.getOutputContainer(),i=this.getParent();var s=Ut(t.width,i,r);a=r.getBounds(),this.sprite.setMaxWidth(s/a.width)}var l=be(e.measureContext,this.text.text,n,this.text.fontSize,this.text.lineHeight,this.text.width,n.textMetrics);this.setBoundsFromSize(l.width,l.height),this.operation.setDirty(!0)},e.prototype.getData=function(){return this.text},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.setTransform=function(e){t.prototype.setTransform.call(this,e);var n=this.engine.getOutputContainer(),r=this.getParent(),i=Gt(Nt(e.position,r,n,!0),n,!1);this.sprite.setPosition(new re(i.x,i.y));var o=Zt(r,n);this.sprite.setRotation(e.rotation+o),this.operation.setDirty(!0)},e.prototype.setPivot=function(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)},e.prototype.getOperation=function(){return this.operation},e.prototype.setFlipHorizontally=function(t){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:t})),this.sprite.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.sprite.setRotation(this.getFlippedRotation({flipVertically:t})),this.sprite.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},e.prototype.getFlippedRotation=function(t){var e=t.flipVertically,n=t.flipHorizontally,r=e||this.getFlipVertically(),i=n||this.getFlipHorizontally(),o=this.getRotation();return(r||i)&&(o=Oe(o)),o},e}(ie),Te=function(t){function e(e,n,r){var i=t.call(this,r)||this;i.textDesign=e,i.layout=n,i.type="text-design",i.currentLayoutSize=void 0,i.layoutID=n.identifier,i.operation=r.createSpriteOperation();var o=i.engine.getOutputContainer(),a=i.getParent(),s=o.getBounds(),l=Math.min(s.width,s.height);n.seed(e.seed),i.bounds=i.calculateBounds(i.textDesign,i.layout);var u=e.width;return i.sprite=i.operation.createTextDesign({text:e.text,layout:n,inverted:e.inverted,color:ne(e.color),width:Ut(e.width/l,a,o),padding:e.padding/u,seed:e.seed}),i.updatePivot(),i.operation.addSprite(i.sprite),i.setTransform(S.IDENTITY),i.operation.setDirty(!0),i}return d(e,t),e.stringify=function(t){return JSON.stringify(t,e.serializer())},e.serializer=function(){var t=[],e=[],n=function(n,r){return t[0]===r?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(r)).join(".")+"]"};return function(r,i){if(t.length>0){var o=t.indexOf(this);~o?(t.splice(o+1),e.splice(o,1/0,r)):(t.push(this),e.push(r)),~t.indexOf(i)&&(i=n.call(this,r,i))}else t.push(i);return i}},e.prototype.calculateBounds=function(t,e,n){void 0===n&&(n=!0);var r=t.inverted&&n?Math.max(0,2*t.padding):0,i=t.width/1e3;if(void 0===this.currentLayoutSize){e.seed(t.seed);var o=e.generateLayoutData(t.text,1e3);this.currentLayoutData=o,this.currentLayoutSize=o.getSize()}return new T(0,0,this.currentLayoutSize.width*i+r,this.currentLayoutSize.height*i+r)},e.prototype.findNextUniqueSeed=function(t,n,r){for(var i,o=r,a=this.currentLayoutData?e.stringify(this.currentLayoutData.getRows()):"",s=0;s<20&&(n.seed(o),i=n.generateLayoutData(t.text,1e3),a===e.stringify(i.getRows()));s+=1)o+=1;return n.seed(o),this.currentLayoutData=i,o},e.prototype.setData=function(t){if(this.textDesign=y(y({},this.textDesign),t),t.id&&(this.id=t.id),void 0!==t.padding){var e=this.textDesign.width;this.sprite.setPadding(t.padding/e)}else t.width&&(this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width);if(void 0!==t.seed&&(t.seed<0&&(t.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now()),this.textDesign.seed=t.seed),this.currentLayoutSize=void 0,this.layout.seed(t.seed),this.sprite.setSeed(t.seed),this.sprite.setLayout(this.layout)),t.color&&this.sprite.setColor(ne(t.color)),void 0!==t.inverted&&this.sprite.setInverted(t.inverted),t.text&&(this.currentLayoutSize=void 0,this.sprite.setText(t.text)),t.width){var n=this.engine.getOutputContainer(),r=this.getParent(),i=n.getBounds(),o=Math.min(i.width,i.height),a=Ut(t.width/o,r,n);this.sprite.setWidth(a)}if(void 0!==t.padding||void 0!==t.seed||void 0!==t.inverted||t.text||t.width){var s=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(s.width,s.height),this.updatePivot()}this.operation.setDirty(!0)},e.prototype.getData=function(){return this.textDesign},e.prototype.updateData=function(){this.setData(this.getData())},e.prototype.setTransform=function(e){t.prototype.setTransform.call(this,e);var n=this.engine.getOutputContainer(),r=this.getParent();if(1!==e.scale.x||1!==e.scale.y)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");var i=Gt(Nt(e.position,r,n,!0),n,!1);this.sprite.setPosition(new re(i.x,i.y));var o=Zt(r,n);this.sprite.setRotation(e.rotation+o),this.operation.setDirty(!0)},e.prototype.setPivot=function(e,n){"number"==typeof e?t.prototype.setPivot.call(this,e,n):t.prototype.setPivot.call(this,e),this.updatePivot()},e.prototype.getOperation=function(){return this.operation},e.prototype.getLayoutID=function(){return this.layoutID},e.prototype.setFlipHorizontally=function(t){this.sprite.setFlipHorizontally(t)},e.prototype.setFlipVertically=function(t){this.sprite.setFlipVertically(t)},e.prototype.getFlipHorizontally=function(){return this.sprite.getFlipHorizontally()},e.prototype.getFlipVertically=function(){return this.sprite.getFlipVertically()},e.prototype.updatePivot=function(){var t=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,e=new k(this.bounds.width-2*t,this.bounds.height-2*t),n=this.getPivot(),r=new k(n.x*this.bounds.width,n.y*this.bounds.height),i=new k(t,t),o=r.subtract(i).divide(e);this.sprite.setPivot(new re(o.x,o.y))},e}(ie),Ee=jt.PhotoEditorSDK.Operations.OverlayOperation.BLEND_MODES,Ce="imgly_font_open_sans_bold",Re=function(t){function e(e){var n=t.call(this,e)||this;if(n.previews=Array(),n.rootOperationStack=[],n.deferredRenderQueue=[],n.operationStackOffset=1,n.enforceOperationOrder=function(){n.refreshFlipIndex(),n.refreshFrameIndex()},n.assetProvider=e.assetProvider||new Ft,n.wrapper=new jt.EngineWrapper({license:e.license,crossOrigin:e.crossOrigin,assets:{resolver:function(t,e){return n.resolveAssetForSDK(t,e)}},editor:{preferredRenderer:e.preferredRenderer,pixelRatio:1}}),n.editor=n.wrapper.getEditor(),n.sdk=n.editor.getSDK(),n.sdk.setRenderMode("adapter"),n.tempCanvas=document.createElement("canvas"),n.sdk.setCanvas(n.tempCanvas),"webgl"===e.preferredRenderer){var r=document.createElement("canvas"),i=r.getContext("webgl")||r.getContext("experimental-webgl");n.maxTextureDimension=i.getParameter(i.MAX_TEXTURE_SIZE)}else n.maxTextureDimension=1/0;return n}return d(e,t),Object.defineProperty(e.prototype,"configuration",{get:function(){return this.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pesdk",{get:function(){return this.sdk},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootOperations",{get:function(){return this.rootOperationStack},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.pesdk.dispose(),this.wrapper.dispose()},e.prototype.render=function(t){var e=this;return new Promise((function(n){var r=function(){return new Promise((function(r){var i=t.canvas,o=t.getTransform(),a=e.outputContainer.getPivot(),s=t.getCanvasBounds(),l=t.quality,u=e.tempCanvas;e.sdk.setTextureQuality(l);var c=e.sdk.getOutputDimensions();return u.width=c.x,u.height=c.y,e.sdk.getRenderer().resizeTo(new re(u.width,u.height)),e.sdk.render(!0).then((function(){var l=i.getContext("2d");l.clearRect(0,0,i.width,i.height),l.save(),l.translate(-s.minX,-s.minY),l.translate(o.position.x,o.position.y),l.rotate(o.rotation),l.scale(o.scale.x,o.scale.y),l.translate(-a.x*u.width,-a.y*u.height),l.scale(1/t.quality,1/t.quality),l.drawImage(u,0,0),l.restore(),n(),e.deferredRenderQueue.shift(),e.deferredRenderQueue.length?(e.sdk.setAllOperationsToDirty(),Promise.resolve(e.deferredRenderQueue[0]().then(r))):r()}))}))};e.deferredRenderQueue.push(r),1===e.deferredRenderQueue.length&&r()}))},e.prototype.createPreview=function(t){var e=new Qt(t,this);return this.previews.push(e),e},e.prototype.export=function(t,e,n){return void 0===t&&(t=U.IMAGE),void 0===e&&(e=W.PNG),void 0===n&&(n=1),v(this,void 0,void 0,(function(){var r=this;return b(this,(function(i){return[2,new Promise((function(i){var o=function(){return new Promise((function(o){return r.sdk.export(r.mapToRenderType(t),r.mapToImageFormat(e),n).then((function(t){i(t),r.deferredRenderQueue.shift(),r.deferredRenderQueue.length?Promise.resolve(r.deferredRenderQueue[0]().then(o)):o()}))}))};r.deferredRenderQueue.push(o),1===r.deferredRenderQueue.length&&o()}))]}))}))},e.prototype.getRootContainers=function(){return[this.rootContainer]},e.prototype.getOutputContainer=function(){return this.outputContainer},e.prototype.findContainerByID=function(t){return t===this.rootContainer.getID()?this.rootContainer:this.rootOperationStack.find((function(e){return e.getID()===t}))},e.prototype.findEffectByID=function(t){return this.rootOperationStack.find((function(e){return e.getID()===t}))},e.prototype.addImage=function(t,e,n){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");var r=new ce(t,this);if(this.rootContainer=r,!this.outputContainer){var i=r.getBounds(),o={resolution:{width:i.width,height:i.height},flipHorizontally:!1,flipVertically:!1},a=this.sdk.createOperation("output",{},!1),s=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(a,this.operationStackOffset-1),this.insertIntoOperationsStack(s,this.operationStackOffset),this.outputContainer=new de(o,a,s,this)}return r},e.prototype.addSticker=function(t,e,n){if(!e)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(e);var r=new me(t,this);return this.addToStackAtIndex(r,n),r},e.prototype.addStickerFromAssets=function(t,e,n){var r=this;if(!e)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(e),new Promise((function(e,i){var o=new Image;o.onload=function(){var t=new me({image:o,opacity:1},r);r.addToStackAtIndex(t,n),e(t)},o.onerror=function(t){i(t)},o.crossOrigin=r.config.crossOrigin||null,o.src=r.assetProvider.getAssetSource("sticker",t)}))},e.prototype.addText=function(t,e,n){if(!e)throw new Error("This engine does not support adding text as root elements.");if(!this.assetProvider.getFontManager().isFontLoaded(t.fontIdentifier||Ce))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(e);var r=y({text:"",fontIdentifier:Ce,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},t),i=new ke(r,this);return this.addToStackAtIndex(i,n),i},e.prototype.addTextWithFontLoading=function(t,e,n){var r=this;if(!e)throw new Error("This engine does not support adding text as root elements.");var i=this.assetProvider.getFontManager(),o=t.fontIdentifier||Ce;return new Promise((function(a,s){i.loadFontWithIdentifier(o).then((function(){r.ensureContainerIsRoot(e);var i=y({text:"",fontIdentifier:Ce,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},t),o=new ke(i,r);r.addToStackAtIndex(o,n),a(o)})).catch(s)}))},e.prototype.addTextDesignAsync=function(t,e,n,r){return void 0===t&&(t="imgly_text_design_blocks"),v(this,void 0,void 0,(function(){var i,o,a,s,l,u,c,f=this;return b(this,(function(p){switch(p.label){case 0:if(!n)throw new Error("This engine does not support adding TextDesign as a root element.");if(i=y({seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},e),!(o=this.wrapper.getTextDesignLayoutByID(t)))throw new Error("The layout could not be loaded for the given id: "+t);return a=o.getImagePaths().map((function(t){var e=t.split("/").pop()||"";return{path:t,fullPath:f.assetProvider.getAssetSource("textdesign",e)}})),s=this.wrapper.getTextDesignAssetManager(),l=this.wrapper.getTextDesignFontManager(),u=l.getVariationsByIdentifier(),s.setFonts(u),[4,s.loadImages(a)];case 1:return p.sent(),o.onImagesLoaded(),c=Object.keys(u),[2,this.assetProvider.getFontManager().loadFontsWithIdentifiers(c).then((function(){f.ensureContainerIsRoot(n);var t=new Te(i,o,f);return f.addToStackAtIndex(t,r),Promise.resolve(t)}))]}}))}))},e.prototype.addDrawing=function(t,e,n){if(!e)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(e);var r=new oe(t,this);return this.addToStackAtIndex(r,n),r},e.prototype.addGaussianBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new ue(t,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addRadialBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new ge(t,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addMirroredBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new he(t,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addLinearBlur=function(t,e,n){this.ensureContainerIsRoot(e);var r=new fe(t,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addDuoToneFilter=function(t,e,n){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")},e.prototype.addDuoToneFilterFromAssets=function(t,e,n){var r=this;this.ensureContainerIsRoot(e);var i=this.sdk.getOperationsStack().getByIdentifier("filter");if(i&&i.getIdentifier()!==t)throw new Error("This engine doesn't support multiple types of filter operations at once!");var o=i||this.sdk.createOperation("filter",{},!1);return new Promise((function(e,i){try{var a=r.assetProvider.getDuotoneFilterAsset(t),s={colorIntensity:a.defaultIntensity||0},l=new jt.PhotoEditorSDK.Operations.FilterOperation.Filters.DuoToneFilter({intensity:s.colorIntensity,lightColor:jt.PhotoEditorSDK.Color.fromHex(a.lightColor),darkColor:jt.PhotoEditorSDK.Color.fromHex(a.darkColor)}),u=new ae(l,o,s,r);r.addToStackAtIndex(u,n),e(u)}catch(t){t&&i(t)}}))},e.prototype.addLUTFilter=function(t,e,n){throw new Error("Not supported! Use addLUTFilterFromAssets instead")},e.prototype.addLUTFilterFromAssets=function(t,e,n){var r=this;this.ensureContainerIsRoot(e);var i=this.sdk.getOperationsStack().getByIdentifier("filter");if(i&&i.getIdentifier()!==t)throw new Error("This engine doesn't support multiple types filter operations at once!");var o=i||this.sdk.createOperation("filter",{},!1);return new Promise((function(e,i){var a=new Image;a.addEventListener("load",(function(){var i=r.assetProvider.getLUTFilterAsset(t),s={horizontalTileCount:i.horizontalTileCount||5,verticalTileCount:i.verticalTileCount||5,intensity:i.defaultIntensity||1},l=new jt.PhotoEditorSDK.Operations.FilterOperation.Filters.ThreeDLUTFilter(y(y({},s),{image:a})),u=y(y({},s),{lutImage:new Image}),c=new pe(l,o,u,r);r.addToStackAtIndex(c,n),e(c)})),a.addEventListener("error",(function(t){i(t)})),a.crossOrigin=r.config.crossOrigin||null,a.src=r.assetProvider.getAssetSource("filter",t)}))},e.prototype.addAdjustments=function(t,e,n){this.ensureContainerIsRoot(e);var r=new ee(t,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(r,n),r},e.prototype.addOverlay=function(t,e,n){this.ensureContainerIsRoot(e);var r=new ye(this.sdk.createOperation("overlay",{},!1),t,this);return this.addToStackAtIndex(r,n),r},e.prototype.addOverlayFromAssets=function(t,e,n){var r=this;return this.ensureContainerIsRoot(e),new Promise((function(e,i){var o=r.sdk.getOperationsStack(),a=o.getByIdentifier("overlay");a&&a.getIdentifier()!==t&&o.remove(a);var s=a||r.sdk.createOperation("overlay",{},!1),l=new Image;l.onload=function(){var t={image:l,opacity:1,blendMode:Z.NORMAL},i=new ye(s,t,r);r.addToStackAtIndex(i,n),e(i)},l.onerror=function(t){i(t)},l.crossOrigin=r.config.crossOrigin||null,l.src=r.assetProvider.getAssetSource("overlay",t)}))},e.prototype.addFrame=function(t,e,n){throw new Error("Not supported!")},e.prototype.addFrameFromAssets=function(t,e,n){return v(this,void 0,void 0,(function(){var r,i,o,a,s,l,u;return b(this,(function(c){switch(c.label){case 0:if(this.ensureContainerIsRoot(e),!(r=this.assetProvider.getFrameAsset(t)))throw new Error("The requested asset does not exist! "+t);return[4,(i=new se(r,this)).load()];case 1:return c.sent(),o=this.getOutputContainer().getBounds(),a=Math.min(o.width,o.height),(s=this.sdk.createOperation("frame",{},!1)).setFrame(i.getFrame()),l={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*a),imageGroups:i.getFrame().imageGroups},u=new le(s,l,this),this.addToStackAtIndex(u,n),[2,Promise.resolve(u)]}}))}))},e.prototype.removeEffect=function(t){if(t.isValid()){var e=t.getOperation();this.sdk.removeOperation(e),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(t.getIndexInParent(),1)}},e.prototype.removeContainer=function(t){if(t.isValid()&&"output"!==t.type){var e=t.getOperation();this.sdk.removeOperation(e),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(t.getIndexInParent(),1)}},e.prototype.refreshOutputIndex=function(){var t=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(t,this.operationStackOffset-1)},e.prototype.refreshFlipIndex=function(){var t=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),e=this.sdk.getOperationsStack().getStack().length-1;t!==e&&this.moveInOperationsStack(t,e)},e.prototype.refreshFrameIndex=function(){var t=this.sdk.getOperationsStack().getIndexByIdentifier("frame"),e=this.sdk.getOperationsStack().getStack().length-1;-1!==t&&t!==e&&this.moveInOperationsStack(t,e)},e.prototype.mapToRenderType=function(t){switch(t){case U.IMAGE:return"image";case U.DATA_URL:return"data-url";case U.BLOB:return"blob";case U.MSBLOB:return"ms-blob";default:return"image"}},e.prototype.mapToImageFormat=function(t){switch(t){case W.PNG:return"image/png";case W.JPEG:return"image/jpeg";default:return null}},e.prototype.mapBlendMode=function(t){switch(t){case Ee.NORMAL:return Z.NORMAL;case Ee.OVERLAY:return Z.OVERLAY;case Ee.HARD_LIGHT:return Z.HARD_LIGHT;case Ee.SOFT_LIGHT:return Z.SOFT_LIGHT;case Ee.MULTIPLY:return Z.MULTIPLY;case Ee.DARKEN:return Z.DARKEN;case Ee.LIGHTEN:return Z.LIGHTEN;case Ee.SCREEN:return Z.SCREEN;case Ee.COLOR_BURN:return Z.COLOR_BURN;default:return Z.NORMAL}},e.prototype.reverseMapBlendMode=function(t){switch(t){case Z.NORMAL:return Ee.NORMAL;case Z.OVERLAY:return Ee.OVERLAY;case Z.HARD_LIGHT:return Ee.HARD_LIGHT;case Z.SOFT_LIGHT:return Ee.SOFT_LIGHT;case Z.MULTIPLY:return Ee.MULTIPLY;case Z.DARKEN:return Ee.DARKEN;case Z.LIGHTEN:return Ee.LIGHTEN;case Z.SCREEN:return Ee.SCREEN;case Z.COLOR_BURN:return Ee.COLOR_BURN;default:return Ee.NORMAL}},e.prototype.createSpriteOperation=function(){return this.sdk.createOperation("sprite",{},!1)},e.prototype.moveIndex=function(t,e){var n=this.getSiblingIndex(t);if(-1===n)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,n,e);var r=this.operationStackOffset;this.moveInOperationsStack(n+r,e+r),this.enforceOperationOrder()},e.prototype.ensureContainerIsRoot=function(t){if(t.getID()!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")},e.prototype.addToStackAtIndex=function(t,e){if(e&&e<0)throw new Error("The given index may not be negative: "+e);void 0===e?this.rootOperationStack.push(t):this.rootOperationStack.splice(e,0,t);var n=this.rootOperationStack.length-1,r=void 0!==e?e:n;r+=this.operationStackOffset,t.getContainer,this.insertIntoOperationsStack(t.getOperation(),r),this.sdk.setAllOperationsToDirty()},e.prototype.insertIntoOperationsStack=function(t,e){for(var n=this.sdk.getOperationsStack().getStack(),r=n.length,i=Math.max(Math.min(e,r),0),o=r-1;o>=i;o-=1){var a=n[o];n[o+1]=a}n[i]=t,this.sdk.setAllOperationsToDirty(),this.enforceOperationOrder()},e.prototype.moveInStack=function(t,e,n){var r=t.length,i=Math.max(Math.min(e,r-1),0),o=Math.max(Math.min(n,r-1),0);if(i!==o){var a=t[i];if(i<o)for(var s=i+1;s<=o;s+=1)t[s-1]=t[s];else for(s=i-1;s>=o;s-=1)t[s+1]=t[s];t[o]=a}},e.prototype.moveInOperationsStack=function(t,e){var n=this.sdk.getOperationsStack().getStack(),r=n.length,i=Math.min(Math.max(0,t),r-1),o=Math.min(Math.max(0,e),r-1);if(i!==o){var a=n[i];if(i<o)for(var s=i+1;s<=o;s+=1)n[s-1]=n[s];else for(s=i-1;s>=o;s-=1)n[s+1]=n[s];n[o]=a,this.sdk.getOperationsStack().setAllToDirty()}},e.prototype.getSiblingIndex=function(t){return t.getIndexInParent()},e.prototype.resolveAssetForSDK=function(t,e){switch(e=e,t){case"filter":return this.assetProvider.getAssetSource("filter",e.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",e.identifier);case"font":return this.assetProvider.getAssetSource("font",e.identifier)}return""},e}($t),De=function(){function t(t){var e=this;this.isValid=!1,this.isWhiteLabel=function(){return e.isValid&&e.licenseChecker.isWhiteLabel()},this.areCustomAssetsAllowed=function(){return e.isValid&&e.licenseChecker.areCustomAssetsAllowed()},t&&0!==t.length&&(this.licenseChecker=new jt.PhotoEditorSDK.LicenseChecker(t),this.isValid=this.licenseChecker.validate())}return t.prototype.isToolAllowed=function(t){return!this.licenseChecker||!this.isValid||this.licenseChecker.isToolAllowed(t)},t}(),Pe=function(t){var e=Number(t).toString(16);return e.length<2&&(e="0"+e),e},Ie=function(t,e,n){return"#"+Pe(255*t)+Pe(255*e)+Pe(255*n)},Ae=function(t){if(Kt(t)){var e=w(t,4);return"rgba("+255*(r=e[0])+", "+255*(i=e[1])+", "+255*(o=e[2])+", "+e[3]+")"}if(Yt(t))return"rgba("+255*(r=t.r)+", "+255*(i=t.g)+", "+255*(o=t.b)+", "+t.a+")";if(qt(t)){var n=w(t,3),r=n[0],i=n[1],o=n[2];return Ie(r,i,o)}return Xt(t)?(r=t.r,i=t.g,o=t.b,Ie(r,i,o)):t},Fe=function(t){return t.map((function(t){return{identifier:t.name,color:t.color,colorString:Ae(t.color)}}))},je={black:[0,0,0,1],white:[1,1,1,1],gray:[191/255,191/255,191/255,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},Me={transparent:[0,0,0,0],black:[0,0,0,1],white:[1,1,1,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},ze=[P.LIBRARY,[P.TRANSFORM,P.FILTER,P.ADJUSTMENT],[P.FOCUS,P.FRAME,P.OVERLAY],[P.TEXT,P.TEXT_DESIGN,P.STICKER,P.BRUSH]],Le={license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[D.UNDO,D.REDO,D.EXPORT,D.CLOSE],displayResizeWarning:!0,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:(_e=document.createElement("canvas"),we=_e.getContext("webgl")||_e.getContext("experimental-webgl"),we&&we instanceof WebGLRenderingContext?"webgl":"canvas")},enableZoom:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:P.FILTER,tools:ze,snapping:new function(){this.position=new B,this.rotation=new N},filter:new function(){this.categories=[],this.flattenCategories=!1,this.categoryHeaderType=I.CARD,this.enablePreviewThumbnails=!1},focus:new function(){this.items=[]},adjustment:new function(){this.categories=[],this.flattenCategories=!1},library:new function(){this.enableWebcam=!1,this.enableUpload=!1,this.flattenCategories=!1,this.categoryHeaderType=I.CARD},overlay:new function(){this.items=[]},sticker:new function(){this.categories=[],this.canvasActions=[D.BRING_TO_FRONT,D.FLIP,D.DUPLICATE,D.DELETE],this.flattenCategories=!1,this.categoryHeaderType=I.CARD,this.enableCustomUpload=!0,this.customStickerTintMode="none"},text:new function(){this.fonts=[],this.canvasActions=[D.EDIT,D.BRING_TO_FRONT,D.DUPLICATE,D.DELETE],this.disableAutoScaling=!1},textdesign:new function(){this.items=[],this.canvasActions=[D.EDIT,D.BRING_TO_FRONT,D.INVERT,D.DUPLICATE,D.DELETE]},frame:new function(){this.items=[]},brush:new function(){this.defaultSize=.05,this.defaultHardness=.5},transform:new function(){this.categories=[],this.enableRotation=!0,this.enableFlip=!0,this.flattenCategories=!1,this.categoryHeaderType=I.TEXT},export:{image:{exportType:U.IMAGE,format:W.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{}},Be=((xe={})[H.BRIGHTNESS]=0,xe[H.SATURATION]=0,xe[H.CONTRAST]=0,xe[H.GAMMA]=0,xe[H.CLARITY]=0,xe[H.EXPOSURE]=0,xe[H.SHADOWS]=0,xe[H.HIGHLIGHTS]=0,xe[H.WHITES]=0,xe[H.BLACKS]=0,xe[H.TEMPERATURE]=0,xe[H.SHARPNESS]=0,xe),Ne=function(t,e){return(Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ue(t,e){function n(){this.constructor=t}Ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var We=function(){return(We=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function He(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Ve(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(He(arguments[e]));return t}var Ge=[];Object.freeze(Ge);var Ze={};Object.freeze(Ze);var Xe={};function qe(){return"undefined"!=typeof window?window:void 0!==t?t:Xe}function Ye(){return++gr.mobxGuid}function Ke(t){throw Qe(!1,t),"X"}function Qe(t,e){if(!t)throw new Error("[mobx] "+(e||"An invariant failed, however the error is obfuscated because this is an production build."))}function Je(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var $e=function(){};function tn(t){return null!==t&&"object"==typeof t}function en(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function nn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function rn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function on(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return tn(t)&&!0===t[n]}}function an(t){return void 0!==qe().Map&&t instanceof qe().Map}function sn(t){return t instanceof Set}function ln(t){for(var e=[];;){var n=t.next();if(n.done)break;e.push(n.value)}return e}function un(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function cn(t){return null===t?null:"object"==typeof t?""+t:t}function fn(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function pn(t,e){rn(t,fn(),e)}function hn(t){return t[fn()]=yn,t}function dn(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function yn(){return this}var gn=function(){function t(t){void 0===t&&(t="Atom@"+Ye()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Nn.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return xr(this)},t.prototype.reportChanged=function(){_r(),function(t){if(t.lowestObserverState!==Nn.STALE){t.lowestObserverState=Nn.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===Nn.UP_TO_DATE&&(r.isTracing!==Un.NONE&&Or(r,t),r.onBecomeStale()),r.dependenciesState=Nn.STALE}}}(this),wr()},t.prototype.toString=function(){return this.name},t}(),mn=on("Atom",gn);function vn(t,e,n){void 0===e&&(e=$e),void 0===n&&(n=$e);var r=new gn(t);return Hr("onBecomeObserved",r,e,void 0),Wr(r,n),r}function bn(t,e){return t===e}var _n={identity:bn,structural:function(t,e){return Li(t,e)},default:function(t,e){return function(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||bn(t,e)},shallow:function(t,e){return Li(t,e,1)}},wn={},xn={};function On(t,e){var n=e?wn:xn;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return Sn(this),this[t]},set:function(e){Sn(this),this[t]=e}})}function Sn(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var n in nn(t,"__mobxDidRunLazyInitializers",!0),e){var r=e[n];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function kn(t,e){return function(){var n,r=function(r,i,o,a){if(!0===a)return e(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var s=r.__mobxDecorators;nn(r,"__mobxDecorators",We({},s))}return r.__mobxDecorators[i]={prop:i,propertyCreator:e,descriptor:o,decoratorTarget:r,decoratorArguments:n},On(i,t)};return Tn(arguments)?(n=Ge,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function Tn(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}function En(t,e,n){return qr(t)?t:Array.isArray(t)?Ln.array(t,{name:n}):en(t)?Ln.object(t,void 0,{name:n}):an(t)?Ln.map(t,{name:n}):sn(t)?Ln.set(t,{name:n}):t}function Cn(t){return t}function Rn(t){var e=kn(!0,(function(e,n,r,i,o){!function(t,e,n,r){var i=Ri(t);if(ti(i)){var o=ni(i,{object:t,name:e,type:"add",newValue:n});if(!o)return;n=o.newValue}n=(i.values[e]=new ur(n,r,i.name+"."+e,!1)).value,Object.defineProperty(t,e,function(t){return Di[t]||(Di[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),i.keys&&i.keys.push(e),function(t,e,n,r){var i=ri(t),o=Rr(),a=i||o?{type:"add",object:e,name:n,newValue:r}:null;o&&Pr(We({},a,{name:t.name,key:n})),i&&oi(t,a),o&&Ar()}(i,t,e,n)}(e,n,r?r.initializer?r.initializer.call(e):r.value:void 0,t)})),n=(void 0!==r&&r.env,e);return n.enhancer=t,n}var Dn={deep:!0,name:void 0,defaultDecorator:void 0};function Pn(t){return null==t?Dn:"string"==typeof t?{name:t,deep:!0}:t}function In(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?Cn:En}Object.freeze(Dn),Object.freeze({deep:!1,name:void 0,defaultDecorator:void 0});var An=Rn(En),Fn=Rn((function(t,e,n){return null==t||Fi(t)||_i(t)||Si(t)||Ei(t)?t:Array.isArray(t)?Ln.array(t,{name:n,deep:!1}):en(t)?Ln.object(t,void 0,{name:n,deep:!1}):an(t)?Ln.map(t,{name:n,deep:!1}):sn(t)?Ln.set(t,{name:n,deep:!1}):Ke(!1)})),jn=Rn(Cn),Mn=Rn((function(t,e,n){return Li(t,e)?e:t})),zn={box:function(t,e){arguments.length>2&&Bn("box");var n=Pn(e);return new ur(t,In(n),n.name,!0,n.equals)},shallowBox:function(t,e){return arguments.length>2&&Bn("shallowBox"),Ln.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&Bn("array");var n=Pn(e);return new di(t,In(n),n.name)},shallowArray:function(t,e){return arguments.length>2&&Bn("shallowArray"),Ln.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&Bn("map");var n=Pn(e);return new xi(t,In(n),n.name)},shallowMap:function(t,e){return arguments.length>2&&Bn("shallowMap"),Ln.map(t,{name:e,deep:!1})},set:function(t,e){arguments.length>2&&Bn("set");var n=Pn(e);return new Ti(t,In(n),n.name)},object:function(t,e,n){"string"==typeof arguments[1]&&Bn("object");var r=Pn(n);return Gr({},t,e,r)},shallowObject:function(t,e){return"string"==typeof arguments[1]&&Bn("shallowObject"),Ln.object(t,{},{name:e,deep:!1})},ref:jn,shallow:Fn,deep:An,struct:Mn},Ln=function(t,e,n){if("string"==typeof arguments[1])return An.apply(null,arguments);if(qr(t))return t;var r=en(t)?Ln.object(t,e,n):Array.isArray(t)?Ln.array(t,e):an(t)?Ln.map(t,e):sn(t)?Ln.set(t,e):t;if(r!==t)return r;Ke(!1)};function Bn(t){Ke("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(zn).forEach((function(t){return Ln[t]=zn[t]}));var Nn,Un,Wn=kn(!1,(function(t,e,n,r,i){var o=n.get,a=n.set,s=i[0]||{};!function(t,e,n){var r=Ri(t);n.name=r.name+"."+e,n.context=t,r.values[e]=new fr(n),Object.defineProperty(t,e,function(t){return Pi[t]||(Pi[t]={configurable:gr.computedConfigurable,enumerable:!1,get:function(){return Ii(this).read(this,t)},set:function(e){Ii(this).write(this,t,e)}})}(e))}(t,e,We({get:o,set:a},s))})),Hn=Wn({equals:_n.structural}),Vn=function(t,e,n){if("string"==typeof e)return Wn.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return Wn.apply(null,arguments);var r="object"==typeof e?e:{};return r.get=t,r.set="function"==typeof e?e:r.set,r.name=r.name||t.name||"",new fr(r)};Vn.struct=Hn,function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}(Nn||(Nn={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(Un||(Un={}));var Gn=function(t){this.cause=t};function Zn(t){return t instanceof Gn}function Xn(t){switch(t.dependenciesState){case Nn.UP_TO_DATE:return!1;case Nn.NOT_TRACKING:case Nn.STALE:return!0;case Nn.POSSIBLY_STALE:for(var e=Jn(),n=t.observing,r=n.length,i=0;i<r;i++){var o=n[i];if(pr(o)){if(gr.disableErrorBoundaries)o.get();else try{o.get()}catch(t){return $n(e),!0}if(t.dependenciesState===Nn.STALE)return $n(e),!0}}return nr(t),$n(e),!1}}function qn(t){var e=t.observers.length>0;gr.computationDepth>0&&e&&Ke(!1),gr.allowStateChanges||!e&&"strict"!==gr.enforceActions||Ke(!1)}function Yn(t,e,n){var r=tr(!0);nr(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++gr.runId;var i,o=gr.trackingDerivation;if(gr.trackingDerivation=t,!0===gr.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new Gn(t)}return gr.trackingDerivation=o,function(t){for(var e=t.observing,n=t.observing=t.newObserving,r=Nn.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++)0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState);for(n.length=i,t.newObserving=null,o=e.length;o--;)0===(s=e[o]).diffValue&&vr(s,t),s.diffValue=0;for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,mr(s,t))}r!==Nn.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),t.observing.length,er(r),i}function Kn(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)vr(e[n],t);t.dependenciesState=Nn.NOT_TRACKING}function Qn(t){var e=Jn(),n=t();return $n(e),n}function Jn(){var t=gr.trackingDerivation;return gr.trackingDerivation=null,t}function $n(t){gr.trackingDerivation=t}function tr(t){var e=gr.allowStateReads;return gr.allowStateReads=t,e}function er(t){gr.allowStateReads=t}function nr(t){if(t.dependenciesState!==Nn.UP_TO_DATE){t.dependenciesState=Nn.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=Nn.UP_TO_DATE}}var rr=0,ir=1;function or(t,e){var n=function(){return ar(t,e,this,arguments)};return n.isMobxAction=!0,n}function ar(t,e,n,r){var i=function(t,e,n){var r=Rr()&&!!t,i=0;if(r){i=Date.now();var o=n&&n.length||0,a=new Array(o);if(o>0)for(var s=0;s<o;s++)a[s]=n[s];Pr({type:"action",name:t,object:e,arguments:a})}var l=Jn();_r();var u={prevDerivation:l,prevAllowStateChanges:sr(!0),prevAllowStateReads:tr(!0),notifySpy:r,startTime:i,actionId:ir++,parentActionId:rr};return rr=u.actionId,u}(t,n,r);try{return e.apply(n,r)}catch(t){throw i.error=t,t}finally{!function(t){rr!==t.actionId&&Ke("invalid action stack. did you forget to finish an action?"),rr=t.parentActionId,void 0!==t.error&&(gr.suppressReactionErrors=!0),lr(t.prevAllowStateChanges),er(t.prevAllowStateReads),wr(),$n(t.prevDerivation),t.notifySpy&&Ar({time:Date.now()-t.startTime}),gr.suppressReactionErrors=!1}(i)}}function sr(t){var e=gr.allowStateChanges;return gr.allowStateChanges=t,e}function lr(t){gr.allowStateChanges=t}var ur=function(t){function e(e,n,r,i,o){void 0===r&&(r="ObservableValue@"+Ye()),void 0===i&&(i=!0),void 0===o&&(o=_n.default);var a=t.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(e,void 0,r),i&&Rr()&&Dr({type:"create",name:a.name,newValue:""+a.value}),a}return Ue(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){var e=this.value;if((t=this.prepareNewValue(t))!==gr.UNCHANGED){var n=Rr();n&&Pr({type:"update",name:this.name,newValue:t,oldValue:e}),this.setNewValue(t),n&&Ar()}},e.prototype.prepareNewValue=function(t){if(qn(this),ti(this)){var e=ni(this,{object:this,type:"update",newValue:t});if(!e)return gr.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?gr.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),ri(this)&&oi(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return ei(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),ii(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return cn(this.get())},e}(gn);ur.prototype[un()]=ur.prototype.valueOf;var cr=on("ObservableValue",ur),fr=function(){function t(t){this.dependenciesState=Nn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Nn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Ye(),this.value=new Gn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Un.NONE,this.derivation=t.get,this.name=t.name||"ComputedValue@"+Ye(),t.set&&(this.setter=or(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?_n.structural:_n.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState===Nn.UP_TO_DATE){t.lowestObserverState=Nn.POSSIBLY_STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===Nn.UP_TO_DATE&&(r.dependenciesState=Nn.POSSIBLY_STALE,r.isTracing!==Un.NONE&&Or(r,t),r.onBecomeStale())}}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&Ke("Cycle detected in computation "+this.name+": "+this.derivation),0!==gr.inBatch||0!==this.observers.length||this.keepAlive?(xr(this),Xn(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState!==Nn.STALE){t.lowestObserverState=Nn.STALE;for(var e=t.observers,n=e.length;n--;){var r=e[n];r.dependenciesState===Nn.POSSIBLY_STALE?r.dependenciesState=Nn.STALE:r.dependenciesState===Nn.UP_TO_DATE&&(t.lowestObserverState=Nn.UP_TO_DATE)}}}(this)):Xn(this)&&(this.warnAboutUntrackedRead(),_r(),this.value=this.computeValue(!1),wr());var t=this.value;if(Zn(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(Zn(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){Qe(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else Qe(!1,!1)},t.prototype.trackAndCompute=function(){Rr()&&Dr({object:this.scope,type:"compute",name:this.name});var t=this.value,e=this.dependenciesState===Nn.NOT_TRACKING,n=this.computeValue(!0),r=e||Zn(t)||Zn(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,gr.computationDepth++,t)e=Yn(this,this.derivation,this.scope);else if(!0===gr.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new Gn(t)}return gr.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(Kn(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,r=!0,i=void 0;return function(t,e){void 0===e&&(e=Ze);var n,r=e&&e.name||t.name||"Autorun@"+Ye();if(e.scheduler||e.delay){var i=function(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Ur}(e),o=!1;n=new Sr(r,(function(){o||(o=!0,i((function(){o=!1,n.isDisposed||n.track(a)})))}),e.onError,e.requiresObservable)}else n=new Sr(r,(function(){this.track(a)}),e.onError,e.requiresObservable);function a(){t()}return n.schedule(),n.getDisposer()}((function(){var o=n.get();if(!r||e){var a=Jn();t({type:"update",object:n,newValue:o,oldValue:i}),$n(a)}r=!1,i=o}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return cn(this.get())},t}();fr.prototype[un()]=fr.prototype.valueOf;var pr=on("ComputedValue",fr),hr=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},dr=!0,yr=!1,gr=function(){var t=qe();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(dr=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new hr).version&&(dr=!1),dr?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new hr):(setTimeout((function(){yr||Ke("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new hr)}();function mr(t,e){var n=t.observers.length;n&&(t.observersIndexes[e.__mapid]=n),t.observers[n]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function vr(t,e){if(1===t.observers.length)t.observers.length=0,br(t);else{var n=t.observers,r=t.observersIndexes,i=n.pop();if(i!==e){var o=r[e.__mapid]||0;o?r[i.__mapid]=o:delete r[i.__mapid],n[o]=i}delete r[e.__mapid]}}function br(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,gr.pendingUnobservations.push(t))}function _r(){gr.inBatch++}function wr(){if(0==--gr.inBatch){Tr();for(var t=gr.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.length&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof fr&&n.suspend())}gr.pendingUnobservations=[]}}function xr(t){var e=gr.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&gr.inBatch>0&&br(t),!1)}function Or(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===Un.BREAK){var n=[];!function t(e,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return t(e,n,r+1)})))}((r=t,Zr(ji(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof fr?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var Sr=function(){function t(t,e,n,r){void 0===t&&(t="Reaction@"+Ye()),void 0===r&&(r=!1),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=Nn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Ye(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Un.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,gr.pendingReactions.push(this),Tr())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(_r(),this._isScheduled=!1,Xn(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Rr()&&Dr({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}wr()}},t.prototype.track=function(t){_r();var e,n=Rr();n&&(e=Date.now(),Pr({name:this.name,type:"reaction"})),this._isRunning=!0;var r=Yn(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Kn(this),Zn(r)&&this.reportExceptionInDerivation(r.cause),n&&Ar({time:Date.now()-e}),wr()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(gr.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";gr.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),Rr()&&Dr({type:"error",name:this.name,message:n,error:""+t}),gr.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(_r(),Kn(this),wr()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=Jr(t);if(!r)return Ke(!1);r.isTracing===Un.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?Un.BREAK:Un.LOG}(this,t)},t}(),kr=function(t){return t()};function Tr(){gr.inBatch>0||gr.isRunningReactions||kr(Er)}function Er(){gr.isRunningReactions=!0;for(var t=gr.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}gr.isRunningReactions=!1}var Cr=on("Reaction",Sr);function Rr(){return!!gr.spyListeners.length}function Dr(t){if(gr.spyListeners.length)for(var e=gr.spyListeners,n=0,r=e.length;n<r;n++)e[n](t)}function Pr(t){Dr(We({},t,{spyReportStart:!0}))}var Ir={spyReportEnd:!0};function Ar(t){Dr(t?We({},t,{spyReportEnd:!0}):Ir)}function Fr(t){return gr.spyListeners.push(t),Je((function(){gr.spyListeners=gr.spyListeners.filter((function(e){return e!==t}))}))}function jr(){Ke(!1)}function Mr(t){return function(e,n,r){if(r){if(r.value)return{value:or(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return or(t,i.call(this))}}}return zr(t).apply(this,arguments)}}function zr(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){nn(this,n,Lr(t,e))}})}}var Lr=function(t,e,n,r){return 1===arguments.length&&"function"==typeof t?or(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?or(t,e):1===arguments.length&&"string"==typeof t?Mr(t):!0!==r?Mr(e).apply(null,arguments):void(t[e]=or(t.name||e,n.value))};function Br(t,e){return ar("string"==typeof t?t:t.name||"<unnamed action>","function"==typeof t?t:e,this,void 0)}function Nr(t,e,n){nn(t,e,or(e,n.bind(t)))}Lr.bound=function(t,e,n,r){return!0===r?(Nr(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Nr(this,e,n.value||n.initializer.call(this)),this[e]},set:jr}:{enumerable:!1,configurable:!0,set:function(t){Nr(this,e,t)},get:function(){}}};var Ur=function(t){return t()};function Wr(t,e,n){return Hr("onBecomeUnobserved",t,e,n)}function Hr(t,e,n,r){var i="function"==typeof r?ji(e,n):ji(e),o="function"==typeof r?r:n,a=i[t];return"function"!=typeof a?Ke(!1):(i[t]=function(){a.call(this),o.call(this)},function(){i[t]=a})}function Vr(t){var e=t.enforceActions,n=t.computedRequiresReaction,r=t.computedConfigurable,i=t.disableErrorBoundaries,o=t.arrayBuffer,a=t.reactionScheduler,s=t.reactionRequiresObservable,l=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&((gr.pendingReactions.length||gr.inBatch||gr.isRunningReactions)&&Ke("isolateGlobalState should be called before MobX is running any reactions"),yr=!0,dr&&(0==--qe().__mobxInstanceCount&&(qe().__mobxGlobals=void 0),gr=new hr)),void 0!==e){var u=void 0;switch(e){case!0:case"observed":u=!0;break;case!1:case"never":u=!1;break;case"strict":case"always":u="strict";break;default:Ke("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}gr.enforceActions=u,gr.allowStateChanges=!0!==u&&"strict"!==u}void 0!==n&&(gr.computedRequiresReaction=!!n),void 0!==s&&(gr.reactionRequiresObservable=!!s),void 0!==l&&(gr.observableRequiresReaction=!!l,gr.allowStateReads=!gr.observableRequiresReaction),void 0!==r&&(gr.computedConfigurable=!!r),void 0!==i&&(!0===i&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),gr.disableErrorBoundaries=!!i),"number"==typeof o&&vi(o),a&&function(t){var e=kr;kr=function(n){return t((function(){return e(n)}))}}(a)}function Gr(t,e,n,r){var i=(r=Pn(r)).defaultDecorator||(!1===r.deep?jn:An);Sn(t),Ri(t,r.name,i.enhancer),_r();try{for(var o in e){var a=Object.getOwnPropertyDescriptor(e,o),s=(n&&o in n?n[o]:a.get?Wn:i)(t,o,a,!0);s&&Object.defineProperty(t,o,s)}}finally{wr()}return t}function Zr(t){var e,n,r={name:t.name};return t.observing&&t.observing.length>0&&(r.dependencies=(e=t.observing,n=[],e.forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n).map(Zr)),r}function Xr(t,e){if(null==t)return!1;if(void 0!==e){if(Fi(t)){var n=t.$mobx;return n.values&&!!n.values[e]}return!1}return Fi(t)||!!t.$mobx||mn(t)||Cr(t)||pr(t)}function qr(t){return 1!==arguments.length&&Ke(!1),Xr(t)}var Yr={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Kr(t,e,n,r){return r.detectCycles&&t.set(e,n),n}function Qr(t,e){var n;return"boolean"==typeof e&&(e={detectCycles:e}),e||(e=Yr),e.detectCycles=void 0===e.detectCycles?!0===e.recurseEverything:!0===e.detectCycles,e.detectCycles&&(n=new Map),function t(e,n,r){if(!n.recurseEverything&&!qr(e))return e;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(cr(e))return t(e.get(),n,r);var i;if(qr(e)&&(Fi(i=e)?i.$mobx.getKeys():Si(i)?i._keys.slice():Ei(i)?ln(i.keys()):_i(i)?i.map((function(t,e){return e})):Ke(!1)),!0===n.detectCycles&&null!==e&&r.has(e))return r.get(e);if(_i(e)||Array.isArray(e)){var o=Kr(r,e,[],n),a=e.map((function(e){return t(e,n,r)}));o.length=a.length;for(var s=0,l=a.length;s<l;s++)o[s]=a[s];return o}if(Ei(e)||Object.getPrototypeOf(e)===Set.prototype){if(!1===n.exportMapsAsObjects){var u=Kr(r,e,new Set,n);return e.forEach((function(e){u.add(t(e,n,r))})),u}var c=Kr(r,e,[],n);return e.forEach((function(e){c.push(t(e,n,r))})),c}if(Si(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===n.exportMapsAsObjects){var f=Kr(r,e,new Map,n);return e.forEach((function(e,i){f.set(i,t(e,n,r))})),f}var p=Kr(r,e,{},n);return e.forEach((function(e,i){p[i]=t(e,n,r)})),p}var h=Kr(r,e,{},n);for(var d in e)h[d]=t(e[d],n,r);return h}(t,e,n)}function Jr(t){switch(t.length){case 0:return gr.trackingDerivation;case 1:return ji(t[0]);case 2:return ji(t[0],t[1])}}function $r(t,e){void 0===e&&(e=void 0),_r();try{return t.apply(e)}finally{wr()}}function ti(t){return void 0!==t.interceptors&&t.interceptors.length>0}function ei(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),Je((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function ni(t,e){var n=Jn();try{var r=t.interceptors;if(r)for(var i=0,o=r.length;i<o&&(Qe(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{$n(n)}}function ri(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function ii(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),Je((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function oi(t,e){var n=Jn(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);$n(n)}}var ai,si,li,ui,ci=(ai=!1,si={},Object.defineProperty(si,"0",{set:function(){ai=!0}}),Object.create(si)[0]=1,!1===ai),fi=0,pi=function(){};li=pi,ui=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(li.prototype,ui):void 0!==li.prototype.__proto__?li.prototype.__proto__=ui:li.prototype=ui,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(t){Object.defineProperty(pi.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})}));var hi=function(){function t(t,e,n,r){this.array=n,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new gn(t||"ObservableArray@"+Ye()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return ei(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ii(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&t+e+1>fi&&vi(t+e+1)},t.prototype.spliceWithArray=function(t,e,n){var r=this;qn(this.atom);var i=this.values.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=Ge),ti(this)){var o=ni(this,{object:this.array,type:"splice",index:t,removedCount:e,added:n});if(!o)return Ge;e=o.removedCount,n=o.added}var a=(n=0===n.length?n:n.map((function(t){return r.enhancer(t,void 0)}))).length-e;this.updateArrayLength(i,a);var s=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,s),this.dehanceValues(s)},t.prototype.spliceItemsIntoValues=function(t,e,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,Ve([t,e],n));var i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&Rr(),i=ri(this),o=i||r?{object:this.array,type:"update",index:t,newValue:e,oldValue:n}:null;r&&Pr(We({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&oi(this,o),r&&Ar()},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&Rr(),i=ri(this),o=i||r?{object:this.array,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;r&&Pr(We({},o,{name:this.atom.name})),this.atom.reportChanged(),i&&oi(this,o),r&&Ar()},t}(),di=function(t){function e(e,n,r,i){void 0===r&&(r="ObservableArray@"+Ye()),void 0===i&&(i=!1);var o=t.call(this)||this,a=new hi(r,n,o,i);if(rn(o,"$mobx",a),e&&e.length){var s=sr(!0);o.spliceWithArray(0,0,e),lr(s)}return ci&&Object.defineProperty(a.array,"0",yi),o}return Ue(e,t),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,e){return void 0===e&&(e=!1),this.$mobx.observe(t,e)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map((function(t){return _i(t)?t.peek():t})))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,e,n){void 0===n&&(n=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},e.prototype.findIndex=function(t,e,n){void 0===n&&(n=0);for(var r=this.peek(),i=r.length,o=n;o<i;o++)if(t.call(e,r[o],o,this))return o;return-1},e.prototype.splice=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,e)}return this.$mobx.spliceWithArray(t,e,n)},e.prototype.spliceWithArray=function(t,e,n){return this.$mobx.spliceWithArray(t,e,n)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(n.values.length,0,t),n.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.$mobx;return n.spliceWithArray(0,0,t),n.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var e=this.slice();return e.sort.apply(e,arguments)},e.prototype.remove=function(t){var e=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return e>-1&&(this.splice(e,1),!0)},e.prototype.move=function(t,e){function n(t){if(t<0)throw new Error("[mobx.array] Index out of bounds: "+t+" is negative");var e=this.$mobx.values.length;if(t>=e)throw new Error("[mobx.array] Index out of bounds: "+t+" is not smaller than "+e)}if(n.call(this,t),n.call(this,e),t!==e){var r,i=this.$mobx.values;r=t<e?Ve(i.slice(0,t),i.slice(t+1,e+1),[i[t]],i.slice(e+1)):Ve(i.slice(0,e),[i[t]],i.slice(e,t),i.slice(t+1)),this.replace(r)}},e.prototype.get=function(t){var e=this.$mobx;if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,e){var n=this.$mobx,r=n.values;if(t<r.length){qn(n.atom);var i=r[t];if(ti(n)){var o=ni(n,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,i))!==i&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}},e}(pi);pn(di.prototype,(function(){this.$mobx.atom.reportObserved();var t=this,e=0;return hn({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(di.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),nn(di.prototype,dn(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(t){var e=Array.prototype[t];Qe("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),nn(di.prototype,t,(function(){return e.apply(this.peek(),arguments)}))})),function(t,e){for(var n=0;n<e.length;n++)nn(t,e[n],t[e[n]])}(di.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var yi=gi(0);function gi(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function mi(t){Object.defineProperty(di.prototype,""+t,gi(t))}function vi(t){for(var e=fi;e<t;e++)mi(e);fi=t}vi(1e3);var bi=on("ObservableArrayAdministration",hi);function _i(t){return tn(t)&&bi(t.$mobx)}var wi={},xi=function(){function t(t,e,n){if(void 0===e&&(e=En),void 0===n&&(n="ObservableMap@"+Ye()),this.enhancer=e,this.name=n,this.$mobx=wi,this._keys=new di(void 0,Cn,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!gr.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var r=n=new ur(this._has(t),Cn,this.name+"."+Oi(t)+"?",!1);this._hasMap.set(t,r),Wr(r,(function(){return e._hasMap.delete(t)}))}return n.get()},t.prototype.set=function(t,e){var n=this._has(t);if(ti(this)){var r=ni(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(ti(this)&&!(i=ni(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=Rr(),r=ri(this),i=r||n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return n&&Pr(We({},i,{name:this.name,key:t})),$r((function(){e._keys.remove(t),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),r&&oi(this,i),n&&Ar(),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);n&&n.setNewValue(e)},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==gr.UNCHANGED){var r=Rr(),i=ri(this),o=i||r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;r&&Pr(We({},o,{name:this.name,key:t})),n.setNewValue(e),i&&oi(this,o),r&&Ar()}},t.prototype._addValue=function(t,e){var n=this;$r((function(){var r=new ur(e,n.enhancer,n.name+"."+Oi(t),!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keys.push(t)}));var r=Rr(),i=ri(this),o=i||r?{type:"add",object:this,name:t,newValue:e}:null;r&&Pr(We({},o,{name:this.name,key:t})),i&&oi(this,o),r&&Ar()},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keys[fn()]()},t.prototype.values=function(){var t=this,e=0;return hn({next:function(){return e<t._keys.length?{value:t.get(t._keys[e++]),done:!1}:{value:void 0,done:!0}}})},t.prototype.entries=function(){var t=this,e=0;return hn({next:function(){if(e<t._keys.length){var n=t._keys[e++];return{value:[n,t.get(n)],done:!1}}return{done:!0}}})},t.prototype.forEach=function(t,e){var n=this;this._keys.forEach((function(r){return t.call(e,n.get(r),r,n)}))},t.prototype.merge=function(t){var e=this;return Si(t)&&(t=t.toJS()),$r((function(){en(t)?Object.keys(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=He(t,2),r=n[0],i=n[1];return e.set(r,i)})):an(t)?t.constructor!==Map?Ke("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach((function(t,n){return e.set(n,t)})):null!=t&&Ke("Cannot initialize map from "+t)})),this},t.prototype.clear=function(){var t=this;$r((function(){Qn((function(){t._keys.slice().forEach((function(e){return t.delete(e)}))}))}))},t.prototype.replace=function(t){var e=this;return $r((function(){for(var n,r=an(n=t)||Si(n)?n:Array.isArray(n)?new Map(n):en(n)?new Map(Object.entries(n)):Ke("Cannot convert to map from '"+n+"'"),i=e._keys,o=Array.from(r.keys()),a=!1,s=0;s<i.length;s++){var l=i[s];i.length===o.length&&l!==o[s]&&(a=!0),r.has(l)||(a=!0,e.delete(l))}r.forEach((function(t,n){e._data.has(n)||(a=!0),e.set(n,t)})),a&&e._keys.replace(o)})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t=this,e={};return this._keys.forEach((function(n){return e["symbol"==typeof n?n:Oi(n)]=t.get(n)})),e},t.prototype.toJS=function(){var t=this,e=new Map;return this._keys.forEach((function(n){return e.set(n,t.get(n))})),e},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+this._keys.map((function(e){return Oi(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return ii(this,t)},t.prototype.intercept=function(t){return ei(this,t)},t}();function Oi(t){return t&&t.toString?t.toString():new String(t).toString()}pn(xi.prototype,(function(){return this.entries()})),rn(xi.prototype,dn(),"Map");var Si=on("ObservableMap",xi),ki={},Ti=function(){function t(t,e,n){if(void 0===e&&(e=En),void 0===n&&(n="ObservableSet@"+Ye()),this.name=n,this.$mobx=ki,this._data=new Set,this._atom=vn(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;$r((function(){Qn((function(){t._data.forEach((function(e){t.delete(e)}))}))}))},t.prototype.forEach=function(t,e){var n=this;this._data.forEach((function(r){t.call(e,r,r,n)}))},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if(qn(this._atom),ti(this)&&!(i=ni(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){$r((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var n=Rr(),r=ri(this),i=r||n?{type:"add",object:this,newValue:t}:null;r&&oi(this,i)}return this},t.prototype.delete=function(t){var e=this;if(ti(this)&&!(i=ni(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var n=Rr(),r=ri(this),i=r||n?{type:"delete",object:this,oldValue:t}:null;return $r((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&oi(this,i),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=ln(this.keys()),n=ln(this.values());return hn({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t,e=this,n=0;return void 0!==this._data.values?t=ln(this._data.values()):(t=[],this._data.forEach((function(e){return t.push(e)}))),hn({next:function(){return n<t.length?{value:e.dehanceValue(t[n++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return Ei(t)&&(t=t.toJS()),$r((function(){Array.isArray(t)||sn(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&Ke("Cannot initialize set from "+t)})),this},t.prototype.observe=function(t,e){return ii(this,t)},t.prototype.intercept=function(t){return ei(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+ln(this.keys()).join(", ")+" ]"},t}();pn(Ti.prototype,(function(){return this.values()})),rn(Ti.prototype,dn(),"Set");var Ei=on("ObservableSet",Ti),Ci=function(){function t(t,e,n){this.target=t,this.name=e,this.defaultEnhancer=n,this.values={}}return t.prototype.read=function(t,e){if(this.target===t||(this.illegalAccess(t,e),this.values[e]))return this.values[e].get()},t.prototype.write=function(t,e,n){var r=this.target;r!==t&&this.illegalAccess(t,e);var i=this.values[e];if(i instanceof fr)i.set(n);else{if(ti(this)){if(!(s=ni(this,{type:"update",object:r,name:e,newValue:n})))return;n=s.newValue}if((n=i.prepareNewValue(n))!==gr.UNCHANGED){var o=ri(this),a=Rr(),s=o||a?{type:"update",object:r,oldValue:i.value,name:e,newValue:n}:null;a&&Pr(We({},s,{name:this.name,key:e})),i.setNewValue(n),o&&oi(this,s),a&&Ar()}}},t.prototype.remove=function(t){if(this.values[t]){var e=this.target;if(ti(this)&&!(o=ni(this,{object:e,name:t,type:"remove"})))return;try{_r();var n=ri(this),r=Rr(),i=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var o=n||r?{type:"remove",object:e,oldValue:i,name:t}:null;r&&Pr(We({},o,{name:this.name,key:t})),n&&oi(this,o),r&&Ar()}finally{wr()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return ii(this,t)},t.prototype.intercept=function(t){return ei(this,t)},t.prototype.getKeys=function(){var t=this;return void 0===this.keys&&(this.keys=new di(Object.keys(this.values).filter((function(e){return t.values[e]instanceof ur})),Cn,"keys("+this.name+")",!0)),this.keys.slice()},t}();function Ri(t,e,n){void 0===e&&(e=""),void 0===n&&(n=En);var r=t.$mobx;return r||(en(t)||(e=(t.constructor.name||"ObservableObject")+"@"+Ye()),e||(e="ObservableObject@"+Ye()),rn(t,"$mobx",r=new Ci(t,e,n)),r)}var Di=Object.create(null),Pi=Object.create(null);function Ii(t){return t.$mobx||(Sn(t),t.$mobx)}var Ai=on("ObservableObjectAdministration",Ci);function Fi(t){return!!tn(t)&&(Sn(t),Ai(t.$mobx))}function ji(t,e){if("object"==typeof t&&null!==t){if(_i(t))return void 0!==e&&Ke(!1),t.$mobx.atom;if(Ei(t))return t.$mobx;if(Si(t)){var n=t;return void 0===e?ji(n._keys):((r=n._data.get(e)||n._hasMap.get(e))||Ke(!1),r)}var r;if(Sn(t),e&&!t.$mobx&&t[e],Fi(t))return e?((r=t.$mobx.values[e])||Ke(!1),r):Ke(!1);if(mn(t)||pr(t)||Cr(t))return t}else if("function"==typeof t&&Cr(t.$mobx))return t.$mobx;return Ke(!1)}function Mi(t,e){return(void 0!==e?ji(t,e):Fi(t)||Si(t)||Ei(t)?function t(e,n){return e||Ke("Expecting some object"),void 0!==n?t(ji(e,n)):mn(e)||pr(e)||Cr(e)||Si(e)||Ei(e)?e:(Sn(e),e.$mobx?e.$mobx:void Ke(!1))}(t):ji(t)).name}var zi=Object.prototype.toString;function Li(t,e,n){return void 0===n&&(n=-1),function t(e,n,r,i,o){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof n)return!1;e=Bi(e),n=Bi(n);var s=zi.call(e);if(s!==zi.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n)}var l="[object Array]"===s;if(!l){if("object"!=typeof e||"object"!=typeof n)return!1;var u=e.constructor,c=n.constructor;if(u!==c&&!("function"==typeof u&&u instanceof u&&"function"==typeof c&&c instanceof c)&&"constructor"in e&&"constructor"in n)return!1}if(0===r)return!1;r<0&&(r=-1),o=o||[];for(var f=(i=i||[]).length;f--;)if(i[f]===e)return o[f]===n;if(i.push(e),o.push(n),l){if((f=e.length)!==n.length)return!1;for(;f--;)if(!t(e[f],n[f],r-1,i,o))return!1}else{var p=Object.keys(e),h=void 0;if(f=p.length,Object.keys(n).length!==f)return!1;for(;f--;)if(!Ni(n,h=p[f])||!t(e[h],n[h],r-1,i,o))return!1}return i.pop(),o.pop(),!0}(t,e,n)}function Bi(t){return _i(t)?t.peek():an(t)||Si(t)||sn(t)||Ei(t)?ln(t.entries()):t}function Ni(t,e){return Object.prototype.hasOwnProperty.call(t,e)}"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Fr,extras:{getDebugName:Mi},$mobx:"$mobx"});var Ui,Wi=function(){function t(t,e){this.from=t,this.to=e}return t.prototype.contains=function(t){return this.from<=t&&t<=this.to},t.prototype.clamp=function(t){return Math.min(Math.max(this.from,t),this.to)},t}(),Hi=new Wi(-1,1),Vi=function(){function t(t){this.engineMediator=t,this.state=Be}return t.prototype.editAdjustments=function(t){var e=t.type,n=t.value,r=Hi.clamp(n);this.state[e]=r},t.prototype.reset=function(){var t=this;Br((function(){-1===t.indexInContainer&&(Object.keys(Be).forEach((function(e){t.state[e]=Be[e]})),t.orderHelper.removeIndex(P.ADJUSTMENT))}))},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderHelper",{get:function(){return this.engineMediator.orderHelper},enumerable:!0,configurable:!0}),t.prototype.setAdjustmentEffect=function(t){var e=this.orderHelper.addIndex(P.ADJUSTMENT);return this.effect?this.effect.setProperties(t):this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e),this.effect.getProperties()},t.prototype.removeAdjustmentEffect=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"editAdjustments",null),m([Lr],t.prototype,"reset",null),t}(),Gi=function(){function t(e,n){var r=this;this.assets=[],this.withoutItems=function(t){return t.items,g(t,["items"])},this.entityMapper=function(e,n){return t.isCategory(e)?r.categoryMapper(e,n):r.itemMapper(e,n)},this.categoryMapper=function(t,e){return t?y(y({},t),{thumbnailURI:r.getCategoryURI(t),type:A.LARGE,delay:.08*e,name:r.config.locale[t.identifier]||t.name,items:t.items.map(r.itemMapper)}):null},this.itemMapper=function(t,e){return t?y(y({},t),{thumbnailURI:r.getItemURI(t),type:A.MEDIUM,delay:.08*e,name:r.config.locale[t.identifier]||t.name}):null},this.getCategoryURI=function(t){return Y(t)&&r.config.categoryDynamicKey?t[r.config.categoryDynamicKey]:t.thumbnailURI&&It(t.thumbnailURI)?t.thumbnailURI:r.config.getAssetPath(t[r.config.categoryKey]||"")},this.getItemURI=function(t){return q(t)&&r.config.itemDynamicKey?t[r.config.itemDynamicKey]:t.thumbnailURI&&It(t.thumbnailURI)?t.thumbnailURI:r.config.getAssetPath(t[r.config.itemKey]||"")},this.config=n,this.assets=e.map(this.entityMapper).filter(Boolean)}return t.isCategory=function(t){return Object.prototype.hasOwnProperty.call(t,"items")},Object.defineProperty(t.prototype,"categories",{get:function(){return this.assets.reduce((function(e,n){if(t.isCategory(n))return x(e,[n])}),[]).filter(Boolean)},enumerable:!0,configurable:!0}),t.prototype.getCategories=function(t){return this.assets.findIndex((function(e){return e.identifier===t})),this.categories},Object.defineProperty(t.prototype,"items",{get:function(){return this.assets.reduce((function(e,n){return t.isCategory(n)?x(e,n.items):x(e,[n])}),[]).filter(Boolean)},enumerable:!0,configurable:!0}),t.prototype.itemsOfCategory=function(t){var e=this.assets.findIndex((function(e){return e.identifier===t}));return-1!==e?this.categories[e].items:[]},t.prototype.getEntities=function(t){if(this.config.flattenCategories)return this.items;if(t){var e=this.assets.findIndex((function(e){return e.identifier===t}));if(-1!==e){var n=this.categories[e].items;return x(this.categories.slice(0,e+1),n,this.categories.slice(e+1)).map(this.withoutItems)}}return this.categories.map(this.withoutItems)},t}(),Zi=function(){function t(){this.snapshots=[],this.observeIndex=Ln.box(-1)}return t.prototype.addSnapshot=function(t){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(t)):this.snapshots=x(this.snapshots.slice(0,this.index+1),[JSON.stringify(t)]),this.observeIndex.set(this.snapshots.length-1)},t.prototype.getCurrentState=function(){return this.snapshots[this.index]},t.prototype.reset=function(){this.snapshots=[],this.observeIndex.set(-1)},t.prototype.undo=function(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null},t.prototype.redo=function(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null},t.prototype.discardSnapshotsfromIndex=function(t){t>0&&t<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,t),this.observeIndex.set(this.snapshots.length-1))},Object.defineProperty(t.prototype,"index",{get:function(){return this.observeIndex.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canUndo",{get:function(){return this.index>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRedo",{get:function(){return this.snapshots.length-1>this.index},enumerable:!0,configurable:!0}),m([Vn],t.prototype,"index",null),m([Vn],t.prototype,"canUndo",null),m([Vn],t.prototype,"canRedo",null),t}();!function(t){t.ADD="add",t.EDIT="edit",t.DELETE="delete"}(Ui||(Ui={}));var Xi=function(){function t(t){var e=this;this.localTransformStartIndex=null,this.awaitHistoryChange=!1,this.isDirtySinceSave=!1,this.undo=function(){return v(e,void 0,void 0,(function(){var t;return b(this,(function(e){switch(e.label){case 0:return this.awaitHistoryChange?[3,2]:(this.awaitHistoryChange=!0,t=this.appHistoryManager.undo(),[4,this.applyState(t)]);case 1:e.sent(),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1),e.label=2;case 2:return[2]}}))}))},this.redo=function(){return v(e,void 0,void 0,(function(){var t;return b(this,(function(e){switch(e.label){case 0:return this.awaitHistoryChange?[3,2]:(this.awaitHistoryChange=!0,t=this.appHistoryManager.redo(),[4,this.applyState(t)]);case 1:e.sent(),this.awaitHistoryChange=!1,e.label=2;case 2:return[2]}}))}))},this.editor=t,this.appHistoryManager=new Zi}return Object.defineProperty(t.prototype,"canUndo",{get:function(){return this.appHistoryManager.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRedo",{get:function(){return this.appHistoryManager.canRedo},enumerable:!0,configurable:!0}),t.prototype.getHistoryState=function(){var t,e=Qr(this.editor.adjustmentsToolStore.state),n=Qr(this.editor.filterToolStore.state),r=this.editor.focusToolStore.getFocusStateForHistory(),i=Qr(this.editor.overlayToolStore.state),o=Qr(this.editor.frameToolStore.state),a=this.editor.brushToolStore.strokes||{strokes:[]},s=this.editor.spriteStore.getSpriteHistoryState(),l=this.editor.transformToolStore.serializableState;return(t={})[P.ADJUSTMENT]=e,t[P.FILTER]=n,t[P.FOCUS]=r,t[P.OVERLAY]=i,t[P.FRAME]=o,t[P.BRUSH]=a,t.sprite=s,t[P.TRANSFORM]=l,t},t.prototype.addInitialSnapshot=function(){var t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:Ui.ADD,description:"Initial State"})},t.prototype.addSnapshot=function(t,e,n){void 0===t&&(t=this.getHistoryState()),t&&((t.sprite||t.transform)&&(t=y(y({},this.getHistoryState()),t)),this.appHistoryManager.addSnapshot({state:t,type:e,description:n}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0))},t.prototype.saveTransformLocalSnapshotIndex=function(){null===this.localTransformStartIndex&&(this.localTransformStartIndex=this.appHistoryManager.snapshots.length)},t.prototype.removeTransformLocalSnapshots=function(){null!==this.localTransformStartIndex&&(this.appHistoryManager.discardSnapshotsfromIndex(this.localTransformStartIndex-1),this.localTransformStartIndex=null)},t.prototype.applyState=function(t){var e=t.state;return v(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,l;return b(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,28,,29]),!e)return[3,27];t=Object.keys(e),u.label=1;case 1:u.trys.push([1,23,24,25]),n=_(t),r=n.next(),u.label=2;case 2:if(r.done)return[3,22];switch(i=r.value){case P.FILTER:return[3,3];case P.ADJUSTMENT:return[3,5];case P.OVERLAY:return[3,7];case P.FRAME:return[3,9];case P.FOCUS:return[3,11];case P.BRUSH:return[3,13];case"sprite":return[3,15];case"localTransform":return[3,17];case P.TRANSFORM:return[3,19]}return[3,21];case 3:return[4,this.editor.filterToolStore.updateStateFromHistory(e[i])];case 4:return u.sent(),[3,21];case 5:return[4,this.editor.adjustmentsToolStore.updateStateFromHistory(e[i])];case 6:return u.sent(),[3,21];case 7:return[4,this.editor.overlayToolStore.updateStateFromHistory(e[i])];case 8:return u.sent(),[3,21];case 9:return[4,this.editor.frameToolStore.updateStateFromHistory(e[i])];case 10:return u.sent(),[3,21];case 11:return[4,this.editor.focusToolStore.updateStateFromHistory(e[i],this.editor.canvasStore.sizeVector)];case 12:return u.sent(),[3,21];case 13:return[4,this.editor.brushToolStore.updateStateFromHistory(e[i])];case 14:return u.sent(),[3,21];case 15:return[4,this.editor.spriteStore.updateStateFromHistory(e[i])];case 16:return u.sent(),[3,21];case 17:return[4,this.editor.transformToolStore.updateLocalStateFromHistory(e.localTransform)];case 18:return u.sent(),[3,21];case 19:return this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e[i],!1),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),[4,this.editor.wait()];case 20:return u.sent(),[3,21];case 21:return r=n.next(),[3,2];case 22:return[3,25];case 23:return o=u.sent(),s={error:o},[3,25];case 24:try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(s)throw s.error}return[7];case 25:return[4,this.editor.renderPromise()];case 26:u.sent(),u.label=27;case 27:return[3,29];case 28:return a=u.sent(),console.error(a),this.editor.modalStore.showActionModal({type:F.ERROR,identifier:"unexpectedError",error:a,handleConfirm:function(){window.location.reload()}}),[3,29];case 29:return[2]}}))}))},t.prototype.isDirty=function(){return this.appHistoryManager.snapshots.length>1},t.prototype.reset=function(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1},m([Lr],t.prototype,"undo",void 0),m([Lr],t.prototype,"redo",void 0),m([Vn],t.prototype,"canUndo",null),m([Vn],t.prototype,"canRedo",null),t}(),qi=function(){function t(t){var e=this;this.dirty=Ln.box(!1),this.reset=function(){e.pureReset(),e.addSnapshot(Ui.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.adjustmentsStore=new Vi(this.editor.engineMediator),this.selectedOption="";var n=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new Gi(n,y(y({},this.config),{categoryKey:"",itemKey:"thumbnailURI",locale:y(y({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}return t.prototype.editAdjustments=function(t){var e=t.type,n=t.value;this.pureSetAdjustment({type:e,value:n}),this.editor.render()},t.prototype.toolSnapshot=function(){this.dirty.set(!0),this.addSnapshot(Ui.EDIT,P.ADJUSTMENT)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.toggleOptionSelection=function(t){this.selectedOption=t},t.prototype.pureSetAdjustment=function(t){var e,n=t.type,r=t.value,i=this.adjustmentsStore.setAdjustmentEffect(((e={})[n]=r,e));this.adjustmentsStore.editAdjustments({type:n,value:i[n]})},t.prototype.pureReset=function(){this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""},t.prototype.updateStateFromHistory=function(t){var e=this;Br((function(){Object.keys(t).forEach((function(n){e.pureSetAdjustment({type:n,value:t[n]})}))}))},t.prototype.updateStateFromSerialization=function(t){this.updateStateFromHistory(t)},Object.defineProperty(t.prototype,"selectedAdjustmentType",{get:function(){return this.selectedOption},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.dirty.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.adjustmentsStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedOptionLabel",{get:function(){var t=this,e=this.items.find((function(e){return!!e&&e.identifier===t.selectedOption}));return e?e.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.state.brightness},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saturation",{get:function(){return this.state.saturation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this.state.contrast},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gamma",{get:function(){return this.state.gamma},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clarity",{get:function(){return this.state.clarity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exposure",{get:function(){return this.state.exposure},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadows",{get:function(){return this.state.shadows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlights",{get:function(){return this.state.highlights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"whites",{get:function(){return this.state.whites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blacks",{get:function(){return this.state.blacks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"temperature",{get:function(){return this.state.temperature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharpness",{get:function(){return this.state.sharpness},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.categories},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.entityManager.categories.reduce((function(t,e){return x(t,Gi.isCategory(e)?e.items:[e])}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.ADJUSTMENT]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.ADJUSTMENT]},enumerable:!0,configurable:!0}),m([Ln],t.prototype,"selectedOption",void 0),m([Ln],t.prototype,"dirty",void 0),m([Lr],t.prototype,"editAdjustments",null),m([Lr],t.prototype,"toggleOptionSelection",null),m([Lr],t.prototype,"pureSetAdjustment",null),m([Lr],t.prototype,"pureReset",null),m([Lr],t.prototype,"reset",void 0),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"updateStateFromSerialization",null),m([Vn],t.prototype,"selectedAdjustmentType",null),m([Vn],t.prototype,"isDirty",null),m([Vn],t.prototype,"state",null),m([Vn],t.prototype,"selectedOptionLabel",null),m([Vn],t.prototype,"brightness",null),m([Vn],t.prototype,"saturation",null),m([Vn],t.prototype,"contrast",null),m([Vn],t.prototype,"gamma",null),m([Vn],t.prototype,"clarity",null),m([Vn],t.prototype,"exposure",null),m([Vn],t.prototype,"shadows",null),m([Vn],t.prototype,"highlights",null),m([Vn],t.prototype,"whites",null),m([Vn],t.prototype,"blacks",null),m([Vn],t.prototype,"temperature",null),m([Vn],t.prototype,"sharpness",null),m([Vn],t.prototype,"categories",null),m([Vn],t.prototype,"items",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),t}(),Yi={identifier:"identity",intensity:1,isDuotone:!1},Ki=new Wi(0,1),Qi=function(){function t(t){var e=this;this.setEffectProperties=function(t){var n=t.intensity;return e.effect?(e.state.isDuotone?e.effect.setProperties({colorIntensity:n}):e.effect.setProperties({intensity:n}),e.effect.getProperties()):null},this.engineMediator=t,this.state=Yi}return t.prototype.changeIdentifier=function(t){this.state.identifier=t},t.prototype.changeIfDuotone=function(t){this.state.isDuotone=t},t.prototype.changeIntensity=function(t){var e=Ki.clamp(t);this.state.intensity=e},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=Yi.identifier,this.state.intensity=Yi.intensity,this.removeIndex())},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),t.prototype.setFilterEffect=function(t){var e=this,n=t.identifier,r=t.intensity,i=t.isDuotone,o=this.state;this.changeIdentifier(n),this.changeIntensity(r),this.changeIfDuotone(i),this.removeFilterEffect();var a=this.engineMediator.orderHelper.addIndex(P.FILTER);return new Promise(i?function(t,i){e.engineMediator.engine.addDuoToneFilterFromAssets(n,e.engineMediator.image.container,a).then((function(n){e.effect=n,e.effect.setProperties({colorIntensity:r}),t()})).catch((function(t){e.fallbackOnError(o),i(t)}))}:function(t,i){e.engineMediator.engine.addLUTFilterFromAssets(n,e.engineMediator.image.container,a).then((function(n){e.effect=n,e.effect.setProperties({intensity:r}),t()})).catch((function(t){e.fallbackOnError(o),i(t)}))})},t.prototype.removeFilterEffect=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},t.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeIndex(P.FILTER)},t.prototype.fallbackOnError=function(t){this.changeIdentifier(t.identifier),this.changeIntensity(t.intensity),"identity"===t.identifier&&this.removeIndex()},m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"changeIdentifier",null),m([Lr],t.prototype,"changeIfDuotone",null),m([Lr],t.prototype,"changeIntensity",null),m([Lr],t.prototype,"reset",null),t}(),Ji=function(){function t(t){var e=this;this.changeIntensity=function(t){var n=e.isOptionDuoTone(e.identifier),r=e.filterStore.setEffectProperties({intensity:t});if(r){var i=n?r.colorIntensity:r.intensity;e.filterStore.changeIntensity(i),e.editor.render()}},this.reset=function(){e.pureReset(),e.addSnapshot(Ui.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.selectedCategory="identity",this.filterStore=new Qi(this.editor.engineMediator);var n=this.config,r=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new Gi(r,y(y({},n),{categoryKey:"thumbnailURI",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}return t.prototype.selectFilter=function(t,e){return void 0===e&&(e=1),v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return t===this.identifier?[3,2]:[4,this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)})];case 1:n.sent(),this.editor.render(),this.addSnapshot(Ui.ADD,P.FILTER),n.label=2;case 2:return[2]}}))}))},t.prototype.setImageAndGetPreviews=function(){return v(this,void 0,void 0,(function(){var t;return b(this,(function(e){switch(e.label){case 0:return t=this.editor.activeStore.state.image,[4,this.editor.previewThumbnails.addImageToContainer(t)];case 1:return e.sent(),[4,this.getAllFilterPreview()];case 2:return e.sent(),[2]}}))}))},t.prototype.getAllFilterPreview=function(){return v(this,void 0,void 0,(function(){var t,e,n,r,i=this;return b(this,(function(o){switch(o.label){case 0:return t=this.entityManager.items.map((function(t){return{identifier:t.identifier,isDuotone:i.isOptionDuoTone(t.identifier)}})),[4,this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t)];case 1:return e=o.sent(),[4,this.editor.wait()];case 2:return o.sent(),n=this.config,r=this.editor.configStore.assetProvider.getAssets("filter").map((function(t){return y(y({},t),{items:t.items.map((function(t){return y(y({},t),{thumbnail:e[t.identifier]})}))})})),this.entityManager=new Gi(r,y(y({},n),{categoryKey:"thumbnailURI",itemDynamicKey:"thumbnail",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})),[2]}}))}))},t.prototype.toolSnapshot=function(){this.addSnapshot(Ui.EDIT,this.locale.controls.sliderIntensity)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.pureReset=function(){this.selectedCategory="identity",this.filterStore.removeFilterEffect(),this.filterStore.reset()},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory===t?"identity":t},t.prototype.updateStateFromSerialization=function(t){var e=t.identifier,n=t.intensity,r=this.doesFilterAssetExist(e);if(r){var i=V(r);return this.filterStore.setFilterEffect({identifier:e,intensity:n,isDuotone:i})}return new Promise((function(t,n){n(new Error("Filter Asset "+e+" doesn't exist"))}))},t.prototype.updateStateFromHistory=function(t){return v(this,void 0,void 0,(function(){return b(this,(function(e){return"identity"===t.identifier?(this.pureReset(),[2,new Promise((function(t){t()}))]):[2,this.filterStore.setFilterEffect(t)]}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this.filterStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this.state.intensity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDuotone",{get:function(){return this.state.isDuotone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.FILTER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.FILTER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.getCategories(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),t.prototype.doesFilterAssetExist=function(t){return this.entityManager.items.find((function(e){return t===e.identifier}))},t.prototype.isOptionDuoTone=function(t){var e=this.doesFilterAssetExist(t);return!!e&&V(e)},m([Ln],t.prototype,"selectedCategory",void 0),m([Ln],t.prototype,"entityManager",void 0),m([Lr],t.prototype,"selectFilter",null),m([Lr],t.prototype,"changeIntensity",void 0),m([Lr],t.prototype,"pureReset",null),m([Lr],t.prototype,"reset",void 0),m([Lr],t.prototype,"toggleCategorySelection",null),m([Lr],t.prototype,"updateStateFromSerialization",null),m([Lr],t.prototype,"updateStateFromHistory",null),m([Vn],t.prototype,"state",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"intensity",null),m([Vn],t.prototype,"isDuotone",null),m([Vn],t.prototype,"selectedCategoryIdentifier",null),m([Vn],t.prototype,"isOptionSelected",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"categories",null),m([Vn],t.prototype,"entities",null),t}(),$i={blurRadius:40,gradientSize:.2},to={identifier:"identity",linear:y({start:{x:0,y:0},end:{x:0,y:0}},$i),radial:y({center:{x:0,y:0},radius:0},$i),mirrored:y({origin:{x:0,y:0},rotation:0,size:0},$i),gaussian:$i},eo=function(){function t(t){this.editor=t,this.engineMediator=this.editor.engineMediator,this.state=to}return t.prototype.selectFocus=function(t,e){var n=this;Br((function(){n.state.identifier=t,e&&(n.state[t].blurRadius=e)}))},t.prototype.changeBlurRadius=function(t,e){"identity"!==t&&(this.state[t].blurRadius=e)},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=to.identifier,"identity"!==this.state.identifier&&(this.state[this.state.identifier].blurRadius=to[this.state.identifier].blurRadius))},t.prototype.setLinear=function(t){var e=t.start,n=t.end;this.state.linear.start.x=e.x,this.state.linear.start.y=e.y,this.state.linear.end.x=n.x,this.state.linear.end.y=n.y},t.prototype.setLinearStart=function(t){this.state.linear.start.x=t.x,this.state.linear.start.y=t.y},t.prototype.setLinearEnd=function(t){this.state.linear.end.x=t.x,this.state.linear.end.y=t.y},t.prototype.setRadialCenter=function(t){this.state.radial.center.x=t.x,this.state.radial.center.y=t.y},t.prototype.setRadialRadius=function(t){this.state.radial.radius=t},t.prototype.setMirroredOrigin=function(t){this.state.mirrored.origin.x=t.x,this.state.mirrored.origin.y=t.y},t.prototype.setMirroredRotation=function(t){this.state.mirrored.rotation=t},t.prototype.setMirroredSize=function(t){this.state.mirrored.size=t},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this.engineMediator.orderHelper.addIndex(P.FOCUS)},enumerable:!0,configurable:!0}),t.prototype.getEffectProperties=function(){return this.effect?this.effect.getProperties():null},t.prototype.setLinearFocus=function(t){this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())},t.prototype.setGaussianFocus=function(t){this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())},t.prototype.setRadialFocus=function(t){this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())},t.prototype.setMirroredFocus=function(t){this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())},t.prototype.updateFromEngineState=function(t){var e=this.getEffectProperties();if(e&&"identity"!==t)switch(t){case G.LINEAR:this.updateLinearState(e);break;case G.RADIAL:this.updateRadialState(e);break;case G.MIRRORED:this.updateMirroredState(e)}},t.prototype.updateGaussianState=function(t){this.changeBlurRadius(G.GAUSSIAN,t.blurRadius)},t.prototype.updateMirroredState=function(t){var e=this.editor.worldToPreview(t.mirrorAxisOrigin),n=new k(this.editor.worldToPreview(t.mirrorAxisDirection)).subtract(e),r=Math.atan2(n.y,n.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.setMirroredRotation(r),this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.changeBlurRadius(G.MIRRORED,t.blurRadius)},t.prototype.updateRadialState=function(t){this.setRadialCenter(this.editor.worldToPreview(t.center)),this.setRadialRadius(this.editor.worldToPreview(t.radius)),this.changeBlurRadius(G.RADIAL,t.blurRadius)},t.prototype.updateLinearState=function(t){this.setLinearStart(this.editor.worldToPreview(t.start)),this.setLinearEnd(this.editor.worldToPreview(t.end)),this.changeBlurRadius(G.LINEAR,t.blurRadius)},t.prototype.setEffectProperties=function(t){return this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null},t.prototype.removeFocus=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(P.FOCUS))},Object.defineProperty(t.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"selectFocus",null),m([Lr],t.prototype,"changeBlurRadius",null),m([Lr],t.prototype,"reset",null),m([Lr],t.prototype,"setLinear",null),m([Lr],t.prototype,"setLinearStart",null),m([Lr],t.prototype,"setLinearEnd",null),m([Lr],t.prototype,"setRadialCenter",null),m([Lr],t.prototype,"setRadialRadius",null),m([Lr],t.prototype,"setMirroredOrigin",null),m([Lr],t.prototype,"setMirroredRotation",null),m([Lr],t.prototype,"setMirroredSize",null),m([Lr],t.prototype,"updateFromEngineState",null),t}();function no(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function ro(t,e){var n;return e&&!0===e.clone&&no(t)?io((n=t,Array.isArray(n)?[]:{}),t,e):t}function io(t,e,n){return Array.isArray(e)?Array.isArray(t)?e:ro(e,n):function(t,e,n){var r={};return no(t)&&Object.keys(t).forEach((function(e){r[e]=ro(t[e],n)})),Object.keys(e).forEach((function(i){var o=no(e[i])&&t[i];r[i]=o?io(t[i],e[i],n):ro(e[i],n)})),r}(t,e,n)}function oo(t,e){if(void 0===e&&(e=null),!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return io(t,n,e)}))}var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.onExport=function(t){this.emit($.EXPORT,t)},e.prototype.onClose=function(){this.emit($.CLOSE)},e.prototype.onHistoryChange=function(){this.emit($.HISTORY_CHANGE)},e.prototype.onEditorReady=function(){this.emit($.EDITOR_READY)},e.prototype.onErrorImageLoading=function(t){this.emit($.ERROR_IMAGE_LOADING,t)},e}(et),so={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Reload"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image has been resized to ${width}x${height} pixels"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schließen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}}},lo={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"Rückgängig machen",buttonRedo:"Wiederholen",buttonClose:"Schließen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gründe haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterstützt",buttonYes:"Neu Laden"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schließen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schließen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schließen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Das Bild wurde es auf ${width}x${height} Pixel verkleinert"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die Änderungen verwerfen wollen?",buttonYes:"Änderungen verwerfen",buttonNo:"Änderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die Änderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schließen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und könnten anders aussehen",buttonYes:"Änderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten führen kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam Öffnen",buttonWebcamClose:"Webcam Schließen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zurücksetzen",sliderIntensity:"Filter Intensität"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zurücksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"Sättigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Schärfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Weiß",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zurücksetzen",sliderIntensity:"Focus Intensität"},items:{radial:"Kreisförmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gaußsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Größe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zurücksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"Überblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Löschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgröße",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenhöhe",tabFontSize:"Schriftgröße"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"Löschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schließen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"Löschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zurücksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zurücksetzen",sliderSize:"Dicke",sliderHardness:"Härte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"Härte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zurücksetzen",checkboxKeepResolution:"Fixiere Auflösung",inputCropSize:"Bildgröße",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Auflösung",tabCropSize:"Bildgröße"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}}},uo=function(t){return"de"===t?lo:so},co=function(){function t(){}return t.addScrollStyles=function(e){void 0===e&&(e="rgba(255, 255, 255, 0.2)");var n="\n    /* Injected by PhotoEditorSDK */\n    "+t.styles(e)+"\n  ",r=document.createElement("style");r.innerHTML=n,document.head.appendChild(r)},t.styles=function(t){return"\n    [data-simplebar] {\n      position: relative;\n      flex-direction: column;\n      flex-wrap: wrap;\n      justify-content: flex-start;\n      align-content: flex-start;\n      align-items: flex-start;\n    }\n\n    .photoeditorsdk-simplebar-wrapper {\n      overflow: hidden;\n      width: inherit;\n      height: inherit;\n      max-width: inherit;\n      max-height: inherit;\n    }\n\n    .photoeditorsdk-simplebar-mask {\n      direction: inherit;\n      position: absolute;\n      padding: 0;\n      margin: 0;\n      left: 0;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      width: auto !important;\n      height: auto !important;\n      z-index: 0;\n    }\n\n    .photoeditorsdk-simplebar-offset {\n      direction: inherit !important;\n      box-sizing: inherit !important;\n      resize: none !important;\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      padding: 0;\n      margin: 0;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .photoeditorsdk-simplebar-content-wrapper {\n      direction: inherit;\n      box-sizing: border-box !important;\n      position: relative;\n      display: block;\n      height: 100%; /* Required for horizontal native scrollbar to not appear if parent is taller than natural height */\n      width: auto;\n      visibility: visible;\n      overflow: auto; /* Scroll on this element otherwise element can't have a padding applied properly */\n      max-width: 100%; /* Not required for horizontal scroll to trigger */\n      max-height: 100%; /* Needed for vertical scroll to trigger */\n    }\n\n    .photoeditorsdk-simplebar-content:before,\n    .photoeditorsdk-simplebar-content:after {\n      content: ' ';\n      display: table;\n    }\n\n    .photoeditorsdk-simplebar-placeholder {\n      max-height: 100%;\n      max-width: 100%;\n      width: 100%;\n      pointer-events: none;\n    }\n\n    .photoeditorsdk-simplebar-height-auto-observer-wrapper {\n      box-sizing: inherit !important;\n      height: 100%;\n      width: 100%;\n      max-width: 1px;\n      position: relative;\n      float: left;\n      max-height: 1px;\n      overflow: hidden;\n      z-index: -1;\n      padding: 0;\n      margin: 0;\n      pointer-events: none;\n      flex-grow: inherit;\n      flex-shrink: 0;\n      flex-basis: 0;\n    }\n\n    .photoeditorsdk-simplebar-height-auto-observer {\n      box-sizing: inherit;\n      display: block;\n      opacity: 0;\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 1000%;\n      width: 1000%;\n      min-height: 1px;\n      min-width: 1px;\n      overflow: hidden;\n      pointer-events: none;\n      z-index: -1;\n    }\n\n    .photoeditorsdk-simplebar-track {\n      z-index: 1;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n      pointer-events: none;\n      overflow: hidden;\n    }\n\n    [data-simplebar].photoeditorsdk-simplebar-dragging .photoeditorsdk-simplebar-track {\n      pointer-events: all;\n    }\n\n    .photoeditorsdk-simplebar-scrollbar {\n      position: absolute;\n      right: 2px;\n      width: 7px;\n      min-height: 10px;\n    }\n\n    .photoeditorsdk-simplebar-scrollbar:before {\n      position: absolute;\n      content: '';\n      background: "+t+";\n      border-radius: 7px;\n      left: 0;\n      right: 0;\n      opacity: 0;\n      transition: opacity 0.2s linear;\n    }\n\n    .photoeditorsdk-simplebar-track .photoeditorsdk-simplebar-scrollbar.photoeditorsdk-simplebar-visible:before {\n      /* When hovered, remove all transitions from drag handle */\n      opacity: 0.5;\n      transition: opacity 0s linear;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical {\n      top: 0;\n      width: 11px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical .photoeditorsdk-simplebar-scrollbar:before {\n      top: 2px;\n      bottom: 2px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical .photoeditorsdk-simplebar-scrollbar {\n      right: 0px;\n      width: 4px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-horizontal {\n      left: 0;\n      height: 11px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-horizontal .photoeditorsdk-simplebar-scrollbar:before {\n      height: 100%;\n      left: 2px;\n      right: 2px;\n    }\n\n    .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-horizontal .photoeditorsdk-simplebar-scrollbar {\n      right: auto;\n      left: 0;\n      min-height: 0;\n      min-width: 10px;\n      width: auto;\n      top: 7px;\n      height: 4px;\n    }\n\n    /* Rtl support */\n    [data-simplebar-direction='rtl'] .photoeditorsdk-simplebar-track.photoeditorsdk-simplebar-vertical {\n      right: auto;\n      left: 0;\n    }\n\n    .photoeditorsdk-hs-dummy-scrollbar-size {\n      direction: rtl;\n      position: fixed;\n      opacity: 0;\n      visibility: hidden;\n      height: 500px;\n      width: 500px;\n      overflow-y: hidden;\n      overflow-x: scroll;\n    }\n  "},t}(),fo=function(t){var e=void 0===t?{primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"}:t,n=e.primary,r=void 0===n?"#365afc":n,i=e.background,o=void 0===i?"#0B0B0B":i,a=e.foreground,s=void 0===a?"#FFFFFF":a,l="rgba(255, 255, 255, 0.90)",u="rgba(255, 255, 255, 0.60)",c="rgba(255, 255, 255, 0.38)";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:o,foreground:s,primary:r,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:"#333333",activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:l,outlinedPrimaryBackground:"#242424",outlinedPrimaryForeground:l,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:u,textPrimaryForeground:r,textSecondaryForeground:u,outlinedInactiveOverlayColor:"rgba(0, 0, 0, 0.3)",textInactiveOpacity:"0.5",hoverOverlayColor:"rgba(255, 255, 255, 0.08)"},checkbox:{background:"#333333",foreground:s,activeForeground:s,activeBackground:r,inactiveOpacity:"0.3",hoverOpacity:"0.8"},modal:{background:"#242424",bodyForeground:l,headerForeground:u,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:"#333333",foreground:l,activeBorderColor:r,activeOverlayColor:"rgba(89, 121, 252, 0.20)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:l,inactiveOverlayColor:"rgba(0, 0, 0, 0.3)",hoverOverlayColor:"rgba(255, 255, 255, 0.08)"},tabTitle:{foreground:u,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:l},dropdown:{background:"transparent",foreground:l,hoverBorderColor:u,borderColor:"#333333",caretColor:c,listBackground:"#333333",listBorderColor:"#333333",listItemHoverBackground:"#424242",listForeground:u,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",inactiveOpacity:"0.3"},textInput:{foreground:l,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:"#333333",inactiveOpacity:"0.3"},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:r,thumbBackground:"#171717",thumbBorderColor:r,inactiveOpacity:"0.3",hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:"0.3"},toolbar:{foreground:l,background:"#242424",activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:"#424242",foreground:l},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:"#333333",titleForeground:u,inputLabelForeground:u,inputLabelInactiveOpacity:"0.3"},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:l,borderColor:"none"},canvasActionBar:{background:"#424242",foreground:l,separatorColor:c},canvas:{background:"#0B0B0B",controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:"#333333",listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:"#424242"},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:s,background:"#0B0B0B"},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},po=function(t){var e=void 0===t?{primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"}:t,n=e.primary,r=void 0===n?"#1e47fb":n,i=e.background,o=void 0===i?"#FBFBFB":i,a=e.foreground,s=void 0===a?"#000000":a,l="rgba(0, 0, 0, 0.90)",u="rgba(0, 0, 0, 0.60)",c="rgba(0, 0, 0, 0.38)";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:o,foreground:s,primary:r,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:"#D4D4D4",activeForeground:r,containedPrimaryBackground:r,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:"#E6E6E6",outlinedPrimaryForeground:l,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:u,textPrimaryForeground:r,textSecondaryForeground:u,outlinedInactiveOverlayColor:"rgba(0, 0, 0, 0.3)",textInactiveOpacity:"0.5",hoverOverlayColor:"rgba(125, 125, 125, 0.12)"},checkbox:{background:"#D4D4D4",foreground:s,activeForeground:s,activeBackground:r,inactiveOpacity:"0.3",hoverOpacity:"0.8"},modal:{background:"#E6E6E6",bodyForeground:l,headerForeground:u,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:"#D4D4D4",foreground:l,activeBorderColor:r,activeOverlayColor:"rgba(30, 71, 251, 0.2)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:"rgba(0, 0, 0, 0.3)",hoverOverlayColor:"rgba(125, 125, 125, 0.12)"},tabTitle:{foreground:u,background:"transparent",activeBackground:"transparent",activeBorderColor:r,activeForeground:l},dropdown:{background:"transparent",foreground:l,hoverBorderColor:u,borderColor:"#D4D4D4",listBackground:"#D4D4D4",caretColor:c,listForeground:u,listBorderColor:"#D4D4D4",listItemHoverBackground:"#CCCCCC",listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",inactiveOpacity:"0.3"},textInput:{foreground:l,hoverBorderColor:l,background:"transparent",borderColor:"#D4D4D4",inactiveOpacity:"0.3"},slider:{trackColor:"#CCCCCC",activeTrackColor:r,thumbBackground:"#EEEEEE",thumbBorderColor:r,inactiveOpacity:"0.3",hoverOpacity:"0.7"},selectColor:{activeBorderColor:r,inactiveOpacity:"0.3"},toolbar:{foreground:l,background:"#D4D4D4",activeBackground:"transparent",activeForeground:r,borderColor:"transparent"},tooltip:{background:"#CCCCCC",foreground:l},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:"#EEEEEE",shadow:"none",separatorColor:"#D4D4D4",titleForeground:u,inputLabelForeground:u,inputLabelInactiveOpacity:"0.3"},mainCanvasActionBar:{background:"transparent",foreground:l,borderColor:"none"},canvasActionBar:{background:"#CCCCCC",foreground:l,separatorColor:c},canvas:{background:"#FBFBFB",controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:"#D4D4D4",listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:"#CCCCCC"},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:s,background:"#FBFBFB"},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},ho={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:12,letterSpacing:1.2,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},yo={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},go=function(){return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:230,padding:"16px 24px",marginBottom:0},advancedCard:{small:{height:166/3,width:166/3},medium:{height:87,width:87},large:{height:86,width:182}},advancedSpacer:8,basicCanvasOffset:23,basicUIToolbar:{openHeight:88,closeHeight:35},basicToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:111,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:ho,zIndex:yo}},mo=fo(),vo=go(),bo=y(y({},mo),{measurements:vo}),_o=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","mainCanvasActionBar","colorItem","fontSystem"],wo={config:Le,locale:so,theme:mo,measurements:vo},xo=function(){function t(){this.checkDefaultToolAvailability=function(t,e){return-1!==e.indexOf(t)},this.state=Ln(wo),this.events=new ao,this.licenseChecker=null}return t.prototype.saveConfig=function(t){var e,n=this;t.mainCanvasActions&&4!==t.mainCanvasActions.length&&(t.mainCanvasActions.length=4);var r=oo([Le,t]);this.licenseChecker=new De(r.license),this.licenseChecker.areCustomAssetsAllowed()||(r.sticker.enableCustomUpload=!1);var i,o,a=(i=r.language,(o=r.custom.languages)&&o[i]?oo([uo(i),o[i]]):uo(i)||so),s=function(t,e){var n=function(t){return"light"===t?po:fo}(t);if(e&&e[t]){var r=e[t],i={primary:r.primary,background:r.background,foreground:r.foreground};return oo([n(Object.keys(i).reduce((function(t,e){var n;return i[e]?y(y({},t),((n={})[e]=i[e],n)):t}),{})),e[t]])}return n()||mo}(r.theme,r.custom.themes),l=function(t){var e=go();if(t){var n={};return Object.keys(t).forEach((function(e){-1!==_o.indexOf(e)&&(n[e]=t[e])})),oo([e,n])}return e}(r.custom.measurements),u=r.library.provider;delete r.language,delete r.custom.languages,delete r.custom.themes,delete r.library.provider;var c=r.tools.reduce((function(t,e){return x(t,"object"==typeof e?e:[e])}),[]);c.length||(console.error("Empty list input for tools"),c=ze.reduce((function(t,e){return x(t,"object"==typeof e?e:[e])}),[])),c=c.filter((function(t){return n.licenseChecker.isToolAllowed(t)})),this.checkDefaultToolAvailability(r.defaultTool,c)||(this.licenseChecker.isToolAllowed(r.defaultTool)&&console.warn("Configured default tool "+r.defaultTool+" is not a part of configured list of tools: ["+c.join(" ")+"]"),e=w(c,1),r.defaultTool=e[0]),r.tools=c,this.state.config=r,this.state.locale=a,this.state.theme=s,this.state.measurements=l,co.addScrollStyles(this.state.theme.scrollbar.handleColor);var f=this.buildCustomAssetsConfig();return this.assetProvider=new Ft(f,this.licenseChecker.areCustomAssetsAllowed()),this.loadThemeFont(),u},Object.defineProperty(t.prototype,"config",{get:function(){return this.state.config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.state.locale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.state.theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"measurements",{get:function(){return this.state.measurements},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tools",{get:function(){return this.config.tools.reduce((function(t,e){return"string"==typeof e?x(t,[e]):x(t,[""],e)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTool",{get:function(){return this.config.defaultTool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOrderDefault",{get:function(){return"default"===this.config.order},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLayoutAdvanced",{get:function(){return"advanced"===this.config.layout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayCloseButton",{get:function(){return-1!==this.config.mainCanvasActions.indexOf(D.CLOSE)},enumerable:!0,configurable:!0}),t.prototype.loadThemeFont=function(){var t=this.theme.typography;t.skipLoading||this.assetProvider.getFontManager().injectFonts([t])},t.prototype.buildCustomAssetsConfig=function(){var t=this.tools,e=Qr(this.state.config),n=this.state.config.assetBaseUrl,r=this.state.theme,i=-1!==t.indexOf(P.FILTER)?e[P.FILTER]:void 0,o=-1!==t.indexOf(P.FOCUS)?e[P.FOCUS]:void 0,a=-1!==t.indexOf(P.ADJUSTMENT)?e[P.ADJUSTMENT]:void 0;return{basePath:n,theme:r,filter:i,focus:o,sticker:-1!==t.indexOf(P.STICKER)?e[P.STICKER]:void 0,frame:-1!==t.indexOf(P.FRAME)?e[P.FRAME]:void 0,overlay:-1!==t.indexOf(P.OVERLAY)?e[P.OVERLAY]:void 0,transform:-1!==t.indexOf(P.TRANSFORM)?e[P.TRANSFORM]:void 0,text:-1!==t.indexOf(P.TEXT)?e[P.TEXT]:void 0,adjustment:a,textdesign:-1!==t.indexOf(P.TEXT_DESIGN)?e[P.TEXT_DESIGN]:void 0}},m([Lr],t.prototype,"saveConfig",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"theme",null),m([Vn],t.prototype,"measurements",null),m([Vn],t.prototype,"tools",null),m([Vn],t.prototype,"defaultTool",null),m([Vn],t.prototype,"isOrderDefault",null),m([Vn],t.prototype,"isLayoutAdvanced",null),m([Vn],t.prototype,"displayCloseButton",null),t}(),Oo=function(){function t(t){this.editor=t}return t.prototype.setBackgroundImage=function(t){this.container?this.container.setData({image:t,originalImage:t}):this.container=this.engine.addImage({image:t,originalImage:t,blendMode:Z.NORMAL,opacity:1})},t.prototype.getchildren=function(){return this.container.getChildren()},t.prototype.addImageToContainer=function(){var t=this;return new Promise((function(e,n){var r=t.editor.activeStore.image;if(function(t){return t instanceof HTMLImageElement}(r))t.setBackgroundImage(r),e();else{var i=t.editor.libraryStore.getRawUrl(r);t.getImageElement(i).then((function(n){t.setBackgroundImage(n),e()})).catch((function(t){n({identifier:"imageLoading",message:t.message})}))}}))},t.prototype.getImageElement=function(t){var e=this;return new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(t){r(t)})),i.crossOrigin=e.editor.configStore.config.engine.crossOrigin,i.src=t}))},t.prototype.getImgageContainerId=function(){return this.container?this.container.getID():""},Object.defineProperty(t.prototype,"engine",{get:function(){return this.editor.engine},enumerable:!0,configurable:!0}),t}(),So=function(){function t(t){var e=this;this.applyNewImageTransform=function(){var t=e.editor.engineMediator.image.container.getBounds(),n=t.size,r=t.width,i=t.height,o=e.container;o.setTransform(S.IDENTITY),o.setResolution(n),o.setPivot(.5,.5),o.setPosition({x:r/2,y:i/2})},this.editor=t}return Object.defineProperty(t.prototype,"engine",{get:function(){return this.editor.engine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this.engine.getOutputContainer()},enumerable:!0,configurable:!0}),t}(),ko=/^\s+|\s+$/g,To=/^[-+]0x[0-9a-f]+$/i,Eo=/^0b[01]+$/i,Co=/^0o[0-7]+$/i,Ro=parseInt,Do="object"==typeof f&&f&&f.Object===Object&&f,Po="object"==typeof self&&self&&self.Object===Object&&self,Io=Do||Po||Function("return this")(),Ao=Object.prototype.toString,Fo=Math.max,jo=Math.min,Mo=function(){return Io.Date.now()};function zo(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Lo(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==Ao.call(t)}(t))return NaN;if(zo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=zo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ko,"");var n=Eo.test(t);return n||Co.test(t)?Ro(t.slice(2),n?2:8):To.test(t)?NaN:+t}var Bo=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return zo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(t,e,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function d(t){return u=t,s=setTimeout(g,e),c?h(t):a}function y(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-u>=o}function g(){var t=Mo();if(y(t))return m(t);s=setTimeout(g,function(t){var n=e-(t-l);return f?jo(n,o-(t-u)):n}(t))}function m(t){return s=void 0,p&&r?h(t):(r=i=void 0,a)}function v(){var t=Mo(),n=y(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return d(l);if(f)return s=setTimeout(g,e),h(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=Lo(e)||0,zo(n)&&(c=!!n.leading,o=(f="maxWait"in n)?Fo(Lo(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:m(Mo())},v}(t,e,{leading:r,maxWait:e,trailing:i})},No=/^\s+|\s+$/g,Uo=/^[-+]0x[0-9a-f]+$/i,Wo=/^0b[01]+$/i,Ho=/^0o[0-7]+$/i,Vo=parseInt,Go="object"==typeof f&&f&&f.Object===Object&&f,Zo="object"==typeof self&&self&&self.Object===Object&&self,Xo=Go||Zo||Function("return this")(),qo=Object.prototype.toString,Yo=Math.max,Ko=Math.min,Qo=function(){return Xo.Date.now()};function Jo(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $o(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==qo.call(t)}(t))return NaN;if(Jo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Jo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(No,"");var n=Wo.test(t);return n||Ho.test(t)?Vo(t.slice(2),n?2:8):Uo.test(t)?NaN:+t}var ta,ea=function(t,e,n){var r,i,o,a,s,l,u=0,c=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function d(t){return u=t,s=setTimeout(g,e),c?h(t):a}function y(t){var n=t-l;return void 0===l||n>=e||n<0||f&&t-u>=o}function g(){var t=Qo();if(y(t))return m(t);s=setTimeout(g,function(t){var n=e-(t-l);return f?Ko(n,o-(t-u)):n}(t))}function m(t){return s=void 0,p&&r?h(t):(r=i=void 0,a)}function v(){var t=Qo(),n=y(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return d(l);if(f)return s=setTimeout(g,e),h(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=$o(e)||0,Jo(n)&&(c=!!n.leading,o=(f="maxWait"in n)?Yo($o(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:m(Qo())},v},na=/^\[object .+?Constructor\]$/,ra="object"==typeof f&&f&&f.Object===Object&&f,ia="object"==typeof self&&self&&self.Object===Object&&self,oa=ra||ia||Function("return this")(),aa=Array.prototype,sa=Function.prototype,la=Object.prototype,ua=oa["__core-js_shared__"],ca=(ta=/[^.]+$/.exec(ua&&ua.keys&&ua.keys.IE_PROTO||""))?"Symbol(src)_1."+ta:"",fa=sa.toString,pa=la.hasOwnProperty,ha=la.toString,da=RegExp("^"+fa.call(pa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ya=aa.splice,ga=Oa(oa,"Map"),ma=Oa(Object,"create");function va(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ba(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _a(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wa(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function xa(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Oa(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!ka(t)||(e=t,ca&&ca in e))&&(function(t){var e=ka(t)?ha.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?da:na).test(function(t){if(null!=t){try{return fa.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}(n)?n:void 0}function Sa(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Sa.Cache||_a),n}function ka(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}va.prototype.clear=function(){this.__data__=ma?ma(null):{}},va.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},va.prototype.get=function(t){var e=this.__data__;if(ma){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return pa.call(e,t)?e[t]:void 0},va.prototype.has=function(t){var e=this.__data__;return ma?void 0!==e[t]:pa.call(e,t)},va.prototype.set=function(t,e){return this.__data__[t]=ma&&void 0===e?"__lodash_hash_undefined__":e,this},ba.prototype.clear=function(){this.__data__=[]},ba.prototype.delete=function(t){var e=this.__data__,n=wa(e,t);return!(n<0||(n==e.length-1?e.pop():ya.call(e,n,1),0))},ba.prototype.get=function(t){var e=this.__data__,n=wa(e,t);return n<0?void 0:e[n][1]},ba.prototype.has=function(t){return wa(this.__data__,t)>-1},ba.prototype.set=function(t,e){var n=this.__data__,r=wa(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},_a.prototype.clear=function(){this.__data__={hash:new va,map:new(ga||ba),string:new va}},_a.prototype.delete=function(t){return xa(this,t).delete(t)},_a.prototype.get=function(t){return xa(this,t).get(t)},_a.prototype.has=function(t){return xa(this,t).has(t)},_a.prototype.set=function(t,e){return xa(this,t).set(t,e),this},Sa.Cache=_a;var Ta,Ea=Sa,Ca=[],Ra="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Ta||(Ta={}));var Da,Pa=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Ia=function(t){return t instanceof SVGElement&&"getBBox"in t},Aa=function(t){if(Ia(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||t.getClientRects().length)},Fa=function(t){var e,n,r=null===(n=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&t instanceof r.Element)},ja="undefined"!=typeof window?window:{},Ma=new Map,za=/auto|scroll/,La=/^tb|vertical/,Ba=/msie|trident/i.test(ja.navigator&&ja.navigator.userAgent),Na=function(t){return parseFloat(t||"0")},Ua=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?e:t)||0,blockSize:(n?t:e)||0})},Wa=Object.freeze({devicePixelContentBoxSize:Ua(),borderBoxSize:Ua(),contentBoxSize:Ua(),contentRect:new Pa(0,0,0,0)}),Ha=function(t){if(Ma.has(t))return Ma.get(t);if(Aa(t))return Ma.set(t,Wa),Wa;var e=getComputedStyle(t),n=Ia(t)&&t.ownerSVGElement&&t.getBBox(),r=!Ba&&"border-box"===e.boxSizing,i=La.test(e.writingMode||""),o=!n&&za.test(e.overflowY||""),a=!n&&za.test(e.overflowX||""),s=n?0:Na(e.paddingTop),l=n?0:Na(e.paddingRight),u=n?0:Na(e.paddingBottom),c=n?0:Na(e.paddingLeft),f=n?0:Na(e.borderTopWidth),p=n?0:Na(e.borderRightWidth),h=n?0:Na(e.borderBottomWidth),d=c+l,y=s+u,g=(n?0:Na(e.borderLeftWidth))+p,m=f+h,v=a?t.offsetHeight-m-t.clientHeight:0,b=o?t.offsetWidth-g-t.clientWidth:0,_=r?d+g:0,w=r?y+m:0,x=n?n.width:Na(e.width)-_-b,O=n?n.height:Na(e.height)-w-v,S=x+d+b+g,k=O+y+v+m,T=Object.freeze({devicePixelContentBoxSize:Ua(Math.round(x*devicePixelRatio),Math.round(O*devicePixelRatio),i),borderBoxSize:Ua(S,k,i),contentBoxSize:Ua(x,O,i),contentRect:new Pa(c,s,x,O)});return Ma.set(t,T),T},Va=function(t,e){var n=Ha(t),r=n.borderBoxSize,i=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(e){case Ta.DEVICE_PIXEL_CONTENT_BOX:return o;case Ta.BORDER_BOX:return r;default:return i}},Ga=function(t){var e=Ha(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=[e.borderBoxSize],this.contentBoxSize=[e.contentBoxSize],this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]},Za=function(t){if(Aa(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Xa=function(){var t=1/0,e=[];Ca.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new Ga(e.target),i=Za(e.target);r.push(n),e.lastReportedSize=Va(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++)(0,r[n])();return t},qa=function(t){Ma.clear(),Ca.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(Za(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},Ya=[],Ka=0,Qa={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ja=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],$a=!1,ts=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e,n=this;$a||($a=!0,e=function(){var e=!1;try{e=function(){var t,e=0;for(qa(e);Ca.some((function(t){return t.activeTargets.length>0}));)e=Xa(),qa(e);return Ca.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:Ra}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=Ra),window.dispatchEvent(t)),e>0}()}finally{if($a=!1,!Ka)return;e?n.run(60):t?n.run(t-1):n.start()}},function(t){if(!Da){var e=0,n=document.createTextNode("");new MutationObserver((function(){return Ya.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),Da=function(){n.textContent=""+(e?e--:e++)}}Ya.push(t),Da()}((function(){requestAnimationFrame(e)})))},t.prototype.schedule=function(){this.stop(),this.run(12)},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Qa)};document.body?e():ja.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ja.forEach((function(e){return ja.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Ja.forEach((function(e){return ja.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),es=function(t){!Ka&&t>0&&ts.start(),!(Ka+=t)&&ts.stop()},ns=function(){function t(t,e){this.target=t,this.observedBox=e||Ta.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=Va(this.target,this.observedBox);return t=this.target,Ia(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),rs=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},is=new Map,os=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},as=function(){function t(){}return t.connect=function(t,e){var n=new rs(t,e);Ca.push(n),is.set(t,n)},t.observe=function(t,e,n){if(is.has(t)){var r=is.get(t);os(r.observationTargets,e)<0&&(r.observationTargets.push(new ns(e,n&&n.box)),es(1),ts.schedule())}},t.unobserve=function(t,e){if(is.has(t)){var n=is.get(t),r=os(n.observationTargets,e);r>=0&&(n.observationTargets.splice(r,1),es(-1))}},t.disconnect=function(t){if(is.has(t)){var e=is.get(t);Ca.splice(Ca.indexOf(e),1),is.delete(t),es(-e.observationTargets.length)}},t}(),ss=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");as.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Fa(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");as.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Fa(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");as.unobserve(this,t)},t.prototype.disconnect=function(){as.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),ls=!("undefined"==typeof window||!window.document||!window.document.createElement),us=function(){if("undefined"==typeof document)return 0;if(Pt())return window.innerWidth-document.documentElement.clientWidth;var t=document.body,e=document.createElement("div"),n=e.style;n.position="fixed",n.left="0",n.visibility="hidden",n.overflowY="scroll",t.appendChild(e);var r=e.getBoundingClientRect().right;return t.removeChild(e),r},cs="photoeditorsdk-simplebar",fs=function(){function t(e,n){var r=this;this.minScrollbarWidth=20,this.initDOM=function(){if(Array.prototype.filter.call(r.el.children,(function(t){return t.classList.contains(r.classNames.wrapper)})).length)r.wrapperEl=r.el.querySelector("."+r.classNames.wrapper),r.contentWrapperEl=r.el.querySelector("."+r.classNames.contentWrapper),r.offsetEl=r.el.querySelector("."+r.classNames.offset),r.maskEl=r.el.querySelector("."+r.classNames.mask),r.contentEl=r.el.querySelector("."+r.classNames.contentEl),r.placeholderEl=r.el.querySelector("."+r.classNames.placeholder),r.heightAutoObserverWrapperEl=r.el.querySelector("."+r.classNames.heightAutoObserverWrapperEl),r.heightAutoObserverEl=r.el.querySelector("."+r.classNames.heightAutoObserverEl),r.axis.x.track.el=r.el.querySelector("."+r.classNames.track+"."+r.classNames.horizontal),r.axis.y.track.el=r.el.querySelector("."+r.classNames.track+"."+r.classNames.vertical);else{for(r.wrapperEl=document.createElement("div"),r.contentWrapperEl=document.createElement("div"),r.offsetEl=document.createElement("div"),r.maskEl=document.createElement("div"),r.contentEl=document.createElement("div"),r.placeholderEl=document.createElement("div"),r.heightAutoObserverWrapperEl=document.createElement("div"),r.heightAutoObserverEl=document.createElement("div"),r.wrapperEl.classList.add(r.classNames.wrapper),r.contentWrapperEl.classList.add(r.classNames.contentWrapper),r.offsetEl.classList.add(r.classNames.offset),r.maskEl.classList.add(r.classNames.mask),r.contentEl.classList.add(r.classNames.contentEl),r.placeholderEl.classList.add(r.classNames.placeholder),r.heightAutoObserverWrapperEl.classList.add(r.classNames.heightAutoObserverWrapperEl),r.heightAutoObserverEl.classList.add(r.classNames.heightAutoObserverEl);r.el.firstChild;)r.contentEl.appendChild(r.el.firstChild);r.contentWrapperEl.appendChild(r.contentEl),r.offsetEl.appendChild(r.contentWrapperEl),r.maskEl.appendChild(r.offsetEl),r.heightAutoObserverWrapperEl.appendChild(r.heightAutoObserverEl),r.wrapperEl.appendChild(r.heightAutoObserverWrapperEl),r.wrapperEl.appendChild(r.maskEl),r.wrapperEl.appendChild(r.placeholderEl),r.el.appendChild(r.wrapperEl)}if(!r.axis.x.track.el||!r.axis.y.track.el){var t=document.createElement("div"),e=document.createElement("div");t.classList.add(r.classNames.track),e.classList.add(r.classNames.scrollbar),t.appendChild(e),r.axis.x.track.el=t.cloneNode(!0),r.axis.x.track.el.classList.add(r.classNames.horizontal),r.axis.y.track.el=t.cloneNode(!0),r.axis.y.track.el.classList.add(r.classNames.vertical),r.el.appendChild(r.axis.x.track.el),r.el.appendChild(r.axis.y.track.el)}r.axis.x.scrollbar.el=r.axis.x.track.el.querySelector("."+r.classNames.scrollbar),r.axis.y.scrollbar.el=r.axis.y.track.el.querySelector("."+r.classNames.scrollbar),r.options.autoHide||(r.axis.x.scrollbar.el.classList.add(r.classNames.visible),r.axis.y.scrollbar.el.classList.add(r.classNames.visible)),r.el.setAttribute("data-simplebar","init")},this.initListeners=function(){r.options.autoHide&&r.el.addEventListener("mouseenter",r.onMouseEnter),["mousedown","click","dblclick","touchstart","touchend","touchmove"].forEach((function(t){r.el.addEventListener(t,r.onPointerEvent,{capture:!0,passive:!0})})),r.el.addEventListener("mousemove",r.onMouseMove),r.el.addEventListener("mouseleave",r.onMouseLeave),r.contentWrapperEl.addEventListener("scroll",r.onScroll),window.addEventListener("resize",r.onWindowResize),r.resizeObserver=new ss(r.recalculate),r.resizeObserver.observe(r.el),r.resizeObserver.observe(r.contentEl)},this.recalculate=function(){var t=r.heightAutoObserverEl.offsetHeight<=1,e=r.heightAutoObserverEl.offsetWidth<=1;r.elStyles=window.getComputedStyle(r.el),r.isRtl="rtl"===r.elStyles.direction,r.contentEl.style.padding=r.elStyles.paddingTop+" "+r.elStyles.paddingRight+" "+r.elStyles.paddingBottom+" "+r.elStyles.paddingLeft,r.wrapperEl.style.margin="-"+r.elStyles.paddingTop+" -"+r.elStyles.paddingRight+" -"+r.elStyles.paddingBottom+" -"+r.elStyles.paddingLeft,r.contentWrapperEl.style.height=t?"auto":"100%",r.placeholderEl.style.width=e?r.contentEl.offsetWidth+"px":"auto",r.placeholderEl.style.height=r.contentEl.scrollHeight+"px",r.axis.x.isOverflowing=r.contentWrapperEl.scrollWidth>r.contentWrapperEl.offsetWidth,r.axis.y.isOverflowing=r.contentWrapperEl.scrollHeight>r.contentWrapperEl.offsetHeight,r.axis.x.isOverflowing="hidden"!==r.elStyles.overflowX&&r.axis.x.isOverflowing,r.axis.y.isOverflowing="hidden"!==r.elStyles.overflowY&&r.axis.y.isOverflowing,r.axis.x.forceVisible="x"===r.options.forceVisible||!0===r.options.forceVisible,r.axis.y.forceVisible="y"===r.options.forceVisible||!0===r.options.forceVisible,r.hideNativeScrollbar(),r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),r.axis.x.scrollbar.size=r.getScrollbarSize("x"),r.axis.y.scrollbar.size=r.getScrollbarSize("y"),r.axis.x.scrollbar.el.style.width=r.axis.x.scrollbar.size+"px",r.axis.y.scrollbar.el.style.height=r.axis.y.scrollbar.size+"px",r.positionScrollbar("x"),r.positionScrollbar("y"),r.toggleTrackVisibility("x"),r.toggleTrackVisibility("y")},this.getScrollbarSize=function(t){void 0===t&&(t="y");var e,n=r.scrollbarWidth?r.contentWrapperEl[r.axis[t].scrollSizeAttr]:r.contentWrapperEl[r.axis[t].scrollSizeAttr]-r.minScrollbarWidth,i=r.axis[t].track.rect[r.axis[t].sizeAttr];if(r.axis[t].isOverflowing){var o=i/n;return e=Math.max(~~(o*i),r.options.scrollbarMinSize),r.options.scrollbarMaxSize&&(e=Math.min(e,r.options.scrollbarMaxSize)),e}},this.positionScrollbar=function(e){void 0===e&&(e="y");var n=r.contentWrapperEl[r.axis[e].scrollSizeAttr],i=r.axis[e].track.rect[r.axis[e].sizeAttr],o=parseInt(r.elStyles[r.axis[e].sizeAttr],10),a=r.axis[e].scrollbar,s=r.contentWrapperEl[r.axis[e].scrollOffsetAttr],l=(s="x"===e&&r.isRtl&&t.getRtlHelpers().isRtlScrollingInverted?-s:s)/(n-o),u=~~((i-a.size)*l);u="x"===e&&r.isRtl&&t.getRtlHelpers().isRtlScrollbarInverted?u+(i-a.size):u,a.el.style.transform="x"===e?"translate3d("+u+"px, 0, 0)":"translate3d(0, "+u+"px, 0)"},this.toggleTrackVisibility=function(t){void 0===t&&(t="y");var e=r.axis[t].track.el,n=r.axis[t].scrollbar.el;r.axis[t].isOverflowing||r.axis[t].forceVisible?(e.style.visibility="visible",r.contentWrapperEl.style[r.axis[t].overflowAttr]="scroll"):(e.style.visibility="hidden",r.contentWrapperEl.style[r.axis[t].overflowAttr]="hidden"),n.style.display=r.axis[t].isOverflowing?"block":"none"},this.onScroll=function(){r.scrollXTicking||(window.requestAnimationFrame(r.scrollX),r.scrollXTicking=!0),r.scrollYTicking||(window.requestAnimationFrame(r.scrollY),r.scrollYTicking=!0)},this.scrollX=function(){r.axis.x.isOverflowing&&(r.showScrollbar("x"),r.positionScrollbar("x")),r.scrollXTicking=!1},this.scrollY=function(){r.axis.y.isOverflowing&&(r.showScrollbar("y"),r.positionScrollbar("y")),r.scrollYTicking=!1},this.onMouseEnter=function(){r.showScrollbar("x"),r.showScrollbar("y")},this.onMouseMove=function(t){r.mouseX=t.clientX,r.mouseY=t.clientY,(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseMoveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseMoveForAxis("y")},this.onMouseMoveForAxis=function(t){void 0===t&&(t="y"),r.axis[t].track.rect=r.axis[t].track.el.getBoundingClientRect(),r.axis[t].scrollbar.rect=r.axis[t].scrollbar.el.getBoundingClientRect(),r.isWithinBounds(r.axis[t].scrollbar.rect)?r.axis[t].scrollbar.el.classList.add(r.classNames.hover):r.axis[t].scrollbar.el.classList.remove(r.classNames.hover),r.isWithinBounds(r.axis[t].track.rect)?(r.showScrollbar(t),r.axis[t].track.el.classList.add(r.classNames.hover)):r.axis[t].track.el.classList.remove(r.classNames.hover)},this.onMouseLeave=function(){r.onMouseMove.cancel(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&r.onMouseLeaveForAxis("x"),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&r.onMouseLeaveForAxis("y"),r.mouseX=-1,r.mouseY=-1},this.onWindowResize=function(){r.scrollbarWidth=us(),r.hideNativeScrollbar()},this.hideScrollbars=function(){r.axis.x.track.rect=r.axis.x.track.el.getBoundingClientRect(),r.axis.y.track.rect=r.axis.y.track.el.getBoundingClientRect(),r.isWithinBounds(r.axis.y.track.rect)||(r.axis.y.scrollbar.el.classList.remove(r.classNames.visible),r.axis.y.isVisible=!1),r.isWithinBounds(r.axis.x.track.rect)||(r.axis.x.scrollbar.el.classList.remove(r.classNames.visible),r.axis.x.isVisible=!1)},this.onPointerEvent=function(t){var e,n;r.axis.x.scrollbar.rect=r.axis.x.scrollbar.el.getBoundingClientRect(),r.axis.y.scrollbar.rect=r.axis.y.scrollbar.el.getBoundingClientRect(),(r.axis.x.isOverflowing||r.axis.x.forceVisible)&&(n=r.isWithinBounds(r.axis.x.scrollbar.rect)),(r.axis.y.isOverflowing||r.axis.y.forceVisible)&&(e=r.isWithinBounds(r.axis.y.scrollbar.rect)),(e||n)&&(t.preventDefault(),t.stopPropagation(),"mousedown"===t.type&&(e&&r.onDragStart(t,"y"),n&&r.onDragStart(t,"x")))},this.drag=function(e){var n=r.axis[r.draggedAxis],i=n.track,o=n.scrollbar,a=i.rect[r.axis[r.draggedAxis].sizeAttr];e.preventDefault(),e.stopPropagation();var s=(("y"===r.draggedAxis?e.pageY:e.pageX)-i.rect[r.axis[r.draggedAxis].offsetAttr]-r.axis[r.draggedAxis].dragOffset)/i.rect[r.axis[r.draggedAxis].sizeAttr]*r.contentWrapperEl[r.axis[r.draggedAxis].scrollSizeAttr];"x"===r.draggedAxis&&(s=r.isRtl&&t.getRtlHelpers().isRtlScrollbarInverted?s-(a+o.size):s,s=r.isRtl&&t.getRtlHelpers().isRtlScrollingInverted?-s:s),r.contentWrapperEl[r.axis[r.draggedAxis].scrollOffsetAttr]=s},this.onEndDrag=function(t){t.preventDefault(),t.stopPropagation(),r.el.classList.remove(r.classNames.dragging),document.removeEventListener("mousemove",r.drag,!0),document.removeEventListener("mouseup",r.onEndDrag,!0),r.removePreventClickId=window.setTimeout((function(){document.removeEventListener("click",r.preventClick,!0),document.removeEventListener("dblclick",r.preventClick,!0),r.removePreventClickId=null}))},this.preventClick=function(t){t.preventDefault(),t.stopPropagation()},this.el=e,this.options=y(y({},t.defaultOptions),n),this.classNames=y(y({},t.defaultOptions.classNames),this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,this.el.SimpleBar||(this.recalculate=Bo(this.recalculate,64),this.onMouseMove=Bo(this.onMouseMove,64),this.hideScrollbars=ea(this.hideScrollbars,this.options.timeout),this.onWindowResize=ea(this.onWindowResize,64,{leading:!0}),t.getRtlHelpers=Ea(t.getRtlHelpers),this.init())}return t.getRtlHelpers=function(){var e=document.createElement("div");e.innerHTML='<div class="photoeditorsdk-hs-dummy-scrollbar-size"><div style="height: 200% width: 200% margin: 10px 0"></div></div>';var n=e.firstElementChild;document.body.appendChild(n);var r=n.firstElementChild;n.scrollLeft=0;var i=t.getOffset(n),o=t.getOffset(r);n.scrollLeft=999;var a=t.getOffset(r);return{isRtlScrollingInverted:i.left!==o.left&&o.left-a.left!=0,isRtlScrollbarInverted:i.left!==o.left}},t.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver((function(e){e.forEach((function(e){Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")&&!e.SimpleBar?new t(e,t.getElOptions(e)):Array.prototype.forEach.call(e.querySelectorAll("[data-simplebar]"),(function(e){e.SimpleBar||new t(e,t.getElOptions(e))})))})),Array.prototype.forEach.call(e.removedNodes,(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")&&t.SimpleBar?t.SimpleBar.unMount():Array.prototype.forEach.call(t.querySelectorAll("[data-simplebar]"),(function(t){t.SimpleBar&&t.SimpleBar.unMount()})))}))}))})),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.scroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},t.getElOptions=function(t){return Array.prototype.reduce.call(t.attributes,(function(t,e){var n=e.name.match(/data-simplebar-(.+)/);if(n){var r=n[1].replace(/\W+(.)/g,(function(t,e){return e.toUpperCase()}));switch(e.value){case"true":t[r]=!0;break;case"false":t[r]=!1;break;case void 0:t[r]=!0;break;default:t[r]=e.value}}return t}),{})},t.removeObserver=function(){this.globalObserver.disconnect()},t.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),(function(e){e.SimpleBar||new t(e,t.getElOptions(e))}))},t.getOffset=function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft)}},t.prototype.init=function(){this.el.SimpleBar=this,ls&&(this.initDOM(),this.scrollbarWidth=us(),this.recalculate(),this.initListeners())},t.prototype.hideNativeScrollbar=function(){if(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,!this.scrollbarWidth){var t=this.isRtl?"paddingLeft":"paddingRight";this.contentWrapperEl.style[t]=this.axis.y.isOverflowing||this.axis.y.forceVisible?this.minScrollbarWidth+"px":0,this.contentWrapperEl.style.paddingBottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?this.minScrollbarWidth+"px":0}},t.prototype.onMouseLeaveForAxis=function(t){void 0===t&&(t="y"),this.axis[t].track.el.classList.remove(this.classNames.hover),this.axis[t].scrollbar.el.classList.remove(this.classNames.hover)},t.prototype.showScrollbar=function(t){void 0===t&&(t="y");var e=this.axis[t].scrollbar.el;this.axis[t].isVisible||(e.classList.add(this.classNames.visible),this.axis[t].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},t.prototype.onDragStart=function(t,e){void 0===e&&(e="y");var n=this.axis[e].scrollbar.el,r="y"===e?t.pageY:t.pageX;this.axis[e].dragOffset=r-n.getBoundingClientRect()[this.axis[e].offsetAttr],this.draggedAxis=e,this.el.classList.add(this.classNames.dragging),document.addEventListener("mousemove",this.drag,!0),document.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(document.addEventListener("click",this.preventClick,!0),document.addEventListener("dblclick",this.preventClick,!0)):(window.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.prototype.getContentElement=function(){return this.contentEl},t.prototype.getScrollElement=function(){return this.contentWrapperEl},t.prototype.removeListeners=function(){var t=this;this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick","touchstart","touchend","touchmove"].forEach((function(e){t.el.removeEventListener(e,t.onPointerEvent,{capture:!0,passive:!0})})),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},t.prototype.unMount=function(){this.removeListeners(),this.el.SimpleBar=null},t.prototype.isChildNode=function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))},t.prototype.isWithinBounds=function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height},t.defaultOptions={autoHide:!0,forceVisible:!1,classNames:{contentEl:cs+"-content",contentWrapper:cs+"-content-wrapper",offset:cs+"-offset",mask:cs+"-mask",wrapper:cs+"-wrapper",placeholder:cs+"-placeholder",scrollbar:cs+"-scrollbar",track:cs+"-track",heightAutoObserverWrapperEl:cs+"-height-auto-observer-wrapper",heightAutoObserverEl:cs+"-height-auto-observer",visible:cs+"-visible",horizontal:cs+"-horizontal",vertical:cs+"-vertical",hover:cs+"-hover",dragging:cs+"-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},t}();ls&&fs.initHtmlApi();var ps,hs=function(){function t(t){var e=t.license,n=t.assetProvider,r=t.crossOrigin;this.crossOrigin=r,this.engine=new Re({license:e,crossOrigin:r,assetProvider:n,downscaleOptions:{maxDimensions:{width:100,height:100}}})}return t.isImageElement=function(t){return t instanceof HTMLImageElement},t.prototype.getAllFilterPreviewThumbnails=function(t){var e=this;return new Promise((function(n,r){var i={};t.reduce((function(t,n){return v(e,void 0,void 0,(function(){var e;return b(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return(e=r.sent()).identifier&&(i[e.identifier]=e.imageData),[2,this.getFilterPreviewThumbnail(n)]}}))}))}),Promise.resolve({identifier:"",imageData:""})).then((function(t){i[t.identifier]=t.imageData,n(i)})).catch((function(t){r(t)}))}))},t.prototype.getFilterPreviewThumbnail=function(t){var e=this,n=t.identifier,r=t.isDuotone;return""!==n?(this.effect&&(this.engine.removeEffect(this.effect),this.effect.getIndexInParent()||(this.effect=void 0)),new Promise(r?function(t,r){e.engine.addDuoToneFilterFromAssets(n,e.container).then((function(i){i.setProperties({colorIntensity:.5}),e.effect=i,e.engine.export(U.DATA_URL,W.PNG,.2).then((function(e){t({identifier:n,imageData:e})})).catch((function(t){r(t)}))})).catch((function(t){r(t)}))}:function(t,r){e.engine.addLUTFilterFromAssets(n,e.container).then((function(i){i.setProperties({intensity:1}),e.effect=i,e.engine.export(U.DATA_URL,W.PNG,.2).then((function(e){t({identifier:n,imageData:e})})).catch((function(t){r(t)}))})).catch((function(t){r(t)}))})):new Promise((function(t){return t({identifier:"",imageData:""})}))},t.prototype.addImageToContainer=function(e){var n=this;return new Promise((function(r,i){var o;t.isImageElement(e)?(o=e,n.setBackgroundImage(o),r()):n.getImageElement(e).then((function(t){o=t,n.setBackgroundImage(o),r()})).catch((function(t){i({identifier:"imageLoading",message:t.message})}))}))},t.prototype.getImageElement=function(t){var e=this;return new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){n(i)})),i.addEventListener("error",(function(t){r(t)})),i.crossOrigin=e.crossOrigin,i.src=t}))},t.prototype.setBackgroundImage=function(t){this.container?this.container.setData({image:t}):this.container=this.engine.addImage({image:t,blendMode:Z.NORMAL,opacity:1});var e=this.container.getBounds().size;this.engine.getOutputContainer().setResolution(e)},t}(),ds=function(t,e){return new Promise((function(n,r){var i=new Image;i.onload=function(){n(i)},i.onerror=function(){r(new Error("Failed to load image with src:"+t))},i.crossOrigin=e,i.src=t}))},ys=function(t,e){return new Promise((function(n,r){(function(t,e){return new Promise((function(n,r){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){"string"==typeof e.result&&"data:image"===e.result.substr(0,10)?n(e.result):r(new Error("The image could not be loaded from "+t))},e.onerror=function(t){r(t)},e.readAsDataURL(i.response)},i.open("GET",t),i.responseType="blob",i.withCredentials="use-credentials"===e,i.send()}))})(t,e).then((function(t){var e=new Image;e.addEventListener("load",(function(){n(e)})),e.src=t})).catch((function(){ds(t,e).then((function(t){return n(t)})).catch((function(t){r(t)}))}))}))},gs=function(t){var e=t.url,n=t.image,r=t.crossOrigin,i=void 0===r?"anonymous":r;return v(void 0,void 0,void 0,(function(){return b(this,(function(t){try{return n&&n.src&&"data:"===n.src.substr(0,5)||n&&n.src&&n.src.includes(".svg")?[2,n]:"string"==typeof e&&"data:"===e.substr(0,5)||"string"==typeof e&&e.includes(".svg")?[2,ds(e,i)]:[2,ys(e||n.src,i)]}catch(t){throw new Error(t)}return[2]}))}))},ms={tool:null,isWebcam:!1,image:""},vs=function(){function t(t){var e=this;this.setImage=function(t){return v(e,void 0,void 0,(function(){var e,n,r;return b(this,(function(i){switch(i.label){case 0:return e=this.editor.configStore.config.engine.crossOrigin,"string"!=typeof t?[3,2]:(n=this.state,[4,gs({url:It(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e})]);case 1:n.image=i.sent(),i.label=2;case 2:return t instanceof HTMLImageElement?(r=this.state,[4,gs({image:t,crossOrigin:e})]):[3,4];case 3:r.image=i.sent(),i.label=4;case 4:return this.isWebcam&&(this.state.isWebcam=!1),[2]}}))}))},this.newImage=function(t){e.editor.init(t)},this.editor=t,this.state=Ln(ms)}return t.prototype.selectTool=function(t,e){void 0===e&&(e=!1);var n=this.editor.configStore.licenseChecker;if(t=this.state.tool===t&&e?null:t,n&&n.isToolAllowed(t))switch(this.editor.onToolChange(this.state.tool,t),this.state.tool=t,t){case P.TEXT:this.editor.spriteStore.textToolStore.addOrselect();break;case P.TEXT_DESIGN:this.editor.spriteStore.textDesignToolStore.addOrselect();break;case P.BRUSH:this.editor.brushToolStore.initSize();break;case P.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop()}},t.prototype.selectWebcam=function(t){this.state.isWebcam=t},Object.defineProperty(t.prototype,"webcamLabel",{get:function(){return this.editor.libraryStore.locale.controls.buttonWebcamClose},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tool",{get:function(){return this.state.tool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWebcam",{get:function(){return this.state.isWebcam},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this.state.image},enumerable:!0,configurable:!0}),m([Lr],t.prototype,"selectTool",null),m([Lr],t.prototype,"selectWebcam",null),m([Lr],t.prototype,"setImage",void 0),m([Lr],t.prototype,"newImage",void 0),m([Vn],t.prototype,"webcamLabel",null),m([Vn],t.prototype,"tool",null),m([Vn],t.prototype,"isWebcam",null),m([Vn],t.prototype,"image",null),t}(),bs={height:150,width:150},_s=function(){function t(e){this.canvasClickDisabled=Ln.box(!1),this.editor=e,this.state=Ln(t.initialState)}return t.prototype.setCanvasElement=function(t){this.canvas=t,this.editor.engineMediator.preview.createPreview(t),this.updateCanvasDimensions(),this.editor.init(this.editor.configStore.config.image)},t.prototype.updateCanvasDimensions=function(){var t=ul.devicePixelRatio;this.canvas.width=this.canvasSize.width*t,this.canvas.height=this.canvasSize.height*t,this.canvas.style.width=this.canvasSize.width+"px",this.canvas.style.height=this.canvasSize.height+"px"},t.prototype.saveDimensions=function(t){var e=t.height,n=t.width,r=t.render,i=this.editor.configStore.isLayoutAdvanced?0:this.editor.configStore.measurements.basicCanvasOffset;e-i>bs.height&&n>bs.width&&(this.state.canvasSize.height=e-i,this.state.canvasSize.width=n,r&&this.editor.resize())},t.prototype.disableCanvasClick=function(){this.canvasClickDisabled.set(!0)},t.prototype.enableCanvasClick=function(){this.canvasClickDisabled.set(!1)},Object.defineProperty(t.prototype,"isCanvasClickable",{get:function(){return!this.canvasClickDisabled.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasSize",{get:function(){return this.state.canvasSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeVector",{get:function(){return k.fromSize(this.state.canvasSize)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeVectorMagnitude",{get:function(){return this.sizeVector.magnitude},enumerable:!0,configurable:!0}),t.prototype.getContainersAtPreviewPoint=function(t){var e=this,n=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map((function(t){return t.getID()})).filter((function(t){return t!==e.editor.engineMediator.image.getImgageContainerId()}));this.editor.spriteStore.onCanvasClick(n)},t.initialState={canvasSize:bs},m([Lr],t.prototype,"setCanvasElement",null),m([Lr],t.prototype,"updateCanvasDimensions",null),m([Lr],t.prototype,"saveDimensions",null),m([Lr],t.prototype,"disableCanvasClick",null),m([Lr],t.prototype,"enableCanvasClick",null),m([Vn],t.prototype,"isCanvasClickable",null),m([Vn],t.prototype,"canvasSize",null),m([Vn],t.prototype,"sizeVector",null),m([Vn],t.prototype,"sizeVectorMagnitude",null),t}(),ws={type:null,identifier:null,isVisible:!1,error:""},xs=function(){function t(t){var e=this;this.showActionModal=function(t){var n=t.type,r=t.identifier,i=t.error,o=t.handleConfirm,a=t.handleDismiss;e.resetHandlers(),e.state.isVisible=!0,e.state.identifier=r,e.state.type=n,e.state.error=i||"",e.handleConfirm=o,e.handleDismiss=a},this.hideModal=function(){e.state.isVisible=!1,e.state.type=null,e.state.error="",e.state.identifier=null,e.resetHandlers()},this.resetHandlers=function(){e.handleConfirm=null,e.handleDismiss=null},this.configStore=t.configStore,this.state=Ln(ws)}return t.prototype.showInfoModal=function(t){this.resetHandlers(),this.state.isVisible=!0,this.state.type=F.INFO,this.state.identifier=t,this.state.error=""},t.prototype.showTextEditModal=function(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=F.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""},Object.defineProperty(t.prototype,"modalProps",{get:function(){var t=this.state.isVisible,e=this.getModalLocale();if(e){var n=e.bodyLabel;return{headerLabel:e.headerLabel,bodyLabel:n,confirmLabel:e.buttonYes,dismissLabel:e.buttonNo,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.state.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.state.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionOffset",{get:function(){var t=this.configStore,e=t.isLayoutAdvanced,n=t.measurements,r=n.basicCanvasOffset,i=n.advancedUIToolControlBar,o=n.advancedUIToolbar,a=t.isOrderDefault,s=(i.width+o.width)*(a?1:-1);return e?{x:s/2,y:0}:{x:0,y:-r}},enumerable:!0,configurable:!0}),t.prototype.getModalLocale=function(){var t=this.state,e=t.identifier,n=t.error,r=t.type,i=this.configStore.locale;if(!r||!e||r===F.TEXT_EDIT)return null;if(r&&e&&i[r+"Modals"]&&i[r+"Modals"][e]){var o=i[r+"Modals"][e],a=o.body;a&&(a=a.replace("${error}",n));var s=o.heading;if(r===F.ERROR||r===F.WARNING){var l={error:i.common.error,warning:i.common.warning};s=""+("error"===r?l.error:l.warning)+o.headingDelimiter+" "+(o.header||"")}return{bodyLabel:a,headerLabel:s,buttonYes:o.buttonYes,buttonNo:o.buttonNo}}return null},m([Lr],t.prototype,"showActionModal",void 0),m([Lr],t.prototype,"showInfoModal",null),m([Lr],t.prototype,"showTextEditModal",null),m([Lr],t.prototype,"hideModal",void 0),m([Vn],t.prototype,"modalProps",null),m([Vn],t.prototype,"isVisible",null),m([Vn],t.prototype,"type",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"positionOffset",null),t}(),Os=function(){function t(t){var e=this;this.defaultScale=1,this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map((function(t){return t/100})),this.state={position:{x:0,y:0},scaleIndex:-1},this.offset={x:0,y:0},this.in=function(){e.canZoomIn&&(e.state.scaleIndex+=1,e.scaleRender())},this.out=function(){if(e.canZoomOut){e.state.scaleIndex-=1;var t=e.checkOffset({x:0,y:0}),n=t.canDragX,r=t.canDragY,i=t.maxOffsetX,o=t.maxOffsetY;r||(e.offset.y=o),n||(e.offset.x=i),e.savePosition(),e.scaleRender()}},this.setOffset=function(t){var n=e.checkOffset(t),r=n.canDragX,i=n.canDragY;r&&(e.offset.x=t.x),i&&(e.offset.y=t.y),e.scaleRender()},this.editor=t}return t.prototype.setInitialTransform=function(t){var e=this;void 0===t&&(t=0);var n=this.editor.engineMediator.preview.transform;Br((function(){e.setDefaultScale(Math.abs(t||n.scale.x)),e.setPosition(n.position)}))},t.prototype.resetScale=function(){this.state.scaleIndex=-1},t.prototype.resetPosition=function(){var t=this.editor.canvasStore.canvas,e=t.width,n=t.height;this.setPosition({x:e/2,y:n/2})},t.prototype.resetOffset=function(){this.offset={x:0,y:0}},t.prototype.setPosition=function(t){this.state.position.x=t.x,this.state.position.y=t.y},t.prototype.savePosition=function(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}},t.prototype.setDefaultScale=function(t){var e=this;1!==this.defaultScale&&-1!==(n=this.SCALE_LEVELS.findIndex((function(t){return t===e.defaultScale})))&&(this.SCALE_LEVELS=x(this.SCALE_LEVELS.slice(0,n),this.SCALE_LEVELS.slice(n+1)));var n,r=this.SCALE_LEVELS.findIndex((function(n,r){return 0===r?t<n:r===e.SCALE_LEVELS.length-1?n<t:e.SCALE_LEVELS[r-1]<t&&t<n}));-1!==r?(this.SCALE_LEVELS=x(this.SCALE_LEVELS.slice(0,r),[t],this.SCALE_LEVELS.slice(r)),r===this.state.scaleIndex&&this.resetScale(),this.state.scaleIndex=r,this.defaultScale=t):((n=this.SCALE_LEVELS.findIndex((function(e){return e===t})))===this.state.scaleIndex&&this.resetScale(),-1!==n&&(this.state.scaleIndex=n,this.defaultScale=t))},t.prototype.setScaleToDefault=function(){this.state.scaleIndex=this.defaultIndex},t.prototype.checkOffset=function(t){var e=window.devicePixelRatio||1,n=this.scaledSize,r=this.previewSize,i=this.editor.engineMediator.preview.initialTransform.position,o=this.getPositionWithOffset(t),a=(n.width-r.width)*e/2,s=(n.height-r.height)*e/2,l=i.x-o.x,u=i.y-o.y,c=Math.abs(l)-a,f=Math.abs(u)-s;return{canDragX:c<0,canDragY:f<0,maxOffsetX:l>0?-c:c,maxOffsetY:u>0?-f:f}},t.prototype.calculateScale=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=this.previewSize),void 0===n&&(n=this.defaultScale);var r=e.width,i=e.height,o=new k({x:r,y:i}),a=new k(Math.abs(o.x*Math.cos(t))+Math.abs(o.y*Math.sin(t)),Math.abs(o.x*Math.sin(t))+Math.abs(o.y*Math.cos(t))),s=o.subtract(a).divide(2).multiply(n).abs;return s.y>s.x?2*s.y/o.y+n:2*s.x/o.x+n},Object.defineProperty(t.prototype,"defaultIndex",{get:function(){var t=this;return this.SCALE_LEVELS.findIndex((function(e){return e===t.defaultScale}))},enumerable:!0,configurable:!0}),t.prototype.getPositionWithOffset=function(t){void 0===t&&(t=this.offset);var e=this.position;return{x:e.x-t.x,y:e.y-t.y}},t.prototype.scaleRender=function(t){void 0===t&&(t=!1);var e=this.editor.scale.getPositionWithOffset(),n=t?this.defaultScale:this.scale,r={x:n,y:n};this.editor.engineMediator.preview.container.setScale(r),this.editor.engineMediator.preview.container.setPosition(e),this.editor.engineMediator.preview.savePreviewTransform({scale:r,position:e,rotation:0}),t||this.editor.render()},Object.defineProperty(t.prototype,"scale",{get:function(){var t=this.state.scaleIndex;return-1!==t?this.SCALE_LEVELS[t]:this.defaultScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomLevel",{get:function(){var t=window.devicePixelRatio||1;return(this.scale/t*100).toFixed(1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canDrag",{get:function(){return this.defaultScale<this.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canZoomOut",{get:function(){return this.state.scaleIndex>this.defaultIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canZoomIn",{get:function(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.state.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaledSize",{get:function(){var t=this.state.scaleIndex,e=-1!==t?this.SCALE_LEVELS[t]:this.defaultScale,n=this.previewSize;return{width:n.width*e/this.defaultScale,height:n.height*e/this.defaultScale}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"previewSize",{get:function(){return this.editor.getPreviewSize()},enumerable:!0,configurable:!0}),m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"in",void 0),m([Lr],t.prototype,"out",void 0),m([Lr],t.prototype,"setInitialTransform",null),m([Lr],t.prototype,"resetScale",null),m([Lr],t.prototype,"resetPosition",null),m([Lr],t.prototype,"setPosition",null),m([Lr],t.prototype,"savePosition",null),m([Lr],t.prototype,"setDefaultScale",null),m([Lr],t.prototype,"setScaleToDefault",null),m([Vn],t.prototype,"scale",null),m([Vn],t.prototype,"zoomLevel",null),m([Vn],t.prototype,"canDrag",null),m([Vn],t.prototype,"canZoomOut",null),m([Vn],t.prototype,"canZoomIn",null),m([Vn],t.prototype,"position",null),m([Vn],t.prototype,"scaledSize",null),t}(),Ss=/^data:image\/(.+?);base64,/,ks=function(){function t(t){var e=this;this.applySerialization=function(t,n,r,i){return v(e,void 0,void 0,(function(){var e,o,a,s,l,u,c;return b(this,(function(f){switch(f.label){case 0:return this.editor.resetToolStates(),(e=this.editor.activeStore.tool===P.TRANSFORM)||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),e||this.editor.transformToolStore.onLeave(),o=new n(this.editor),a="Unexpected error occured",(s=n.deserializeImage(t)).image&&s.image.data?(l=s.image.data,[4,this.editor.setImage(l)]):[3,3];case 1:return f.sent(),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(l),[4,this.editor.engineMediator.image.addImageToContainer()];case 2:f.sent(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms(),f.label=3;case 3:return(u=o.deserializeTransformation(t))?[4,this.applyStateOnUI(u)]:[3,9];case 4:return f.sent(),(c=o.deserialize(t))?[4,this.applyStateOnUI(c)]:[3,7];case 5:return f.sent(),[4,this.editor.render()];case 6:return f.sent(),"loading"===this.editor.modalStore.identifier&&this.editor.modalStore.hideModal(),r(),[3,8];case 7:i(a),f.label=8;case 8:return[3,10];case 9:i(a),f.label=10;case 10:return[2]}}))}))},this.editor=t}return t.prototype.serialize=function(e){var r=this,i=(void 0===e?{image:!1}:e).image,o=this.editor.activeStore.tool===P.TRANSFORM;return this.editor.modalStore.showInfoModal("saving"),new Promise((function(e,a){n.e(0).then(n.bind(null,17)).then((function(n){var s=n.Serializer;return v(r,void 0,void 0,(function(){var n,r,l,u,c,f,p,h,d,y,g,m,v;return b(this,(function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),o&&this.editor.transformToolStore.onLeave(),[4,this.editor.wait()];case 1:return b.sent(),this.editor.transformToolStore.applyDefaultCrop(!1),n=this.editor.imageContainer.getData().originalImage,r=this.editor.engineMediator.output.container.getResolution(),l={width:n.width,height:n.height},u=new s(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,r,l,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),(v={})[P.ADJUSTMENT]=Qr(this.editor.adjustmentsToolStore.state),v[P.FILTER]=Qr(this.editor.filterToolStore.state),v[P.FOCUS]=Qr(this.editor.focusToolStore.serializableState),v[P.OVERLAY]=Qr(this.editor.overlayToolStore.state),v[P.FRAME]=Qr(this.editor.frameToolStore.state),v[P.BRUSH]=this.editor.brushToolStore.strokes||{strokes:[]},c=v,f=this.editor.spriteStore.serializableState,p=f.sprite,h=f.customStickers,p.spriteIdList=p.spriteIdList.sort((function(t,e){return p.common[t].order-p.common[e].order})),c.sprite=p,c.customStickers=h,c.transform=this.editor.transformToolStore.serializableState,d=void 0,y=void 0,i&&(g=t.getDataURL(n),y=function(t){return t.match(/^data:([^;]+)/)[1]}(g),d=function(t){return t.replace(Ss,"")}(g)),this.editor.modalStore.hideModal(),e(u.serialise(c,d,y)),o&&this.editor.transformToolStore.onEnter(),[3,3];case 2:return m=b.sent(),this.editor.modalStore.hideModal(),a(m),[3,3];case 3:return[2]}}))}))}))}))},t.prototype.deserialize=function(t){var e=this;return this.editor.modalStore.showInfoModal("loading"),new Promise((function(r,i){try{n.e(0).then(n.bind(null,17)).then((function(n){var o=n.Deserializer;o.checkIsSerialisationValid(t)?e.applySerialization(t,o,r,i):(e.editor.modalStore.hideModal(),e.editor.modalStore.showActionModal({type:F.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:function(){return e.applySerialization(t,o,r,i)}}))}))}catch(t){"loading"===e.editor.modalStore.identifier&&e.editor.modalStore.hideModal(),i(t)}}))},t.getDataURL=function(t){if(t instanceof HTMLCanvasElement)return t.toDataURL(W.PNG);var e,n=t.src;if(e=n,Ss.test(e))return n;var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),r.toDataURL(W.PNG)},t.prototype.applyStateOnUI=function(t){return v(this,void 0,void 0,(function(){var e,n;return b(this,(function(r){switch(r.label){case 0:e=this.editor.activeStore.tool===P.TRANSFORM,r.label=1;case 1:return r.trys.push([1,15,,16]),t.transform?(e||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t.transform,!0),[4,this.editor.wait()]):[3,4];case 2:return r.sent(),e?[3,4]:(this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),[4,this.editor.wait()]);case 3:r.sent(),this.editor.transformToolStore.onLeave(),r.label=4;case 4:return t.filter?[4,this.editor.filterToolStore.updateStateFromSerialization(t.filter)]:[3,6];case 5:r.sent(),r.label=6;case 6:return t.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment),t.focus?[4,this.editor.focusToolStore.updateStateFromSerialization(t.focus)]:[3,8];case 7:r.sent(),r.label=8;case 8:return t.overlay?[4,this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)]:[3,10];case 9:r.sent(),r.label=10;case 10:return t.sprite?(t.sprite.spriteIdList=t.sprite.spriteIdList.sort((function(e,n){return t.sprite.common[e].order-t.sprite.common[n].order})),[4,this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers)]):[3,12];case 11:r.sent(),r.label=12;case 12:return t.brush&&this.editor.brushToolStore.updateStateFromHistory(t.brush),t.frame?[4,this.editor.frameToolStore.updateStateFromSerialization(t.frame)]:[3,14];case 13:r.sent(),r.label=14;case 14:return this.editor.outputContainer.updateChildrenContainers(),[3,16];case 15:return n=r.sent(),console.error(n),this.editor.modalStore.showActionModal({type:F.ERROR,identifier:"unexpectedError",error:n,handleConfirm:function(){window.location.reload()}}),[3,16];case 16:return[2]}}))}))},t}(),Ts={identifier:"identity",opacity:1,width:0,color:je.white},Es=new Wi(0,1),Cs=function(){function t(t){this.engineMediator=t,this.state=Ts}return t.prototype.changeIdentifier=function(t){this.state.identifier=t},t.prototype.changeOpacity=function(t){var e=Es.clamp(t);this.state.opacity=e},t.prototype.changeWidth=function(t){this.state.width=t},t.prototype.changeColor=function(t){this.state.color=t},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=Ts.identifier,this.state.opacity=Ts.opacity,this.state.width=Ts.width,this.state.color=Ts.color,this.removeIndex())},Object.defineProperty(t.prototype,"engine",{get:function(){return this.engineMediator.engine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),t.prototype.removeFrameEffect=function(){this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)},t.prototype.setEffectProperties=function(t){return this.effect?(this.removeIndex(),this.effect.setProperties(t),this.effect.getProperties()):null},t.prototype.setFrameEffect=function(t){var e=this,n=t.identifier,r=t.width,i=t.opacity,o=t.color,a=y({},this.state);this.changeIdentifier(n),this.changeWidth(r),this.changeOpacity(i),this.changeColor(o),this.removeFrameEffect();var s=this.engineMediator.orderHelper.addSprite(n);return new Promise((function(t,l){e.engine.addFrameFromAssets(n,e.engineMediator.image.container,s).then((function(n){e.effect=n,e.effect.setProperties({tintColor:o,opacity:i,width:r}),t()})).catch((function(t){e.changeIdentifier(a.identifier),e.changeOpacity(a.opacity),e.changeWidth(a.width),e.changeColor(a.color),"identity"===a.identifier&&e.removeIndex(),l(t)}))}))},t.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeSprite(this.state.identifier)},m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"changeIdentifier",null),m([Lr],t.prototype,"changeOpacity",null),m([Lr],t.prototype,"changeWidth",null),m([Lr],t.prototype,"changeColor",null),m([Lr],t.prototype,"reset",null),t}(),Rs=function(){function t(t){var e=this;this.colorList=ul.defaultColors,this.changeOpacity=function(t){var n=e.frameStore.setEffectProperties({opacity:t});n&&(e.frameStore.changeOpacity(n.opacity),e.editor.render())},this.changeWidth=function(t){var n=e.frameStore.setEffectProperties({width:t});n&&(e.frameStore.changeWidth(n.width),e.editor.render())},this.changeColor=function(t){var n=e.frameStore.setEffectProperties({tintColor:t});n&&(e.frameStore.changeColor(n.tintColor),e.editor.render())},this.colorSnapshot=function(){e.addSnapshot(Ui.EDIT,e.locale.controls.selectColor)},this.reset=function(){e.pureReset(),e.addSnapshot(Ui.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.frameStore=new Cs(this.editor.engineMediator);var n=this.editor.assetProvider.getAssets("frame"),r=this.config;this.entityManager=new Gi([{identifier:"",name:"",items:n}],y(y({},r),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),this.config.colors&&this.config.colors.length>0&&(this.colorList=Fe(Qr(this.config.colors)))}return t.prototype.selectFrame=function(t){return v(this,void 0,void 0,(function(){var e;return b(this,(function(n){switch(n.label){case 0:return t===this.identifier?[3,2]:(e=.1*this.editor.shortestOutputSide,[4,this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:Ts.color})]);case 1:n.sent(),this.editor.render(),this.addSnapshot(Ui.ADD,P.FRAME),n.label=2;case 2:return[2]}}))}))},t.prototype.toolSnapshot=function(t){this.addSnapshot(Ui.EDIT,t)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.pureReset=function(){this.frameStore.removeFrameEffect(),this.frameStore.reset()},t.prototype.updateStateFromHistory=function(t){return"identity"===t.identifier?(this.pureReset(),new Promise((function(t){t()}))):this.frameStore.setFrameEffect(t)},t.prototype.updateStateFromSerialization=function(t){return v(this,void 0,void 0,(function(){return b(this,(function(e){return this.entityManager.items.find((function(e){return e.identifier===t.identifier}))?[2,this.frameStore.setFrameEffect(t)]:[2,new Promise((function(t,e){e(new Error("Frame Asset doesn't exist"))}))]}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this.frameStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.state.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.state.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintable",{get:function(){var t=this,e=this.entityManager.items.find((function(e){return e.identifier===t.identifier}));return e&&e.tintable||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.state.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minSize",{get:function(){return.05*this.editor.shortestOutputSide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return.3*this.editor.shortestOutputSide},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.FRAME]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.FRAME]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),m([Lr],t.prototype,"selectFrame",null),m([Lr],t.prototype,"changeOpacity",void 0),m([Lr],t.prototype,"changeWidth",void 0),m([Lr],t.prototype,"changeColor",void 0),m([Lr],t.prototype,"pureReset",null),m([Lr],t.prototype,"reset",void 0),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"updateStateFromSerialization",null),m([Vn],t.prototype,"state",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"color",null),m([Vn],t.prototype,"size",null),m([Vn],t.prototype,"tintable",null),m([Vn],t.prototype,"opacity",null),m([Vn],t.prototype,"minSize",null),m([Vn],t.prototype,"maxSize",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"localeColor",null),m([Vn],t.prototype,"entities",null),m([Vn],t.prototype,"isOptionSelected",null),t}(),Ds={options:[],query:""},Ps=function(){function t(t){var e=this;this.initProvider=function(t){t&&(e.libraryProvider=new t)},this.addOptionsToSelectedCategory=function(t,e,n){var r=t.findIndex((function(t){return t.identifier===e}));return-1!==r?x(t.slice(0,r+1),n,t.slice(r+1)):t},this.configStore=t.configStore,this.state=Ln(Ds),this.selectedCategory=""}return t.prototype.saveScrollbar=function(t){this.scrollbar=t},t.prototype.recalculateScrollContainer=function(){var t=this;setTimeout((function(){return t.scrollbar.recalculate()}),0)},t.prototype.fetchImages=function(t){return void 0===t&&(t=""),v(this,void 0,void 0,(function(){var e,n,r,i,o,a=this;return b(this,(function(s){switch(s.label){case 0:return this.libraryProvider?(e=[this.libraryProvider.getCategories(),this.libraryProvider.searchImages(t)],[4,Promise.all(e)]):[3,2];case 1:n=w.apply(void 0,[s.sent(),2]),r=n[0],i=n[1],o=r.map((function(t){var e=i.filter((function(e){return e.category===t.name}));return{identifier:t.name,name:t.name,coverImage:t.coverImageUrl,options:e.map((function(e,n){return{name:e.title||"image"+n,identifier:t.name+"-"+(e.title||"image"+n),coverImage:e.thumbUrl,rawUrl:e.rawUrl}}))}})).filter((function(t){return t.options.length})),Br((function(){a.state.query=t,a.state.options=o})),s.label=2;case 2:return[2]}}))}))},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory!==t?t:""},Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"images",{get:function(){return this.state.options.map((function(t){return t.options})).reduce((function(t,e){return x(t,e)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"query",{get:function(){return this.state.query},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.configStore.config[P.LIBRARY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.configStore.locale[P.LIBRARY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.state.options.map((function(t,e){return{type:A.LARGE,identifier:t.name,name:t.name,coverImage:t.coverImage,delay:.08*e,items:t.options.map((function(t,e){return y({type:A.MEDIUM,delay:.08*e},t)}))}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){var t=this.selectedCategory,e=this.state.options.findIndex((function(e){return e.name===t}));return-1!==e?this.state.options[e].options.map((function(t,e){return y({type:A.MEDIUM,delay:.08*e},t)})):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categoriesAndOptions",{get:function(){return this.addOptionsToSelectedCategory(this.categories,this.selectedCategory,this.options)},enumerable:!0,configurable:!0}),t.prototype.getRawUrl=function(t){var e=this.images.findIndex((function(e){return e.identifier===t}));return-1!==e?this.images[e].rawUrl:t},m([Ln],t.prototype,"selectedCategory",void 0),m([Lr],t.prototype,"saveScrollbar",null),m([Lr],t.prototype,"recalculateScrollContainer",null),m([Lr],t.prototype,"initProvider",void 0),m([Lr],t.prototype,"fetchImages",null),m([Lr],t.prototype,"toggleCategorySelection",null),m([Vn],t.prototype,"selectedCategoryIdentifier",null),m([Vn],t.prototype,"images",null),m([Vn],t.prototype,"query",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"categories",null),m([Vn],t.prototype,"options",null),m([Vn],t.prototype,"categoriesAndOptions",null),t}(),Is={identifier:"identity",opacity:1,blendMode:Z.LIGHTEN},As=new Wi(0,1),Fs=function(){function t(t,e){var n=this;this.correctOverlayFlip=function(){var t=n.editor.outputContainer.getData(),e=t.flipHorizontally,r=t.flipVertically;n.effect&&(n.effect.setFlipHorizontally(e),n.effect.setFlipVertically(r))},this.engineMediator=t,this.editor=e,this.state=Is}return t.prototype.changeIdentifier=function(t){this.state.identifier=t},t.prototype.changeOpacity=function(t){var e=As.clamp(t);this.state.opacity=e},t.prototype.changeBlendMode=function(t){this.state.blendMode=t},t.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=Is.identifier,this.state.opacity=Is.opacity,this.state.blendMode=Is.blendMode,this.removeIndex())},Object.defineProperty(t.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),t.prototype.removeOverlayEffect=function(){this.effect&&(this.removeIndex(),this.engineMediator.engine.removeEffect(this.effect),this.effect=void 0)},t.prototype.setEffectProperties=function(t){return this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null},t.prototype.setOverlayEffect=function(t){var e=this,n=t.identifier,r=t.blendMode,i=t.opacity,o=y({},this.state);this.changeIdentifier(n),this.changeOpacity(i),this.changeBlendMode(r),this.removeOverlayEffect();var a=this.engineMediator.orderHelper.addIndex(P.OVERLAY);return new Promise((function(t,s){e.engineMediator.engine.addOverlayFromAssets(n,e.engineMediator.image.container,a).then((function(n){e.effect=n,e.effect.setProperties({blendMode:r,opacity:i}),e.correctOverlayFlip(),t()})).catch((function(t){e.changeIdentifier(o.identifier),e.changeOpacity(o.opacity),e.changeBlendMode(o.blendMode),"identity"===o.identifier&&e.removeIndex(),s(t)}))}))},t.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeIndex(P.OVERLAY)},m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"changeIdentifier",null),m([Lr],t.prototype,"changeOpacity",null),m([Lr],t.prototype,"changeBlendMode",null),m([Lr],t.prototype,"reset",null),m([Lr],t.prototype,"correctOverlayFlip",void 0),t}(),js=function(){function t(t){var e=this;this.changeOpacity=function(t){var n=e.overlayStore.setEffectProperties({opacity:t});n&&(e.overlayStore.changeOpacity(n.opacity),e.editor.render())},this.reset=function(){e.pureReset(),e.addSnapshot(Ui.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.correctOverlayFlip=function(){e.overlayStore.correctOverlayFlip()},this.editor=t,this.overlayStore=new Fs(this.editor.engineMediator,t);var n=this.editor.assetProvider.getAssets("overlay"),r=this.config;this.entityManager=new Gi([{identifier:"",name:"",items:n}],y(y({},r),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}return t.prototype.selectOverlay=function(t){return v(this,void 0,void 0,(function(){var e;return b(this,(function(n){switch(n.label){case 0:return t===this.identifier?[3,2]:(e=this.defaultBlendModeForIdentifier(t),[4,this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e})]);case 1:n.sent(),this.addSnapshot(Ui.ADD,P.OVERLAY),this.editor.render(),n.label=2;case 2:return[2]}}))}))},t.prototype.toolSnapshot=function(){this.addSnapshot(Ui.EDIT,this.locale.controls.sliderOpacity)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.changeBlendMode=function(t){var e=this.overlayStore.setEffectProperties({blendMode:t});e&&(this.overlayStore.changeBlendMode(e.blendMode),this.addSnapshot(Ui.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())},t.prototype.pureReset=function(){this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()},t.prototype.updateStateFromSerialization=function(t){return v(this,void 0,void 0,(function(){return b(this,(function(e){return this.entityManager.items.find((function(e){return e.identifier===t.identifier}))?[2,this.overlayStore.setOverlayEffect(t)]:[2,new Promise((function(e,n){n(new Error("Overlay Asset "+t.identifier+" doesn't exist"))}))]}))}))},t.prototype.updateStateFromHistory=function(t){return v(this,void 0,void 0,(function(){return b(this,(function(e){return"identity"===t.identifier?(this.pureReset(),[2,new Promise((function(t){t()}))]):[2,this.overlayStore.setOverlayEffect(t)]}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this.overlayStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.overlayStore.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.overlayStore.state.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.overlayStore.state.blendMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.OVERLAY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.OVERLAY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allBlendModes",{get:function(){var t=this.locale.controls;return Object.keys(Z).map((function(e){var n=Z[e],r="blendMode"+n.charAt(0).toUpperCase()+n.slice(1);return{identifier:n,value:t[r]}}))},enumerable:!0,configurable:!0}),t.prototype.defaultBlendModeForIdentifier=function(t){var e=this.entityManager.items.findIndex((function(e){return e.identifier===t}));return-1!==e?this.entityManager.items[e].defaultBlendMode:Z.LIGHTEN},m([Lr],t.prototype,"selectOverlay",null),m([Lr],t.prototype,"changeOpacity",void 0),m([Lr],t.prototype,"changeBlendMode",null),m([Lr],t.prototype,"pureReset",null),m([Lr],t.prototype,"reset",void 0),m([Lr],t.prototype,"updateStateFromSerialization",null),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"correctOverlayFlip",void 0),m([Vn],t.prototype,"state",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"opacity",null),m([Vn],t.prototype,"blendMode",null),m([Vn],t.prototype,"isOptionSelected",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"entities",null),m([Vn],t.prototype,"allBlendModes",null),t}(),Ms=function(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r),o=0;o<e.length;o+=1)i[o]=e.charCodeAt(o);return new Blob([r],{type:n})},zs={size:0,color:je.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0},Ls=function(){function t(t){var e=this;this.colorList=ul.defaultColors,this.dirty=Ln.box(!1),this.id="",this.containerId=function(){return e.id},this.initSize=function(){var t=e.state,n=t.minimumSize,r=t.maximumSize;0===e.size&&e.changeSize(it(e.config,"defaultSize",[n,r]))},this.changeColor=function(t){e.state.color=t},this.changeSize=function(t){e.state.size=t},this.changeRelativeSize=function(t){var n=e.state,r=n.maximumSize,i=n.minimumSize;e.state.size=(r-i)*t/100+i},this.changeHardness=function(t){e.state.hardness=t},this.reset=function(){e.pureReset(),e.addSnapshot(Ui.DELETE,e.locale.controls.buttonReset),e.editor.render()},this.editor=t,this.state=y(y({},zs),{hardness:it(this.config,"defaultHardness",[zs.minimumHardness,zs.maximumHardness])}),this.config.colors&&this.config.colors.length>0&&(this.colorList=Fe(Qr(this.config.colors)))}return t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.beginStroke=function(t){if(void 0===t&&(t=[]),!this.drawingContainer){var e=this.editor.orderHelper.addSprite(P.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:Qr(this.state.color),size:this.state.size,hardness:this.state.hardness})},t.prototype.strokePosition=function(t){if(this.drawingContainer){var e=this.editor.previewToWorld(t,!1);this.drawingContainer.addPointToCurrentStroke(e),this.editor.render()}},t.prototype.endStroke=function(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(Ui.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))},t.prototype.updateStateFromHistory=function(t){if(t=t||{strokes:[]},this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length)return;this.strokes=t,this.drawingContainer.setData(this.strokes),0!==t.strokes.length&&this.dirty.set(!0)}else{var e=this.editor.orderHelper.addSprite(P.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e),this.strokes=this.drawingContainer.getData()}this.id=this.drawingContainer.getID()},t.prototype.pureReset=function(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)},Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.BRUSH]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.BRUSH]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.state.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.state.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeSize",{get:function(){var t=this.state,e=t.size,n=t.maximumSize,r=t.minimumSize;return 100*(e-r)/(n-r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeOnScreenSpace",{get:function(){var t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hardness",{get:function(){return this.state.hardness},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.dirty.get()},enumerable:!0,configurable:!0}),m([Ln],t.prototype,"state",void 0),m([Ln],t.prototype,"dirty",void 0),m([Lr],t.prototype,"initSize",void 0),m([Lr],t.prototype,"changeColor",void 0),m([Lr],t.prototype,"changeSize",void 0),m([Lr],t.prototype,"changeRelativeSize",void 0),m([Lr],t.prototype,"changeHardness",void 0),m([Lr],t.prototype,"clickableCanvas",null),m([Lr],t.prototype,"beginStroke",null),m([Lr],t.prototype,"strokePosition",null),m([Lr],t.prototype,"endStroke",null),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"reset",void 0),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"localeColor",null),m([Vn],t.prototype,"color",null),m([Vn],t.prototype,"size",null),m([Vn],t.prototype,"relativeSize",null),m([Vn],t.prototype,"sizeOnScreenSpace",null),m([Vn],t.prototype,"hardness",null),m([Vn],t.prototype,"isDirty",null),t}();!function(t){t.LEADING="leading",t.CENTER="center",t.TRAILING="trailing"}(ps||(ps={}));var Bs={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},Ns=function(){function t(t){var e=this;this.previewTopLeftPosition={x:0,y:0},this.getGuideValue=function(t,n){var r=e.editor.getPreviewSize(),i=r.height,o=r.width,a=e.configStore.config.snapping.position,s=a.snapToLeft,l=a.snapToRight,u=a.snapToTop,c=a.snapToBottom,f=Math.min(i,o),p=0;return"bottom"===n?p=Math.round(i-f*c):"top"===n?p=Math.round(f*u):"right"===n?p=Math.round(o-f*l):"left"===n?p=Math.round(f*s):"vertical"===t&&"center"===n?p=Math.round(o/2):"horizontal"===t&&"center"===n&&(p=Math.round(i/2)),p},this.getVerticalGuidesFromConfig=function(){var t=e.configStore.config.snapping.position,n=t.snapToVerticalCenter,r=t.snapToLeft,i=t.snapToRight,o=[];return n&&o.push({value:e.getGuideValue("vertical","center"),edge:ps.CENTER,isVisible:!1,direction:"vertical"}),r&&o.push({value:e.getGuideValue("vertical","left"),edge:ps.LEADING,isVisible:!1,direction:"vertical"}),i&&o.push({value:e.getGuideValue("vertical","right"),edge:ps.TRAILING,isVisible:!1,direction:"vertical"}),o},this.getHorizontalGuidesFromConfig=function(){var t=e.configStore.config.snapping.position,n=t.snapToHorizontalCenter,r=t.snapToTop,i=t.snapToBottom,o=[];return n&&o.push({value:e.getGuideValue("horizontal","center"),edge:ps.CENTER,isVisible:!1,direction:"horizontal"}),r&&o.push({value:e.getGuideValue("horizontal","top"),edge:ps.LEADING,isVisible:!1,direction:"horizontal"}),i&&o.push({value:e.getGuideValue("horizontal","bottom"),edge:ps.TRAILING,isVisible:!1,direction:"horizontal"}),o},this.getRotationGuidesFromConfig=function(){var t=e.configStore.config.snapping.rotation.angles,n=[];return t.forEach((function(t){n.push(t),n.push(t+360),n.push(t-360)})),n.filter((function(t,e){return n.indexOf(t)===e})).map((function(t){return{value:t*Math.PI/180,edge:ps.CENTER,isVisible:!1,position:{x:0,y:0}}}))},this.getSpriteDimensions=function(t){var e=t.leftTop,n=t.leftBottom,r=t.rightTop,i=t.rightBottom,o=Math.min(e.y,r.y,n.y,i.y),a=Math.max(e.y,r.y,n.y,i.y),s=Math.min(e.x,r.x,n.x,i.x),l=Math.max(e.x,r.x,n.x,i.x);return{height:Math.round(a-o),width:Math.round(l-s)}},this.mapRange=function(t){var e=t.value,n=t.fromMin,r=t.fromLength,i=t.toMin;return(e-n)*t.toLength/r+i},this.updateGuides=function(){e.state.horizontalGuides=e.getHorizontalGuidesFromConfig(),e.state.verticalGuides=e.getVerticalGuidesFromConfig()},this.mapToSnapSystem=function(t,n,r,i){if(0===n.length)return t;if(n[0]>t)return t-r;for(var o=0;o<n.length-1;o+=1){var a=n[o],s=n[o+1],l=a+r,u=s-r,c=0;if(i&&(l+=c=o*r*2,u+=c+2*r),a<=t&&t<=s)return t<=a+1e-5?a+c:t>=s-1e-5?s+c+(i?2*r:0):e.mapRange({value:t,fromMin:a,fromLength:s-a,toMin:l,toLength:u-l})}return i?t+(n.length-1)*r*2+r:t},this.mapFromSnapSystem=function(t,n,r,i){if(0===n.length)return t;if(n[0]>t)return t>=n[0]-r?n[0]:t+r;for(var o=t,a=0;a<n.length-1;a+=1){var s=n[a],l=n[a+1],u=s+r,c=l-r,f=l;if(i&&(c+=2*r,f+=2*r,o=t-a*r*2),s<=o&&o<=f)return u<=o&&o<=c?e.mapRange({value:o,fromMin:u,fromLength:c-u,toMin:s,toLength:l-s}):o<u?s:l}o-=3*r;var p=n[n.length-1];return o<=p?p:o},this.centerSnapValue=function(t,e){var n=.5*e,r=t.value,i=t.edge,o=r;return i===ps.LEADING?o+=n:i===ps.TRAILING&&(o-=n),o},this.mapSnappingGuidesToCenter=function(t,n){var r=[];return t.forEach((function(t){r.push(e.centerSnapValue(t,n))})),r},this.calcSnapThresholdInRadians=function(t,e){return 0===t?0:e/t},this.calculatePreviewTopLeftPosition=function(){var t=e.editor.engineMediator.preview.container.getPosition(),n=e.editor.getPreviewSize(),r=ul.devicePixelRatio;e.previewTopLeftPosition={x:t.x/r-n.width/2,y:t.y/r-n.height/2}},this.snapToRotation=function(t,n,r){var i=e.state.rotationGuides,o=e.configStore.config.snapping.rotation,a=o.enabled,s=o.threshold,l=e.previewTopLeftPosition,u=l.x,c=l.y,f=e.editor.getPreviewSize().width,p=(t+2*Math.PI)%(2*Math.PI);if(a){var h=new k(n).magnitude,d=i.map((function(t){return t.value})).sort((function(t,e){return t-e})),y=e.calcSnapThresholdInRadians(h,s);if(!e.rotationOffset){var g=e.mapToSnapSystem(t,d,y,!1);e.rotationOffset=g-p}p=e.mapFromSnapSystem(p+e.rotationOffset,d,y,!1);var m={x:r.position.x-u-f,y:r.position.y-c};return i.forEach((function(t){t.isVisible=t.value===p,t.position=m})),p}return t},this.snapToPosition=function(t,n){var r=e.state,i=r.horizontalGuides,o=r.verticalGuides,a=e.configStore.config.snapping.position,s=a.enabled,l=a.threshold,u=new k(e.previewTopLeftPosition),c=e.getSpriteDimensions(n),f=c.height,p=c.width,h=new k(t).subtract(u),d=h.x,y=h.y;if(s){var g=e.mapSnappingGuidesToCenter(i,f).sort((function(t,e){return t-e})),m=e.mapSnappingGuidesToCenter(o,p).sort((function(t,e){return t-e}));if(!e.positionOffset){var v=e.mapToSnapSystem(d,m,l,!0),b=e.mapToSnapSystem(y,g,l,!0);e.positionOffset=new k(v,b).subtract(new k(d,y))}var _=e.mapFromSnapSystem(d+e.positionOffset.x,m,l,!0),w=e.mapFromSnapSystem(y+e.positionOffset.y,g,l,!0);return _=Math.round(_),w=Math.round(w),i.forEach((function(t){var n=Math.round(e.centerSnapValue(t,f));t.isVisible=n===w})),o.forEach((function(t){var n=Math.round(e.centerSnapValue(t,p));t.isVisible=n===_})),new k(_,w).add(u)}return{x:d,y:y}},this.editor=t,this.configStore=t.configStore,this.state=Ln(Bs),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}return t.prototype.hidePositionGuides=function(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map((function(t){return y(y({},t),{isVisible:!1})})),this.state.horizontalGuides=this.state.horizontalGuides.map((function(t){return y(y({},t),{isVisible:!1})}))},t.prototype.hideRotationGuides=function(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map((function(t){return y(y({},t),{isVisible:!1})}))},Object.defineProperty(t.prototype,"positionGuides",{get:function(){var t=this.state;return x(t.verticalGuides,t.horizontalGuides)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationGuides",{get:function(){return this.state.rotationGuides},enumerable:!0,configurable:!0}),m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"snapToRotation",void 0),m([Lr],t.prototype,"snapToPosition",void 0),m([Lr],t.prototype,"hidePositionGuides",null),m([Lr],t.prototype,"hideRotationGuides",null),m([Vn],t.prototype,"positionGuides",null),m([Vn],t.prototype,"rotationGuides",null),t}();function Us(t,e){return void 0===e&&(e=!1),new Promise((function(n,r){var i=new Image;i.addEventListener("load",(function(){var r=null;if(e){var o=document.createElement("canvas"),a=o.getContext("2d"),s=150*i.height/i.width;o.width=150,o.height=s,a.drawImage(i,0,0,150,s),r=o.toDataURL()}n({image:t,smallImage:r})})),i.addEventListener("error",(function(){r()})),i.src=t}))}function Ws(t,e){var n=this;return void 0===e&&(e=!1),new Promise((function(r,i){var o=new FileReader;o.onload=function(o){return v(n,void 0,void 0,(function(){return b(this,(function(n){return Us(o.target.result,e).then((function(e){r(y(y({},e),{name:t.name||"",type:t.type,id:R()}))})).catch((function(t){i(t)})),[2]}))}))},o.readAsDataURL(t)}))}var Hs={identifier:"identity",opacity:1,tintColor:je.white,tintMode:"none",resizeMode:"keepAspect"},Vs={},Gs=function(){function t(t){var e=this;this.state=Ln.map(Vs),this.customStickerIds=[],this.colorList=ul.defaultColors,this.changeOpacity=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{opacity:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.opacity=r.opacity,e.state.set(e.id,n)}}},this.changeTintColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){var r=e.entityManager.items.find((function(t){return t.identifier===e.identifier})).tintMode;e.editor.spriteStore.setContainerProperties(e.id,{tintColor:t,tintMode:r});var i=e.editor.spriteStore.getContainerProperties(e.id);n.tintColor=i.tintColor,n.tintMode=i.tintMode||Hs.tintMode,e.state.set(e.id,n)}}},this.tintColorSnapshot=function(){e.addSnapshot(Ui.EDIT,e.locale.history.color)},this.editor=t,this.selectedCategory="identity";var n=this.config,r=this.editor.assetProvider.getAssets("sticker");this.entityManager=new Gi(r,y(y({},n),{categoryKey:"thumbnailURI",categoryDynamicKey:"thumbnail",itemKey:"stickerURI",itemDynamicKey:"sticker",locale:y(y({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),this.config.colors&&this.config.colors.length>0&&(this.colorList=Fe(Qr(this.config.colors)))}return t.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},t.prototype.doesStickerAssetExist=function(t){return-1!==this.entityManager.items.findIndex((function(e){return e.identifier===t}))},t.prototype.add=function(t){var e=this.entityManager.items.find((function(e){return e.identifier===t})),n=e?e.tintMode:Hs.tintMode,r=e?e.resizeMode:Hs.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:n,tintColor:Hs.tintColor,opacity:Hs.opacity,resizeMode:r}})},t.prototype.duplicate=function(){if(this.id){var t=this.editor.spriteStore.getDuplicateContainerTransform(this.id),e=this.editor.spriteStore.getDuplicateContainerFlip(this.id),n=this.editor.outputContainer.getData(),r=n.flipHorizontally,i=n.flipVertically;this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:Qr(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:r!==e.flipHorizontally,flipVertically:i!==e.flipVertically},transform:t})}},t.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},t.prototype.flipHorizontally=function(){this.id&&this.editor.spriteStore.flipHorizontally(this.id)},t.prototype.delete=function(){if(this.id){var t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},t.prototype.updateStateFromHistory=function(t,e){this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)},t.prototype.setState=function(t,e){var n=this.state.get(t);n?("opacity"in e&&(n.opacity=e.opacity),e.tintColor&&(n.tintColor=e.tintColor),e.tintMode&&(n.tintMode=e.tintMode),e.resizeMode&&(n.resizeMode=e.resizeMode),this.state.set(t,n)):this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:Hs.tintColor})},t.prototype.addFiles=function(t){return v(this,void 0,void 0,(function(){var e,n,r;return b(this,(function(i){switch(i.label){case 0:if(this.editor.modalStore.showInfoModal("loading"),!t.length)return[3,4];for(e=0,n=[],e=0;e<t.length;e+=1)n.push(Ws(t[e],!0));i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return r=i.sent(),this.addCustomStickerAsset(r),[3,4];case 3:return i.sent(),this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading"),[3,4];case 4:return[2]}}))}))},t.prototype.addCustomStickerAsset=function(t){return v(this,void 0,void 0,(function(){var e,n,r,i,o=this;return b(this,(function(a){switch(a.label){case 0:return e=t.map((function(t){return{sticker:t.image,thumbnailURI:t.smallImage,name:t.name,tintMode:o.customStickerTintMode,resizeMode:"keepAspect",identifier:t.id,type:t.type}})),this.customStickerIds=this.customStickerIds.concat(e.map((function(t){return{identifier:t.identifier,type:t.type}}))),n=this.locale.categories.imgly_sticker_custom,this.editor.assetProvider.addCustomStickerAsset(e,"imgly_sticker_custom",n),r=this.editor.assetProvider.getAssets("sticker"),i=this.config,this.entityManager=new Gi(r,y(y({},i),{categoryKey:"thumbnailURI",categoryDynamicKey:"thumbnail",itemDynamicKey:"thumbnailURI",itemKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=Hs.identifier,[4,this.editor.wait()];case 1:return a.sent(),this.selectedCategory="imgly_sticker_custom",this.editor.modalStore.hideModal(),[2]}}))}))},t.prototype.toolSnapshot=function(){this.addSnapshot(Ui.EDIT,this.locale.history.opacity)},t.prototype.addSnapshot=function(t,e){this.currentSticker&&this.editor.spriteStore.addSnapshot(t,e)},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory===t?"identity":t},t.prototype.pureReset=function(){this.state=Ln.map(Vs)},Object.defineProperty(t.prototype,"isStickerSelected",{get:function(){return this.editor.spriteStore.isSpriteSticker},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCustomStickerEnabled",{get:function(){return this.config.enableCustomUpload},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customStickerTintMode",{get:function(){return this.config.customStickerTintMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSticker",{get:function(){if(this.isStickerSelected){var t=this.state.get(this.id);if(t)return t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){if(this.isStickerSelected){var t=this.state.get(this.id);if(t)return t.identifier}return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){if(this.isStickerSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.currentSticker?this.currentSticker.opacity:Hs.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintMode",{get:function(){return this.currentSticker?this.currentSticker.tintMode:Hs.tintMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizeMode",{get:function(){return this.currentSticker?this.currentSticker.resizeMode:Hs.resizeMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintable",{get:function(){return!!this.currentSticker&&("solid"===this.currentSticker.tintMode||"colorized"===this.currentSticker.tintMode)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintColor",{get:function(){return this.currentSticker?this.currentSticker.tintColor:Hs.tintColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.STICKER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.STICKER]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.getCategories(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),m([Ln],t.prototype,"selectedCategory",void 0),m([Lr],t.prototype,"selectLast",null),m([Lr],t.prototype,"add",null),m([Lr],t.prototype,"duplicate",null),m([Lr],t.prototype,"bringToFront",null),m([Lr],t.prototype,"flipHorizontally",null),m([Lr],t.prototype,"delete",null),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"setState",null),m([Lr],t.prototype,"changeOpacity",void 0),m([Lr],t.prototype,"changeTintColor",void 0),m([Lr],t.prototype,"addFiles",null),m([Lr],t.prototype,"addCustomStickerAsset",null),m([Lr],t.prototype,"toggleCategorySelection",null),m([Lr],t.prototype,"pureReset",null),m([Vn],t.prototype,"isStickerSelected",null),m([Vn],t.prototype,"isCustomStickerEnabled",null),m([Vn],t.prototype,"customStickerTintMode",null),m([Vn],t.prototype,"currentSticker",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"id",null),m([Vn],t.prototype,"opacity",null),m([Vn],t.prototype,"tintMode",null),m([Vn],t.prototype,"resizeMode",null),m([Vn],t.prototype,"tintable",null),m([Vn],t.prototype,"tintColor",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"localeColor",null),m([Vn],t.prototype,"selectedCategoryIdentifier",null),m([Vn],t.prototype,"entities",null),m([Vn],t.prototype,"categories",null),t}(),Zs={text:"Write Something",identifier:"imgly_font_open_sans_bold",fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:je.white,backgroundColor:je.transparent||[0,0,0,0],width:0},Xs={},qs={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},Ys=function(){function t(t){var e=this;this.state=Ln.map(Xs),this.colorList=ul.defaultColors,this.backgroundColorList=ul.defaultBackgroundColors,this.loadingObservable=Ln.box(!1),this.validFontWithConfig=function(t){return e.fonts.find((function(e){return e.identifier===t}))||e.fonts[0]},this.add=function(){e.loadfonts((function(){e.editor.spriteStore.addText({state:{identifier:Zs.identifier,text:Zs.text,textColor:Zs.textColor,backgroundColor:Zs.backgroundColor,lineHeight:Zs.lineHeight,alignment:Zs.alignment,fontSize:0}})}))},this.setEditMode=function(t){e.editor.spriteStore.setEditMode(t)},this.changeFont=function(t){var n=e.fonts.find((function(e){return e.identifier===t}));e.changeIdentifier(n,e.id),e.id&&e.addSnapshot(Ui.EDIT,e.locale.history.fontFamily)},this.changeIdentifier=function(t,n){Br((function(){if(t&&n){var r=e.state.get(n);if(r){e.editor.spriteStore.setContainerProperties(n,{fontIdentifier:t.identifier},!0);var i=e.editor.spriteStore.getContainerProperties(n);r.identifier=i.fontIdentifier,r.fontFamily=t.fontFamily,r.fontStyle=t.fontStyle,r.fontWeight=t.fontWeight,r.fontSize=i.fontSize,r.width=i.width,r.defaultFontSize=r.fontSize,e.state.set(n,r)}}}))},this.changeFontSize=function(t,n){if(void 0===n&&(n=!1),e.id){var r=e.state.get(e.id);r&&(r.fontSize=t,n&&(r.defaultFontSize=t),e.state.set(e.id,r))}},this.updateDefaultFontSize=function(){if(e.id){var t=e.state.get(e.id);t&&(t.defaultFontSize=t.fontSize,e.state.set(e.id,t))}},this.changeSize=function(t,n){var r=e.state.get(t);r&&(r.width=n.width,r.fontSize=n.fontSize,r.defaultFontSize=n.fontSize,e.state.set(t,r))},this.changeWidth=function(t){if(e.id){var n=e.state.get(e.id);n&&(n.width=t,e.state.set(e.id,n))}},this.changeText=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{text:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id),i=e.editor.outputContainer.getSizeInOutputSpace(),o=e.editor.spriteStore.getSize(e.id);e.config.disableAutoScaling||o.height>i.height&&e.editor.spriteStore.setContainerProperties(e.id,{fontSize:e.calculateFitFontSize(e.id,i.height)},!0),r=e.editor.spriteStore.getContainerProperties(e.id),n.text=r.text,n.fontSize=r.fontSize,n.defaultFontSize=r.fontSize,e.state.set(e.id,n),e.addSnapshot(Ui.EDIT,e.locale.history.edit)}}},this.changeLineHeight=function(t){if(e.id){var n=e.state.get(e.id);if(n&&t){e.editor.spriteStore.setContainerProperties(e.id,{lineHeight:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id);n.lineHeight=r.lineHeight,e.state.set(e.id,n)}}},this.changeColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{textColor:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.textColor=r.textColor,e.state.set(e.id,n)}}},this.changeBackgroundColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{backgroundColor:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.backgroundColor=r.backgroundColor,e.state.set(e.id,n)}}},this.colorSnapshot=function(){e.addSnapshot(Ui.EDIT,e.locale.history.textColor)},this.backgroundColorSnapshot=function(){e.addSnapshot(Ui.EDIT,e.locale.history.backgroundColor)},this.changeAlignment=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{alignment:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.alignment=r.alignment,e.state.set(e.id,n),e.addSnapshot(Ui.EDIT,e.locale.history.alignment)}}},this.setFontSize=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{fontSize:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id);n.fontSize=r.fontSize,n.defaultFontSize=r.fontSize,e.state.set(e.id,n)}}},this.editor=t,this.fonts.find((function(t){return t.identifier===Zs.identifier}))||(Zs.identifier=this.fonts[0].identifier),Zs.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=Fe(Qr(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=Fe(Qr(this.config.backgroundColors)))}return t.defaultText=function(){return Zs.text},t.getDisplayFontStyle=function(t){var e=t.fontWeight&&"regular"!==qs[t.fontWeight].toLowerCase()?qs[t.fontWeight]:"",n=t.fontStyle&&"normal"!==t.fontStyle.toLowerCase()?t.fontStyle:"";return((t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e)+" "+n).trim()},t.prototype.loadfonts=function(t){var e=this;if(this.fontsLoaded)t();else{var n=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForText().map((function(t){return t.identifier}));n.loadFontsWithIdentifiers(r).then((function(){e.loadingObservable.set(!0),t()})).catch((function(t){console.error(t),e.editor.modalStore.showActionModal({type:F.ERROR,identifier:"fontLoading",error:t})}))}},t.prototype.doesTextAssetExist=function(t){return-1!==this.editor.assetProvider.getFontAssets().findIndex((function(e){return e.identifier===t}))},t.prototype.addOrselect=function(){this.state.size?this.selectLast():this.add()},t.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},t.prototype.duplicate=function(){if(this.id){var t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:Qr(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:Qr(this.backgroundColor),width:this.width},transform:t})}},t.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},t.prototype.delete=function(){if(this.id){var t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},t.prototype.calculateFitFontSize=function(e,n){if(!t.measureContext){var r=document.createElement("canvas");t.measureContext=r.getContext("2d")}for(var i=this.editor.spriteStore.getContainerProperties(e),o=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier),a=this.config.minFontSizeForAutoScaling,s=be(t.measureContext,i.text,o,i.fontSize,i.lineHeight,i.width,o.textMetrics),l=Math.min(Math.floor(i.fontSize*(n/s.height)),1),u=Math.round(i.fontSize),c=0,f=u-l,p=Math.floor(2*(u-l)),h=f;c<=p;){f=c+Math.floor((p-c)/2);var d=be(t.measureContext,i.text,o,f,i.lineHeight,i.width,o.textMetrics);if(n<d.height)p=f-1,h=f-1;else{if(!(n>d.height)){h=f;break}if(c=f+1,l+f>=u)return u}}return a&&h<a?a:h},t.prototype.toolSnapshot=function(){this.addSnapshot(Ui.EDIT,this.locale.history.lineSpacing)},t.prototype.addSnapshot=function(t,e){this.currentText&&this.editor.spriteStore.addSnapshot(t,e)},t.prototype.updateStateFromHistory=function(t,e){this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)},t.prototype.setState=function(t,e){var n=this.state.get(t);if(n)e.alignment&&(n.alignment=e.alignment),e.text&&(n.text=e.text),e.lineHeight&&(n.lineHeight=e.lineHeight),e.textColor&&(n.textColor=e.textColor),e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.fontIdentifier&&(n.identifier=e.fontIdentifier),e.fontSize&&(n.fontSize=e.fontSize,n.defaultFontSize=e.fontSize),e.width&&(n.width=e.width);else{var r=this.validFontWithConfig(e.fontIdentifier);r&&this.state.set(t,{text:e.text,identifier:r.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:Zs.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:Zs.backgroundColor,fontFamily:r.fontFamily,fontStyle:r.fontStyle,fontSize:e.fontSize,fontWeight:r.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}},t.prototype.pureReset=function(){this.state=Ln.map(Xs)},Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.editor.spriteStore.isEditMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTextSelected",{get:function(){return this.editor.spriteStore.isSpriteText},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontsLoaded",{get:function(){return this.loadingObservable.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentText",{get:function(){if(this.isTextSelected){var t=this.state.get(this.id);if(t)return t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.currentText?this.currentText.text:Zs.text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.currentText?this.currentText.fontSize:Zs.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultFontSize",{get:function(){return this.currentText?this.currentText.defaultFontSize:Zs.defaultFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.currentText?this.currentText.width:Zs.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.currentText?this.currentText.fontFamily:Zs.fontFamily},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.currentText?this.currentText.fontStyle:Zs.fontStyle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.currentText?this.currentText.fontWeight:Zs.fontWeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this.currentText?this.currentText.lineHeight:Zs.lineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.currentText?this.currentText.identifier:Zs.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){if(this.isTextSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this.currentText?this.currentText.alignment:Zs.alignment},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this.currentText?this.currentText.textColor:Zs.textColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.currentText?this.currentText.backgroundColor:Zs.backgroundColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.TEXT]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.TEXT]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawOptions",{get:function(){return this.editor.assetProvider.getFontAssetsForText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fonts",{get:function(){var t=this;return this.rawOptions.reduce((function(e,n){return t.rawOptions.find((function(t){return t.identifier===n.identifier}))?x(e,[{identifier:n.identifier,fontFamily:n.fontFamily,fontStyle:n.fontStyle||"",fontWeight:n.fontWeight||""}]):e}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamilies",{get:function(){return x(new Set(this.fonts))},enumerable:!0,configurable:!0}),m([Lr],t.prototype,"addOrselect",null),m([Lr],t.prototype,"selectLast",null),m([Lr],t.prototype,"add",void 0),m([Lr],t.prototype,"duplicate",null),m([Lr],t.prototype,"bringToFront",null),m([Lr],t.prototype,"delete",null),m([Lr],t.prototype,"setEditMode",void 0),m([Lr],t.prototype,"changeFont",void 0),m([Lr],t.prototype,"changeIdentifier",void 0),m([Lr],t.prototype,"changeFontSize",void 0),m([Lr],t.prototype,"updateDefaultFontSize",void 0),m([Lr],t.prototype,"changeSize",void 0),m([Lr],t.prototype,"changeWidth",void 0),m([Lr],t.prototype,"changeText",void 0),m([Lr],t.prototype,"changeLineHeight",void 0),m([Lr],t.prototype,"changeColor",void 0),m([Lr],t.prototype,"changeBackgroundColor",void 0),m([Lr],t.prototype,"changeAlignment",void 0),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"setState",null),m([Lr],t.prototype,"setFontSize",void 0),m([Lr],t.prototype,"pureReset",null),m([Vn],t.prototype,"isEditMode",null),m([Vn],t.prototype,"isTextSelected",null),m([Vn],t.prototype,"fontsLoaded",null),m([Vn],t.prototype,"currentText",null),m([Vn],t.prototype,"text",null),m([Vn],t.prototype,"fontSize",null),m([Vn],t.prototype,"defaultFontSize",null),m([Vn],t.prototype,"width",null),m([Vn],t.prototype,"fontFamily",null),m([Vn],t.prototype,"fontStyle",null),m([Vn],t.prototype,"fontWeight",null),m([Vn],t.prototype,"lineHeight",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"id",null),m([Vn],t.prototype,"alignment",null),m([Vn],t.prototype,"textColor",null),m([Vn],t.prototype,"backgroundColor",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"localeColor",null),m([Vn],t.prototype,"rawOptions",null),m([Vn],t.prototype,"fonts",null),m([Vn],t.prototype,"fontFamilies",null),t}(),Ks={identifier:"imgly_text_design_blocks",color:je.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},Qs={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},Js={},$s=function(){function t(t){var e=this;this.state=Ln.map(Js),this.colorList=ul.defaultColors,this.fontsLoaded=!1,this.add=function(){e.loadfonts((function(){e.editor.spriteStore.addTextDesign({state:{identifier:Ks.identifier,text:Ks.text,color:Ks.color,isInverted:Ks.isInverted,seed:Qs[Ks.identifier]||Ks.seed,padding:0}})}))},this.changeText=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{text:t},!0);var r=e.editor.spriteStore.getContainerProperties(e.id);n.text=r.text,e.state.set(e.id,n),e.addSnapshot(Ui.EDIT,e.locale.history.edit)}}},this.setEditMode=function(t){e.editor.spriteStore.setEditMode(t)},this.changeSeed=function(){if(e.id){var t=e.state.get(e.id);if(t){e.editor.spriteStore.setContainerProperties(e.id,{seed:-1},!0);var n=e.editor.spriteStore.getContainerProperties(e.id);t.seed=n.seed,e.state.set(e.id,t),e.addSnapshot(Ui.EDIT,e.locale.history.shuffle)}}},this.changeIdentifier=function(t,n,r,i){if(void 0===n&&(n=!0),void 0===r&&(r=null),void 0===i&&(i=e.id),i&&t!==e.identifier){var o=e.state.get(i),a=e.editor.spriteStore.getContainerTransform(i);e.editor.spriteStore.addTextDesign({spriteId:i,state:{identifier:t,text:o.text,color:Qr(o.color),isInverted:o.isInverted,seed:r||Qs[t]||o.seed,padding:o.padding,width:o.width},transform:a},n,!0)}},this.changeColor=function(t){if(e.id){var n=e.state.get(e.id);if(n){e.editor.spriteStore.setContainerProperties(e.id,{color:t});var r=e.editor.spriteStore.getContainerProperties(e.id);n.color=r.color,e.state.set(e.id,n)}}},this.colorSnapshot=function(){e.addSnapshot(Ui.EDIT,e.locale.history.color)},this.invertBackground=function(){if(e.id){var t=e.state.get(e.id);if(t){e.editor.spriteStore.setContainerProperties(e.id,{inverted:!t.isInverted},!0);var n=e.editor.spriteStore.getContainerProperties(e.id);t.isInverted=n.inverted,e.state.set(e.id,t),e.addSnapshot(Ui.EDIT,e.locale.history.invert)}}},this.changeWidth=function(t){if(e.id){var n=e.state.get(e.id);n&&(n.width=t,e.state.set(e.id,n))}},this.changePadding=function(t){if(e.id){var n=e.state.get(e.id);n&&(n.padding=t,e.state.set(e.id,n))}},this.editor=t,this.entityManager=new Gi([{identifier:"",name:"",items:this.editor.assetProvider.getAssets("textdesign")}],y(y({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find((function(t){return t.identifier===Ks.identifier}))||(Ks.identifier=this.entityManager.items[0].identifier),Ks.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=Fe(Qr(this.config.colors)))}return t.defaultText=function(){return Ks.text},t.prototype.loadfonts=function(t){var e=this;if(this.fontsLoaded)t();else{var n=this.editor.assetProvider.getFontManager(),r=this.editor.assetProvider.getFontAssetsForTextDesign().map((function(t){return t.identifier}));n.loadFontsWithIdentifiers(r).then((function(){e.fontsLoaded=!0,t()})).catch((function(t){console.error(t),e.editor.modalStore.showActionModal({type:F.ERROR,identifier:"fontLoading",error:r[0]})}))}},t.prototype.doesTextDesignAssetExist=function(t){return-1!==this.entityManager.items.findIndex((function(e){return e.identifier===t}))},t.prototype.addOrselect=function(){this.state.size?this.selectLast():this.add()},t.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},t.prototype.updateStateFromHistory=function(t,e){var n=this.state.get(t);e.identifier===n.identifier?(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)):this.changeIdentifier(e.identifier,!1,e.seed,t)},t.prototype.setState=function(t,e){var n=this.state.get(t);n?(e.inverted&&(n.isInverted=e.inverted),e.seed&&(n.seed=e.seed),e.color&&(n.color=e.color),e.padding&&(n.padding=e.padding),e.width&&(n.width=e.width)):this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:Ks.color,padding:e.padding})},t.prototype.duplicate=function(){if(this.id){var t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:Qr(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}},t.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},t.prototype.addSnapshot=function(t,e){this.currentTextDesign&&this.editor.spriteStore.addSnapshot(t,e)},t.prototype.delete=function(t){void 0===t&&(t=this.id),t&&(this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast())},t.prototype.pureReset=function(){this.state=Ln.map(Js)},Object.defineProperty(t.prototype,"isTextDesignSelected",{get:function(){return this.editor.spriteStore.isSpriteTextDesign},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.editor.spriteStore.isEditMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTextDesign",{get:function(){if(this.isTextDesignSelected&&this.id){var t=this.state.get(this.id);if(t)return t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){if(this.isTextDesignSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.currentTextDesign?this.currentTextDesign.text:Ks.text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.currentTextDesign?this.currentTextDesign.seed:Ks.seed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.currentTextDesign?this.currentTextDesign.padding:Ks.padding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.currentTextDesign?this.currentTextDesign.width:Ks.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.currentTextDesign?this.currentTextDesign.identifier:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInverted",{get:function(){return this.currentTextDesign?this.currentTextDesign.isInverted:Ks.isInverted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.currentTextDesign?this.currentTextDesign.color:Ks.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.TEXT_DESIGN]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.TEXT_DESIGN]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),m([Lr],t.prototype,"addOrselect",null),m([Lr],t.prototype,"selectLast",null),m([Lr],t.prototype,"add",void 0),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"setState",null),m([Lr],t.prototype,"changeText",void 0),m([Lr],t.prototype,"setEditMode",void 0),m([Lr],t.prototype,"duplicate",null),m([Lr],t.prototype,"bringToFront",null),m([Lr],t.prototype,"delete",null),m([Lr],t.prototype,"changeSeed",void 0),m([Lr],t.prototype,"changeIdentifier",void 0),m([Lr],t.prototype,"changeColor",void 0),m([Lr],t.prototype,"invertBackground",void 0),m([Lr],t.prototype,"changeWidth",void 0),m([Lr],t.prototype,"changePadding",void 0),m([Lr],t.prototype,"pureReset",null),m([Vn],t.prototype,"isTextDesignSelected",null),m([Vn],t.prototype,"isEditMode",null),m([Vn],t.prototype,"currentTextDesign",null),m([Vn],t.prototype,"id",null),m([Vn],t.prototype,"text",null),m([Vn],t.prototype,"seed",null),m([Vn],t.prototype,"padding",null),m([Vn],t.prototype,"width",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"isInverted",null),m([Vn],t.prototype,"color",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"localeColor",null),m([Vn],t.prototype,"entities",null),t}(),tl=function(t){return{height:t.y,width:t.x}},el={},nl={x:0,y:0},rl=function(){function t(t){var e=this;this.state=Ln.map(el),this.selectedId=Ln.box("none"),this.editMode=Ln.box(!1),this.dragMode=Ln.box(!1),this.minLength=0,this.setEditMode=function(t){e.currentSprite&&-1!==[P.TEXT,P.TEXT_DESIGN].indexOf(e.tool)&&(t?e.editor.modalStore.showTextEditModal():e.editor.modalStore.hideModal(),e.editMode.set(t))},this.onWidthDrag=function(t){var n=t.x,r=t.y,i=new k(e.currentSprite.position),o=new k(n,r).subtract(i).magnitude,a=e.editor.previewToWorld(2*o);if(a>e.minLength&&(e.setContainerProperties(e.id,{width:a},!0),e.isSpriteText)){var s=e.getContainerProperties(e.id);e.textToolStore.changeWidth(s.width)}},this.onPaddingDrag=function(t){var n=t.x,r=t.y;if(e.isSpriteTextDesign){var i=e.getContainerProperties(e.id),o=new k(e.currentSprite.position),a=new k(n,r).subtract(o).magnitude,s=Math.max(e.editor.previewToWorld(a)-i.width/2,0);e.setContainerProperties(e.id,{padding:s},!0),e.isSpriteTextDesign&&(i=e.getContainerProperties(e.id),e.textDesignToolStore.changePadding(i.padding))}},this.correctTextFlip=function(){var t=e.editor.outputContainer.getData(),n=t.flipHorizontally,r=t.flipVertically;Object.values(e.container).forEach((function(t){"text"!==t.type&&"text-design"!==t.type||(t.setFlipHorizontally(n),t.setFlipVertically(r))}))},this.reverseTextHorizontally=function(){Object.values(e.container).forEach((function(t){"text"!==t.type&&"text-design"!==t.type||t.setFlipHorizontally(!t.getFlipHorizontally())}))},this.reverseTextVertically=function(){Object.values(e.container).forEach((function(t){"text"!==t.type&&"text-design"!==t.type||t.setFlipVertically(!t.getFlipVertically())}))},this.updatePositionAndSize=function(t,n){void 0===t&&(t=e.id),void 0===n&&(n=!1);var r=e.getSizePositionFromContainer(t),i=r.position,o=r.size,a=e.state.get(t);if(a){if(a.position.x=i.x,a.position.y=i.y,a.size.width=o.width,a.size.height=o.height,n){var s=e.container[t].getRotation();e.container[t].setRotation(s),a.rotation=e.container[t].getRotation()}e.state.set(t,a)}},this.getSize=function(t){void 0===t&&(t=e.id);var n=e.container[t];return n?e.editor.worldSizeToPreview(n.getSizeInWorldSpace()):{width:0,height:0}},this.editor=t,this.container={},this.stickerToolStore=new Gs(t),this.textToolStore=new Ys(t),this.textDesignToolStore=new $s(t),this.rect=new bl(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}return t.magnitude=function(t,e){return new k(t,e||t).magnitude},t.sizeMagnitude=function(t){return Math.sqrt(t.width*t.width+t.height*t.height)},t.prototype.addSticker=function(t,e){return void 0===e&&(e=!0),v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,this.addStickerAsync(t,e)];case 1:return n.sent(),[2]}}))}))},t.prototype.addStickerAsync=function(e,n){var r=e.spriteId,i=e.state,o=e.transform;return void 0===n&&(n=!0),v(this,void 0,void 0,(function(){var e=this;return b(this,(function(a){return[2,new Promise((function(a,s){o=e.getInitialTransform(o);var l=i.identifier,u=e.editor.orderHelper.addSprite(l);e.editor.engine.addStickerFromAssets(l,e.editor.engineMediator.image.container,u).then((function(s){return v(e,void 0,void 0,(function(){var e,u,c,f,p,h,d,g,m;return b(this,(function(v){switch(v.label){case 0:return r&&s.setData({id:r}),e=s.getID(),this.container[e]=s,this.editor.orderHelper.renameSprite(l,e),(u=this.getSize(e)).width*=s.getScale().x,u.height*=s.getScale().y,s.setPivot(.5,.5),o.scale?c=o.scale:o.size?c={x:o.size.width/u.width,y:o.size.height/u.height}:(f=.4*this.editor.shortestOutputSide,p=t.magnitude(f)/t.sizeMagnitude(s.getSizeInWorldSpace()),c={x:p,y:p}),h=this.editor.outputContainer.getData(),d=h.flipHorizontally,g=h.flipVertically,s.setFlipHorizontally(d),s.setFlipVertically(g),s.setTransform({position:o.position,scale:c,rotation:o.rotation}),void 0!==i.flipHorizontally&&s.setFlipHorizontally(i.flipHorizontally!==d),void 0!==i.flipVertically&&s.setFlipVertically(i.flipVertically!==g),this.setContainerProperties(e,y({},i)),m=s.getData(),this.setInitialSpriteState(e,P.STICKER),this.stickerToolStore.setState(e,y(y({},m),{identifier:l})),[4,this.editor.renderPromise()];case 1:return v.sent(),n&&(this.selectedId.set(e),this.addSnapshot(Ui.ADD,this.stickerLocale.add)),a(),[2]}}))}))})).catch((function(t){console.error(t),s()}))}))]}))}))},t.prototype.addText=function(t,e){return void 0===e&&(e=!0),v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,this.addTextAsync(t,e)];case 1:return n.sent(),[2]}}))}))},t.prototype.addTextAsync=function(t,e){var n=this,r=t.spriteId,i=t.state,o=t.transform;return void 0===e&&(e=!0),new Promise((function(t,a){o=n.getInitialTransform(o);var s=n.editor.orderHelper.addSprite(i.identifier),l=n.editor.shortestOutputSide,u={fontIdentifier:i.identifier,text:i.text,width:i.width||.6*l,fontSize:i.fontSize||.1*l,lineHeight:i.lineHeight,alignment:i.alignment,textColor:i.textColor,backgroundColor:i.backgroundColor};i.backgroundColor===Zs.backgroundColor&&delete u.backgroundColor,n.editor.engine.addTextWithFontLoading(u,n.editor.engineMediator.image.container,s).then((function(a){return v(n,void 0,void 0,(function(){var n,s,l,u,c;return b(this,(function(f){switch(f.label){case 0:return r&&a.setData({id:r}),n=a.getID(),this.container[n]=a,this.editor.orderHelper.renameSprite(i.identifier,this.id),s=this.editor.outputContainer.getData(),l=s.flipHorizontally,u=s.flipVertically,a.setFlipHorizontally(l),a.setFlipVertically(u),a.setPivot(.5,.5),a.setPosition(o.position),a.setRotation(o.rotation),this.setInitialSpriteState(n,P.TEXT),c=a.getData(),this.textToolStore.setState(n,y({},c)),[4,this.editor.renderPromise()];case 1:return f.sent(),e&&(this.selectedId.set(n),this.addSnapshot(Ui.ADD,this.textLocale.add)),t(),[2]}}))}))})).catch((function(t){console.error(t),a()}))}))},t.prototype.addTextDesign=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!1),v(this,void 0,void 0,(function(){return b(this,(function(r){switch(r.label){case 0:return[4,this.addTextDesignAsync(t,e,n)];case 1:return r.sent(),[2]}}))}))},t.prototype.addTextDesignAsync=function(t,e,n){var r=this,i=t.spriteId,o=t.state,a=t.transform;return void 0===e&&(e=!0),void 0===n&&(n=!1),new Promise((function(t,s){a=r.getInitialTransform(a);var l=r.editor.orderHelper.addSprite(o.identifier),u=r.editor.shortestOutputSide,c={width:o.width||.6*u,text:o.text,color:o.color,inverted:o.isInverted,seed:o.seed,padding:o.padding};r.editor.engine.addTextDesignAsync(o.identifier,c,r.editor.engineMediator.image.container,l).then((function(s){return v(r,void 0,void 0,(function(){var r,l,u,c,f;return b(this,(function(p){switch(p.label){case 0:return i&&(n&&(this.pureRemoveSprite(i),this.textDesignToolStore.state.delete(i)),s.setData({id:i})),r=s.getID(),this.container[r]=s,this.editor.orderHelper.renameSprite(o.identifier,this.id),l=this.editor.outputContainer.getData(),u=l.flipHorizontally,c=l.flipVertically,s.setFlipHorizontally(u),s.setFlipVertically(c),s.setPivot(.5,.5),s.setPosition(a.position),s.setRotation(a.rotation),this.setInitialSpriteState(r,P.TEXT_DESIGN),f=s.getData(),this.textDesignToolStore.setState(r,y(y({},f),{identifier:o.identifier})),[4,this.editor.renderPromise()];case 1:return p.sent(),e&&(this.selectedId.set(r),this.addSnapshot(Ui.ADD,this.textDesignLocale.add)),t(),[2]}}))}))})).catch((function(t){console.error(t),s()}))}))},t.prototype.spriteLocalTransform=function(){return{position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.setContainerProperties=function(t,e,n){void 0===n&&(n=!1),this.container[t].setData(e),n&&this.updatePositionAndSize(),this.editor.render()},t.prototype.setContainerPosition=function(t,e){this.container[t].setPosition(e)},t.prototype.pureRemoveSprite=function(t){return this.editor.engine.removeContainer(this.container[t]),-1===this.container[t].getIndexInParent()&&(delete this.container[t],this.state.delete(t),this.editor.orderHelper.removeSprite(t),!0)},t.prototype.deleteSprite=function(t){void 0===t&&(t=this.id);var e=this.state.get(t);e.tool===P.STICKER?this.stickerToolStore.delete():e.tool===P.TEXT?this.textToolStore.delete():e.tool===P.TEXT_DESIGN&&this.textDesignToolStore.delete()},t.prototype.removeSprite=function(t){this.pureRemoveSprite(t)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.spriteSnapshot=function(t){this.addSnapshot(Ui.EDIT,this.historyLocale[t])},t.prototype.updateStateFromHistory=function(t){return v(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,l,u,c,f,p=this;return b(this,(function(h){switch(h.label){case 0:if(e=Object.keys(this.container),(n=t.spriteIdList).length===e.length)return[3,9];r=e.filter((function(t){return-1===n.indexOf(t)})),i=n.filter((function(t){return-1===e.indexOf(t)})),r.forEach((function(t){p.pureRemoveSprite(t)})),o=0,h.label=1;case 1:return o<i.length?(a=i[o],s=t.common?t.common[a]:void 0,l=t.text?t.text[a]:void 0,u=t.sticker?t.sticker[a]:void 0,c=t.textdesign?t.textdesign[a]:void 0,s?(f={spriteId:a,transform:{size:s.size?tl(k.fromSize(s.size)):void 0,position:new k(s.position),rotation:s.rotation}},l?[4,this.addNewText(f,l)]:[3,3]):[3,7]):[3,8];case 2:return h.sent(),[3,7];case 3:return c?[4,this.addNewTextDesign(f,c)]:[3,5];case 4:return h.sent(),[3,7];case 5:return u?[4,this.addNewSticker(f,y(y({},u),{flipHorizontally:s.flipHorizontally,flipVertically:s.flipVertically}))]:[3,7];case 6:h.sent(),h.label=7;case 7:return o+=1,[3,1];case 8:return[3,10];case 9:this.updateSpriteStateFromHistory(t),h.label=10;case 10:return[2]}}))}))},t.prototype.addNewText=function(t,e){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return this.textToolStore.doesTextAssetExist(e.identifier)?[4,this.addTextAsync(y(y({},t),{state:e}),!1)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new Error("Text identifier "+e.identifier+" doesn't exist");case 3:return[2]}}))}))},t.prototype.addNewTextDesign=function(t,e){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return this.textDesignToolStore.doesTextDesignAssetExist(e.identifier)?[4,this.addTextDesignAsync(y(y({},t),{state:e}),!1)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new Error("TextDesign identifier "+e.identifier+" doesn't exist");case 3:return[2]}}))}))},t.prototype.addNewSticker=function(t,e){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return this.stickerToolStore.doesStickerAssetExist(e.identifier)?[4,this.addStickerAsync(y(y({},t),{state:e}),!1)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new Error("Sticker identifier "+e.identifier+" doesn't exist");case 3:return[2]}}))}))},t.prototype.updateSpriteStateFromHistory=function(t){return v(this,void 0,void 0,(function(){var e=this;return b(this,(function(n){return Object.keys(this.container).forEach((function(n){var r=t.common?t.common[n]:void 0,i=t.sticker?t.sticker[n]:void 0,o=t.text?t.text[n]:void 0,a=t.textdesign?t.textdesign[n]:void 0,s=e.state.get(n);if(s&&r){e.state.set(n,s);var l=e.container[n];l.setPosition(new k(r.position)),l.setRotation(r.rotation),s.rotation=l.getRotation(),void 0!==r.flipHorizontally&&l.setFlipHorizontally(r.flipHorizontally),void 0!==r.flipVertically&&l.setFlipVertically(r.flipVertically),i?(l.setSizeInWorldSpace(r.size),e.stickerToolStore.updateStateFromHistory(n,i)):o?e.textToolStore.updateStateFromHistory(n,y(y({},o),{fontIdentifier:o.identifier})):a&&e.textDesignToolStore.updateStateFromHistory(n,y(y({},a),{inverted:a.isInverted})),e.updatePositionAndSize(n)}})),[2]}))}))},t.prototype.getSpriteHistoryState=function(){var t,e=this,n=Qr(this.state),r=Qr(this.textToolStore.state),i=Qr(this.textDesignToolStore.state),o=((t={common:n})[P.STICKER]=Qr(this.stickerToolStore.state),t[P.TEXT]=r,t[P.TEXT_DESIGN]=i,t.spriteIdList=Object.keys(this.container),t);return Object.keys(o.common).forEach((function(t){o.common[t].size=e.container[t].getSizeInWorldSpace(),o.common[t].position=e.container[t].getPosition(),o.common[t].order=e.container[t].getIndexInParent()})),o},t.prototype.updateStateFromSerialization=function(t,e){return v(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,u,c,f,p,h,d,g,m,v,_;return b(this,(function(b){switch(b.label){case 0:if(!e||!e.length)return[3,5];b.label=1;case 1:return b.trys.push([1,4,,5]),n=e.map((function(t){return Us(t.raster.data,!0)})),[4,Promise.all(n)];case 2:return r=b.sent(),[4,this.stickerToolStore.addCustomStickerAsset(e.map((function(t,e){return{image:r[e].image,smallImage:r[e].smallImage,name:t.name,type:t.raster.type,id:t.identifier}})))];case 3:return b.sent(),[3,5];case 4:return b.sent(),this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading"),[3,5];case 5:i=0,b.label=6;case 6:return i<t.spriteIdList.length?(o=t.spriteIdList[i],a=t.common?t.common[o]:void 0,s=t.sticker?t.sticker[o]:void 0,l=t.text?t.text[o]:void 0,u=t.textdesign?t.textdesign[o]:void 0,a?((c=a.size)&&(c={width:this.editor.worldToPreview(a.size.width),height:this.editor.worldToPreview(a.size.height)}),f=this.editor.outputContainer.getData(),p=f.flipHorizontally,h=f.flipVertically,d=this.editor.outputContainer.getRotation(),g=h!==p?a.rotation-d:a.rotation+d,m=h!==p?-g:g,v={spriteId:o,transform:{size:c,position:a.position,rotation:m}},l?(_=this.textToolStore.validFontWithConfig(l.identifier),l.identifier=null==_?void 0:_.identifier,[4,this.addNewText(v,l)]):[3,8]):[3,12]):[3,13];case 7:return b.sent(),[3,12];case 8:return u?[4,this.addNewTextDesign(v,u)]:[3,10];case 9:return b.sent(),[3,12];case 10:return s?[4,this.addNewSticker(v,y(y({},s),{flipHorizontally:a.flipHorizontally,flipVertically:a.flipVertically}))]:[3,12];case 11:b.sent(),b.label=12;case 12:return i+=1,[3,6];case 13:return[2]}}))}))},Object.defineProperty(t.prototype,"serializableState",{get:function(){var t=this,e=this.editor.spriteStore.getSpriteHistoryState();Object.keys(e.common).forEach((function(n){var r=t.editor.outputContainer.getData(),i=r.flipHorizontally,o=r.flipVertically,a=t.editor.outputContainer.getRotation(),s=o!==i?-e.common[n].rotation:e.common[n].rotation;e.common[n].rotation=o!==i?s+a:s-a}));var n=this.editor.spriteStore.stickerToolStore.customStickerIds.map((function(e){var n=e.identifier,r=e.type,i=t.editor.spriteStore.stickerToolStore.entities.find((function(t){return n===t.identifier}));if(i){var o=t.editor.assetProvider.getStickerAsset(i.identifier);if(q(o))return{identifier:n,raster:{type:r,name:i.name,data:o.sticker}}}})).filter(Boolean);return{sprite:e,customStickers:n}},enumerable:!0,configurable:!0}),t.prototype.updateCanvasControls=function(){var t=this;Object.keys(this.container).forEach((function(e){t.updatePositionAndSize(e,!0);var n=t.state.get(e);if(n)if(n.tool===P.TEXT){var r=t.getContainerProperties(e);t.textToolStore.changeSize(e,r)}else n.tool===P.TEXT_DESIGN&&(r=t.getContainerProperties(e),t.textToolStore.changeWidth(r.width))}))},t.prototype.setDragMode=function(t){this.dragMode.set(t)},t.prototype.setPosition=function(t){var e=this.currentSprite,n=this.container[this.id];if(e&&n){n.setPosition(this.editor.previewToWorld(t));var r=this.getSizePositionFromContainer().position;e.position.x=r.x,e.position.y=r.y,this.state.set(this.id,e),this.editor.render()}},t.prototype.setSize=function(t){var e=this.currentSprite;e&&(e.size.width=t.width,e.size.height=t.height,this.state.set(this.id,e))},t.prototype.setRotation=function(t){var e=this.currentSprite;if(e){var n=this.editor.outputContainer.getData(),r=n.flipHorizontally,i=n.flipVertically,o=this.editor.outputContainer.getRotation(),a=Se({rotation:t+o,flipHorizontally:r,flipVertically:i});this.container[this.id].setRotation(a),e.rotation=this.container[this.id].getRotation(),this.state.set(this.id,e),this.editor.render()}},t.prototype.onCanvasClick=function(t){this.isEditMode||this.selectHighestOrderSprite(t)},t.prototype.select=function(t){var e=this.state.get(t);e&&(this.editor.activeStore.tool!==e.tool&&this.editor.activeStore.selectTool(e.tool),this.selectedId.set(t))},t.prototype.selectLast=function(){var t=this.editor.orderHelper.getLastSpriteId();t&&this.select(t)},t.prototype.selectNext=function(){var t=this;if(this.currentSprite){var e=this.container[this.id].getIndexInParent();if(e){var n=Object.keys(this.container).find((function(n){return t.container[n].getIndexInParent()===e-1}));n&&this.select(n)}}},t.prototype.deselect=function(){this.selectedId.set("none")},t.prototype.bringToFront=function(t){var e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e),this.spriteSnapshot("order"),this.editor.render()},t.prototype.flipHorizontally=function(t){var e=this.state.get(t),n=this.container[t];n.setFlipHorizontally(!n.getFlipHorizontally()),e.flipHorizontally=n.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(t,e),this.editor.render()},t.prototype.pureReset=function(){var t=this;this.selectedId.set("none"),Array.from(this.state.keys()).forEach((function(e){t.pureRemoveSprite(e)})),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()},t.prototype.selectHighestOrderSprite=function(t){var e=this,n=this.editor.brushToolStore.containerId();if((t=t.filter((function(t){return t!==n}))).length<1)this.deselect();else{var r="",i=0;t.forEach((function(t){var n=e.container[t],o=n&&n.getIndexInParent()||0;o>=i&&(i=o,r=t)})),this.select(r)}},t.prototype.onCornerDrag=function(e){var n=e.x,r=e.y;if(this.currentSprite){var i=new k(this.currentSprite.position),o=new k(n,r),a=o.subtract(i).magnitude,s=this.getSize(),l=2*a/t.sizeMagnitude(s);if(a>this.minLength)if(this.isSpriteSticker)if("unrestricted"!==this.stickerToolStore.resizeMode)this.setStickerSize({width:s.width*l,height:s.height*l});else{var u=this.rotationWRTOutputRotation,c=o.subtract(i),f=Math.cos(u),p=Math.sin(u),h=Math.max(Math.abs(c.x*f*2+c.y*p*2),this.minLength),d=Math.max(Math.abs(c.x*-p*2+c.y*f*2),this.minLength);this.setStickerSize({width:h,height:d})}else this.isSpriteText?this.setTextSize(s.width*l):this.isSpriteTextDesign&&this.setTextDesignScale(l);this.editor.render()}},Object.defineProperty(t.prototype,"currentSprite",{get:function(){if(this.isSpriteSelected)return this.state.get(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.textDesignToolStore.padding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditMode",{get:function(){return this.editMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDragMode",{get:function(){return this.dragMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.selectedId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteSelected",{get:function(){return"none"!==this.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){if(this.currentSprite)return this.currentSprite.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tool",{get:function(){if(this.currentSprite)return this.currentSprite.tool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){if(this.currentSprite)return this.currentSprite.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){if(this.currentSprite)return this.currentSprite.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationWRTOutputRotation",{get:function(){if(this.currentSprite){var t=this.editor.outputContainer.getData(),e=t.flipHorizontally,n=t.flipVertically,r=this.editor.outputContainer.getRotation();return Se({rotation:this.currentSprite.rotation-r,flipHorizontally:e,flipVertically:n})}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipHorizontal",{get:function(){if(this.currentSprite)return this.currentSprite.flipHorizontally},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteSticker",{get:function(){return this.tool===P.STICKER},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteText",{get:function(){return this.tool===P.TEXT},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpriteTextDesign",{get:function(){return this.tool===P.TEXT_DESIGN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spritePosition",{get:function(){if(this.currentSprite){var t=this.currentSprite.position,e=t.x,n=t.y,r=this.currentSprite.size,i=r.height,o=r.width;return{x:Math.round(e-o/2),y:Math.round(n-i/2)}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentRect",{get:function(){if(this.currentSprite)return this.rect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTopPosition",{get:function(){if(this.currentSprite)return this.rect.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomPosition",{get:function(){if(this.currentSprite)return this.rect.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMidPosition",{get:function(){if(this.currentSprite)return this.rect.leftMid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMidPadPosition",{get:function(){if(this.currentSprite){var t=this.rect.leftMid;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTopPosition",{get:function(){if(this.currentSprite)return this.rect.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomPosition",{get:function(){if(this.currentSprite)return this.rect.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMidPosition",{get:function(){if(this.currentSprite)return this.rect.rightMid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMidPadPosition",{get:function(){if(this.currentSprite){var t=this.rect.rightMid;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomHandlePosition",{get:function(){if(this.currentSprite)return this.rect.leftBottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomHandlePosition",{get:function(){if(this.currentSprite)return this.rect.rightBottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"historyLocale",{get:function(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickerLocale",{get:function(){return this.editor.configStore.locale[P.STICKER].history},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textLocale",{get:function(){return this.editor.configStore.locale[P.TEXT].history},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textDesignLocale",{get:function(){return this.editor.configStore.locale[P.TEXT_DESIGN].history},enumerable:!0,configurable:!0}),t.prototype.getOutputProperties=function(){return this.editor.outputContainer.getData()},t.prototype.getContainerProperties=function(t){return this.container[t].getData()},t.prototype.getContainerTransform=function(t){return this.container[t].getTransform()},t.prototype.getDuplicateContainerTransform=function(t){var e=this.container[t].getTransform(),n=.1*this.editor.shortestOutputSide,r=new k(e.position).add(new k(n,n));return y(y({},e),{position:r})},t.prototype.getDuplicateContainerFlip=function(t){return{flipHorizontally:this.container[t].getFlipHorizontally(),flipVertically:this.container[t].getFlipVertically()}},t.prototype.getInitialTransform=function(t){var e=this.editor.outputToWorld(nl);return t?y({position:e},t):{rotation:this.editor.outputContainer.getRotation(),position:e}},t.prototype.setInitialSpriteState=function(t,e){var n=this.container[t],r=this.getSizePositionFromContainer(t),i=r.position,o=r.size,a=n.getRotation(),s=e===P.STICKER&&n.getFlipHorizontally(),l=e===P.STICKER&&n.getFlipVertically();this.state.set(t,{tool:e,position:i,rotation:a,size:o,flipHorizontally:s,flipVertically:l})},t.prototype.setStickerSize=function(t){var e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));var n=this.currentSprite;n&&(n.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace()),this.state.set(this.id,n))},t.prototype.setTextSize=function(t){var e=this.getContainerProperties(this.id),n={width:this.editor.previewToWorld(t)},r=n.width/e.width,i={fontSize:Math.round(e.fontSize*r)},o=this.isSpriteText?y(y({},n),i):n;n.width>this.minLength&&i.fontSize&&(this.setContainerProperties(this.id,o,!0),e=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(e.fontSize,!0),this.textToolStore.changeWidth(e.width))},t.prototype.setTextDesignScale=function(t){var e=this.getContainerProperties(this.id),n=e.width*t;if(n>this.minLength){this.setContainerProperties(this.id,{width:n},!0);var r=this.getContainerProperties(this.id).width;this.textDesignToolStore.changeWidth(r),e=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(e.padding)}},t.prototype.getSizePositionFromContainer=function(t){void 0===t&&(t=this.id);var e=this.container[t];return e?{position:this.editor.worldToPreview(e.getPosition()),size:this.editor.worldSizeToPreview(e.getSizeInWorldSpace())}:{position:{x:0,y:0},size:{height:1,width:1}}},m([Lr],t.prototype,"addSticker",null),m([Lr],t.prototype,"addStickerAsync",null),m([Lr],t.prototype,"addText",null),m([Lr],t.prototype,"addTextAsync",null),m([Lr],t.prototype,"addTextDesign",null),m([Lr],t.prototype,"addTextDesignAsync",null),m([Lr],t.prototype,"clickableCanvas",null),m([Lr],t.prototype,"setContainerProperties",null),m([Lr],t.prototype,"setContainerPosition",null),m([Lr],t.prototype,"pureRemoveSprite",null),m([Lr],t.prototype,"deleteSprite",null),m([Lr],t.prototype,"removeSprite",null),m([Lr],t.prototype,"addSnapshot",null),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"addNewText",null),m([Lr],t.prototype,"addNewTextDesign",null),m([Lr],t.prototype,"addNewSticker",null),m([Lr],t.prototype,"updateSpriteStateFromHistory",null),m([Lr],t.prototype,"updateStateFromSerialization",null),m([Lr],t.prototype,"updateCanvasControls",null),m([Lr],t.prototype,"setEditMode",void 0),m([Lr],t.prototype,"setDragMode",null),m([Lr],t.prototype,"setPosition",null),m([Lr],t.prototype,"setSize",null),m([Lr],t.prototype,"setRotation",null),m([Lr],t.prototype,"onCanvasClick",null),m([Lr],t.prototype,"select",null),m([Lr],t.prototype,"selectLast",null),m([Lr],t.prototype,"selectNext",null),m([Lr],t.prototype,"deselect",null),m([Lr],t.prototype,"bringToFront",null),m([Lr],t.prototype,"flipHorizontally",null),m([Lr],t.prototype,"pureReset",null),m([Lr],t.prototype,"onCornerDrag",null),m([Lr],t.prototype,"onWidthDrag",void 0),m([Lr],t.prototype,"onPaddingDrag",void 0),m([Lr],t.prototype,"correctTextFlip",void 0),m([Lr],t.prototype,"reverseTextHorizontally",void 0),m([Lr],t.prototype,"reverseTextVertically",void 0),m([Vn],t.prototype,"currentSprite",null),m([Vn],t.prototype,"padding",null),m([Vn],t.prototype,"isEditMode",null),m([Vn],t.prototype,"isDragMode",null),m([Vn],t.prototype,"id",null),m([Vn],t.prototype,"isSpriteSelected",null),m([Vn],t.prototype,"position",null),m([Vn],t.prototype,"tool",null),m([Vn],t.prototype,"size",null),m([Vn],t.prototype,"rotation",null),m([Vn],t.prototype,"rotationWRTOutputRotation",null),m([Vn],t.prototype,"flipHorizontal",null),m([Vn],t.prototype,"isSpriteSticker",null),m([Vn],t.prototype,"isSpriteText",null),m([Vn],t.prototype,"isSpriteTextDesign",null),m([Vn],t.prototype,"spritePosition",null),m([Vn],t.prototype,"currentRect",null),m([Vn],t.prototype,"leftTopPosition",null),m([Vn],t.prototype,"leftBottomPosition",null),m([Vn],t.prototype,"leftMidPosition",null),m([Vn],t.prototype,"leftMidPadPosition",null),m([Vn],t.prototype,"rightTopPosition",null),m([Vn],t.prototype,"rightBottomPosition",null),m([Vn],t.prototype,"rightMidPosition",null),m([Vn],t.prototype,"rightMidPadPosition",null),m([Vn],t.prototype,"leftBottomHandlePosition",null),m([Vn],t.prototype,"rightBottomHandlePosition",null),m([Vn],t.prototype,"historyLocale",null),m([Vn],t.prototype,"stickerLocale",null),m([Vn],t.prototype,"textLocale",null),m([Vn],t.prototype,"textDesignLocale",null),t}(),il={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},ol={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:Ln.map({})},al=function(){function t(t,e){this.minCropSize=0,this.state=ol,this.configStore=t.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=e}return t.prototype.changeIdentifier=function(t){this.state.identifier=t,this.state.cropState.get(t)||this.state.cropState.set(t,y({},il))},t.prototype.changeRatio=function(t){var e=this.state.cropState.get(this.identifier);e&&this.state.cropState.set(this.identifier,y(y({},e),{ratio:t}))},t.prototype.changeSize=function(t){var e=this.state.cropState.get(this.identifier);e&&(t.width&&t.width>0&&(e.size.width=Math.round(t.width)),t.height&&t.height>0&&(e.size.height=Math.round(t.height)),this.state.cropState.set(this.identifier,e))},t.prototype.changeHeight=function(t){var e=this.state.cropState.get(this.identifier);e&&t&&(e.size.height=Math.round(t),this.state.cropState.set(this.identifier,e))},t.prototype.changeWidth=function(t){var e=this.state.cropState.get(this.identifier);e&&t&&(e.size.width=Math.round(t),this.state.cropState.set(this.identifier,e))},t.prototype.changePositionX=function(t,e){var n=this.state.cropState.get(this.identifier);return!!(n&&t<=e-this.minCropSize&&t>=0)&&(n.position.x=Math.round(t),this.state.cropState.set(this.identifier,n),!0)},t.prototype.changePositionY=function(t,e){var n=this.state.cropState.get(this.identifier);return!!(n&&t<=e-this.minCropSize&&t>=0)&&(n.position.y=Math.round(t),this.state.cropState.set(this.identifier,n),!0)},t.prototype.changePosition=function(t,e){var n=this.state.cropState.get(this.identifier);return!!(n&&t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0)&&(n.position.x=Math.round(t.x),n.position.y=Math.round(t.y),this.state.cropState.set(this.identifier,n),!0)},t.prototype.changeLockResolution=function(t){var e=this.state.cropState.get(this.identifier);e&&(e.lockResolution=void 0!==t?t:!e.lockResolution,this.state.cropState.set(this.identifier,e))},t.prototype.changeForceDimensions=function(t){var e=this.state.cropState.get(this.identifier);e&&(e.forceDimensions=t,this.state.cropState.set(this.identifier,e))},t.prototype.setRotation=function(t){this.state.rotationInDegrees=t},t.prototype.resetRotation=function(){this.state.rotationInDegrees=0},t.prototype.resetOutputRotation=function(){this.state.outputRotation=0},t.prototype.resetFlip=function(){this.state.flipHorizontally=!1,this.state.flipVertically=!1},t.prototype.updateFlip=function(t){var e=t.flipHorizontally,n=t.flipVertically;this.state.flipHorizontally=e,this.state.flipVertically=n},t.prototype.setOutputRotation=function(t){this.state.outputRotation=t},t.prototype.flipHorizontally=function(){this.state.flipHorizontally=!this.state.flipHorizontally},t.prototype.flipVertically=function(){this.state.flipVertically=!this.state.flipVertically},Object.defineProperty(t.prototype,"flipCenter",{get:function(){var t=this.defaults.maxCropMaskSize,e=t.width,n=t.height;return new k(e/2,n/2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedHorizontal",{get:function(){return this.state.flipHorizontally},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedVertical",{get:function(){return this.state.flipVertically},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.selectedCrop?this.selectedCrop.size.height:il.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.selectedCrop?this.selectedCrop.size.width:il.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.selectedCrop?this.selectedCrop.position:il.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ratio",{get:function(){return this.selectedCrop?this.selectedCrop.ratio:il.ratio},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.selectedCrop?this.selectedCrop.size:il.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.selectedCrop?this.selectedCrop.position.x:il.position.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.selectedCrop?this.selectedCrop.position.y:il.position.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockResolution",{get:function(){return this.selectedCrop?this.selectedCrop.lockResolution:il.lockResolution},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceDimensions",{get:function(){return this.selectedCrop?this.selectedCrop.forceDimensions:il.forceDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCrop",{get:function(){return this.state.cropState.get(this.identifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationInDegrees",{get:function(){return this.state.rotationInDegrees},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputRotation",{get:function(){return this.state.outputRotation},enumerable:!0,configurable:!0}),m([Ln],t.prototype,"state",void 0),m([Lr],t.prototype,"changeIdentifier",null),m([Lr],t.prototype,"changeRatio",null),m([Lr],t.prototype,"changeSize",null),m([Lr],t.prototype,"changeHeight",null),m([Lr],t.prototype,"changeWidth",null),m([Lr],t.prototype,"changePositionX",null),m([Lr],t.prototype,"changePositionY",null),m([Lr],t.prototype,"changePosition",null),m([Lr],t.prototype,"changeLockResolution",null),m([Lr],t.prototype,"changeForceDimensions",null),m([Lr],t.prototype,"setRotation",null),m([Lr],t.prototype,"resetRotation",null),m([Lr],t.prototype,"resetOutputRotation",null),m([Lr],t.prototype,"resetFlip",null),m([Lr],t.prototype,"updateFlip",null),m([Lr],t.prototype,"setOutputRotation",null),m([Lr],t.prototype,"flipHorizontally",null),m([Lr],t.prototype,"flipVertically",null),m([Vn],t.prototype,"flipCenter",null),m([Vn],t.prototype,"isFlippedHorizontal",null),m([Vn],t.prototype,"isFlippedVertical",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"height",null),m([Vn],t.prototype,"width",null),m([Vn],t.prototype,"position",null),m([Vn],t.prototype,"ratio",null),m([Vn],t.prototype,"size",null),m([Vn],t.prototype,"x",null),m([Vn],t.prototype,"y",null),m([Vn],t.prototype,"lockResolution",null),m([Vn],t.prototype,"forceDimensions",null),m([Vn],t.prototype,"selectedCrop",null),m([Vn],t.prototype,"rotationInDegrees",null),m([Vn],t.prototype,"outputRotation",null),t}(),sl=function(){function t(t){this.transforms={output:JSON.stringify(S.IDENTITY),preview:JSON.stringify(S.IDENTITY)},this.editor=t,this.overlayOpacity=0,this.frameOpacity=0}return t.rotateOutput=function(t,e){switch(t%=360){case 90:case-270:return e.swapped.multiply(-1,1);case 180:case-180:return e.multiply(-1);case 270:case-90:return e.swapped.multiply(1,-1);default:return e}},t.prototype.onLeave=function(){var t=this.transformToolStore.rotateFlipState,e=t.flipHorizontally,n=t.flipVertically,r=t.rotation,i=t.outputRotation;"identity"!==this.editor.overlayToolStore.identifier&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),"identity"!==this.editor.frameToolStore.identifier&&this.editor.frameToolStore.changeOpacity(this.frameOpacity);var o=this.editor.previewToWorld(new k(this.transformToolStore.leftTopRespectFlip).add(new k(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new k(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),a=this.engineMediator.preview.container,s=this.editor.outputContainer;s.setResolution(Qr(this.transformToolStore.localOutputImageSize)),s.setData({flipVertically:n,flipHorizontally:e});var l=a.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();var u=1;if(this.transformToolStore.lockResolution){var c=this.transformToolStore,f=c.cropMaskSize,p=c.defaultImageSize,h=this.transformToolStore.maxCropMaskSize;f.height,p.height,h.height,u=f.width*p.width/h.width/this.transformToolStore.localOutputImageSize.width}var d=u/(Math.abs(l.x)/this.transformToolStore.defaultScale),y={x:d,y:d},g=-(r-i);s.setTransform({scale:y,position:o,rotation:g}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()},t.prototype.onEnter=function(){"identity"!==this.editor.overlayToolStore.identifier&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),"identity"!==this.editor.frameToolStore.identifier&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.scale.setScaleToDefault();var t=this.engineMediator.preview.container,e=this.editor.outputContainer,n=JSON.parse(this.transforms.preview);e.setResolution(Qr(this.transformToolStore.defaultImageSize)),t.setTransform(n),e.setTransform(JSON.parse(this.transforms.output));var r=n.scale;e.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:r.y<0,flipHorizontally:r.x<0}),this.engineMediator.preview.savePreviewTransform(n);var i=this.engineMediator.preview.calculateTransform().scale;this.editor.scale.setInitialTransform(i.x)},t.prototype.rotateOutputContainer=function(t){var e=this;void 0===t&&(t=!1),this.editor.outputContainer.rotate90(t),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());var n=this.transformToolStore.rotateFlipState.rotation;this.engineMediator.preview.updateTransform(n),Br((function(){e.editor.scale.setInitialTransform();var t=e.getScaleWithFlip(n);e.engineMediator.preview.container.setScale(t),e.transformToolStore.setCropDefaults(!0),e.transformToolStore.updateCropMask()})),this.editor.render()},t.prototype.applyPreviewTransform=function(){var t=this.transformToolStore.rotateFlipState,e=t.rotation,n=t.flipHorizontally,r=t.flipVertically,i=this.editor.scale.getPositionWithOffset(),o=this.getScaleWithFlip(),a=e;n&&(a=Oe(a)),r&&(a=Oe(a));var s={position:i,rotation:a,scale:o};this.engineMediator.preview.savePreviewTransform(s),this.engineMediator.preview.container.setTransform(s)},t.prototype.getScaleWithFlip=function(t){void 0===t&&(t=this.transformToolStore.rotateFlipState.rotation);var e=this.transformToolStore.rotateFlipState,n=e.flipHorizontally?-1:1,r=e.flipVertically?-1:1,i=this.editor.scale.calculateScale(t);return{x:i*n,y:i*r}},t.prototype.saveTransforms=function(){var t=JSON.stringify(this.engineMediator.preview.container.getTransform()),e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}},t.prototype.saveTransformsBasedOnFlip=function(){var t=this.engineMediator.preview.container.getTransform(),e=t.scale,n=this.editor.outputContainer.getData(),r=n.flipVertically,i=n.flipHorizontally,o=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(y(y({},t),{scale:{x:i?-e.x:e.x,y:r?-e.y:e.y}})),output:o}},Object.defineProperty(t.prototype,"engineMediator",{get:function(){return this.editor.engineMediator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformToolStore",{get:function(){return this.editor.transformToolStore},enumerable:!0,configurable:!0}),t}(),ll=function(){function t(e){var n=this;this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1},this.defaultAngle=0,this.dragMode=Ln.box(!1),this.minCropSize=0,this.localSnapshotEnabled=!0,this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1},this.localOutputSize={width:0,height:0},this.checkIfTransformThumbnailExits=function(t){var e=n.editor.configStore.config.assetBaseUrl;if("/"!==e[e.length-1]&&(e+="/"),e+"transform"===t)return!1;var r=new Image;try{return r.src=t,!0}catch(t){return!1}},this.reset=function(){n.transformStore.resetRotation(),n.transformStore.resetOutputRotation(),n.transformStore.resetFlip(),n.editor.spriteStore.correctTextFlip(),n.editor.overlayToolStore.correctOverlayFlip(),n.setDefaultAngle(0),0!==n.editor.outputContainer.getRotation()&&n.engineMediator.output.applyNewImageTransform(),n.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),n.engineMediator.preview.updateTransform(),n.editor.scale.setInitialTransform(),n.setCropDefaults(),n.applyInitialCrop(),n.editor.render()},this.changeLocalOutputSize=function(t){n.localOutputSize.height=Math.round(t.height),n.localOutputSize.width=Math.round(t.width)},this.changeDefaultScale=function(t){n.defaults.scale=t},this.changeLocalOutputHeight=function(t){n.localOutputSize.height=Math.round(t)},this.changeLocalOutputWidth=function(t){n.localOutputSize.width=Math.round(t)},this.changeLockResolution=function(){n.transformStore.changeLockResolution(),n.addLocalSnapshot()},this.rotateClockwise=function(){n.rotateOutputContainer(n.isFlippedVertical!==n.isFlippedHorizontal)},this.rotateAntiClockwise=function(){n.rotateOutputContainer(n.isFlippedVertical===n.isFlippedHorizontal)},this.flipHorizontally=function(t){void 0===t&&(t=!0),n.transformStore.flipHorizontally(),n.editor.spriteStore.reverseTextHorizontally(),n.transformRender(t),t&&n.addLocalSnapshot()},this.flipVertically=function(t){void 0===t&&(t=!0),n.transformStore.flipVertically(),n.editor.spriteStore.reverseTextVertically(),n.transformRender(t),t&&n.addLocalSnapshot()},this.applyDefaultCrop=function(t){if(void 0===t&&(t=!1),"identity"===n.identifier){var e=n.getMatchingItem().identifier;n.changeIdentifier(e,t)}},this.updateCropMask=function(){n.changeIdentifier(n.identifier,!0)},this.onLeftTop=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.rightBottom,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.min(Math.max(0,e),o.x-s.width),c=Math.min(Math.max(0,r),o.y-s.height),f=o.x-u,p=o.y-c,h={width:Math.max(n.minCropSize,Math.min(f,l.width-u)),height:Math.max(n.minCropSize,Math.min(p,l.height-c))};if("*"===i)n.changePosition({x:u,y:c})&&n.changeCropAndOutputSize(h);else{var d=n.proportionalSize(i,h),y=new k(o).rounded.subtract({x:d.width,y:d.height});n.changePosition(y)&&n.changeCropAndOutputSize(d)}},this.onLeftBottom=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.rightTop,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.min(Math.max(0,e),o.x-s.width),c=Math.max(0,r,o.y+s.height),f=o.x-u,p=c-o.y,h={width:Math.max(1,Math.min(f,l.width-u)),height:Math.max(1,Math.min(p,l.height-o.y))};if("*"===i)n.changeCropAndOutputSize(h)&&n.changePositionX(u);else{var d=n.proportionalSize(i,h);n.changePositionX(Math.round(o.x)-d.width)&&n.changeCropAndOutputSize(d)}},this.onRightTop=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.leftBottom,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.max(0,e,o.x+s.width),c=Math.min(Math.max(0,r),o.y-s.height),f=u-o.x,p=o.y-c,h={width:Math.max(1,Math.min(f,l.width-o.x)),height:Math.max(1,Math.min(p,l.height-c))};if("*"===i)n.changePositionY(c)&&n.changeCropAndOutputSize(h);else{var d=n.proportionalSize(i,h);n.changePositionY(Math.round(o.y)-d.height)&&n.changeCropAndOutputSize(d)}},this.onRightBottom=function(t){var e=t.x,r=t.y,i=n.getRatio(),o=n.leftTop,a=n,s=a.minCropMaskSize,l=a.maxCropMaskSize,u=Math.max(0,e,o.x+s.width),c=Math.max(0,r,o.y+s.height),f=u-o.x,p=c-o.y,h={width:Math.max(1,Math.min(f,l.width-o.x)),height:Math.max(1,Math.min(p,l.height-o.y))};if("*"===i)n.changeCropAndOutputSize(h);else{var d=n.proportionalSize(i,h);n.changeCropAndOutputSize(d)}},this.onPixelWidth=function(e){var r=JSON.stringify(Qr(n.localOutputSize)),i=n.entityManager.items.find((function(t){return t.identifier===n.identifier})),o=n.defaults.imageSize;if(i&&i.ratio){var a=e,s=n.localOutputSize.height,l=i.ratio;if("*"===l&&n.lockResolution&&(l=n.localOutputSize.width/n.localOutputSize.height),"*"!==l||n.lockResolution){var u=t.placeCropMask(l,o);s=(a=Math.max(Math.min(a,u.width),n.minCropSize))/l,n.changeLocalOutputSize({height:s,width:a})}else a=Math.max(Math.min(e,o.width),n.minCropSize),n.changeLocalOutputWidth(a);return n.lockResolution||n.updatePreviewSizeWRTImageSize(),n.checkAndAddSnapshot(JSON.parse(r)),Math.round(a)}return e},this.onPixelHeight=function(e){var r=JSON.stringify(Qr(n.localOutputSize)),i=n.entityManager.items.find((function(t){return t.identifier===n.identifier})),o=n.defaults.imageSize;if(i&&i.ratio){var a=e,s=n.localOutputSize.width,l=i.ratio;if("*"===l&&n.lockResolution&&(l=n.localOutputSize.width/n.localOutputSize.height),"*"!==l||n.lockResolution){var u=t.placeCropMask(l,o);s=(a=Math.max(Math.min(a,u.height),n.minCropSize))*l,n.changeLocalOutputSize({height:a,width:s})}else a=Math.max(Math.min(e,o.height),n.minCropSize),n.changeLocalOutputHeight(a);return n.lockResolution||n.updatePreviewSizeWRTImageSize(),n.checkAndAddSnapshot(JSON.parse(r)),Math.round(a)}return e},this.closestRatioReducer=function(t){return function(e,n){return e.ratio&&"number"==typeof e.ratio||n.ratio&&"number"==typeof n.ratio?n.ratio&&"number"==typeof n.ratio?e.ratio&&"number"==typeof e.ratio&&Math.abs(t-e.ratio)<Math.abs(t-n.ratio)?e:n:e:{}}},this.closestDimensionsReducer=function(t){return function(e,n){if((!e.dimensions||e.ratio)&&(!n.dimensions||n.ratio))return{};if(!n.dimensions||n.ratio)return e;if(!e.dimensions||e.ratio)return n;var r=Math.abs(e.dimensions.x/e.dimensions.y),i=Math.abs(n.dimensions.x/n.dimensions.y);return r===i?e.dimensions.x*e.dimensions.y>n.dimensions.x*n.dimensions.y?e:n:Math.abs(t-r)<Math.abs(t-i)?e:n}},this.getMatchingItem=function(){var t=n.entityManager.items.findIndex((function(t){return"imgly_transform_common_custom"===t.identifier}));if(-1!==t)return n.entityManager.items[t];var e=n.entityManager.items.findIndex((function(t){return"*"===t.ratio}));if(-1!==e)return n.entityManager.items[e];var r=Qr(n.editor.outputContainer.getResolution()),i=Math.abs(r.width/r.height),o=n.entityManager.items.reduce(n.closestRatioReducer(i)),a=n.entityManager.items.reduce(n.closestDimensionsReducer(i));if(!Object.prototype.hasOwnProperty.call(o,"ratio")&&!Object.prototype.hasOwnProperty.call(a,"dimensions"))return n.entityManager.items[0];if(!Object.prototype.hasOwnProperty.call(a,"dimensions"))return o;if(!Object.prototype.hasOwnProperty.call(o,"ratio"))return a;var s=Math.abs(a.dimensions.x/a.dimensions.y);return s===o.ratio||Math.abs(i-o.ratio)<Math.abs(i-s)?o:a},this.getTransform=function(t){var e=n.entityManager.items.find((function(e){return e.identifier===t}));return e||(e=n.getMatchingItem()),e},this.editor=e,this.selectedCategory="identity",this.transformStore=new al(e,this.defaults),this.transformations=new sl(e);var r=this.config,i=(r.enableRotation,r.enableFlip,g(r,["enableRotation","enableFlip"])),o=this.editor.assetProvider.getAssets("transform");this.entityManager=new Gi(o,y(y({},i),{categoryKey:"",itemKey:"thumbnailURI",locale:y(y({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new bl(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new bl(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}return t.inRadians=function(t){return t*Math.PI/180},t.placeCropMask=function(t,e){if(e.height*t>e.width)return{height:e.width/t,width:e.width,yChanged:!0};var n=e.height*t;return{height:e.height,width:n,yChanged:!1}},t.prototype.changeIdentifier=function(t,e){void 0===e&&(e=!1),this.transformStore.changeIdentifier(t);var n=this.getCropMask(t,this.defaults.imageSize);n&&(this.transformStore.changeRatio(n.ratio),this.changeLocalOutputSize(n),this.updatePreviewSizeWRTImageSize(),void 0!==n.yChanged&&this.updateInitialCropMaskPosition(n.yChanged),n.dimensions&&this.changeLocalOutputSize({width:n.dimensions.x,height:n.dimensions.y}),e&&this.addLocalSnapshot())},t.prototype.setDragMode=function(t){this.dragMode.set(t)},t.prototype.getCropMask=function(e,n){var r=this.getTransform(e);if(r){var i=r.ratio,o=r.forceDimensions,a=r.lockDimensions,s=r.dimensions,l=void 0===s?null:s;if(o&&this.transformStore.changeForceDimensions(o),a&&this.transformStore.changeLockResolution(a),!i){var u=r.dimensions,c=u.x,f=u.y;return y(y({},t.placeCropMask(c/f,n)),{ratio:null,dimensions:l})}switch(i){case"*":return this.changePosition({x:0,y:0}),y(y({},n),{yChanged:void 0,ratio:"*",dimensions:l});default:return y(y({},t.placeCropMask(r.ratio,n)),{ratio:r.ratio,dimensions:l})}}return null},t.prototype.setCropDefaults=function(t){void 0===t&&(t=!1);var e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);var n=this.editor.getPreviewSize(),r=this.editor.engineMediator.preview.previewTransformWithoutDpr.position;this.setMaxCropSize(n),this.setDefaultCropPosition({x:r.x-n.width/2,y:r.y-n.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),t||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)},t.prototype.setDefaultImageSize=function(t){this.defaults.imageSize=y({},Qr(t)),this.lockResolution||(this.localOutputSize=y({},Qr(t)))},t.prototype.setMaxCropSize=function(t){this.defaults.maxCropMaskSize.height=t.height,this.defaults.maxCropMaskSize.width=t.width},t.prototype.setDefaultCropPosition=function(t){this.defaults.cropMaskPosition.x=t.x,this.defaults.cropMaskPosition.y=t.y},t.prototype.resetCrop=function(){this.state.cropState=Ln.map({}),this.state.identifier="identity"},t.prototype.toggleCategorySelection=function(t){this.selectedCategory=this.selectedCategory===t?"identity":t},t.prototype.pureReset=function(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.resetCrop()},t.prototype.changePosition=function(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)},t.prototype.changePositionX=function(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)},t.prototype.changePositionY=function(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)},t.prototype.changeCropAndOutputHeight=function(t){return!!(t&&t>=this.minCropSize)&&(this.transformStore.changeHeight(t),this.lockResolution||this.changeLocalOutputHeight(t*this.defaults.imageSize.height/this.defaults.maxCropMaskSize.height),!0)},t.prototype.changeCropAndOutputWidth=function(t){return!!(t&&t>=this.minCropSize)&&(this.transformStore.changeWidth(t),this.lockResolution||this.changeLocalOutputWidth(t*this.defaults.imageSize.width/this.defaults.maxCropMaskSize.width),!0)},t.prototype.changeCropAndOutputSize=function(t){return{widthChanged:this.changeCropAndOutputHeight(t.height),heightChanged:this.changeCropAndOutputWidth(t.width)}},t.prototype.transformRender=function(t){void 0===t&&(t=!0),this.transformations.applyPreviewTransform(),t&&this.editor.render()},t.prototype.addLocalSnapshot=function(t){if(void 0===t&&(t="Local "+this.locale.title),this.localSnapshotEnabled){var e=this.state,n=(e.cropState,g(e,["cropState"]));this.editor.addLocalTransformSnapshot(y(y(y({},n),this.cropState),{localOutputSize:Qr(this.localOutputSize),outputSize:this.engineMediator.output.container.getResolution(),defaults:Qr(this.defaults),previewTransform:this.engineMediator.preview.container.getTransform(),outputTransform:this.engineMediator.output.container.getTransform()}),t)}},t.prototype.updateLocalStateFromHistory=function(t){this.editor.activeStore.tool===P.TRANSFORM&&(this.transformStore.changeLockResolution(t.lockResolution),this.transformStore.changeForceDimensions(t.forceDimensions),this.transformStore.changeIdentifier(t.identifier),this.transformStore.setRotation(t.rotationInDegrees),this.setDefaultAngle(t.rotationInDegrees),this.transformStore.setOutputRotation(t.outputRotation),this.transformStore.updateFlip(t),this.engineMediator.output.container.setRotation(t.outputRotation),this.setDefaultImageSize(t.defaults.imageSize),this.localOutputSize=t.defaults.imageSize,this.changeLocalOutputSize(t.localOutputSize),this.transformStore.changeSize(t.size),this.changePosition(t.position),this.setMaxCropSize(t.defaults.maxCropMaskSize),this.setDefaultCropPosition(t.defaults.cropMaskPosition),this.changeDefaultScale(t.defaults.scale),this.engineMediator.output.container.setResolution(t.outputSize),this.engineMediator.preview.container.setTransform(t.previewTransform),this.engineMediator.output.container.setTransform(t.outputTransform))},t.prototype.updateStateFromHistory=function(t){this.editor.activeStore.tool!==P.TRANSFORM&&(this.engineMediator.output.container.setTransform(t.outputTransform),this.engineMediator.preview.container.setTransform(t.previewTransform),this.engineMediator.output.container.setResolution(t.outputSize),this.changeLocalOutputSize(t.outputSize))},Object.defineProperty(t.prototype,"serializableState",{get:function(){var t=this.rotateFlipState,e=t.flipHorizontally,n=t.flipVertically,r=180*this.editor.engineMediator.output.container.getRotation()/Math.PI%360,i=this.identifier,o=this.rotationInDegrees,a=o*Math.PI/180,s=r+o;s=(360-(s=(s=90*Math.round(s/90))<0?s+360:s))%360;var l=this.convertUIToOperationOptions(a,s);return{flipHorizontally:e,flipVertically:n,rotation:a,start:l.start,end:l.end,identifier:i,outputRotation:s}},enumerable:!0,configurable:!0}),t.prototype.getStartEndForOperation=function(t){var e=this.leftTop,n=this.rightBottom,r=this.maxCropMaskSize,i=e.y,o=e.x,a=n.x,s=n.y;switch(t){case 270:return{leftTop:{x:r.height-s,y:o},rightBottom:{x:r.height-i,y:a}};case 180:return{leftTop:{x:r.width-a,y:r.height-s},rightBottom:{x:r.width-o,y:r.height-i}};case 90:return{leftTop:{x:i,y:r.width-a},rightBottom:{x:s,y:r.width-o}}}return{leftTop:{x:o,y:i},rightBottom:{x:a,y:s}}},t.prototype.getStartEndForUI=function(t,e,n){var r=this.maxCropMaskSize,i=e.y,o=e.x,a=n.x,s=n.y;switch(t){case 90:return{leftTop:{x:i,y:r.height-a},rightBottom:{x:s,y:r.height-o}};case 180:return{leftTop:{x:r.width-a,y:r.height-s},rightBottom:{x:r.width-o,y:r.height-i}};case 270:return{leftTop:{x:r.width-s,y:o},rightBottom:{x:r.width-i,y:a}}}return{leftTop:{x:o,y:i},rightBottom:{x:a,y:s}}},t.prototype.convertOperationOptionsToUI=function(t){var e=t.start,n=t.end,r=t.rotation,i=t.outputRotation,o=90===i||270===i,a=o?k.fromSize(this.defaultImageSize).swapped:k.fromSize(this.defaultImageSize),s=Math.cos(r),l=Math.sin(r),u=this.calculateScale(r),c=new k(Math.min(e.x,n.x),Math.min(e.y,n.y)),f=new k(Math.max(e.x,n.x),Math.max(e.y,n.y)).subtract(c).divide(2),p=c.add(f).multiply(a).subtract(a.multiply(.5)),h=new k(p.x*s-p.y*l,p.x*l+p.y*s).multiply(u),d=a.multiply(.5).add(h).divide(a),y=d.subtract(f.multiply(u)),g=d.add(f.multiply(u)),m=o?k.fromSize(this.maxCropMaskSize).swapped:k.fromSize(this.maxCropMaskSize),v=y.multiply(m),b=g.multiply(m),_=this.getStartEndForUI(i,v,b),w=_.leftTop,x=_.rightBottom;return{start:new k(w),end:new k(x)}},t.prototype.convertUIToOperationOptions=function(t,e){var n=90===e||270===e,r=n?k.fromSize(this.defaultImageSize).swapped:k.fromSize(this.defaultImageSize),i=n?k.fromSize(this.maxCropMaskSize).swapped:k.fromSize(this.maxCropMaskSize),o=Math.cos(-t),a=Math.sin(-t),s=this.calculateScale(t,n),l=this.getStartEndForOperation(e),u=l.leftTop,c=l.rightBottom,f=new k(u).divide(i),p=new k(c).divide(i).subtract(f).divide(2),h=f.add(p).multiply(r).subtract(r.multiply(.5)),d=new k(h.x*o-h.y*a,h.x*a+h.y*o).divide(s),y=r.multiply(.5).add(d).divide(r);return{start:y.subtract(p.divide(s)),end:y.add(p.divide(s))}},t.prototype.calculateScale=function(t,e){void 0===e&&(e=!1);var n=e?k.fromSize(this.defaultImageSize).swapped:k.fromSize(this.defaultImageSize),r=new k(Math.abs(n.x*Math.cos(t))+Math.abs(n.y*Math.sin(t)),Math.abs(n.x*Math.sin(t))+Math.abs(n.y*Math.cos(t))),i=n.subtract(r.clone()).divide(2).abs;return i.y>i.x?2*i.y/n.y+1:2*i.x/n.x+1},t.prototype.updateStateFromSerialization=function(t,e){this.localSnapshotEnabled=e,this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),0!==this.editor.outputContainer.getRotation()&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();var n=Math.round(180*t.rotation/Math.PI);this.transformStore.setRotation(n>180?n-360:n),this.applyOutputRotationFromSerialization(t),t.identifier&&this.transformStore.changeIdentifier(t.identifier);var r=t.outputRotation<0?t.outputRotation+360:t.outputRotation;if(r=(360-r)%360,t.start&&t.end){0!==t.end.x&&0!==t.end.y||(t.end.x=1,t.end.y=1);var i=this.convertOperationOptionsToUI({start:new k(t.start),end:new k(t.end),rotation:t.rotation,outputRotation:r}),o=i.start,a=i.end;this.changePositionX(o.x),this.changePositionY(o.y);var s=a.x-o.x,l=a.y-o.y;this.transformStore.changeSize({width:s,height:l});var u=this.defaults,c=u.maxCropMaskSize,f=u.imageSize,p={height:l*f.height/c.height,width:s*f.width/c.width};this.changeLocalOutputSize(p)}this.editor.outputContainer.setData({flipHorizontally:t.flipHorizontally,flipVertically:t.flipVertically}),t.flipHorizontally&&this.flipHorizontally(!1),t.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip(),this.localSnapshotEnabled=!0},t.prototype.applyOutputRotationFromSerialization=function(t){if(void 0!==t.outputRotation)switch(t.outputRotation){case 90:this.transformations.rotateOutputContainer();break;case 180:this.transformations.rotateOutputContainer(),this.transformations.rotateOutputContainer();break;case 270:this.transformations.rotateOutputContainer(!0)}this.transformations.rotateOutputContainer(!0),this.transformations.rotateOutputContainer()},t.prototype.setDefaultAngle=function(t){this.defaultAngle=t},t.prototype.updateCanvasControls=function(t){var e=Qr(this.cropMaskPosition),n=Qr(this.cropMaskSize),r=Qr(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:r.height*n.height/t.height,width:r.width*n.width/t.width}),this.changePosition({y:r.height*e.y/t.height,x:r.width*e.x/t.width})},t.prototype.onLeave=function(){this.transformations.onLeave()},t.prototype.onEnter=function(){this.transformations.onEnter()},t.prototype.saveTransforms=function(){this.transformations.saveTransforms()},t.prototype.saveTransformsBasedOnFlip=function(){this.transformations.saveTransformsBasedOnFlip()},t.prototype.setRotation=function(t){this.transformStore.setRotation(t),this.transformRender()},t.prototype.rotateOutputContainer=function(t){return void 0===t&&(t=!1),v(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return this.setDragMode(!0),this.transformations.rotateOutputContainer(t),[4,this.editor.wait()];case 1:return e.sent(),this.setDragMode(!1),[2]}}))}))},t.prototype.applyInitialCrop=function(){var t=this.getMatchingItem().identifier;this.changeIdentifier(t,!1)},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.proportionalSize=function(t,e,n,r){void 0===n&&(n=this.defaults.maxCropMaskSize),void 0===r&&(r=this.minCropSize);var i={width:e.height*t,height:e.height};return(i.width>n.width||i.width<r||i.height<r)&&(i.width=e.width,i.height=e.width/t),i.width=Math.round(i.width),i.height=Math.round(i.height),i},t.prototype.checkAndAddSnapshot=function(t){var e=Qr(this.localOutputSize);t.width===e.width&&t.height===e.height||this.addLocalSnapshot()},t.prototype.updateInitialCropMaskPosition=function(t){var e=this.cropMaskSize,n=this.defaults.maxCropMaskSize;t?this.changePosition({x:0,y:Math.abs(n.height-e.height)/2}):this.changePosition({x:Math.abs(n.width-e.width)/2,y:0})},t.prototype.updatePreviewSizeWRTImageSize=function(){var t=Qr(this.localOutputSize),e=Qr(this.defaults.imageSize),n=Qr(this.defaults.maxCropMaskSize),r={height:n.height*t.height/e.height,width:n.width*t.width/e.width};this.transformStore.changeSize(r)},t.prototype.getScaleWithFlip=function(t){return void 0===t&&(t=this.rotateFlipState.rotation),this.transformations.getScaleWithFlip(t)},Object.defineProperty(t.prototype,"cropState",{get:function(){return this.transformStore.selectedCrop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.transformStore.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ratio",{get:function(){return this.transformStore.ratio},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.transformStore.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.transformStore.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localOutputImageSize",{get:function(){return this.localOutputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localOutputHeight",{get:function(){return this.localOutputSize.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localOutputWidth",{get:function(){return this.localOutputSize.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lockResolution",{get:function(){return this.transformStore.lockResolution},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceDimensions",{get:function(){return this.transformStore.forceDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationInDegrees",{get:function(){return this.transformStore.rotationInDegrees},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputRotation",{get:function(){return this.transformStore.outputRotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDragMode",{get:function(){return this.dragMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotateFlipState",{get:function(){var e=this.transformStore.state,n=e.flipHorizontally,r=e.flipVertically,i=e.rotationInDegrees,o=e.outputRotation;return{flipHorizontally:n,flipVertically:r,rotation:t.inRadians(i),outputRotation:o}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categories",{get:function(){return this.entityManager.categories},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.entityManager.categories.reduce((function(t,e){return x(t,Gi.isCategory(e)?e.items:[e])}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.TRANSFORM]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.TRANSFORM]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTop",{get:function(){return this.rect.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottom",{get:function(){return this.rect.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTop",{get:function(){return this.rect.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottom",{get:function(){return this.rect.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedHorizontal",{get:function(){return this.transformStore.isFlippedHorizontal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFlippedVertical",{get:function(){return this.transformStore.isFlippedVertical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftTopRespectFlip",{get:function(){return this.rectForUi.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomRespectFlip",{get:function(){return this.rectForUi.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTopRespectFlip",{get:function(){return this.rectForUi.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomRespectFlip",{get:function(){return this.rectForUi.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cropMaskPosition",{get:function(){return this.transformStore.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cropMaskSize",{get:function(){return this.transformStore.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.transformStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultImageSize",{get:function(){return this.defaults.imageSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxCropMaskSize",{get:function(){return this.defaults.maxCropMaskSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minCropMaskSize",{get:function(){var t=this.getRatio();return"*"===t||1===t?{width:this.minCropSize,height:this.minCropSize}:t>1?{width:this.minCropSize*t,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultCropMaskPosition",{get:function(){return this.defaults.cropMaskPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultScale",{get:function(){return this.defaults.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engineMediator",{get:function(){return this.editor.engineMediator},enumerable:!0,configurable:!0}),t.prototype.getRatio=function(){var t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:t.ratio;var e=t.dimensions;return e.x/e.y}return"*"},m([Ln],t.prototype,"selectedCategory",void 0),m([Ln],t.prototype,"defaults",void 0),m([Ln],t.prototype,"localOutputSize",void 0),m([Lr],t.prototype,"changeIdentifier",null),m([Lr],t.prototype,"setDragMode",null),m([Lr],t.prototype,"setCropDefaults",null),m([Lr],t.prototype,"setDefaultImageSize",null),m([Lr],t.prototype,"setMaxCropSize",null),m([Lr],t.prototype,"setDefaultCropPosition",null),m([Lr],t.prototype,"resetCrop",null),m([Lr],t.prototype,"toggleCategorySelection",null),m([Lr],t.prototype,"pureReset",null),m([Lr],t.prototype,"reset",void 0),m([Lr],t.prototype,"changePosition",null),m([Lr],t.prototype,"changePositionX",null),m([Lr],t.prototype,"changePositionY",null),m([Lr],t.prototype,"changeCropAndOutputHeight",null),m([Lr],t.prototype,"changeCropAndOutputWidth",null),m([Lr],t.prototype,"changeCropAndOutputSize",null),m([Lr],t.prototype,"onLeave",null),m([Lr],t.prototype,"onEnter",null),m([Lr],t.prototype,"changeLocalOutputSize",void 0),m([Lr],t.prototype,"changeDefaultScale",void 0),m([Lr],t.prototype,"changeLocalOutputHeight",void 0),m([Lr],t.prototype,"changeLocalOutputWidth",void 0),m([Lr],t.prototype,"changeLockResolution",void 0),m([Lr],t.prototype,"setRotation",null),m([Lr],t.prototype,"rotateClockwise",void 0),m([Lr],t.prototype,"rotateAntiClockwise",void 0),m([Lr],t.prototype,"rotateOutputContainer",null),m([Lr],t.prototype,"flipHorizontally",void 0),m([Lr],t.prototype,"flipVertically",void 0),m([Lr],t.prototype,"applyDefaultCrop",void 0),m([Lr],t.prototype,"applyInitialCrop",null),m([Lr],t.prototype,"updateCropMask",void 0),m([Lr],t.prototype,"clickableCanvas",null),m([Lr],t.prototype,"onLeftTop",void 0),m([Lr],t.prototype,"onLeftBottom",void 0),m([Lr],t.prototype,"onRightTop",void 0),m([Lr],t.prototype,"onRightBottom",void 0),m([Lr],t.prototype,"proportionalSize",null),m([Lr],t.prototype,"onPixelWidth",void 0),m([Lr],t.prototype,"onPixelHeight",void 0),m([Lr],t.prototype,"updateInitialCropMaskPosition",null),m([Lr],t.prototype,"updatePreviewSizeWRTImageSize",null),m([Vn],t.prototype,"cropState",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"ratio",null),m([Vn],t.prototype,"height",null),m([Vn],t.prototype,"width",null),m([Vn],t.prototype,"localOutputImageSize",null),m([Vn],t.prototype,"localOutputHeight",null),m([Vn],t.prototype,"localOutputWidth",null),m([Vn],t.prototype,"lockResolution",null),m([Vn],t.prototype,"forceDimensions",null),m([Vn],t.prototype,"rotationInDegrees",null),m([Vn],t.prototype,"outputRotation",null),m([Vn],t.prototype,"isDragMode",null),m([Vn],t.prototype,"rotateFlipState",null),m([Vn],t.prototype,"selectedCategoryIdentifier",null),m([Vn],t.prototype,"categories",null),m([Vn],t.prototype,"entities",null),m([Vn],t.prototype,"items",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"isOptionSelected",null),m([Vn],t.prototype,"leftTop",null),m([Vn],t.prototype,"leftBottom",null),m([Vn],t.prototype,"rightTop",null),m([Vn],t.prototype,"rightBottom",null),m([Vn],t.prototype,"isFlippedHorizontal",null),m([Vn],t.prototype,"isFlippedVertical",null),m([Vn],t.prototype,"leftTopRespectFlip",null),m([Vn],t.prototype,"leftBottomRespectFlip",null),m([Vn],t.prototype,"rightTopRespectFlip",null),m([Vn],t.prototype,"rightBottomRespectFlip",null),m([Vn],t.prototype,"cropMaskPosition",null),m([Vn],t.prototype,"cropMaskSize",null),m([Vn],t.prototype,"state",null),m([Vn],t.prototype,"defaultImageSize",null),m([Vn],t.prototype,"maxCropMaskSize",null),m([Vn],t.prototype,"minCropMaskSize",null),m([Vn],t.prototype,"defaultCropMaskPosition",null),m([Vn],t.prototype,"defaultScale",null),t}(),ul=function(){function t(t){var e=this;this.checkImageResize=function(){e.engine.on(yt.BEGAN_IMAGE_DOWNSCALING,(function(){e.modalStore.showInfoModal("resizing")})),e.engine.on(yt.IMAGE_DOWNSCALED,(function(){}))},this.init=function(t){e.historyStore.isDirty()?e.modalStore.showActionModal({type:F.WARNING,identifier:"discardChanges",handleConfirm:function(){e.setImage(t),e.resetToolStates()},handleDismiss:function(){e.setImage(t,!0)}}):e.setImage(t,!0).then((function(){var t=e.configStore.config,n=t.engine,r=t.displayCanvasRendererWarning;"canvas"===n.preferredRenderer&&r&&e.modalStore.showActionModal({type:F.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:function(){e.modalStore.hideModal()}})})),e.historyStore.reset(),e.libraryStore.fetchImages()},this.setImage=function(t,n){return void 0===n&&(n=!1),v(e,void 0,void 0,(function(){var e,r,i,o;return b(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),[4,this.activeStore.setImage(t)];case 1:return a.sent(),[4,this.engineMediator.image.addImageToContainer()];case 2:return a.sent(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.historyStore.addInitialSnapshot(),e=this.transformToolStore.rotateFlipState,r=e.flipHorizontally,i=e.flipVertically,this.outputContainer.setData({flipVertically:i,flipHorizontally:r}),n?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransformsBasedOnFlip(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),[4,this.renderPromise()];case 3:return a.sent(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer&&this.filterToolStore.setImageAndGetPreviews(),this.activeStore.tool||this.onReady(),this.modalStore.hideModal(),[3,5];case 4:return o=a.sent(),this.configStore.events.onErrorImageLoading(o),this.modalStore.hideModal(),this.modalStore.showActionModal({type:F.ERROR,identifier:o.identifier?o.identifier:"rendering",error:o,handleConfirm:function(){window.location.reload()}}),[3,5];case 5:return[2]}}))}))},this.onToolChange=function(t,n,r){if(void 0===n&&(n=null),void 0===r&&(r=!0),t!==n&&e.engineMediator.preview.container){if(-1!==[t,n].indexOf(P.TRANSFORM)){var i=e.canvasStore.canvasSize,o=e.configStore.measurements.basicToolControlBar.controlsBarHeight;if(t===P.TRANSFORM){e.transformToolStore.onLeave(),e.historyStore.removeTransformLocalSnapshots();var a=e.engineMediator.preview.container.getScale().x,s=e.engineMediator.output.container.getResolution(),l=e.transformToolStore.defaultImageSize;(1!==a||l.width!==s.width||l.height!==s.height)&&e.addSnapshot(void 0,Ui.EDIT,e.configStore.locale.transform.title),e.snappingStore.calculatePreviewTopLeftPosition(),e.configStore.isLayoutAdvanced||(e.canvasStore.state.canvasSize.height=i.height+o,e.resize(!0))}else n===P.TRANSFORM&&(e.configStore.isLayoutAdvanced||(e.canvasStore.state.canvasSize.height=i.height-o,e.resize(),e.render()),e.transformToolStore.onEnter(),e.transformToolStore.addLocalSnapshot(),e.historyStore.saveTransformLocalSnapshotIndex())}else e.scale.resetOffset(),e.scale.resetPosition(),e.scale.setScaleToDefault(),e.scale.scaleRender(!0);r&&e.render()}},this.resize=function(t){void 0===t&&(t=!1);try{e.transformToolStore.applyDefaultCrop(),e.canvasStore.updateCanvasDimensions();var n=Qr(e.transformToolStore.maxCropMaskSize),r=e.activeStore.tool===P.TRANSFORM;r&&!t||e.transformToolStore.onEnter();var i=e.engineMediator.preview.container.getRotation();if(e.engineMediator.preview.updateTransform(i)){e.scale.setInitialTransform(),e.transformToolStore.setCropDefaults(),e.transformToolStore.updateCanvasControls(n),e.focusToolStore.updateCanvasControls(),e.spriteStore.updateCanvasControls();var o=e.transformToolStore.getScaleWithFlip(i);e.engineMediator.preview.container.setScale(o),r&&!t||(e.transformToolStore.onLeave(),e.transformToolStore.onEnter(),e.transformToolStore.onLeave()),e.snappingStore.calculatePreviewTopLeftPosition(),e.render()}}catch(t){e.modalStore.showActionModal({type:F.ERROR,identifier:"rendering",handleConfirm:function(){window.location.reload()}})}},this.export=function(t){void 0===t&&(t={});var n=t.preventExportEvent,r=g(t,["preventExportEvent"]);return new Promise((function(t,i){e.modalStore.showInfoModal("exporting");var o=e.activeStore.tool===P.TRANSFORM;o&&e.transformToolStore.onLeave();var a=e.configStore.config,s=y(y({},a.export.image),r),l=s.exportType,u=s.format,c=s.quality,f=s.enableDownload;e.engineMediator.engine.export(l,u,c).then((function(r){f&&e.triggerFileDownload(a.export.filename,u,l,r),n||e.configStore.events.onExport(r),t(r),o&&e.transformToolStore.onEnter(),e.modalStore.hideModal(),e.historyStore.isDirtySinceSave=!1})).catch((function(t){i(t),o&&e.transformToolStore.onEnter(),e.modalStore.hideModal()}))}))},this.serialize=function(t){var n=(void 0===t?{image:!0}:t).image;return e.serializationMediator.serialize({image:n})},this.deserialize=function(t){return e.serializationMediator.deserialize(t)},this.close=function(){e.historyStore.isDirtySinceSave&&e.configStore.config.displayCloseWarning?e.modalStore.showActionModal({type:F.WARNING,identifier:"unsavedChanges",handleConfirm:function(){e.configStore.events.onClose()}}):e.configStore.events.onClose()},this.hasChanges=function(){return e.historyStore.isDirty()},this.wait=function(t){return void 0===t&&(t=0),new Promise((function(e){return setTimeout(e,t)}))},this.clickableCanvas=function(t){return v(e,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return t?[4,new Promise((function(t){return setTimeout(t,0)}))]:[3,2];case 1:return e.sent(),this.canvasStore.enableCanvasClick(),[3,3];case 2:this.canvasStore.disableCanvasClick(),e.label=3;case 3:return[2]}}))}))},this.onReady=function(){return v(e,void 0,void 0,(function(){var t,e,n,r,i,o;return b(this,(function(a){return t=this.configStore.config,e=t.layout,n=t.forceCrop,"advanced"===e&&this.activeStore.selectTool(this.configStore.defaultTool),n&&(r=this.transformToolStore.localOutputImageSize,i=r.width/r.height,-1!==(o=this.transformToolStore.entityManager.items.map((function(t){return"*"===t.ratio||t.ratio?t.ratio:t.dimensions.x/t.dimensions.y}))).indexOf("*")?console.error('ForceCrop will not work if "*" is one of the ratios'):-1===o.indexOf(i.toFixed(2))&&this.activeStore.selectTool(P.TRANSFORM)),this.configStore.events.onEditorReady(),[2]}))}))},this.addSnapshot=function(t,n,r){e.historyStore.addSnapshot(t,n,r)},this.addLocalTransformSnapshot=function(t,n,r){void 0===r&&(r=Ui.EDIT),e.historyStore.addSnapshot({localTransform:t},r,n)},this.resetToolStates=function(){e.filterToolStore.pureReset(),e.focusToolStore.pureReset(),e.adjustmentsToolStore.pureReset(),e.overlayToolStore.pureReset(),e.frameToolStore.pureReset(),e.brushToolStore.pureReset(),e.spriteStore.pureReset(),e.transformToolStore.pureReset(),e.historyStore.reset(),e.render()},this.getAssetPath=function(t){return e.assetProvider.getPathForCategory(t)},this.render=function(){return v(e,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,this.renderPromise()];case 1:return t.sent(),[2]}}))}))},this.applyFlipToPreview=function(t){return e.engineMediator.previewSpaceToFlippedPreviewSpace(t)},this.getPreviewSize=function(){var t=e.engine.getOutputDimensions(),n=t.width,r=t.height;return n&&r?{width:Math.round(e.worldToPreview(e.outputToWorld(n))),height:Math.round(e.worldToPreview(e.outputToWorld(r)))}:{height:r,width:n}},this.triggerFileDownload=function(t,n,r,i){var o=t+(n===W.JPEG&&r!==U.MSBLOB?".jpeg":".png"),a=e.blobFromExportData(i);e.triggerBlobDownload(o,a)},this.triggerBlobDownload=function(t,e){if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var n=document.createElement("a"),r=URL.createObjectURL(e);n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),void 0===i&&(i=Rt()),i.match(/iP(hone|od|ad)|AppleWebKit/)||URL.revokeObjectURL(r)}var i},this.blobFromExportData=function(t){return"string"==typeof t?Ms(t):t instanceof HTMLImageElement?Ms(t.src):t},this.configStore=new xo;var n=this.configStore.saveConfig(t);if(this.engineMediator=new gl(this),this.serializationMediator=new ks(this),this.spriteStore=new rl(this),this.scale=new Os(this),this.filterToolStore=new Ji(this),this.adjustmentsToolStore=new qi(this),this.focusToolStore=new wl(this),this.overlayToolStore=new js(this),this.frameToolStore=new Rs(this),this.brushToolStore=new Ls(this),this.transformToolStore=new ll(this),this.libraryStore=new Ps(this),this.modalStore=new xs(this),this.snappingStore=new Ns(this),this.activeStore=new vs(this),this.canvasStore=new _s(this),this.historyStore=new Xi(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(n),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer){var r=this.configStore.config.engine;this.previewThumbnails=new hs(y(y({},r),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}}return Object.defineProperty(t,"defaultColors",{get:function(){return Object.keys(je).map((function(t){var e=je[t];return{identifier:t,color:e,colorString:Ae(e)}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultBackgroundColors",{get:function(){return Object.keys(Me).map((function(t){var e=Me[t];return{identifier:t,color:e,colorString:Ae(e)}}))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"devicePixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shortestOutputSide",{get:function(){var t=this.outputContainer.getBounds();return Math.min(t.width,t.height)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"assetProvider",{get:function(){return this.configStore.assetProvider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engine",{get:function(){return this.engineMediator.engine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderHelper",{get:function(){return this.engineMediator.orderHelper},enumerable:!0,configurable:!0}),t.prototype.renderPromise=function(){return this.engineMediator.render(this.engineMediator.preview.container)},t.prototype.previewToWorld=function(t,e){return C(t),this.engineMediator.previewSpaceToWorldSpace(t,e)},t.prototype.worldToPreview=function(t){return C(t),this.engineMediator.worldSpaceToPreviewSpace(t)},t.prototype.worldSizeToPreview=function(t){return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}},t.prototype.previewSizeToWorld=function(t,e){return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}},t.prototype.outputToWorld=function(t){return C(t),this.engineMediator.outputSpaceToWorldSpace(t)},t.prototype.previewToOutput=function(t){return C(t),this.engineMediator.previewSpaceToOutputSpace(t)},Object.defineProperty(t.prototype,"outputContainer",{get:function(){return this.engineMediator.output.container},enumerable:!0,configurable:!0}),m([Lr],t.prototype,"resize",void 0),m([Lr],t.prototype,"export",void 0),m([Lr],t.prototype,"clickableCanvas",void 0),t}();function cl(t,e){return t.width/t.height>e.width/e.height?t.height/e.height:t.width/e.width}var fl,pl,hl={transform:S.IDENTITY},dl=function(){function t(t){this.initialTransform=S.IDENTITY,this.editor=t,this.state=Ln(hl)}return t.prototype.createPreview=function(t){this.container=this.editor.engine.createPreview(t)},t.prototype.updateTransform=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0);var n=this.calculateTransform(t);return!!n.scale.x&&(e?this.saveInitialTransform(n):this.savePreviewTransform(n),this.container.setTransform(this.state.transform),!0)},t.prototype.saveInitialTransform=function(t){this.initialTransform=t,this.savePreviewTransform(t)},t.prototype.savePreviewTransform=function(t){var e=this;Br((function(){e.state.transform.position=t.position,e.state.transform.scale=t.scale,e.state.transform.rotation=t.rotation;var n=ul.devicePixelRatio;e.previewTransformWithoutDpr={position:new k(t.position).divide(n),scale:new k(t.scale).divide(n),rotation:t.rotation}}))},Object.defineProperty(t.prototype,"transform",{get:function(){return this.state.transform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.state.transform.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.state.transform.scale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.state.transform.rotation},enumerable:!0,configurable:!0}),t.prototype.calculateTransform=function(t){void 0===t&&(t=0);var e=ul.devicePixelRatio,n=this.editor.canvasStore.canvasSize,r=n.width,i=n.height,o=this.editor.engine.getOutputDimensions(),a=cl({width:r,height:i},o),s=.95;window.innerWidth<600&&(s=.98),a*=s;var l=i-o.height*a,u=2*this.editor.configStore.measurements.mainCanvasActionBar.height;return l<u&&(a=cl({width:r,height:i-u},o),a*=s),new S({x:r*e/2,y:i*e/2},{x:a*=e,y:a},t)},m([Lr],t.prototype,"updateTransform",null),m([Lr],t.prototype,"savePreviewTransform",null),m([Vn],t.prototype,"transform",null),m([Vn],t.prototype,"position",null),m([Vn],t.prototype,"scale",null),m([Vn],t.prototype,"rotation",null),t}(),yl=function(){function t(){this.imageContainerOrder=[],this.spriteContainerOrder=[]}return t.checkTool=function(t){if(-1!==[P.STICKER,P.TEXT,P.TEXT_DESIGN,P.BRUSH,P.FRAME].indexOf(t))throw new Error("addIndex is used for non sprites, for sprites use addSprite")},t.remove=function(t,e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)},t.indexForOrder=function(t,e,n){var r=t[n],i=e.findIndex((function(t){return t===n}));if(-1!==i)return{index:i,order:e};var o=e.length;if(o){var a=void 0;for(a=0;a<o;a+=1)if(r<t[e[a]])return{index:a,order:e=x(e.slice(0,a),[n],e.slice(a))}}return e.push(n),{index:e.length-1,order:e}},t.prototype.addIndex=function(e){t.checkTool(e);var n=t.indexForOrder(t.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,e),r=n.index,i=n.order;return this.imageContainerOrder=i,r},t.prototype.removeIndex=function(e){t.checkTool(e),t.remove(e,this.imageContainerOrder)},t.prototype.addSprite=function(t){return this.spriteContainerOrder.push(t),this.imageContainerOrder.length+this.spriteContainerOrder.length-1},t.prototype.removeSprite=function(e){t.remove(e,this.spriteContainerOrder)},t.prototype.renameSprite=function(t,e){var n=this.spriteContainerOrder.findIndex((function(e){return e===t}));-1!==n&&(this.spriteContainerOrder[n]=e)},t.prototype.bringToFront=function(t){var e=this.spriteContainerOrder.findIndex((function(e){return e===t}));return-1!==e&&(this.spriteContainerOrder.splice(e,1),this.spriteContainerOrder.push(t)),this.getLastSpriteIndex()},t.prototype.getLastSpriteId=function(){var t=this.spriteContainerOrder.length;return this.spriteContainerOrder[t-1]},t.prototype.getSpriteIndex=function(t){return this.spriteContainerOrder.findIndex((function(e){return e===t}))+this.imageContainerOrder.length-1},t.prototype.getLastSpriteIndex=function(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1},t.IMAGE_CONTAINER_INDEX=((fl={})[P.ART_FILTER]=0,fl[P.FILTER]=1,fl[P.ADJUSTMENT]=2,fl[P.FOCUS]=3,fl[P.OVERLAY]=4,fl),t}(),gl=function(){function t(t){this.orderHelper=new yl;var e=t.configStore.config.engine;this.engine=new Re(y(y({},e),{license:t.configStore.config.license,assetProvider:t.configStore.assetProvider})),this.image=new Oo(t),this.output=new So(t),this.preview=new dl(t),this.editor=t}return t.prototype.render=function(t){return this.engine.render(t)},t.prototype.previewSpaceToWorldSpace=function(t,e){var n=this.preview.previewTransformWithoutDpr;if(C(t)){var r=this.editor.engine.convertPointFromPreviewIntoWorldSpace(k.ZERO,n,e),i=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},n,e);return k.distance(new k(r),new k(i))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,n,e)},t.prototype.worldSpaceToPreviewSpace=function(t){var e=this.preview.previewTransformWithoutDpr;if(C(t)){var n=this.editor.engine.convertPointFromWorldIntoPreviewSpace(k.ZERO,e),r=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return k.distance(new k(n),new k(r))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)},t.prototype.outputSpaceToWorldSpace=function(t){return C(t)?(e=t,n=this.editor.engine.getOutputContainer(),r=new k(e,0),i=new k(Wt(r,n)),o=new k(Wt(k.ZERO,n)),k.distance(i,o)):Wt(t,this.editor.engine.getOutputContainer());var e,n,r,i,o},t.prototype.previewSpaceToOutputSpace=function(t){var e=this.preview.previewTransformWithoutDpr;if(C(t)){var n=this.editor.engine.convertPointFromPreviewIntoOutputSpace(k.ZERO,e),r=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return k.distance(new k(n),new k(r))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)},t.prototype.previewSpaceToFlippedPreviewSpace=function(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)},t}(),ml=[[0,0],[0,1],[1,0],[1,1]],vl=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],bl=function(){function t(e,n,r,i,o){void 0===r&&(r="center"),void 0===i&&(i=!0),void 0===o&&(o=!1),this.considerRotation=!0,this.considerFlip=!0,this.store=n,this.m="center"===r?t.movePivotTo([.5,.5]):ml,this.considerRotation=i,this.considerFlip=o,this.configStore=e.configStore}return t.getFlippedEdgeIndex=function(t,e,n){return vl[(e?1:0)+(n?2:0)][t]},t.movePivotTo=function(t){return ml.map((function(e){return[e[0]-t[0],e[1]-t[1]]}))},Object.defineProperty(t.prototype,"position",{get:function(){return this.store.position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.store.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.considerRotation?this.store.rotationWRTOutputRotation:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipHorizontally",{get:function(){return!!this.considerFlip&&this.store.isFlippedHorizontal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipVertically",{get:function(){return!!this.considerFlip&&this.store.isFlippedVertical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipCenter",{get:function(){return this.considerFlip?this.store.flipCenter:null},enumerable:!0,configurable:!0}),t.prototype.handleOrigin=function(e,n,r){var i=t.getFlippedEdgeIndex(e,n,r);return{width:this.m[i][0]*this.size.width,height:this.m[i][1]*this.size.height}},Object.defineProperty(t.prototype,"leftTop",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(0,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottom",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(1,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTop",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(2,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottom",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(3,n,r);return t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottomHandle",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(1,n,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottomHandle",{get:function(){var e=this.position,n=this.flipHorizontally,r=this.flipVertically,i=this.handleOrigin(3,n,r);return i.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,t.coordinatesWithRotation(i,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftMid",{get:function(){var t=new k(this.leftTop),e=new k(this.leftBottom);return t.add(e).divide(2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightMid",{get:function(){var t=new k(this.rightTop),e=new k(this.rightBottom);return t.add(e).divide(2)},enumerable:!0,configurable:!0}),t.coordinatesWithRotation=function(t,e,n,r,i,o){var a=t.width,s=t.height,l=a*Math.cos(e)-s*Math.sin(e)+o.x,u=a*Math.sin(e)+s*Math.cos(e)+o.y;return n&&(l=2*i.x-l),r&&(u=2*i.y-u),new k({x:l,y:u}).rounded},m([Vn],t.prototype,"position",null),m([Vn],t.prototype,"size",null),m([Vn],t.prototype,"rotation",null),m([Vn],t.prototype,"flipHorizontally",null),m([Vn],t.prototype,"flipVertically",null),m([Vn],t.prototype,"flipCenter",null),m([Vn],t.prototype,"leftTop",null),m([Vn],t.prototype,"leftBottom",null),m([Vn],t.prototype,"rightTop",null),m([Vn],t.prototype,"rightBottom",null),m([Vn],t.prototype,"leftBottomHandle",null),m([Vn],t.prototype,"rightBottomHandle",null),m([Vn],t.prototype,"leftMid",null),m([Vn],t.prototype,"rightMid",null),t}(),_l=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=3);var r=Math.tan(e),i=Math.sqrt(Math.pow(r,2)+1);return{x:t.x+n/i,y:t.y+n*r/i}},wl=function(){function t(t){var e=this;this.changeIntensity=function(t){var n=e.focusStore.setEffectProperties({blurRadius:t});n&&(e.focusStore.changeBlurRadius(e.identifier,n.blurRadius),e.editor.render())},this.reset=function(){e.pureReset(),e.editor.render(),e.addSnapshot(Ui.DELETE,e.locale.controls.buttonReset)},this.editor=t,this.focusStore=new eo(this.editor);var n=this.editor.assetProvider.getAssets("focus");this.entityManager=new Gi([{identifier:"",name:"",items:n}],y(y({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}return Object.defineProperty(t,"minIntensity",{get:function(){return 0},enumerable:!0,configurable:!0}),t.doesFocusIdentifierExist=function(t){return-1!==Object.keys(G).map((function(t){return G[t]})).findIndex((function(e){return e===t}))},t.prototype.selectFocus=function(t){if(t!==this.identifier){this.focusStore.removeFocus();var e=.2*this.maxIntensity,n=this.editor.engine.getOutputContainer().getBounds().width,r=.2*this.editor.shortestOutputSide;switch(t){case G.LINEAR:var i=this.editor.outputToWorld({x:-n/2,y:0}),o=this.editor.outputToWorld({x:n/2,y:0});this.setLinearFocus({start:i,end:o,blurRadius:e});break;case G.RADIAL:var a=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:a,radius:r,blurRadius:e});break;case G.MIRRORED:var s=this.editor.outputToWorld({x:0,y:0}),l=r,u=this.editor.outputToWorld(_l({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:s,clearAreaWidth:l,blurRadius:e,mirrorAxisDirection:u});break;case G.GAUSSIAN:this.setGaussianFocus({blurRadius:e})}this.focusStore.selectFocus(t,e),this.editor.render(),this.addSnapshot(Ui.ADD,P.FOCUS)}},t.prototype.toolSnapshot=function(t){this.addSnapshot(Ui.EDIT,t)},t.prototype.addSnapshot=function(t,e){this.editor.addSnapshot(void 0,t,e)},t.prototype.clickableCanvas=function(t){this.editor.clickableCanvas(t)},t.prototype.pureReset=function(){this.focusStore.removeFocus(),this.focusStore.reset()},t.prototype.setStart=function(t){var e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearStart(this.editor.worldToPreview(e.start)),this.editor.render())},t.prototype.setEnd=function(t){var e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end)),this.editor.render())},t.prototype.setCenter=function(t){var e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center)),this.editor.render())},t.prototype.setRadius=function(t){var e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius)),this.editor.render())},t.prototype.setOrigin=function(t){var e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(_l(t,this.rotation))});e&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.editor.render())},t.prototype.setSize=function(t){var e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});e&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.editor.render())},t.prototype.setRotation=function(t){this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(_l(this.origin,t))}),this.focusStore.setMirroredRotation(t),this.editor.render()},t.prototype.updateStateFromHistory=function(t,e){var n=this;this.focusStore.removeFocus();var r=e.magnitude;Br((function(){switch(t.identifier){case G.LINEAR:n.focusStore.selectFocus(G.LINEAR),n.setLinearFocus({start:n.editor.previewToWorld(new k(t.linear.start).multiply(e)),end:n.editor.previewToWorld(new k(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case G.GAUSSIAN:n.focusStore.selectFocus(G.GAUSSIAN),n.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case G.RADIAL:n.focusStore.selectFocus(G.RADIAL),n.setRadialFocus({center:n.editor.previewToWorld(new k(t.radial.center).multiply(e)),radius:n.editor.previewToWorld(t.radial.radius*r),blurRadius:t.radial.blurRadius});break;case G.MIRRORED:n.focusStore.selectFocus(G.MIRRORED),n.setMirroredFocus({mirrorAxisOrigin:n.editor.previewToWorld(new k(t.mirrored.origin).multiply(e)),clearAreaWidth:n.editor.previewToWorld(t.mirrored.size*r),blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:n.editor.previewToWorld(_l(t.mirrored.origin,t.mirrored.rotation))});break;case"identity":n.pureReset()}}))},t.prototype.updateStateFromSerialization=function(e){return v(this,void 0,void 0,(function(){var n=this;return b(this,(function(r){if(!t.doesFocusIdentifierExist(e.identifier))throw new Error("Focus identifier "+e.identifier+" doesn't exist");return this.focusStore.removeFocus(),Br((function(){switch(n.focusStore.selectFocus(e.identifier),e.identifier){case G.LINEAR:n.setLinearFocus(e.linear);break;case G.GAUSSIAN:n.setGaussianFocus(e.gaussian);break;case G.RADIAL:n.setRadialFocus(e.radial);break;case G.MIRRORED:n.setMirroredFocus({mirrorAxisOrigin:e.mirrored.origin,clearAreaWidth:e.mirrored.size,blurRadius:e.mirrored.blurRadius,mirrorAxisDirection:_l(e.mirrored.origin,e.mirrored.rotation)})}})),[2]}))}))},t.prototype.updateCanvasControls=function(){this.focusStore.updateFromEngineState(this.identifier)},Object.defineProperty(t.prototype,"state",{get:function(){return this.focusStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serializableState",{get:function(){switch(this.identifier){case G.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case G.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case G.MIRRORED:var t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:Qr(this.state.mirrored.rotation),size:t.clearAreaWidth}};case G.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()}}return to},enumerable:!0,configurable:!0}),t.prototype.getFocusStateForHistory=function(){var t=this.editor.canvasStore.sizeVector,e=this.focusStore.state.linear,n=this.focusStore.state.radial,r=this.focusStore.state.mirrored,i=t,o=i.magnitude;return y(y({},this.focusStore.state),{linear:y(y({},e),{start:new k(e.start).divide(i),end:new k(e.end).divide(i)}),radial:y(y({},n),{center:new k(n.center).divide(i),radius:n.radius/o}),mirrored:y(y({},r),{origin:new k(r.origin).divide(i),size:r.size/o}),gaussian:y({},this.focusStore.state.gaussian)})},Object.defineProperty(t.prototype,"start",{get:function(){return this.focusStore.state.linear.start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startOnPreview",{get:function(){var t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.focusStore.state.linear.end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endOnPreview",{get:function(){var t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.focusStore.state.radial.center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.focusStore.state.radial.radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this.focusStore.state.mirrored.origin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.focusStore.state.mirrored.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationOnPreview",{get:function(){var t=this.editor.outputContainer.getData(),e=t.flipHorizontally,n=t.flipVertically;return Se({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:e,flipVertically:n})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.focusStore.state.mirrored.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mirroredAreaWidth",{get:function(){var t=this.editor.canvasStore.canvasSize,e=t.width,n=t.height;return 2*Math.sqrt(Math.pow(e,2)+Math.pow(n,2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return"identity"===this.identifier?to.gaussian.blurRadius:this.state[this.identifier].blurRadius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxIntensity",{get:function(){return this.editor.shortestOutputSide/10},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.editor.configStore.config[P.FOCUS]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locale",{get:function(){return this.editor.configStore.locale[P.FOCUS]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.entityManager.items},enumerable:!0,configurable:!0}),t.prototype.setGaussianFocus=function(t){var e=t.blurRadius;this.focusStore.setGaussianFocus({blurRadius:e})},t.prototype.setLinearFocus=function(t){var e=t.start,n=t.end,r=t.blurRadius;this.focusStore.setLinearFocus({start:e,end:n,blurRadius:r})},t.prototype.setRadialFocus=function(t){var e=t.center,n=t.radius,r=t.blurRadius;this.focusStore.setRadialFocus({center:e,radius:n,blurRadius:r})},t.prototype.setMirroredFocus=function(t){var e=t.mirrorAxisOrigin,n=t.clearAreaWidth,r=t.blurRadius,i=t.mirrorAxisDirection;this.focusStore.setMirroredFocus({mirrorAxisOrigin:e,clearAreaWidth:n,blurRadius:r,mirrorAxisDirection:i})},m([Lr],t.prototype,"selectFocus",null),m([Lr],t.prototype,"changeIntensity",void 0),m([Lr],t.prototype,"clickableCanvas",null),m([Lr],t.prototype,"pureReset",null),m([Lr],t.prototype,"reset",void 0),m([Lr],t.prototype,"setStart",null),m([Lr],t.prototype,"setEnd",null),m([Lr],t.prototype,"setCenter",null),m([Lr],t.prototype,"setRadius",null),m([Lr],t.prototype,"setOrigin",null),m([Lr],t.prototype,"setSize",null),m([Lr],t.prototype,"setRotation",null),m([Lr],t.prototype,"updateStateFromHistory",null),m([Lr],t.prototype,"updateStateFromSerialization",null),m([Lr],t.prototype,"updateCanvasControls",null),m([Vn],t.prototype,"state",null),m([Vn],t.prototype,"start",null),m([Vn],t.prototype,"startOnPreview",null),m([Vn],t.prototype,"end",null),m([Vn],t.prototype,"endOnPreview",null),m([Vn],t.prototype,"center",null),m([Vn],t.prototype,"radius",null),m([Vn],t.prototype,"origin",null),m([Vn],t.prototype,"rotation",null),m([Vn],t.prototype,"rotationOnPreview",null),m([Vn],t.prototype,"size",null),m([Vn],t.prototype,"mirroredAreaWidth",null),m([Vn],t.prototype,"identifier",null),m([Vn],t.prototype,"intensity",null),m([Vn],t.prototype,"maxIntensity",null),m([Vn],t.prototype,"isOptionSelected",null),m([Vn],t.prototype,"config",null),m([Vn],t.prototype,"locale",null),m([Vn],t.prototype,"entities",null),t}(),xl=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g),Ol=function(t){return t.replace(xl,"")},Sl=o.c.div(pl||(pl=O(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  -webkit-touch-callout: none;\n  user-select: none;\n  * {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: '","', sans-serif;\n    /* css reset for a global box-sizing: border-box */\n    box-sizing: content-box;\n    /* todo: fix the issue with these settings */\n    font-size: inherit;\n    color: inherit;\n    line-height: normal;\n  }\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  -webkit-touch-callout: none;\n  user-select: none;\n  * {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: '","', sans-serif;\n    /* css reset for a global box-sizing: border-box */\n    box-sizing: content-box;\n    /* todo: fix the issue with these settings */\n    font-size: inherit;\n    color: inherit;\n    line-height: normal;\n  }\n"])),(function(t){return t.theme.background}),(function(t){return t.theme.foreground}),(function(t){return t.theme.typography.fontFamily}));Sl.defaultProps={theme:bo};var kl,Tl,El,Cl=Object(o.d)(kl||(kl=O(["\n  from { transform: translate(-50%, 0%); }\n  to { transform: translate(-50%, 50%); }\n"],["\n  from { transform: translate(-50%, 0%); }\n  to { transform: translate(-50%, 50%); }\n"]))),Rl=o.c.div(El||(El=O(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  transform: translate(-50%, 50%);\n  background: black;\n  color: white;\n  border-radius: ","px;\n  padding: 10px 16px;\n  text-align: center;\n  z-index: ",";\n  visibility: hidden;\n\n  ","\n"],["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  transform: translate(-50%, 50%);\n  background: black;\n  color: white;\n  border-radius: ","px;\n  padding: 10px 16px;\n  text-align: center;\n  z-index: ",";\n  visibility: hidden;\n\n  ","\n"])),(function(t){return t.position.y}),(function(t){return t.position.x}),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.theme.measurements.zIndex.toast}),(function(t){return t.show&&Object(o.b)(Tl||(Tl=O(["\n      visibility: visible;\n      animation: "," 0.5s, fadeout 0.5s 2.5s;\n    "],["\n      visibility: visible;\n      animation: "," 0.5s, fadeout 0.5s 2.5s;\n    "])),Cl)}));
/** @license mobx-react v5.4.4
 * index.module.js
 *
 * Copyright (c) 2015 Michel Weststrate.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Dl(t){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Il(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Al(t,e,n){return e&&Il(t.prototype,e),n&&Il(t,n),t}function Fl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function Ml(t){return(Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zl(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ll(t,e){return t(e={exports:{}},e.exports),e.exports}var Bl,Nl=Ll((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function g(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case f:case o:case s:case a:return t;default:switch(t=t&&t.$$typeof){case u:case p:case l:return t;default:return e}}case i:return e}}}function m(t){return g(t)===f}e.typeOf=g,e.AsyncMode=c,e.ConcurrentMode=f,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=p,e.Fragment=o,e.Profiler=s,e.Portal=i,e.StrictMode=a,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===f||t===s||t===a||t===h||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===d||t.$$typeof===l||t.$$typeof===u||t.$$typeof===p)},e.isAsyncMode=function(t){return m(t)||g(t)===c},e.isConcurrentMode=m,e.isContextConsumer=function(t){return g(t)===u},e.isContextProvider=function(t){return g(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return g(t)===p},e.isFragment=function(t){return g(t)===o},e.isProfiler=function(t){return g(t)===s},e.isPortal=function(t){return g(t)===i},e.isStrictMode=function(t){return g(t)===a}}));(Bl=Nl)&&Bl.__esModule&&Object.prototype.hasOwnProperty.call(Bl,"default")&&Bl.default,Nl.typeOf,Nl.AsyncMode,Nl.ConcurrentMode,Nl.ContextConsumer,Nl.ContextProvider,Nl.Element,Nl.ForwardRef,Nl.Fragment,Nl.Profiler,Nl.Portal,Nl.StrictMode,Nl.isValidElementType,Nl.isAsyncMode,Nl.isConcurrentMode,Nl.isContextConsumer,Nl.isContextProvider,Nl.isElement,Nl.isForwardRef,Nl.isFragment,Nl.isProfiler,Nl.isPortal,Nl.isStrictMode;var Ul=Ll((function(t){t.exports=Nl})),Wl={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Hl={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Vl={};Vl[Ul.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var Gl=Object.defineProperty,Zl=Object.getOwnPropertyNames,Xl=Object.getOwnPropertySymbols,ql=Object.getOwnPropertyDescriptor,Yl=Object.getPrototypeOf,Kl=Object.prototype,Ql=function t(e,n,r){if("string"!=typeof n){if(Kl){var i=Yl(n);i&&i!==Kl&&t(e,i,r)}var o=Zl(n);Xl&&(o=o.concat(Xl(n)));for(var a=Vl[e.$$typeof]||Wl,s=Vl[n.$$typeof]||Wl,l=0;l<o.length;++l){var u=o[l];if(!(Hl[u]||r&&r[u]||s&&s[u]||a&&a[u])){var c=ql(n,u);try{Gl(e,u,c)}catch(t){}}}return e}return e},Jl=function(){function t(){Pl(this,t),this.listeners=[]}return Al(t,[{key:"on",value:function(t){var e=this;return this.listeners.push(t),function(){var n=e.listeners.indexOf(t);-1!==n&&e.listeners.splice(n,1)}}},{key:"emit",value:function(t){this.listeners.forEach((function(e){return e(t)}))}}]),t}();function $l(t){function e(e,n,r,i,o,a){for(var s=arguments.length,l=new Array(s>6?s-6:0),u=6;u<s;u++)l[u-6]=arguments[u];return Qn((function(){if(i=i||"<<anonymous>>",a=a||r,null==n[r]){if(e){var s=null===n[r]?"null":"undefined";return new Error("The "+o+" `"+a+"` is marked as required in `"+i+"`, but its value is `"+s+"`.")}return null}return t.apply(void 0,[n,r,i,o,a].concat(l))}))}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function tu(t){var e=Dl(t);return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||"Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol}(e,t)?"symbol":e}function eu(t,e){return $l((function(n,r,i,o,a){return Qn((function(){if(t&&tu(n[r])===e.toLowerCase())return null;var o;switch(e){case"Array":o=_i;break;case"Object":o=Fi;break;case"Map":o=Si;break;default:throw new Error("Unexpected mobxType: ".concat(e))}var s=n[r];if(!o(s)){var l=function(t){var e=tu(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}(s),u=t?" or javascript `"+e.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+l+"` supplied to `"+i+"`, expected `mobx.Observable"+e+"`"+u+".")}return null}))}))}function nu(t,e){return $l((function(n,r,i,o,a){for(var s=arguments.length,l=new Array(s>5?s-5:0),u=5;u<s;u++)l[u-5]=arguments[u];return Qn((function(){if("function"!=typeof e)return new Error("Property `"+a+"` of component `"+i+"` has invalid PropType notation.");var s=eu(t,"Array")(n,r,i);if(s instanceof Error)return s;for(var u=n[r],c=0;c<u.length;c++)if((s=e.apply(void 0,[u,c,i,o,a+"["+c+"]"].concat(l)))instanceof Error)return s;return null}))}))}eu(!1,"Array"),nu.bind(null,!1),eu(!1,"Map"),eu(!1,"Object"),eu(!0,"Array"),nu.bind(null,!0);var ru=eu(!0,"Object"),iu=0,ou={};function au(t){return ou[t]||(ou[t]=function(t){if("function"==typeof Symbol)return Symbol(t);var e="__$mobx-react ".concat(t," (").concat(iu,")");return iu++,e}(t)),ou[t]}var su=au("patchMixins"),lu=au("patchedDefinition");function uu(t,e){var n=t[su]=t[su]||{},r=n[e]=n[e]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}function cu(t,e){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];e.locks++;try{var a;return null!=t&&(a=t.apply(this,i)),a}finally{e.locks--,0===e.locks&&e.methods.forEach((function(t){t.apply(n,i)}))}}function fu(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];cu.call.apply(cu,[this,t,e].concat(r))}}function pu(t,e,n,r,i){var o,a=fu(i,r);return Fl(o={},lu,!0),Fl(o,"get",(function(){return a})),Fl(o,"set",(function(i){if(this===t)a=fu(i,r);else{var o=pu(this,e,n,r,i);Object.defineProperty(this,e,o)}})),Fl(o,"configurable",!0),Fl(o,"enumerable",n),o}var hu={mobxStores:ru};Object.seal(hu);var du={contextTypes:{get:function(){return hu},set:function(t){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function yu(t,e,n){var r="inject-"+(e.displayName||e.name||e.constructor&&e.constructor.name||"Unknown");n&&(r+="-with-"+n);var i=function(n){function r(){var t,e;Pl(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=zl(this,(t=Ml(r)).call.apply(t,[this].concat(i)))).storeRef=function(t){e.wrappedInstance=t},e}return jl(r,a.Component),Al(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var i=t(this.context.mobxStores||{},n,this.context)||{};for(var o in i)n[o]=i[o];return function(t){return!(t.prototype&&t.prototype.render)}(e)||(n.ref=this.storeRef),Object(a.createElement)(e,n)}}]),r}();return i.displayName=r,Ql(i,e),i.wrappedComponent=e,Object.defineProperties(i,du),i}function gu(t){return function(e,n){return t.forEach((function(t){if(!(t in n)){if(!(t in e))throw new Error("MobX injector: Store '"+t+"' is not available! Make sure it is provided by some Provider");n[t]=e[t]}})),n}}function mu(){var t;if("function"==typeof arguments[0])return t=arguments[0],function(e){var n=yu(t,e);return n.isMobxInjector=!1,(n=ju(n)).isMobxInjector=!0,n};for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t=gu(e),function(n){return yu(t,n,e.join("-"))}}var vu=au("isUnmounted"),bu=!1,_u=!1,wu="undefined"!=typeof WeakMap?new WeakMap:void 0,xu=new Jl,Ou=au("skipRender"),Su=au("isForcingUpdate"),ku="function"==typeof a.forwardRef&&Object(a.forwardRef)((function(t,e){})).$$typeof;function Tu(t,e,n){Object.hasOwnProperty.call(t,e)?t[e]=n:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}function Eu(t){if(l.findDOMNode)try{return Object(l.findDOMNode)(t)}catch(t){return null}return null}function Cu(t){var e=Eu(t);e&&wu&&wu.set(e,t),xu.emit({event:"render",renderTime:t.__$mobRenderEnd-t.__$mobRenderStart,totalTime:Date.now()-t.__$mobRenderStart,component:t,node:e})}var Ru=new Jl;function Du(t,e){if(Pu(t,e))return!0;if("object"!==Dl(t)||null===t||"object"!==Dl(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!hasOwnProperty.call(e,n[i])||!Pu(t[n[i]],e[n[i]]))return!1;return!0}function Pu(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function Iu(t){var e=this;function n(){var t=this;s=!1;var e=void 0,n=void 0;if(l.track((function(){bu&&(t.__$mobRenderStart=Date.now());try{n=function(t,e){var n,r=sr(!1);try{n=e()}finally{lr(r)}return n}(0,o)}catch(t){e=t}bu&&(t.__$mobRenderEnd=Date.now())})),e)throw Ru.emit(e),e;return n}var r=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",i=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;Tu(this,Ou,!1),Tu(this,Su,!1);var o=t.bind(this),s=!1,l=new Sr("".concat(r,"#").concat(i,".render()"),(function(){if(!s&&(s=!0,"function"==typeof e.componentWillReact&&e.componentWillReact(),!0!==e[vu])){var t=!0;try{Tu(e,Su,!0),e[Ou]||a.Component.prototype.forceUpdate.call(e),t=!1}finally{Tu(e,Su,!1),t&&l.dispose()}}}));return l.reactComponent=this,n.$mobx=l,this.render=n,n.call(this)}var Au={componentWillUnmount:function(){if(this.render.$mobx&&this.render.$mobx.dispose(),this[vu]=!0,bu){var t=Eu(this);t&&wu&&wu.delete(t),xu.emit({event:"destroy",component:this,node:t})}},componentDidMount:function(){bu&&Cu(this)},componentDidUpdate:function(){bu&&Cu(this)},shouldComponentUpdate:function(t,e){return this.state!==e||!Du(this.props,t)}};function Fu(t,e){var n=au("reactProp_".concat(e,"_valueHolder")),r=au("reactProp_".concat(e,"_atomHolder"));function i(){return this[r]||Tu(this,r,vn("reactive "+e)),this[r]}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i.call(this).reportObserved(),this[n]},set:function(t){this[Su]||Du(this[n],t)?Tu(this,n,t):(Tu(this,n,t),Tu(this,Ou,!0),i.call(this).reportChanged(),Tu(this,Ou,!1))}})}function ju(t,e){if("string"==typeof t)throw new Error("Store names should be provided as array");if(Array.isArray(t))return _u||(_u=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),e?mu.apply(null,t)(ju(e)):function(e){return ju(t,e)};var n=t;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===a.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),ku&&n.$$typeof===ku){var r=n.render;if("function"!=typeof r)throw new Error("render property of ForwardRef was not a function");return Object(a.forwardRef)((function(){var t=arguments;return s.a.createElement(Mu,null,(function(){return r.apply(void 0,t)}))}))}if(!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||a.Component.isPrototypeOf(n))){var i,o,l=ju((o=i=function(t){function e(){return Pl(this,e),zl(this,Ml(e).apply(this,arguments))}return jl(e,a.Component),Al(e,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),e}(),i.displayName=n.displayName||n.name,i.contextTypes=n.contextTypes,i.propTypes=n.propTypes,i.defaultProps=n.defaultProps,o));return Ql(l,n),l}if(!n)throw new Error("Please pass a valid component to 'observer'");var u=n.prototype||n;!function(t){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach((function(e){!function(t,e){!function(t,e){for(var n=uu(t,e),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];n.methods.indexOf(s)<0&&n.methods.push(s)}var l=Object.getOwnPropertyDescriptor(t,e);if(!l||!l[lu]){var u=t[e],c=pu(t,e,l?l.enumerable:void 0,n,u);Object.defineProperty(t,e,c)}}(t,e,Au[e])}(t,e)})),t.shouldComponentUpdate?t.shouldComponentUpdate!==Au.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):t.shouldComponentUpdate=Au.shouldComponentUpdate}(u),n.isMobXReactObserver=!0,Fu(u,"props"),Fu(u,"state");var c=u.render;return u.render=function(){return Iu.call(this,c)},n}var Mu=ju((function(t){var e=t.children,n=t.inject,r=t.render,i=e||r;if(void 0===i)return null;if(!n)return i();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var o=mu(n)(i);return s.a.createElement(o,null)}));Mu.displayName="Observer";var zu=function(t,e,n,r,i){var o="children"===e?"render":"children";return"function"==typeof t[e]&&"function"==typeof t[o]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof t[e]&&"function"!=typeof t[o]?new Error("Invalid prop `"+i+"` of type `"+Dl(t[e])+"` supplied to `"+n+"`, expected `function`."):void 0};function Lu(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=t&&this.setState(t)}function Bu(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!=n?n:null}.bind(this))}function Nu(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Mu.propTypes={render:zu,children:zu},Lu.__suppressDeprecationWarning=!0,Bu.__suppressDeprecationWarning=!0,Nu.__suppressDeprecationWarning=!0;var Uu={children:!0,key:!0,ref:!0},Wu=function(t){function e(t,n){var r;return Pl(this,e),(r=zl(this,Ml(e).call(this,t,n))).state={},Hu(t,r.state),r}return jl(e,a.Component),Al(e,[{key:"render",value:function(){return a.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var t={};return Hu(this.context.mobxStores,t),Hu(this.props,t),{mobxStores:t}}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;if(!e)return t;if(Object.keys(t).filter(Vu).length!==Object.keys(e).filter(Vu).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!t.suppressChangedStoreWarning)for(var n in t)Vu(n)&&e[n]!==t[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return t}}]),e}();function Hu(t,e){if(t)for(var n in t)Vu(n)&&(e[n]=t[n])}function Vu(t){return!Uu[t]&&"suppressChangedStoreWarning"!==t}if(Wu.contextTypes={mobxStores:ru},Wu.childContextTypes={mobxStores:ru.isRequired},function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate)return t;var n=null,r=null,i=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?i="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=t.displayName||t.name,a="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=Lu,e.componentWillReceiveProps=Bu),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=Nu;var s=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,t,e,r)}}}(Wu),au("disposeOnUnmount"),!a.Component)throw new Error("mobx-react requires React to be available");if(!Fr)throw new Error("mobx-react requires mobx to be available");if("function"==typeof l.unstable_batchedUpdates&&Vr({reactionScheduler:l.unstable_batchedUpdates}),"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":Dl(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var Gu={spy:Fr,extras:{getDebugName:Mi}},Zu={renderReporter:xu,componentByNodeRegistry:wu,componentByNodeRegistery:wu,trackComponents:function(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");bu||(bu=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(Zu,Gu)}var Xu,qu,Yu=Object(o.b)(Xu||(Xu=O(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: ","px;\n  width: ","px;\n  border-radius: ",";\n  pointer-events: none;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: ","px;\n  width: ","px;\n  border-radius: ",";\n  pointer-events: none;\n"])),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.colorItem.borderRadius||t.theme.shape.radiusSmall+"px"})),Ku=o.c.div.attrs((function(t){return{style:{background:t.color}}}))(qu||(qu=O(["\n  ","\n  z-index: ",";\n"],["\n  ","\n  z-index: ",";\n"])),Yu,(function(t){return t.theme.measurements.zIndex.colorItem.background}));Ku.defaultProps={theme:bo};var Qu,Ju=o.c.div.attrs((function(t){return{style:t.url?{backgroundImage:"url("+t.url+")"}:{}}}))(Qu||(Qu=O(["\n  ","\n  z-index: ",";\n"],["\n  ","\n  z-index: ",";\n"])),Yu,(function(t){return t.theme.measurements.zIndex.colorItem.tiledBackground}));Ju.defaultProps={theme:bo};var $u,tc,ec,nc=o.c.div(tc||(tc=O(["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n\n  box-sizing: border-box;\n  border: 2px solid transparent;\n  border-radius: ",";\n  transition: border-color 300ms ease-in-out;\n  ","\n"],["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n\n  box-sizing: border-box;\n  border: 2px solid transparent;\n  border-radius: ",";\n  transition: border-color 300ms ease-in-out;\n  ","\n"])),Yu,(function(t){return t.theme.measurements.zIndex.colorItem.overlay}),(function(t){return t.theme.colorItem.borderRadius||t.theme.shape.radiusSmall+"px"}),(function(t){return t.isActive&&Object(o.b)($u||($u=O(["\n      border-color: ",";\n    "],["\n      border-color: ",";\n    "])),t.theme.selectColor.activeBorderColor)})),rc=o.c.span(ec||(ec=O(["\n  display: inline-block;\n  height: 2px;\n  width: 2px;\n  border-radius: 50%;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);\n  background: rgba(255, 255, 255, 0.87);\n  margin: 1px;\n  pointer-events: none;\n"],["\n  display: inline-block;\n  height: 2px;\n  width: 2px;\n  border-radius: 50%;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);\n  background: rgba(255, 255, 255, 0.87);\n  margin: 1px;\n  pointer-events: none;\n"]))),ic=function(t){var e=t.isActive,n=t.className,r=t.style;return s.a.createElement(nc,{isActive:e,className:n,style:r},e&&s.a.createElement(s.a.Fragment,null,s.a.createElement(rc,null),s.a.createElement(rc,null),s.a.createElement(rc,null)))};nc.defaultProps={theme:bo};var oc,ac,sc,lc,uc,cc,fc,pc,hc,dc,yc,gc,mc,vc,bc,_c,wc,xc,Oc,Sc,kc,Tc,Ec,Cc,Rc,Dc,Pc,Ic,Ac,Fc,jc,Mc,zc,Lc,Bc,Nc,Uc,Wc,Hc=Object(o.b)(oc||(oc=O(["\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n"],["\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n"])),(function(t){return t.theme.focusOutlineColor}),(function(t){return t.theme.focusOutlineColor})),Vc=Object(o.b)(ac||(ac=O(["\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n  clip: rect(1px, 1px, 1px, 1px);\n"],["\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n  clip: rect(1px, 1px, 1px, 1px);\n"]))),Gc=Object(o.b)(sc||(sc=O(["\n  -webkit-overflow-scrolling: touch;\n  &::-webkit-scrollbar {\n    display: none;\n    /* Safari */\n    -webkit-appearance: none; /* stylelint-disable-line */\n    width: 0;\n    height: 0;\n  }\n  -ms-overflow-style: none; /* IE 11 */\n  scrollbar-width: none; /* Firefox 64 */\n"],["\n  -webkit-overflow-scrolling: touch;\n  &::-webkit-scrollbar {\n    display: none;\n    /* Safari */\n    -webkit-appearance: none; /* stylelint-disable-line */\n    width: 0;\n    height: 0;\n  }\n  -ms-overflow-style: none; /* IE 11 */\n  scrollbar-width: none; /* Firefox 64 */\n"]))),Zc=Object(o.d)(lc||(lc=O(["\nfrom {\n  opacity: 1;\n  transform: scale(0);\n}\nto {\n  opacity: 0;\n  transform: scale(10);\n}\n"],["\nfrom {\n  opacity: 1;\n  transform: scale(0);\n}\nto {\n  opacity: 0;\n  transform: scale(10);\n}\n"]))),Xc=Object(o.d)(uc||(uc=O(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"],["\n  0% {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]))),qc=Object(o.d)(cc||(cc=O(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9) translateY(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n"],["\n  0% {\n    opacity: 0;\n    transform: scale(0.9) translateY(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n"]))),Yc=o.c.span(fc||(fc=O(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),Kc=Object(o.c)(Yc)(pc||(pc=O([""],[""]))),Qc=Object(o.c)(Yc)(hc||(hc=O([""],[""]))),Jc=Object(o.c)(Yc)(dc||(dc=O([""],[""]))),$c={display:"none",left:0,top:0},tf=Object(o.c)(Yc)(yc||(yc=O(["\n  display: ",";\n  left: ","px;\n  top: ","px;\n  pointer-events: none;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.12);\n  animation: "," 1.2s;\n  width: 100px;\n  height: 100px;\n  margin-top: -50px;\n  margin-left: -50px;\n  opacity: 0;\n"],["\n  display: ",";\n  left: ","px;\n  top: ","px;\n  pointer-events: none;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.12);\n  animation: "," 1.2s;\n  width: 100px;\n  height: 100px;\n  margin-top: -50px;\n  margin-left: -50px;\n  opacity: 0;\n"])),(function(t){return t.display}),(function(t){return t.left}),(function(t){return t.top}),Zc),ef=Object(o.b)(gc||(gc=O(["\n  color: ",";\n"],["\n  color: ",";\n"])),(function(t){return t.theme.button.activeForeground})),nf=o.c.button(mc||(mc=O(["\n  &&& {\n    box-sizing: border-box;\n  }\n  text-align: center;\n  position: relative;\n  padding: 4px 8px;\n  min-height: 32px;\n  border-radius: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: ",", sans-serif;\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  overflow: hidden;\n  ","\n\n  /* Active */\n\n  &:active {\n    ","\n  }\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"],["\n  &&& {\n    box-sizing: border-box;\n  }\n  text-align: center;\n  position: relative;\n  padding: 4px 8px;\n  min-height: 32px;\n  border-radius: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: ",", sans-serif;\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  overflow: hidden;\n  ","\n\n  /* Active */\n\n  &:active {\n    ","\n  }\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"])),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.theme.measurements.fontSystem.button1.size}),(function(t){return t.theme.measurements.fontSystem.button1.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button1.case}),(function(t){return t.theme.typography.fontFamily}),Hc,ef,(function(t){return t.isActive&&ef}),Qc,(function(t){return t.theme.button.outlinedInactiveOverlayColor}),Jc,(function(t){return t.theme.button.hoverOverlayColor})),rf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=$c,e.timeout=null,e.onClick=function(t){var n=t.currentTarget.getBoundingClientRect(),r=t.pageX-n.left,i=t.pageY-n.top;"block"===e.state.display?e.setState({display:"none"},(function(){e.setRippleState(r,i)})):e.setRippleState(r,i),e.props.onClick(t)},e.setRippleState=function(t,n){e.setState({left:t,top:n,display:"block"}),e.timeout=setTimeout((function(){e.setState({display:"none"})}),1200)},e}return d(e,t),e.prototype.componentWillUnmount=function(){clearTimeout(this.timeout)},e.prototype.render=function(){var t=this.props,e=t.isActive,n=t.isDisabled,r=t.label,i=t.ariaLabel,o=t.children,a=t.className,l=g(t,["isActive","isDisabled","label","ariaLabel","children","className"]),u=this.state,c=u.left,f=u.top,p=u.display;return s.a.createElement(nf,y({"data-test-id":i,className:a,isActive:e,disabled:n,"aria-label":i},l,{onClick:this.onClick}),r,o,s.a.createElement(tf,{display:p,left:c,top:f}),s.a.createElement(Qc,null),s.a.createElement(Jc,null))},e.defaultProps={type:"button",isDisabled:!1,isActive:!1},e}(s.a.Component),of=Object(o.c)(rf)(bc||(bc=O(["\n  ","\n"],["\n  ","\n"])),(function(t){return t.fullWidth&&Object(o.b)(vc||(vc=O(["\n      width: 100%;\n    "],["\n      width: 100%;\n    "])))})),af=o.c.div(_c||(_c=O(["\n  &:focus {\n    outline: none;\n  }\n\n  > img {\n    height: 18px;\n    width: 18px;\n  }\n\n  > svg {\n    height: 18px;\n    width: 18px;\n  }\n  display: none;\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: flex;\n  }\n"],["\n  &:focus {\n    outline: none;\n  }\n\n  > img {\n    height: 18px;\n    width: 18px;\n  }\n\n  > svg {\n    height: 18px;\n    width: 18px;\n  }\n  display: none;\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: flex;\n  }\n"]))),sf=o.c.div(xc||(xc=O(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:focus {\n    outline: none;\n  }\n\n  ","\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:focus {\n    outline: none;\n  }\n\n  ","\n"])),(function(t){return t.hasIcon&&Object(o.b)(wc||(wc=O(["\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: none;\n      }\n    "],["\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: none;\n      }\n    "])))})),lf=function(t){var e=t.label,n=t.children,r=t.icon,i=t.fullWidth,o=g(t,["label","children","icon","fullWidth"]),a=s.a.createElement(sf,{hasIcon:!!r},e,n);return s.a.createElement(of,y({fullWidth:i},o),r&&s.a.createElement(af,null,r),(n||e)&&a)},uf=Object(o.c)(lf)(Oc||(Oc=O(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  min-width: 32px;\n"],["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  min-width: 32px;\n"])),(function(t){return t.theme.button.outlinedPrimaryBackground}),(function(t){return t.theme.button.outlinedPrimaryForeground}),(function(t){return t.theme.button.outlinedBorderColor})),cf=Object(o.c)(rf)(Sc||(Sc=O(["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.button.textSecondaryForeground}),(function(t){return t.isActive&&ef}),Qc,(function(t){return t.theme.button.textInactiveOpacity})),ff=Object(o.c)(rf)(kc||(kc=O(["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  color: ",";\n\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.button.textPrimaryForeground}),(function(t){return t.isActive&&ef}),Qc,(function(t){return t.theme.button.textInactiveOpacity})),pf=Object(o.c)(lf)(Tc||(Tc=O(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"],["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"])),(function(t){return t.theme.button.outlinedSecondaryBackground}),(function(t){return t.theme.button.outlinedSecondaryForeground}),(function(t){return t.theme.button.outlinedBorderColor})),hf=Object(o.c)(rf)(Ec||(Ec=O(["\n  color: ",";\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  color: ",";\n  /* Repeat active styles so they are not overwritten */\n  ","\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.foreground}),(function(t){return t.isActive&&ef}),Qc,(function(t){return t.theme.button.textInactiveOpacity})),df=o.c.div(Cc||(Cc=O(["\n  display: flex;\n  &:focus {\n    outline: none;\n  }\n"],["\n  display: flex;\n  &:focus {\n    outline: none;\n  }\n"]))),yf=function(t){t.label;var e=t.icon,n=(t.children,g(t,["label","icon","children"]));return s.a.createElement(hf,y({},n),s.a.createElement(df,null,e))},gf=Object(o.c)(lf)(Rc||(Rc=O(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  &:active {\n    color: ",";\n  }\n"],["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  &:active {\n    color: ",";\n  }\n"])),(function(t){return t.theme.button.containedPrimaryBackground}),(function(t){return t.theme.button.containedPrimaryForeground}),(function(t){return t.theme.button.containedPrimaryBackground}),(function(t){return t.theme.button.containedPrimaryForeground})),mf=Object(o.b)(Pc||(Pc=O(["\n  border: 1px solid ",";\n  "," {\n    background-color: ",";\n  }\n"],["\n  border: 1px solid ",";\n  "," {\n    background-color: ",";\n  }\n"])),(function(t){return t.theme.card.activeBorderColor}),Kc,(function(t){return t.theme.card.activeOverlayColor})),vf=o.c.button.attrs((function(t){var e={};return t.image&&(e.backgroundImage="url("+t.image+")"),{style:e}}))(Ic||(Ic=O(["\n  &&& {\n    box-sizing: border-box;\n  }\n\n  padding: 0;\n  cursor: pointer;\n  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */\n  vertical-align: top;\n  border: none;\n  box-sizing: border-box;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: ",";\n  border-radius: ","px;\n  ",";\n  animation-fill-mode: both;\n  overflow: hidden;\n\n  ","\n\n  /* Active */\n\n  /* No :active styles on purpose. */\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"],["\n  &&& {\n    box-sizing: border-box;\n  }\n\n  padding: 0;\n  cursor: pointer;\n  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */\n  vertical-align: top;\n  border: none;\n  box-sizing: border-box;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: ",";\n  border-radius: ","px;\n  ",";\n  animation-fill-mode: both;\n  overflow: hidden;\n\n  ","\n\n  /* Active */\n\n  /* No :active styles on purpose. */\n\n  ","\n\n  /* Disabled */\n\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n\n    "," {\n      background-color: ",";\n    }\n  }\n\n  /* Hover */\n\n  &:hover {\n    "," {\n      background-color: ",";\n    }\n  }\n"])),(function(t){return t.theme.card.background}),(function(t){return t.theme.card.foreground}),(function(t){return t.theme.shape.radiusMedium}),(function(){return Object(o.b)(Dc||(Dc=O(["\n    animation: "," 0.2s linear;\n  "],["\n    animation: "," 0.2s linear;\n  "])),qc)}),Hc,(function(t){return t.isActive&&mf}),Qc,(function(t){return t.theme.card.inactiveOverlayColor}),Jc,(function(t){return t.theme.card.hoverOverlayColor})),bf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=$c,e.timeout=null,e.onKeyDown=function(t){"Space"!==t.key&&"Enter"!==t.key||e.props.onClick&&e.props.onClick()},e.onClick=function(t){var n=t.currentTarget.getBoundingClientRect(),r=t.pageX-n.left,i=t.pageY-n.top;"block"===e.state.display?e.setState({display:"none"},(function(){e.setRippleState(r,i)})):e.setRippleState(r,i),e.props.onClick(t)},e.setRippleState=function(t,n){e.setState({left:t,top:n,display:"block"}),e.timeout=setTimeout((function(){e.setState({display:"none"})}),1200)},e}return d(e,t),e.prototype.componentWillUnmount=function(){clearTimeout(this.timeout)},e.prototype.render=function(){var t=this.props,e=t.children,n=t.label,r=t.isActive,i=t.isDisabled,o=t.image,a=t.style,l=t.className,u=this.state,c=u.left,f=u.top,p=u.display;return s.a.createElement(vf,{isActive:r,"data-test-id":n,"aria-label":n,disabled:i,image:o,onClick:this.onClick,onKeyDown:this.onKeyDown,style:a,className:l},e,s.a.createElement(tf,{display:p,left:c,top:f}),s.a.createElement(Kc,null),s.a.createElement(Qc,null),s.a.createElement(Jc,null))},e}(s.a.Component),_f=o.c.div(Ac||(Ac=O(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n"])),(function(t){return t.theme.measurements.fontSystem.label.size}),(function(t){return t.theme.measurements.fontSystem.label.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.label.case})),wf=o.c.div(Mc||(Mc=O(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: 0px;\n  border-radius: ","px;\n  left: 0;\n  ","\n  width: 100%;\n  cursor: pointer;\n"],["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  bottom: 0px;\n  border-radius: ","px;\n  left: 0;\n  ","\n  width: 100%;\n  cursor: pointer;\n"])),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.withBackground?Object(o.b)(Fc||(Fc=O(["\n          color: ",";\n          height: 40px;\n          background: ",";\n        "],["\n          color: ",";\n          height: 40px;\n          background: ",";\n        "])),t.theme.card.labelForeground,t.theme.card.labelBackground):Object(o.b)(jc||(jc=O(["\n          color: ",";\n          height: 32px;\n        "],["\n          color: ",";\n          height: 32px;\n        "])),t.theme.card.foreground)})),xf=o.c.div(Bc||(Bc=O(["\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  ","\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"],["\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  ","\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"])),(function(t){return t.theme.card.labelForeground}),(function(t){return t.withBackground?Object(o.b)(zc||(zc=O(["\n          border-top-color: ",";\n        "],["\n          border-top-color: ",";\n        "])),t.theme.card.labelForeground):Object(o.b)(Lc||(Lc=O(["\n          border-top-color: ",";\n        "],["\n          border-top-color: ",";\n        "])),t.theme.card.foreground)}),(function(t){return t.rotation||0})),Of=o.c.span(Nc||(Nc=O(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-left: 10px;\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-left: 10px;\n"]))),Sf=o.c.div(Uc||(Uc=O(["\n  ","\n"],["\n  ","\n"])),Vc),kf=function(t){var e=t.children,n=t.className,r=t.caret,i=t.isActive,o=t.style,a=t.withBackground;return t.hidden?s.a.createElement(Sf,null,e):s.a.createElement(wf,{className:n,withBackground:a,style:o},s.a.createElement(_f,null,e,r&&s.a.createElement(Of,null,s.a.createElement(xf,{"aria-hidden":!0,rotation:i?180:0,withBackground:a}))))},Tf={Focused:Hc,HiddenScrollbar:Gc,VisuallyHidden:Vc},Ef={ripple:Zc,scale:Xc,slide:qc},Cf=o.c.button.attrs({type:"button"})(Wc||(Wc=O(["\n  &&& {\n    box-sizing: border-box;\n  }\n  position: relative;\n  background: transparent;\n  border: none;\n  height: ","px;\n  width: ","px;\n  margin: ",";\n  padding: 0;\n  cursor: pointer;\n  border-radius: ",";\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  ","\n\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n  }\n"],["\n  &&& {\n    box-sizing: border-box;\n  }\n  position: relative;\n  background: transparent;\n  border: none;\n  height: ","px;\n  width: ","px;\n  margin: ",";\n  padding: 0;\n  cursor: pointer;\n  border-radius: ",";\n\n  &:hover {\n    opacity: 0.7;\n  }\n\n  ","\n\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n  }\n"])),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.measurements.colorItem.size}),(function(t){return t.theme.colorItem.margin}),(function(t){return t.theme.colorItem.borderRadius||t.theme.shape.radiusSmall+"px"}),Tf.Focused,(function(t){return t.theme.selectColor.inactiveOpacity}));Cf.defaultProps={theme:bo};var Rf,Df,Pf,If,Af,Ff,jf,Mf,zf,Lf,Bf,Nf,Uf,Wf,Hf,Vf,Gf,Zf,Xf,qf,Yf,Kf,Qf=mu("config")(ju((function(t){var e=t.isActive,n=t.onClick,r=t.color,i=t.label,o=t.isDisabled,a=t.tiledBackgroundUrl,l=t.className,u=t.style,c=t.children;return s.a.createElement(Cf,{disabled:o,onClick:n,"aria-label":i,className:l,style:u},s.a.createElement(Ju,{url:a}),s.a.createElement(Ku,{color:r}),s.a.createElement(ic,{isActive:e}),c)}))),Jf=o.c.div(Df||(Df=O(["\n  display: none;\n  visibility: hidden;\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n  transition: opacity 100s ease-in-out;\n\n  ",";\n"],["\n  display: none;\n  visibility: hidden;\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n  transition: opacity 100s ease-in-out;\n\n  ",";\n"])),(function(t){return t.theme.measurements.zIndex.dialog.base}),(function(t){return t.isVisible&&Object(o.b)(Rf||(Rf=O(["\n      opacity: 1;\n      display: block;\n      visibility: visible;\n    "],["\n      opacity: 1;\n      display: block;\n      visibility: visible;\n    "])))})),$f=function(t){var e=t.isVisible,n=t.className,r=t.children;return s.a.createElement(Jf,{isVisible:e,className:n},r)},tp=o.c.div(Pf||(Pf=O(["\n  display: block;\n  opacity: 1;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: ",";\n  text-align: left;\n  background: ",";\n  height: 100%;\n  width: 100%;\n"],["\n  display: block;\n  opacity: 1;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: ",";\n  text-align: left;\n  background: ",";\n  height: 100%;\n  width: 100%;\n"])),(function(t){return t.theme.measurements.zIndex.dialog.backdrop}),(function(t){return t.theme.modal.backdrop})),ep=o.c.div.attrs((function(){return{role:"dialog","aria-hidden":!1}}))(If||(If=O(["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  transition: top 0.25s ease;\n  position: absolute;\n  top: calc(50% + ","px);\n  left: calc(50% + ","px);\n  width: ",";\n  height: ",";\n  transform: translate(-50%, -50%);\n  border-radius: ","px;\n  background: ",";\n  color: ",";\n  z-index: ",";\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    text-align: center;\n    width: auto;\n    min-width: 200px;\n    height: auto;\n    top: 50%;\n    left: 50%;\n  }\n"],["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  transition: top 0.25s ease;\n  position: absolute;\n  top: calc(50% + ","px);\n  left: calc(50% + ","px);\n  width: ",";\n  height: ",";\n  transform: translate(-50%, -50%);\n  border-radius: ","px;\n  background: ",";\n  color: ",";\n  z-index: ",";\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    text-align: center;\n    width: auto;\n    min-width: 200px;\n    height: auto;\n    top: 50%;\n    left: 50%;\n  }\n"])),(function(t){return t.top}),(function(t){return t.left}),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.theme.shape.radiusLarge}),(function(t){return t.theme.modal.background}),(function(t){return t.theme.modal.bodyForeground}),(function(t){return t.theme.measurements.zIndex.dialog.container})),np=o.c.h3(Af||(Af=O(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 11px 20px 0px;\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 11px 20px 0px;\n"])),(function(t){return t.theme.measurements.fontSystem.headline2.size}),(function(t){return t.theme.measurements.fontSystem.headline2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.headline2.case}),(function(t){return t.theme.modal.headerForeground})),rp=o.c.div(Ff||(Ff=O(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 0px 20px 11px;\n  &:first-child {\n    padding-top: 11px;\n  }\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    align-items: center;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  box-sizing: border-box;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  padding: 0px 20px 11px;\n  &:first-child {\n    padding-top: 11px;\n  }\n\n  @media all and (min-width: 0) and (max-width: 640px) {\n    align-items: center;\n  }\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.modal.bodyForeground})),ip=o.c.div(jf||(jf=O(["\n  display: flex;\n  border-top: 2px solid ",";\n\n  min-height: 40px;\n  justify-content: flex-end;\n  @media all and (min-width: 0) and (max-width: 640px) {\n    height: auto;\n    flex-direction: column;\n    justify-content: space-around;\n  }\n"],["\n  display: flex;\n  border-top: 2px solid ",";\n\n  min-height: 40px;\n  justify-content: flex-end;\n  @media all and (min-width: 0) and (max-width: 640px) {\n    height: auto;\n    flex-direction: column;\n    justify-content: space-around;\n  }\n"])),(function(t){return"error"===t.type?t.theme.error:t.theme.warning})),op=Object(o.d)(Mf||(Mf=O(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"],["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),ap=Object(o.b)(zf||(zf=O(["\n  animation: "," 2s infinite ease 1.5s;\n"],["\n  animation: "," 2s infinite ease 1.5s;\n"])),op),sp=Object(o.b)(Lf||(Lf=O(["\n  animation: "," 2s infinite ease;\n"],["\n  animation: "," 2s infinite ease;\n"])),op),lp=o.c.div(Bf||(Bf=O(["\n  color: ",";\n  margin: 12px 0;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  box-shadow: inset 0 0 0 2px;\n  transform: translateZ(0);\n  border-radius: 50%;\n  &:before,\n  &:after {\n    border-radius: 50%;\n    position: absolute;\n    content: '';\n  }\n  &:before {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 45px 0 0 45px;\n    top: -2.5px;\n    left: -2.5px;\n    transform-origin: 25px 25px;\n    ",";\n  }\n  &:after {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 0 45px 45px 0;\n    top: -2.5px;\n    left: 25px;\n    transform-origin: 0px 25px;\n    ",";\n  }\n"],["\n  color: ",";\n  margin: 12px 0;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  box-shadow: inset 0 0 0 2px;\n  transform: translateZ(0);\n  border-radius: 50%;\n  &:before,\n  &:after {\n    border-radius: 50%;\n    position: absolute;\n    content: '';\n  }\n  &:before {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 45px 0 0 45px;\n    top: -2.5px;\n    left: -2.5px;\n    transform-origin: 25px 25px;\n    ",";\n  }\n  &:after {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 0 45px 45px 0;\n    top: -2.5px;\n    left: 25px;\n    transform-origin: 0px 25px;\n    ",";\n  }\n"])),(function(t){return t.theme.primary}),(function(t){return t.theme.modal.background}),ap,(function(t){return t.theme.modal.background}),sp),up=o.c.div(Nf||(Nf=O(["\n  display: flex;\n"],["\n  display: flex;\n"]))),cp=Object(o.c)(np)(Uf||(Uf=O(["\n  padding: 0;\n"],["\n  padding: 0;\n"]))),fp=o.c.div(Wf||(Wf=O(["\n  display: flex;\n  flex-direction: column;\n  margin-left: 8px;\n  @media all and (min-width: 640px) {\n    margin-left: 30px;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  margin-left: 8px;\n  @media all and (min-width: 640px) {\n    margin-left: 30px;\n  }\n"]))),pp=Object(o.c)(rp)(Hf||(Hf=O(["\n  padding: 0;\n  margin: 0;\n"],["\n  padding: 0;\n  margin: 0;\n"]))),hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.render=function(){var t=this.props,e=t.headerLabel,n=t.bodyLabel,r=t.children,i=s.a.Children.toArray(r)[0];if(!s.a.isValidElement(i))throw new Error("Child is not a valid react element");return s.a.cloneElement(i,{height:"90px",body:s.a.createElement(rp,null,s.a.createElement(up,null,s.a.createElement(lp,null),s.a.createElement(fp,null,s.a.createElement(cp,null,e),s.a.createElement(pp,null,n))))})},e}(s.a.PureComponent),dp=Object(o.b)(Vf||(Vf=O(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  min-height: 26px;\n  color: ",";\n  padding-bottom: 7px;\n  border: none;\n  appearance: none;\n  border-bottom: 1px solid ",";\n  background: ",";\n  font-family: '","', sans-serif;\n  transition: border-color 0.4s ease-in-out;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:-moz-focusring {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n\n  &:hover {\n    border-color: ",";\n  }\n\n  &::-ms-clear,\n  &::-ms-reveal {\n    display: none;\n  }\n\n  &::-webkit-search-decoration,\n  &::-webkit-search-cancel-button,\n  &::-webkit-search-results-button,\n  &::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n  }\n\n  &::-webkit-inner-spin-button,\n  &::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  min-height: 26px;\n  color: ",";\n  padding-bottom: 7px;\n  border: none;\n  appearance: none;\n  border-bottom: 1px solid ",";\n  background: ",";\n  font-family: '","', sans-serif;\n  transition: border-color 0.4s ease-in-out;\n\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:-moz-focusring {\n    outline: none;\n    border-color: ",";\n  }\n\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n\n  &:hover {\n    border-color: ",";\n  }\n\n  &::-ms-clear,\n  &::-ms-reveal {\n    display: none;\n  }\n\n  &::-webkit-search-decoration,\n  &::-webkit-search-cancel-button,\n  &::-webkit-search-results-button,\n  &::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n  }\n\n  &::-webkit-inner-spin-button,\n  &::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.textInput.foreground}),(function(t){return t.theme.textInput.borderColor}),(function(t){return t.theme.textInput.background}),(function(t){return t.theme.typography.fontFamily}),(function(t){return t.theme.textInput.hoverBorderColor}),(function(t){return t.theme.textInput.hoverBorderColor}),(function(t){return t.theme.textInput.inactiveOpacity}),(function(t){return t.theme.textInput.hoverBorderColor})),yp=o.c.form(Gf||(Gf=O(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),gp=o.c.textarea(Zf||(Zf=O(["\n  display: flex;\n  caret-color: ",";\n  ","\n  min-height: 100%;\n  padding: 0px;\n  outline-offset: -8px;\n  color: ",";\n  resize: none;\n  font-family: '","', sans-serif;\n\n  &:selection,\n  &:-moz-selection {\n    background-color: ",";\n    color: ",";\n  }\n"],["\n  display: flex;\n  caret-color: ",";\n  ","\n  min-height: 100%;\n  padding: 0px;\n  outline-offset: -8px;\n  color: ",";\n  resize: none;\n  font-family: '","', sans-serif;\n\n  &:selection,\n  &:-moz-selection {\n    background-color: ",";\n    color: ",";\n  }\n"])),(function(t){return t.theme.primary}),dp,(function(t){return t.theme.modal.bodyForeground}),(function(t){return t.theme.typography.fontFamily}),(function(t){return t.theme.primary}),(function(t){return t.theme.foreground})),mp=o.c.label(Xf||(Xf=O(["\n  padding: 11px 20px 8px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"],["\n  padding: 11px 20px 8px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"])),(function(t){return t.theme.measurements.fontSystem.label.size}),(function(t){return t.theme.measurements.fontSystem.label.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.label.case}),(function(t){return t.theme.modal.headerForeground})),vp=Object(o.c)(rp)(qf||(qf=O(["\n  height: 100%;\n"],["\n  height: 100%;\n"]))),bp=Object(o.c)(ip)(Yf||(Yf=O(["\n  border-top: none;\n"],["\n  border-top: none;\n"]))),_p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={value:""},e.input=s.a.createRef(),e.handleKeydown=function(t){rt(e.handleDismiss)(t)},e.handleDismiss=function(){var t=e.props.handleDismiss;t&&t(!1)},e.handleConfirm=function(){var t=e.props.handleConfirm,n=e.input.current.value;n&&(t&&t(n),e.handleDismiss())},e.onChange=function(t){var n=Ol(t.target.value);e.input.current.value=n,e.setState({value:n})},e.onSubmit=function(t){t.preventDefault()},e}return d(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.text,n=t.defaultText;this.input.current.focus(),this.input.current.value=e||n||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),e===n&&this.input.current.select()},e.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeydown,!1)},e.prototype.componentDidUpdate=function(t){var e=this.props.isVisible;t.isVisible!==e&&e&&this.input.current.focus()},e.prototype.render=function(){var t=this.props,e=t.headerLabel,n=t.dismissLabel,r=t.confirmLabel,i=t.maxLength,o=t.type,a=t.children,l=this.state.value,u=s.a.Children.toArray(a)[0];if(!s.a.isValidElement(u))throw new Error("Child is not a valid react element");return s.a.cloneElement(u,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!l,height:"150px",header:s.a.createElement(mp,{htmlFor:"photoeditorsdk-TextInput"},e),body:s.a.createElement(vp,null,s.a.createElement(yp,{onSubmit:this.onSubmit},s.a.createElement(gp,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:i}))),footer:s.a.createElement(bp,{type:o},s.a.createElement(cf,{label:n,ariaLabel:n,onClick:this.handleDismiss}),s.a.createElement(ff,{label:r,ariaLabel:r,isDisabled:!l,onClick:this.handleConfirm}))})},e.defaultProps={defaultText:"Write Something"},e}(s.a.Component),wp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onDismiss=function(){var t=e.props,n=t.handleClose,r=t.handleDismiss;n&&n(),r&&r()},e.onConfirm=function(){var t=e.props,n=t.handleClose,r=t.handleConfirm;n&&n(),r&&r()},e}return d(e,t),e.prototype.render=function(){var t=this.props,e=t.headerLabel,n=t.bodyLabel,r=t.confirmLabel,i=t.dismissLabel,o=t.type,a=t.children,l=s.a.Children.toArray(a)[0];if(!s.a.isValidElement(l))throw new Error("Child is not a valid react element");return s.a.cloneElement(l,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:s.a.createElement(np,null,e),body:s.a.createElement(rp,null,n),footer:s.a.createElement(ip,{type:o},i&&s.a.createElement(cf,{label:i,ariaLabel:i,onClick:this.onDismiss}),r&&s.a.createElement(ff,{label:r,ariaLabel:r,onClick:this.onConfirm}))})},e}(s.a.Component),xp=o.c.div(Kf||(Kf=O(["\n  padding-bottom: ","px;\n"],["\n  padding-bottom: ","px;\n"])),(function(t){return 8*(t.count||1)}));xp.defaultProps={count:1};var Op,Sp,kp,Tp=o.c.label(Op||(Op=O(["\n  ","\n"],["\n  ","\n"])),Tf.VisuallyHidden),Ep=o.c.label(kp||(kp=O(["\n  display: block;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  margin: 0;\n\n  ","\n"],["\n  display: block;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  margin: 0;\n\n  ","\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.toolControlBar.inputLabelForeground}),(function(t){return t.isDisabled&&Object(o.b)(Sp||(Sp=O(["\n      opacity: ",";\n      cursor: default;\n      pointer-events: none;\n    "],["\n      opacity: ",";\n      cursor: default;\n      pointer-events: none;\n    "])),(function(t){return t.theme.toolControlBar.inputLabelInactiveOpacity}))})),Cp=function(t){var e=t.label,n=t.htmlFor,r=t.show,i=t.style,o=t.isDisabled,a=t.className,l=r?Ep:Tp,u=n||(e?e.replace(" ","-"):void 0);return s.a.createElement(l,{style:i,isDisabled:o,htmlFor:u,className:a},e)};Cp.defaultProps={show:!0},Ep.defaultProps={theme:bo};var Rp,Dp,Pp=o.c.input(Rp||(Rp=O(["\n  ","\n  /* override user agent style */\n  padding: 0;\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n    pointer-events: none;\n  }\n"],["\n  ","\n  /* override user agent style */\n  padding: 0;\n  &:disabled {\n    opacity: ",";\n    cursor: default;\n    pointer-events: none;\n  }\n"])),dp,(function(t){return t.theme.textInput.inactiveOpacity})),Ip=o.c.div(Dp||(Dp=O(["\n  position: relative;\n  &:first-child {\n    margin-right: 15px;\n  }\n"],["\n  position: relative;\n  &:first-child {\n    margin-right: 15px;\n  }\n"]))),Ap=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onChange=function(t){var n=e.props.onChange;n&&n(t.target.value)},e}return d(e,t),e.prototype.render=function(){var t=this.props,e=t.id,n=t.testId,r=t.value,i=t.type,o=t.min,a=t.max,l=t.onBlur,u=t.onFocus,c=t.onKeyUp,f=t.onKeyDown,p=t.onMouseUp,h=t.onTouchEnd,d=t.isDisabled,y=t.className,g=t.children;return s.a.createElement(Ip,{className:y},s.a.createElement(Pp,{id:e,"data-test-id":n,"aria-hidden":d,disabled:d,value:r,type:i,min:o,max:a,onChange:this.onChange,onBlur:l,onFocus:u,onKeyUp:c,onKeyDown:f,onMouseUp:p,onTouchEnd:h}),g)},e.defaultProps={type:"text"},e}(s.a.Component);Pp.defaultProps={theme:bo};var Fp,jp,Mp,zp,Lp,Bp,Np,Up,Wp,Hp,Vp,Gp,Zp=o.c.div(Mp||(Mp=O(["\n  ","\n"],["\n  ","\n"])),Pt()?Object(o.b)(Fp||(Fp=O([""],[""]))):Object(o.b)(jp||(jp=O(["\n        display: flex;\n        flex: 0 1 auto;\n        flex-direction: column;\n      "],["\n        display: flex;\n        flex: 0 1 auto;\n        flex-direction: column;\n      "])))),Xp=function(t){function e(n){var r=t.call(this,n)||this;return r.node=null,r.handleOutsideClick=function(t){r.node&&r.node.current&&r.node.current.contains(t.target)||r.onSubmit()},r.onSubmit=function(){var t=r.props.onSubmit,n=r.state,i=n.value,o=n.isActive;if(t){var a=parseFloat(e.cleanValue(i));!Number.isNaN(a)&&o&&t(""+a)}r.setState({isActive:!1})},r.onBlur=function(){r.onSubmit()},r.onFocus=function(){r.setState({isActive:!0})},r.onKeyDown=function(t){var n=r.state.value;if("Enter"===t.key)r.onSubmit();else if("ArrowUp"===t.key)"number"==typeof(i=parseFloat(e.cleanValue(n)))&&r.setState({value:(i+1).toString(),isActive:!0});else if("ArrowDown"===t.key){var i;"number"==typeof(i=parseFloat(e.cleanValue(n)))&&r.setState({value:(i-1).toString(),isActive:!0})}},r.onChange=function(t){r.setState({value:t.replace(/[^\d.,-]/g,""),isActive:!0})},r.state={value:r.props.value||"",isActive:!1},r.node=s.a.createRef(),document.addEventListener("mousedown",r.handleOutsideClick,!1),document.addEventListener("touchstart",r.handleOutsideClick,!1),r}return d(e,t),e.getDerivedStateFromProps=function(t,e){var n=t.value,r=e.value,i=e.isActive;return n===r||i?null:{value:n}},e.cleanValue=function(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""},e.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)},e.prototype.render=function(){var t=this.props,e=t.id,n=t.label,r=t.isDisabled,i=t.ariaHidden,o=t.onMouseUp,a=t.onTouchEnd,l=t.className,u=this.state.value;return s.a.createElement(Zp,{ref:this.node,className:l},s.a.createElement(Cp,{htmlFor:e,label:n,show:!!n,isDisabled:r}),!!n&&s.a.createElement(xp,null),s.a.createElement(Ap,{id:e,value:u,isDisabled:r,"aria-hidden":i,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:o,onTouchEnd:a}))},e.defaultProps={showLabel:!0},e}(s.a.Component),qp=o.c.div(zp||(zp=O(["\n  display: flex;\n  flex-direction: column;\n  /* needed for IE11 to properly calculate the width */\n  min-width: 1px;\n"],["\n  display: flex;\n  flex-direction: column;\n  /* needed for IE11 to properly calculate the width */\n  min-width: 1px;\n"]))),Yp=Object(o.b)(Np||(Np=O(["\n  ","\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n"],["\n  ","\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n"])),Dt()||Pt()?Object(o.b)(Lp||(Lp=O(["\n        width: 16px;\n        height: 16px;\n      "],["\n        width: 16px;\n        height: 16px;\n      "]))):Object(o.b)(Bp||(Bp=O(["\n        width: 20px;\n        height: 20px;\n      "],["\n        width: 20px;\n        height: 20px;\n      "]))),(function(t){return t.theme.slider.thumbBackground}),(function(t){return t.theme.slider.thumbBorderColor})),Kp=o.c.input(Hp||(Hp=O(["\n  display: flex;\n  flex: 1 0 auto;\n  appearance: none;\n  max-width: calc(100% - 50px);\n  outline: none;\n  border-radius: 0; /* iOS */\n\n  ","\n\n  ","\n  &::-moz-focus-outer {\n    /** This is to remove the dotted focus lines in firefox */\n    border: 0;\n  }\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n  &:hover {\n    opacity: ",";\n  }\n  &::-webkit-slider-runnable-track {\n    cursor: pointer;\n    appearance: none;\n  }\n  &::-moz-range-track {\n    appearance: none;\n    cursor: pointer;\n  }\n  &::-ms-track {\n    cursor: pointer;\n    height: 2px;\n    appearance: none;\n    background: transparent;\n    color: transparent;\n    border-color: transparent;\n    border-width: 6px 0;\n  }\n  &::-webkit-slider-thumb {\n    appearance: none;\n    ","\n  }\n  &::-moz-range-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-fill-lower {\n    background: ",";\n  }\n  &::-ms-fill-upper {\n    background: ",";\n  }\n  &::-ms-tooltip {\n    display: none;\n  }\n  @media all and (min-width: 0) and (max-width: 599px) {\n    width: 200px;\n  }\n"],["\n  display: flex;\n  flex: 1 0 auto;\n  appearance: none;\n  max-width: calc(100% - 50px);\n  outline: none;\n  border-radius: 0; /* iOS */\n\n  ","\n\n  ","\n  &::-moz-focus-outer {\n    /** This is to remove the dotted focus lines in firefox */\n    border: 0;\n  }\n  &:disabled {\n    opacity: ",";\n    pointer-events: none;\n  }\n  &:hover {\n    opacity: ",";\n  }\n  &::-webkit-slider-runnable-track {\n    cursor: pointer;\n    appearance: none;\n  }\n  &::-moz-range-track {\n    appearance: none;\n    cursor: pointer;\n  }\n  &::-ms-track {\n    cursor: pointer;\n    height: 2px;\n    appearance: none;\n    background: transparent;\n    color: transparent;\n    border-color: transparent;\n    border-width: 6px 0;\n  }\n  &::-webkit-slider-thumb {\n    appearance: none;\n    ","\n  }\n  &::-moz-range-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-thumb {\n    appearance: none;\n    ","\n  }\n  &::-ms-fill-lower {\n    background: ",";\n  }\n  &::-ms-fill-upper {\n    background: ",";\n  }\n  &::-ms-tooltip {\n    display: none;\n  }\n  @media all and (min-width: 0) and (max-width: 599px) {\n    width: 200px;\n  }\n"])),Tf.Focused,Dt()||Pt()?Object(o.b)(Up||(Up=O(["\n        margin-top: 10px;\n        height: 20px;\n        /* remove once we have a better concept for focus in all browser */\n        &:focus {\n          box-shadow: none;\n        }\n      "],["\n        margin-top: 10px;\n        height: 20px;\n        /* remove once we have a better concept for focus in all browser */\n        &:focus {\n          box-shadow: none;\n        }\n      "]))):Object(o.b)(Wp||(Wp=O(["\n        height: 2px;\n        background: ",";\n      "],["\n        height: 2px;\n        background: ",";\n      "])),(function(t){return"linear-gradient(to right, "+function(t){var e=100*(t.value-t.min)/(t.max-t.min);return t.adjust?t.value>0?(e=t.value*(t.max/2)*100,t.theme.slider.trackColor+" 0%,\n      "+t.theme.slider.trackColor+" 50%,\n      "+t.theme.slider.activeTrackColor+" 50%,\n      "+t.theme.slider.activeTrackColor+" "+(50+e)+"%,\n      "+t.theme.slider.trackColor+" "+(50+e)+"%,\n      "+t.theme.slider.trackColor+" 100%\n      "):t.value<0?(e=t.value*(t.min/2)*100,t.theme.slider.trackColor+" 0%,\n      "+t.theme.slider.trackColor+" "+(50-e)+"%,\n      "+t.theme.slider.activeTrackColor+" "+(50-e)+"%,\n      "+t.theme.slider.activeTrackColor+" 50%,\n      "+t.theme.slider.trackColor+" 50%,\n      "+t.theme.slider.trackColor+" 100%\n      "):t.theme.slider.trackColor+" 0%,\n    "+t.theme.slider.trackColor+" 100%":t.theme.slider.activeTrackColor+" 0%,\n    "+t.theme.slider.activeTrackColor+" "+e+"%,\n    "+t.theme.slider.trackColor+" "+e+"%,\n    "+t.theme.slider.trackColor+" 100%"}(t)+")"})),(function(t){return t.theme.slider.inactiveOpacity}),(function(t){return t.theme.slider.hoverOpacity}),Yp,Yp,Yp,(function(t){return""+t.theme.slider.activeTrackColor}),(function(t){return""+t.theme.slider.trackColor})),Qp=o.c.div(Vp||(Vp=O(["\n  display: flex;\n  align-items: center;\n  height: 26px;\n  margin-right: ","px;\n"],["\n  display: flex;\n  align-items: center;\n  height: 26px;\n  margin-right: ","px;\n"])),(function(t){return t.centerSlider?-56:0})),Jp=Object(o.c)(Xp)(Gp||(Gp=O(["\n  max-width: 50px;\n  padding-left: 16px;\n  > div > input {\n    text-align: center;\n  }\n"],["\n  max-width: 50px;\n  padding-left: 16px;\n  > div > input {\n    text-align: center;\n  }\n"]))),$p=function(t){function e(e){var n=t.call(this,e)||this;return n.onSubmit=function(t){var e=n.props,r=e.onChange,i=e.suffix,o=e.divider,a=e.min,s=e.max,l=e.value,u=t.replace(i,""),c=u?parseFloat(u)/o:l,f=Math.max(a,Math.min(s,c));Number.isNaN(f)||(r(f),n.props.onMouseUp?n.props.onMouseUp():n.props.onTouchEnd&&n.props.onTouchEnd())},n.onSliderChange=function(t){(0,n.props.onChange)(parseFloat(t.target.value))},n.randomId=R(),n}return d(e,t),e.prototype.render=function(){var t=this.props,e=t.value,n=t.snap,r=t.min,i=t.max,o=t.divider,a=t.suffix,l=t.decimal,u=t.showLabel,c=t.showInput,f=t.style,p=t.centerSlider,h=t.adjust,d=t.label,y=t.isDisabled,g=t.step,m=t["aria-hidden"],v=t.onMouseUp,b=t.onTouchEnd,_=t.className,w="photoeditorsdk-slider-"+this.randomId,x=w+"-list",O=w+"-input",S="number"==typeof n,k=S&&s.a.createElement("datalist",{id:x},s.a.createElement("option",{value:n})),T=""+(e*o).toFixed(l)+a,E=c&&s.a.createElement(Jp,{id:O,value:T,isDisabled:y,"aria-hidden":m,onSubmit:this.onSubmit});return s.a.createElement(qp,{className:_,"data-test-id":d},s.a.createElement(Cp,{isDisabled:y,label:d,show:u}),s.a.createElement(xp,{count:.25}),s.a.createElement(Qp,{centerSlider:c&&p},s.a.createElement(Kp,{type:"range",role:"slider","aria-hidden":m,tabIndex:0,value:e,min:r,max:i,step:g,style:f,disabled:y,id:w,list:S?x:void 0,onChange:this.onSliderChange,adjust:h,name:d,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:v,onTouchEnd:b}),k,E))},e.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""},e}(s.a.Component);Kp.defaultProps={theme:bo};var th,eh=o.c.input.attrs({type:"search"})(th||(th=O(["\n  ","\n"],["\n  ","\n"])),dp);eh.defaultProps={theme:bo};var nh,rh,ih=o.c.input.attrs({type:"file",id:"fileUpload",accept:"image/png, image/jpeg"})(nh||(nh=O(["\n  display: none;\n"],["\n  display: none;\n"]))),oh=o.c.ul.attrs((function(t){var e=t.scrollable;return{"data-simplebar":e?"init":null,"data-simplebar-auto-hide":e?"false":null}}))(rh||(rh=O(["\n  list-style: none;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n  visibility: hidden;\n  opacity: 0;\n  min-width: 5rem;\n  position: absolute;\n  transition: all 0.5s ease;\n  left: -1px;\n  display: none;\n  padding: unset;\n  width: 100%;\n  z-index: ",";\n  max-height: 160px;\n  overflow-x: hidden;\n  margin: 5px 0;\n  border-radius: 0 0 ","px ","px;\n  &[data-simplebar] {\n    position: absolute;\n  }\n"],["\n  list-style: none;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n  visibility: hidden;\n  opacity: 0;\n  min-width: 5rem;\n  position: absolute;\n  transition: all 0.5s ease;\n  left: -1px;\n  display: none;\n  padding: unset;\n  width: 100%;\n  z-index: ",";\n  max-height: 160px;\n  overflow-x: hidden;\n  margin: 5px 0;\n  border-radius: 0 0 ","px ","px;\n  &[data-simplebar] {\n    position: absolute;\n  }\n"])),(function(t){return t.theme.dropdown.listBackground}),(function(t){return t.theme.dropdown.listForeground}),(function(t){return t.theme.dropdown.listBorderColor}),(function(t){return t.theme.dropdown.listShadow}),(function(t){return t.theme.measurements.zIndex.input.list}),(function(t){return t.theme.shape.radiusMedium}),(function(t){return t.theme.shape.radiusMedium}));oh.defaultProps={theme:bo,scrollable:!0};var ah,sh,lh,uh,ch=Object(o.b)(ah||(ah=O(["\n  outline: none;\n"],["\n  outline: none;\n"]))),fh=Object(o.b)(sh||(sh=O(["\n  opacity: ",";\n  pointer-events: none;\n"],["\n  opacity: ",";\n  pointer-events: none;\n"])),(function(t){return t.theme.dropdown.inactiveOpacity})),ph=o.c.div(uh||(uh=O(["\n  display: block;\n  position: relative;\n  width: 100%;\n  white-space: nowrap;\n  transition-duration: 0.5s;\n\n  &:focus a {\n    ","\n  }\n\n  ","\n\n  &:disabled {\n    ","\n  }\n\n  ","\n"],["\n  display: block;\n  position: relative;\n  width: 100%;\n  white-space: nowrap;\n  transition-duration: 0.5s;\n\n  &:focus a {\n    ","\n  }\n\n  ","\n\n  &:disabled {\n    ","\n  }\n\n  ","\n"])),ch,(function(t){return t.isOpen&&Object(o.b)(lh||(lh=O(["\n      a {\n        ","\n      }\n      "," {\n        visibility: visible;\n        opacity: 1;\n        display: block;\n      }\n    "],["\n      a {\n        ","\n      }\n      "," {\n        visibility: visible;\n        opacity: 1;\n        display: block;\n      }\n    "])),ch,oh)}),fh,(function(t){return t.isDisabled&&fh}));ph.defaultProps={theme:bo};var hh,dh,yh=o.c.li(dh||(dh=O(["\n  padding: 10px 16px;\n  text-overflow: ellipsis;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  white-space: nowrap;\n  color: ",";\n\n  &:hover {\n    cursor: pointer;\n    background: ",";\n  }\n\n  ","\n\n  ","\n"],["\n  padding: 10px 16px;\n  text-overflow: ellipsis;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  white-space: nowrap;\n  color: ",";\n\n  &:hover {\n    cursor: pointer;\n    background: ",";\n  }\n\n  ","\n\n  ","\n"])),(function(t){return t.theme.measurements.fontSystem.button2.size}),(function(t){return t.theme.measurements.fontSystem.button2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button2.case}),(function(t){return t.theme.dropdown.foreground}),(function(t){return t.theme.dropdown.listItemHoverBackground}),(function(t){return t.isActive&&Object(o.b)(hh||(hh=O(["\n      border-left: 2px solid ",";\n    "],["\n      border-left: 2px solid ",";\n    "])),(function(t){return t.theme.primary}))}),Tf.Focused);yh.defaultProps={theme:bo};var gh,mh,vh,bh,_h,wh,xh,Oh,Sh=o.c.div(gh||(gh=O(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 5px 0;\n  cursor: ",";\n  transition: border-color 0.4s ease-in-out;\n\n  &:hover {\n    border-color: ",";\n  }\n\n  ","\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 5px 0;\n  cursor: ",";\n  transition: border-color 0.4s ease-in-out;\n\n  &:hover {\n    border-color: ",";\n  }\n\n  ","\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.dropdown.foreground}),(function(t){return t.theme.dropdown.background}),(function(t){return t.theme.dropdown.borderColor}),(function(t){return t.showList?"pointer":"default"}),(function(t){return t.theme.dropdown.hoverBorderColor}),Tf.Focused),kh=o.c.div(mh||(mh=O(["\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n  right: 0;\n  top: 13px;\n"],["\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n  right: 0;\n  top: 13px;\n"])),(function(t){return t.theme.dropdown.caretColor}),(function(t){return t.rotation||0})),Th=o.c.div(vh||(vh=O([""],[""]))),Eh=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isOpen:!1},n.handleOutsideClick=function(t){n.node&&n.node.contains(t.target)||n.setState({isOpen:!1})},n.onSelect=function(t){n.props.onSelect(t),n.setState({isOpen:!1})},n.onClick=function(){n.setState((function(t){return{isOpen:!t.isOpen}}))},n.listItem=function(t){var e=n.props,r=e.itemStyle,i=e.selectedItem,o=t.value,a=t.label,l={};return"function"==typeof r?l=r(t):null!==r&&"object"==typeof r&&(l=r),s.a.createElement(yh,{"aria-hidden":!n.state.isOpen,tabIndex:0,style:l,onClick:function(){return n.onSelect(o)},key:o,isActive:i===o},a)},n.onKeyDown=function(t){"Space"!==t.code&&"Enter"!==t.code||n.onClick()},n.nodeRef=function(t){n.node=t},n}return d(e,t),e.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick,!1)},e.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)},e.prototype.render=function(){var t=this.props,e=t.selectedItem,n=t.list,r=t.label,i=t.style,o=t.isDisabled,a=this.state.isOpen,l=n.length>1,u=o?{}:{tabIndex:0};return s.a.createElement(Th,null,s.a.createElement(Cp,{isDisabled:o,style:{paddingLeft:"0px"},label:r}),s.a.createElement(xp,null),s.a.createElement("div",{ref:this.nodeRef},s.a.createElement(ph,{id:r.replace(" ","-"),isOpen:a,isDisabled:o},s.a.createElement(Sh,y({"aria-hidden":o},u,{showList:l,style:i,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown}),e,l&&s.a.createElement(kh,{rotation:a?180:0})),s.a.createElement(oh,{scrollable:n.length>4},l&&n.map(this.listItem)))))},e}(s.a.PureComponent),Ch=o.c.div(bh||(bh=O(["\n  display: flex;\n  position: relative;\n  margin-bottom: 12px;\n  max-width: ","px;\n"],["\n  display: flex;\n  position: relative;\n  margin-bottom: 12px;\n  max-width: ","px;\n"])),(function(t){return t.theme.measurements.basicToolControlBar.maxWidth})),Rh=o.c.input.attrs({type:"checkbox",tabIndex:0})(_h||(_h=O(["\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n  margin: 0;\n  padding: 0;\n  ","\n"],["\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n  margin: 0;\n  padding: 0;\n  ","\n"])),Tf.Focused),Dh=o.c.div.attrs({tabIndex:0})(Oh||(Oh=O(["\n  position: relative;\n  height: 16px;\n  width: 16px;\n  cursor: pointer;\n  background-color: ",";\n  border-radius: ","px;\n  transition-timing-function: ease-in;\n  transition-duration: 0.3s;\n  &::after {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    left: 5px;\n    width: 5px;\n    height: 10px;\n    border-style: solid;\n    border-width: 0 2px 2px 0;\n    border-color: transparent;\n    transform: rotate(45deg) scale(0.8);\n  }\n\n  &:first-child {\n    margin-right: 8px;\n  }\n\n  &:last-child {\n    margin-left: 8px;\n  }\n\n  ","\n\n  &:hover {\n    opacity: ",";\n  }\n  ","\n  ","\n"],["\n  position: relative;\n  height: 16px;\n  width: 16px;\n  cursor: pointer;\n  background-color: ",";\n  border-radius: ","px;\n  transition-timing-function: ease-in;\n  transition-duration: 0.3s;\n  &::after {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    left: 5px;\n    width: 5px;\n    height: 10px;\n    border-style: solid;\n    border-width: 0 2px 2px 0;\n    border-color: transparent;\n    transform: rotate(45deg) scale(0.8);\n  }\n\n  &:first-child {\n    margin-right: 8px;\n  }\n\n  &:last-child {\n    margin-left: 8px;\n  }\n\n  ","\n\n  &:hover {\n    opacity: ",";\n  }\n  ","\n  ","\n"])),(function(t){return t.theme.checkbox.background}),(function(t){return t.theme.shape.radiusSmall}),Tf.Focused,(function(t){return t.theme.checkbox.hoverOpacity}),(function(t){return t.isChecked&&Object(o.b)(wh||(wh=O(["\n      background-color: ",";\n      &::after {\n        color: ",";\n        border-color: ",";\n      }\n      &:hover {\n        background-color: ",";\n        opacity: 0.8;\n      }\n    "],["\n      background-color: ",";\n      &::after {\n        color: ",";\n        border-color: ",";\n      }\n      &:hover {\n        background-color: ",";\n        opacity: 0.8;\n      }\n    "])),t.theme.checkbox.activeBackground,t.theme.checkbox.activeForeground,t.theme.checkbox.foreground,t.theme.checkbox.activeBackground)}),(function(t){return t.isDisabled&&Object(o.b)(xh||(xh=O(["\n      opacity: 0.5;\n      cursor: default;\n      pointer-events: none;\n    "],["\n      opacity: 0.5;\n      cursor: default;\n      pointer-events: none;\n    "])))})),Ph=function(t){var e=t.label,n=t.value,r=t.checkMarkPosition,i=t.onClick,o=t.isDisabled,a=t.className,l=t.style,u="photoeditorsdk-"+e.replace(" ","-");return s.a.createElement(Ch,{className:a,style:l},"left"===r&&s.a.createElement(Dh,{onClick:i,isDisabled:o,isChecked:n}),s.a.createElement(Cp,{isDisabled:o,label:e,htmlFor:u}),s.a.createElement(Rh,{id:u,disabled:o,checked:n,onChange:i}),"right"===r&&s.a.createElement(Dh,{onClick:i,isDisabled:o,isChecked:n}))};Ph.defaultProps={value:!1,checkMarkPosition:"left"};var Ih,Ah,Fh,jh,Mh,zh,Lh,Bh,Nh,Uh,Wh,Hh,Vh,Gh=o.c.div(Ih||(Ih=O(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),Zh=Object(o.c)(Cp)(Ah||(Ah=O(["\n  align-self: flex-start;\n"],["\n  align-self: flex-start;\n"]))),Xh=Object(o.c)(rf)(Fh||(Fh=O(["\n  color: ",";\n  padding: 1px 7px 2px;\n"],["\n  color: ",";\n  padding: 1px 7px 2px;\n"])),(function(t){return t.theme.button.textSecondaryForeground})),qh=o.c.div(jh||(jh=O(["\n  display: flex;\n  justify-content: space-between;\n  width: ","px;\n"],["\n  display: flex;\n  justify-content: space-between;\n  width: ","px;\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.width-48})),Yh=o.c.article(Mh||(Mh=O(["\n  /* 0.6 of width here refers to the width of the container without padding */\n  width: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  text-align: center;\n  margin-top: 7px;\n  display: inline-block;\n  color: ",";\n"],["\n  /* 0.6 of width here refers to the width of the container without padding */\n  width: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  text-align: center;\n  margin-top: 7px;\n  display: inline-block;\n  color: ",";\n"])),(function(t){return.6*t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case}),(function(t){return t.theme.toolControlBar.inputLabelForeground})),Kh=o.c.div(zh||(zh=O(["\n  width: ","px;\n  transform: translateZ(0);\n  overflow: hidden;\n  transition: all 500ms ease-out;\n"],["\n  width: ","px;\n  transform: translateZ(0);\n  overflow: hidden;\n  transition: all 500ms ease-out;\n"])),(function(t){return.6*t.theme.measurements.advancedUIToolControlBar.width})),Qh=o.c.span(Lh||(Lh=O(["\n  width: ","px;\n  margin-left: -","px;\n  position: relative;\n  display: inline-block;\n  transform: translateZ(0);\n  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);\n  font-family: '","', sans-serif;\n"],["\n  width: ","px;\n  margin-left: -","px;\n  position: relative;\n  display: inline-block;\n  transform: translateZ(0);\n  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);\n  font-family: '","', sans-serif;\n"])),(function(t){return Math.round(.6*t.length*t.theme.measurements.advancedUIToolControlBar.width)}),(function(t){return.6*t.activeIndex*t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.typography.fontFamily})),Jh=o.c.div(Uh||(Uh=O(["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  padding: 3px;\n  height: 0;\n  width: 0;\n\n  ","\n"],["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  padding: 3px;\n  height: 0;\n  width: 0;\n\n  ","\n"])),(function(t){return t.theme.card.foreground}),(function(t){var e=t.direction;return Object(o.b)("left"===e?Bh||(Bh=O(["\n          margin-left: 2px;\n          transform: rotate(135deg);\n        "],["\n          margin-left: 2px;\n          transform: rotate(135deg);\n        "])):Nh||(Nh=O(["\n          margin-right: 2px;\n          transform: rotate(-45deg);\n        "],["\n          margin-right: 2px;\n          transform: rotate(-45deg);\n        "])))})),$h=function(t){function e(e){var n=t.call(this,e)||this;return n.updateIndex=function(t,e){void 0===e&&(e=!1);var r=t+(e?-1:1),i=n.props.list.length-1;r>i&&(r=0),r<0&&(r=i),n.props.onSelect(n.props.list[r].identifier)},n.getActiveIndex=function(t){var e=n.props.list.findIndex((function(e){return e.identifier===t}));return-1!==e?e:0},n.throttledUpdateIndex=Bo(n.updateIndex,600),n}return d(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.list,r=e.label,i=e.showLabel,o=void 0===i||i,a=this.getActiveIndex(this.props.defaultIdentifier),l=n.length<=1;return s.a.createElement(Gh,null,s.a.createElement(Zh,{show:o,label:r}),o?s.a.createElement(xp,null):null,s.a.createElement(qh,{id:"photoeditorsdk-"+r.replace(" ","-")},s.a.createElement(Xh,{ariaLabel:"Select Previous",isDisabled:l,onClick:function(){return t.throttledUpdateIndex(a,!0)}},s.a.createElement(Jh,{direction:"left"})),s.a.createElement(Kh,null,s.a.createElement(Qh,{activeIndex:a,length:n.length},n.map((function(t){return s.a.createElement(Yh,{key:t.identifier},t.value)})))),s.a.createElement(Xh,{ariaLabel:"Select Next",isDisabled:l,onClick:function(){return t.throttledUpdateIndex(a)}},s.a.createElement(Jh,{direction:"right"}))))},e.defaultProps={showLabel:!0},e}(s.a.PureComponent),td=o.c.div(Wh||(Wh=O([""],[""]))),ed=function(t){var e=t.label,n=t.children,r=t.inline,i=t.showLabel,o=t.isDisabled;return s.a.createElement(td,null,s.a.createElement(Cp,{isDisabled:o,label:e,show:i}),i&&s.a.createElement(xp,null)||null,s.a.createElement(nd,{id:"photoeditorsdk-"+e.replace(" ","-"),inline:!!r},n))},nd=o.c.div(Vh||(Vh=O(["\n  display: inline-flex;\n  ","\n"],["\n  display: inline-flex;\n  ","\n"])),(function(t){return!t.inline&&Object(o.b)(Hh||(Hh=O(["\n        flex-wrap: wrap;\n      "],["\n        flex-wrap: wrap;\n      "])))||""}));function rd(t,e){for(var n=0,r=t.length;n<r;n+=1)if(e.apply(e,[t[n],n,t]))return t[n];return null}function id(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}function od(t){return"number"==typeof t&&!Number.isNaN(t)}function ad(t){return parseInt(t,10)}ed.defaultProps={showLabel:!0};var sd=["Moz","Webkit","O","ms"];function ld(t,e){return e?""+e+function(t){var e,n="",r=!0;for(e=0;e<t.length;e+=1)r?(n+=t[e].toUpperCase(),r=!1):"-"===t[e]?r=!0:n+=t[e];return n}(t):t}var ud=function(t){if(void 0===t&&(t="transform"),"undefined"==typeof window||void 0===window.document)return"";var e,n=window.document.documentElement.style;if(t in n)return"";for(e=0;e<sd.length;e+=1)if(ld(t,sd[e])in n)return sd[e];return""}(),cd="";function fd(t,e){return cd||(cd=rd(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(e){return id(t[e])}))),!!id(t[cd])&&t[cd](e)}function pd(t,e,n){var r=t;do{if(fd(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function hd(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t["on"+e]=n)}function dd(t,e,n){t&&(t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t["on"+e]=null)}function yd(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return(e+=ad(n.borderTopWidth))+ad(n.borderBottomWidth)}function gd(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return(e+=ad(n.borderLeftWidth))+ad(n.borderRightWidth)}function md(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return(e-=ad(n.paddingTop))-ad(n.paddingBottom)}function vd(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return(e-=ad(n.paddingLeft))-ad(n.paddingRight)}function bd(t,e){var n=null;return t.targetTouches&&(n=rd(t.targetTouches,(function(t){return e===t.identifier}))),t.changedTouches&&!n&&(n=rd(t.changedTouches,(function(t){return e===t.identifier}))),n}function _d(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:null}function wd(t){var e=u.a.findDOMNode(t);if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}function xd(t,e,n){var r=t.state,i=!od(r.lastX),o=wd(t);return i?{node:o,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:o,deltaX:e-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:n}}function Od(t,e){return{node:e.node,x:t.state.x+e.deltaX,y:t.state.y+e.deltaY,deltaX:e.deltaX,deltaY:e.deltaY,lastX:t.state.x,lastY:t.state.y}}function Sd(t){return"both"===t.props.axis||"x"===t.props.axis}function kd(t){return"both"===t.props.axis||"y"===t.props.axis}function Td(t,e){var n=wd(e),r=e.props.offsetParent;return!r&&n instanceof HTMLElement&&(r=n.offsetParent||n.ownerDocument.body),function(t,e){var n=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:t.clientX+e.scrollLeft-n.left,y:t.clientY+e.scrollTop-n.top}}(t,r)}var Ed,Cd,Rd,Dd,Pd,Id,Ad,Fd,jd,Md,zd,Ld,Bd,Nd,Ud,Wd,Hd,Vd={start:"touchstart",move:"touchmove",stop:"touchend"},Gd={start:"mousedown",move:"mousemove",stop:"mouseup"},Zd=Gd,Xd={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},qd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0},e.getTouchFromEvent=function(t){var n=_d(t);return e.setState({touchIdentifier:n}),bd(t,n)},e.preventDefault=function(t){t.stopPropagation&&t.stopPropagation()},e.handleDragStart=function(t){var n=u.a.findDOMNode(e);if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(e.props.disabled||!(t.target instanceof Node)||e.props.handle&&!pd(t.target,e.props.handle,n)||e.props.cancel&&pd(t.target,e.props.cancel,n))return!1;var i=Td(t,e);if(null==i)return!1;var o=i.x,a=i.y,s=xd(e,o,a);if(!1===e.props.onStart(t,s))return!1;e.setState({dragging:!0,lastX:o,lastY:a}),"touchmove"===Zd.move?hd(r,Zd.move,e.onTouchDrag):hd(r,Zd.move,e.onMouseDrag),hd(r,Zd.stop,e.handleDragStop)},e.handleDrag=function(t){var n=Td(t,e);if(null!=n){var r=n.x,i=n.y,o=xd(e,r,i);if(!1!==e.props.onDrag(t,o))e.setState({lastX:r,lastY:i});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(a)}}},e.handleDragStop=function(t){if(e.state.dragging){var n=Td(t,e);if(null!=n){var r=n.x,i=n.y,o=xd(e,r,i),a=u.a.findDOMNode(e);e.setState({dragging:!1,lastX:NaN,lastY:NaN}),e.props.onStop(t,o),a&&("touchmove"===Zd.move?dd(a.ownerDocument,Zd.move,e.onTouchDrag):dd(a.ownerDocument,Zd.move,e.onMouseDrag),dd(a.ownerDocument,Zd.stop,e.handleDragStop))}}},e.onMouseDown=function(t){return e.preventDefault(t),Zd=Gd,e.props.onMouseDown(t),(!t.button||"number"!=typeof t.button||0===t.button)&&e.handleDragStart(t)},e.onMouseDrag=function(t){return e.preventDefault(t),e.handleDrag(t)},e.onMouseUp=function(t){return e.preventDefault(t),Zd=Gd,e.handleDragStop(t)},e.onTouchStart=function(t){e.preventDefault(t),Zd=Vd;var n=e.getTouchFromEvent(t);return e.handleDragStart(n)},e.onTouchDrag=function(t){e.preventDefault(t),Zd=Vd;var n=e.getTouchFromEvent(t);return e.handleDrag(n)},e.onTouchEnd=function(t){e.preventDefault(t),Zd=Vd;var n=e.getTouchFromEvent(t);return e.handleDragStop(n)},e}return d(e,t),e.prototype.componentWillUnmount=function(){var t=u.a.findDOMNode(this);if(t){var e=t.ownerDocument;dd(e,Gd.move,this.onMouseDrag),dd(e,Vd.move,this.onTouchDrag),dd(e,Gd.stop,this.handleDragStop),dd(e,Vd.stop,this.handleDragStop)}},e.prototype.render=function(){return s.a.cloneElement(s.a.Children.only(this.props.children),{style:y({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})},e.defaultProps=Xd,e.displayName="DraggableCore",e}(s.a.Component),Yd=y(y({},Xd),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),Kd=function(t){function e(e){var n=t.call(this,e)||this;return n.onDragStart=function(t,e){if(!1===n.props.onStart(t,Od(n,e)))return!1;n.setState({dragging:!0,dragged:!0})},n.onDrag=function(t,e){var r=n.props,i=r.position,o=r.defaultPosition,a=r.onDrag,s=r.bounds;if(!n.state.dragging)return!1;var l=Od(n,e),u=Boolean(i),c={x:u?l.x:o.x,y:u?l.y:o.y,slackX:0,slackY:0};if(s){var f=c.x,p=c.y;c.x+=n.state.slackX,c.y+=n.state.slackY;var h=w(function(t,e,n){if(!t.props.bounds)return[e,n];var r=t.props.bounds;r="string"==typeof r?r:y({},r);var i=wd(t);if("string"==typeof r){var o=i.ownerDocument,a=o.defaultView,s="parent"===r?i.parentNode:o.querySelector(r);if(!(s instanceof HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');if(i instanceof HTMLElement){var l=a.getComputedStyle(i),u=a.getComputedStyle(s);r={left:-i.offsetLeft+ad(u.paddingLeft)+ad(l.marginLeft),top:-i.offsetTop+ad(u.paddingTop)+ad(l.marginTop),right:vd(s)-gd(i)-i.offsetLeft+ad(u.paddingRight)-ad(l.marginRight),bottom:md(s)-yd(i)-i.offsetTop+ad(u.paddingBottom)-ad(l.marginBottom)}}}return od((r=r).right)&&(e=Math.min(e,r.right)),od(r.bottom)&&(n=Math.min(n,r.bottom)),od(r.left)&&(e=Math.max(e,r.left)),od(r.top)&&(n=Math.max(n,r.top)),[e,n]}(n,c.x,c.y),2),d=h[0],g=h[1];c.x=d,c.y=g,c.slackX=n.state.slackX+(f-c.x),c.slackY=n.state.slackY+(p-c.y),l.x=c.x,l.y=c.y,l.deltaX=c.x-n.state.x,l.deltaY=c.y-n.state.y}if(!1===a(t,l))return!1;n.setState(c)},n.onDragStop=function(t,e){if(!n.state.dragging)return!1;if(!1===n.props.onStop(t,Od(n,e)))return!1;var r={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(n.props.position)){var i=n.props.position,o=i.x,a=i.y;r.x=o,r.y=a}n.setState(r)},n.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0},n}return d(e,t),e.prototype.componentDidUpdate=function(t){Boolean(this.props.position)&&(this.props.updateOnPosition?(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))},e.prototype.componentWillUnmount=function(){this.setState({dragging:!1})},e.prototype.render=function(){var t,e=this.props,n=e.position,r=e.defaultPosition,i=e.rotation,o=e.defaultClassName,a=e.defaultClassNameDragging,l=e.defaultClassNameDragged,u=g(e,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),c=this.state,f=c.x,p=c.y,h=c.dragging,d=c.dragged,m=!Boolean(n)||h,v=n||r;t=function(t){var e,n="translate("+t.x+"px,"+t.y+"px) rotate("+t.rotation+"rad)";return(e={})[ld("transform",ud)]=n,e}({x:Sd(this)&&m?f:v.x,y:kd(this)&&m?p:v.y,rotation:i});var b=s.a.Children.only(this.props.children),_=[b.props.className||"",o,h?a:"",d?l:""].join(" ").trim(),w=s.a.cloneElement(b,{className:_,style:y(y({},b.props.style),t)});return s.a.createElement(qd,y({},u,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),w)},e.defaultProps=Yd,e.displayName="Draggable",e}(s.a.Component),Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.getChildren=function(){var t=this,e=[],n=[];return s.a.Children.forEach(this.props.children,(function(r){switch(r.type.componentName){case"case":t.props.type===r.props.value&&e.push(r);break;case"default":n.push(r)}})),e.length>0?e:n},e.prototype.render=function(){var t=this.getChildren();return 0===t.length?null:s.a.createElement(s.a.Fragment,null,t)},e}(s.a.Component),Jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.render=function(){return this.props.children},e.componentName="case",e}(s.a.Component),$d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.render=function(){return this.props.children},e.componentName="default",e}(s.a.Component),ty={Container:Sl,ColorItem:Qf,ColorItemBase:Cf,ColorItemBackground:Ku,ColorItemTiledBackground:Ju,ColorItemActiveOverlay:ic,Dialog:function(t){var e=t.isVisible,n=void 0!==e&&e,r=t.width,i=void 0===r?"350px":r,o=t.height,a=void 0===o?"fit-content":o,l=t.position,u=t.header,c=t.body,f=t.footer,p=t.className,h=t.children;return s.a.createElement($f,{isVisible:n},s.a.createElement(tp,null),s.a.createElement(ep,{height:a,width:i,left:l.x,top:l.y,className:p},u,c,h,f))},DialogBase:$f,DialogContainer:ep,DialogBackdrop:tp,DialogHeader:np,DialogBody:rp,DialogFooter:ip,DialogSpinner:lp,TextEditModal:_p,ActionModal:wp,InfoModal:hp,Spacer:xp,Draggable:Kd,DraggableCore:qd,Toast:Rl,Input:{Label:Cp,File:ih,Search:function(t){return s.a.createElement("div",null,s.a.createElement(Cp,{show:!1,label:"photoeditorsdk-Search"}),s.a.createElement(eh,{id:"photoeditorsdk-Search",onChange:function(e){t.onChange(e.target.value)},placeholder:t.placeholder}))},Slider:$p,CarouselSlider:$h,Selection:ed,Checkbox:Ph,CheckboxBase:Ch,CheckboxInput:Rh,CheckboxCheckMark:Dh,Dropdown:Eh,Text:Ap,NumericInput:Xp,Form:function(t){var e=t.children;return s.a.createElement("form",{onSubmit:function(t){t.preventDefault()}},e)}},Switch:{Index:Qd,Case:Jd,Default:$d}},ey=Object(o.c)(bf)(Ed||(Ed=O(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(3n + 1),\n  &:nth-child(3n + 2) {\n    margin-right: ","px;\n  }\n"],["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(3n + 1),\n  &:nth-child(3n + 2) {\n    margin-right: ","px;\n  }\n"])),(function(t){return t.theme.measurements.advancedCard.small.width}),(function(t){return t.theme.measurements.advancedCard.small.height}),(function(t){return t.theme.measurements.advancedSpacer}),(function(t){return t.theme.card.foreground}),(function(t){return t.theme.measurements.advancedSpacer})),ny=Object(o.c)(bf)(Cd||(Cd=O(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(2n + 1) {\n    margin-right: ","px;\n  }\n"],["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n  &:nth-child(2n + 1) {\n    margin-right: ","px;\n  }\n"])),(function(t){return t.theme.measurements.advancedCard.medium.width}),(function(t){return t.theme.measurements.advancedCard.medium.height}),(function(t){return t.theme.measurements.advancedSpacer}),(function(t){return t.theme.card.foreground}),(function(t){return t.theme.measurements.advancedSpacer})),ry=Object(o.c)(bf)(Rd||(Rd=O(["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n"],["\n  width: ","px;\n  height: ","px;\n  margin-bottom: ","px;\n  color: ",";\n"])),(function(t){return t.theme.measurements.advancedCard.large.width}),(function(t){return t.theme.measurements.advancedCard.large.height}),(function(t){return t.theme.measurements.advancedSpacer}),(function(t){return t.theme.card.foreground})),iy=function(t){t.isActive;var e=g(t,["isActive"]);return s.a.createElement(ry,y({},e))},oy=function(t){var e=t.type===A.LARGE,n=t.type===A.SMALL,r=ny;return e?r=iy:n&&(r=ey),s.a.createElement(r,y({},t))},ay=o.c.div(Dd||(Dd=O(["\n  display: flex;\n  flex-wrap: wrap;\n  /* we need this for IE11, width - padding on both sides */\n  max-width: ","px;\n"],["\n  display: flex;\n  flex-wrap: wrap;\n  /* we need this for IE11, width - padding on both sides */\n  max-width: ","px;\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.width-48})),sy=kf,ly=Object(o.c)(lf)(Pd||(Pd=O(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n\n  "," {\n    display: none;\n  }\n\n  &:disabled {\n    opacity: ",";\n  }\n"])),(function(t){return t.theme.measurements.fontSystem.button2.size}),(function(t){return t.theme.measurements.fontSystem.button2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button2.case}),(function(t){return t.theme.button.textSecondaryForeground}),Qc,(function(t){return t.theme.button.textInactiveOpacity})),uy=Object(o.c)(rf)(Id||(Id=O(["\n  width: 60px;\n  height: 60px;\n  background-color: gray;\n  border-radius: 50%;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: ",";\n  padding: 2px;\n"],["\n  width: 60px;\n  height: 60px;\n  background-color: gray;\n  border-radius: 50%;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: ",";\n  padding: 2px;\n"])),(function(t){return t.theme.measurements.zIndex.button.float})),cy=o.c.div(Ad||(Ad=O(["\n  height: 56px;\n  width: 56px;\n  border-radius: 50%;\n  background-color: ",";\n"],["\n  height: 56px;\n  width: 56px;\n  border-radius: 50%;\n  background-color: ",";\n"])),(function(t){return t.theme.webcam.floatButton})),fy=o.c.div(Fd||(Fd=O(["\n  display: inline-flex;\n"],["\n  display: inline-flex;\n"]))),py=Object(o.c)(lf)(jd||(jd=O(["\n  background: ",";\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  padding: 4px 10px;\n  position: relative;\n  /* for safari */\n  margin: 0;\n  &:last-child:after {\n    opacity: 0;\n  }\n"],["\n  background: ",";\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  padding: 4px 10px;\n  position: relative;\n  /* for safari */\n  margin: 0;\n  &:last-child:after {\n    opacity: 0;\n  }\n"])),(function(t){return t.theme.canvasActionBar.background}),(function(t){return t.theme.canvasActionBar.foreground}),(function(t){return t.theme.measurements.fontSystem.button2.size}),(function(t){return t.theme.measurements.fontSystem.button2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.button2.case})),hy=o.c.div(Ld||(Ld=O(["\n  ",";\n  position: absolute;\n  transform: translate(-50%, -100%);\n  background: ",";\n  color: ",";\n  border-radius: ","px;\n  white-space: nowrap;\n  transition: opacity 0.3s ease-in-out;\n  z-index: ",";\n\n  "," {\n    &:after {\n      content: '';\n      position: absolute;\n      right: 0px;\n      top: 6px;\n      height: calc(100% - 12px);\n      border-right: 1px solid ",";\n      &:last-child {\n        border-right: unset;\n      }\n    }\n  }\n"],["\n  ",";\n  position: absolute;\n  transform: translate(-50%, -100%);\n  background: ",";\n  color: ",";\n  border-radius: ","px;\n  white-space: nowrap;\n  transition: opacity 0.3s ease-in-out;\n  z-index: ",";\n\n  "," {\n    &:after {\n      content: '';\n      position: absolute;\n      right: 0px;\n      top: 6px;\n      height: calc(100% - 12px);\n      border-right: 1px solid ",";\n      &:last-child {\n        border-right: unset;\n      }\n    }\n  }\n"])),(function(t){var e=t.show;return Object(o.b)(e?Md||(Md=O(["\n          opacity: 1;\n        "],["\n          opacity: 1;\n        "])):zd||(zd=O(["\n          opacity: 0;\n        "],["\n          opacity: 0;\n        "])))}),(function(t){return t.theme.canvasActionBar.background}),(function(t){return t.theme.canvasActionBar.foreground}),(function(t){return t.theme.canvasActionBar.borderRadius?t.theme.canvasActionBar.borderRadius:t.theme.shape.radiusMedium}),(function(t){return t.theme.measurements.zIndex.buttonGroup}),py,(function(t){return t.theme.canvasActionBar.separatorColor})),dy=o.c.div(Bd||(Bd=O(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"],["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]))),yy=o.c.canvas(Nd||(Nd=O(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]))),gy=o.c.div(Hd||(Hd=O(["\n  &&& {\n    display: ",";\n    flex-direction: row;\n    align-items: center;\n    height: ","px;\n    color: ",";\n    border-bottom: 1px solid ",";\n    padding: 8px 24px;\n    box-sizing: border-box;\n    position: absolute;\n    width: 100%;\n    z-index: ",";\n    background: ",";\n    ","\n  }\n"],["\n  &&& {\n    display: ",";\n    flex-direction: row;\n    align-items: center;\n    height: ","px;\n    color: ",";\n    border-bottom: 1px solid ",";\n    padding: 8px 24px;\n    box-sizing: border-box;\n    position: absolute;\n    width: 100%;\n    z-index: ",";\n    background: ",";\n    ","\n  }\n"])),(function(t){return t.hide?"none":"flex"}),(function(t){return t.theme.measurements.mainCanvasActionBar.height}),(function(t){return t.theme.mainCanvasActionBar.foreground}),(function(t){return t.theme.mainCanvasActionBar.borderColor}),(function(t){return t.theme.measurements.zIndex.canvas.bar}),(function(t){return t.transparentBackgound?"transparent":t.theme.mainCanvasActionBar.background}),(function(t){return t.bottom?Object(o.b)(Ud||(Ud=O(["\n            justify-content: space-around;\n            bottom: 0;\n            transform: rotate(180deg);\n          "],["\n            justify-content: space-around;\n            bottom: 0;\n            transform: rotate(180deg);\n          "]))):Object(o.b)(Wd||(Wd=O(["\n            justify-content: space-between;\n          "],["\n            justify-content: space-between;\n          "])))}));gy.defaultProps={theme:bo};var my,vy,by,_y=o.c.div.attrs({role:"main"})(my||(my=O(["\n  background-color: ",";\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: auto;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* added this for safari, else the webcam overlay did not know the height */\n  height: 100%;\n  width: 100%;\n  margin-top: ","px;\n"],["\n  background-color: ",";\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: auto;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* added this for safari, else the webcam overlay did not know the height */\n  height: 100%;\n  width: 100%;\n  margin-top: ","px;\n"])),(function(t){return t.theme.canvas.background}),(function(t){return t.theme.measurements.canvas.marginTop})),wy=o.c.canvas(vy||(vy=O(["\n  position: absolute;\n  top: 0;\n  left: 0;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n"]))),xy=o.c.div(by||(by=O(["\n  position: relative;\n  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n  height: 100%;\n  width: 100%;\n  z-index: ",";\n  background-color: ",";\n"],["\n  position: relative;\n  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n  height: 100%;\n  width: 100%;\n  z-index: ",";\n  background-color: ",";\n"])),(function(t){return t.theme.measurements.zIndex.canvas.webcam.backdrop}),(function(t){return t.theme.webcam.background}));xy.defaultProps={theme:bo};var Oy,Sy,ky=o.c.video(Oy||(Oy=O(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"],["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"]))),Ty=o.c.div.attrs((function(t){var e=t.radius;return{style:{height:2*e+"px",width:2*e+"px"}}}))(Sy||(Sy=O(["\n  border-radius: 50%;\n  border: 2px solid ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n"],["\n  border-radius: 50%;\n  border: 2px solid ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n"])),(function(t){return t.theme.canvas.controlsOutline}));Ty.defaultProps={theme:bo};var Ey,Cy=o.c.div(Ey||(Ey=O(["\n  position: absolute;\n  color: ",";\n"],["\n  position: absolute;\n  color: ",";\n"])),(function(t){return t.theme.canvas.controlsOutline}));Cy.defaultProps={theme:bo};var Ry,Dy=o.c.div(Ry||(Ry=O(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  margin-left: -10px;\n  margin-top: -10px;\n  z-index: ",";\n  will-change: transform;\n  cursor: ew-resize;\n  &:before {\n    display: block;\n    position: absolute;\n    content: '';\n    background: ",";\n    border-radius: 50%;\n    width: ","px;\n    height: ","px;\n    top: ","px;\n    left: ","px;\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);\n  }\n"],["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  margin-left: -10px;\n  margin-top: -10px;\n  z-index: ",";\n  will-change: transform;\n  cursor: ew-resize;\n  &:before {\n    display: block;\n    position: absolute;\n    content: '';\n    background: ",";\n    border-radius: 50%;\n    width: ","px;\n    height: ","px;\n    top: ","px;\n    left: ","px;\n    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);\n  }\n"])),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop}),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop}),(function(t){return t.theme.measurements.zIndex.canvas.knob}),(function(t){return t.theme.canvas.controlsColor}),(function(t){return t.theme.measurements.canvasControls.knob.size}),(function(t){return t.theme.measurements.canvasControls.knob.size}),(function(t){return t.theme.measurements.canvasControls.knob.size/4}),(function(t){return t.theme.measurements.canvasControls.knob.size/4}));Dy.defaultProps={theme:bo};var Py,Iy,Ay,Fy,jy,My,zy,Ly,By,Ny,Uy,Wy,Hy,Vy,Gy,Zy,Xy,qy,Yy,Ky,Qy,Jy,$y=o.c.div((function(t){var e=t.theme.measurements.canvasControls.corner.touchable,n=e.desktop,r=e.mobile,i=n/4,a=r/2;return Object(o.b)(Hy||(Hy=O(["\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    ","\n    ","\n  ","\n  ","\n  @media all and (min-width: 0) and (max-width: 599px) {\n      width: ","px;\n      height: ","px;\n      ","\n      ","\n    }\n  "],["\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    ","\n    ","\n  ","\n  ","\n  @media all and (min-width: 0) and (max-width: 599px) {\n      width: ","px;\n      height: ","px;\n      ","\n      ","\n    }\n  "])),n,n,(function(t){return"top"===t.vertical?Object(o.b)(Py||(Py=O(["\n            top: 0px;\n          "],["\n            top: 0px;\n          "]))):Object(o.b)(Iy||(Iy=O(["\n            bottom: 0px;\n          "],["\n            bottom: 0px;\n          "])))}),(function(t){return"left"===t.horizontal?Object(o.b)(Ay||(Ay=O(["\n            left: 0px;\n          "],["\n            left: 0px;\n          "]))):Object(o.b)(Fy||(Fy=O(["\n            right: 0px;\n          "],["\n            right: 0px;\n          "])))}),(function(t){return"top"===t.vertical?Object(o.b)(jy||(jy=O(["\n            margin-top: -","px;\n          "],["\n            margin-top: -","px;\n          "])),i):Object(o.b)(My||(My=O(["\n            margin-bottom: -","px;\n          "],["\n            margin-bottom: -","px;\n          "])),i)}),(function(t){return"left"===t.horizontal?Object(o.b)(zy||(zy=O(["\n            margin-left: -","px;\n          "],["\n            margin-left: -","px;\n          "])),i):Object(o.b)(Ly||(Ly=O(["\n            margin-right: -","px;\n          "],["\n            margin-right: -","px;\n          "])),i)}),r,r,(function(t){return"top"===t.vertical?Object(o.b)(By||(By=O(["\n              margin-top: -","px;\n            "],["\n              margin-top: -","px;\n            "])),a):Object(o.b)(Ny||(Ny=O(["\n              margin-bottom: -","px;\n            "],["\n              margin-bottom: -","px;\n            "])),a)}),(function(t){return"left"===t.horizontal?Object(o.b)(Uy||(Uy=O(["\n              margin-left: -","px;\n            "],["\n              margin-left: -","px;\n            "])),a):Object(o.b)(Wy||(Wy=O(["\n              margin-right: -","px;\n            "],["\n              margin-right: -","px;\n            "])),a)}))})),tg=Object(o.c)($y)((function(t){var e="right"===t.horizontal?t.borderWidth:0,n="bottom"===t.vertical?t.borderWidth:0,r="left"===t.horizontal?t.borderWidth:0,i=("top"===t.vertical?t.borderWidth:0)+"px "+e+"px "+n+"px "+r+"px",a="left"===t.horizontal&&"bottom"===t.vertical||"right"===t.horizontal&&"top"===t.vertical?"nesw-resize":"nwse-resize",s=t.theme.measurements.canvasControls.corner.touchable.desktop/4-t.borderWidth,l=t.theme.measurements.canvasControls.corner.touchable.mobile/4+t.borderWidth;return Object(o.b)(Jy||(Jy=O(["\n    &:before {\n      display: block;\n      position: absolute;\n      content: '';\n      width: ","px;\n      height: ","px;\n      z-index: ",";\n      border-color: ",";\n      border-style: solid;\n      border-width: ",";\n      pointer-events: auto;\n      ","\n      ","\n      @media all and (min-width: 0) and (max-width: 599px) {\n        ","\n        ","\n      }\n    }\n    cursor: ",";\n    pointer-events: none;\n  "],["\n    &:before {\n      display: block;\n      position: absolute;\n      content: '';\n      width: ","px;\n      height: ","px;\n      z-index: ",";\n      border-color: ",";\n      border-style: solid;\n      border-width: ",";\n      pointer-events: auto;\n      ","\n      ","\n      @media all and (min-width: 0) and (max-width: 599px) {\n        ","\n        ","\n      }\n    }\n    cursor: ",";\n    pointer-events: none;\n  "])),(function(t){return t.theme.measurements.canvasControls.corner.size}),(function(t){return t.theme.measurements.canvasControls.corner.size}),(function(t){return t.theme.measurements.zIndex.canvas.controls}),(function(t){return t.theme.canvas.controlsColor}),i,"top"===t.vertical?Object(o.b)(Vy||(Vy=O(["\n            top: ","px;\n          "],["\n            top: ","px;\n          "])),s):Object(o.b)(Gy||(Gy=O(["\n            bottom: ","px;\n          "],["\n            bottom: ","px;\n          "])),s),"left"===t.horizontal?Object(o.b)(Zy||(Zy=O(["\n            left: ","px;\n          "],["\n            left: ","px;\n          "])),s):Object(o.b)(Xy||(Xy=O(["\n            right: ","px;\n          "],["\n            right: ","px;\n          "])),s),"top"===t.vertical?Object(o.b)(qy||(qy=O(["\n              margin-top: ","px;\n            "],["\n              margin-top: ","px;\n            "])),l):Object(o.b)(Yy||(Yy=O(["\n              margin-bottom: ","px;\n            "],["\n              margin-bottom: ","px;\n            "])),l),"left"===t.horizontal?Object(o.b)(Ky||(Ky=O(["\n              margin-left: ","px;\n            "],["\n              margin-left: ","px;\n            "])),l):Object(o.b)(Qy||(Qy=O(["\n              margin-right: ","px;\n            "],["\n              margin-right: ","px;\n            "])),l),a)}));tg.defaultProps={theme:bo};var eg,ng=o.c.div(eg||(eg=O(["\n  position: absolute;\n  height: ","px;\n  width: 4px;\n  z-index: ",";\n  background: ",";\n  cursor: pointer;\n"],["\n  position: absolute;\n  height: ","px;\n  width: 4px;\n  z-index: ",";\n  background: ",";\n  cursor: pointer;\n"])),(function(t){return t.theme.measurements.canvasControls.width.size}),(function(t){return t.theme.measurements.zIndex.canvas.controls}),(function(t){return t.theme.canvas.controlsColor}));ng.defaultProps={theme:bo};var rg,ig=o.c.div.attrs((function(t){return{style:{height:t.height+"px",width:t.width+"px"}}}))(rg||(rg=O(["\n  border-style: solid;\n  border-width: 2px 0 2px 0;\n  border-color: ",";\n  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2), inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  position: absolute;\n"],["\n  border-style: solid;\n  border-width: 2px 0 2px 0;\n  border-color: ",";\n  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2), inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  position: absolute;\n"])),(function(t){return t.theme.canvas.controlsOutline}));ig.defaultProps={theme:bo};var og,ag=o.c.div.attrs((function(t){var e=t.height,n=t.width,r=t.theme;return{style:{height:e+r.measurements.canvasControls.sprite.controlPadding+"px",width:n+r.measurements.canvasControls.sprite.controlPadding+"px"}}}))(og||(og=O(["\n  left: -","px;\n  top: -","px;\n  transform-origin: center center;\n  border-style: solid;\n  border-width: 2px;\n  border-color: ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n  will-change: transform;\n  position: absolute;\n"],["\n  left: -","px;\n  top: -","px;\n  transform-origin: center center;\n  border-style: solid;\n  border-width: 2px;\n  border-color: ",";\n  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2), inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n  cursor: move;\n  will-change: transform;\n  position: absolute;\n"])),(function(t){return t.theme.measurements.canvasControls.sprite.controlPadding/2}),(function(t){return t.theme.measurements.canvasControls.sprite.controlPadding/2}),(function(t){return t.theme.canvas.controlsColor}));ag.defaultProps={theme:bo};var sg,lg,ug,cg,fg,pg,hg,dg,yg,gg,mg=o.c.div.attrs((function(t){return{style:{left:t.x+"px"}}}))(sg||(sg=O(["\n  position: absolute;\n  bottom: -","px;\n  height: ","px;\n  width: 2px;\n  background-color: ",";\n"],["\n  position: absolute;\n  bottom: -","px;\n  height: ","px;\n  width: 2px;\n  background-color: ",";\n"])),(function(t){return t.theme.measurements.canvasControls.sprite.rotateHandle.height}),(function(t){return t.theme.measurements.canvasControls.sprite.rotateHandle.height}),(function(t){return t.theme.canvas.controlsOutline})),vg=o.c.div(lg||(lg=O(["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"],["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"]))),bg=o.c.div.attrs({tabIndex:0})(ug||(ug=O(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  top: 0;\n  left: 0;\n  &:focus {\n    outline: 0;\n  }\n"],["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  top: 0;\n  left: 0;\n  &:focus {\n    outline: 0;\n  }\n"])),(function(t){return t.height}),(function(t){return t.width})),_g=(void 0===cg&&(cg=Rt()),-1!==cg.indexOf("Safari")&&-1===cg.indexOf("Chrome")?Object(o.b)(fg||(fg=O(["\n      transition: unset;\n    "],["\n      transition: unset;\n    "]))):Object(o.b)(pg||(pg=O(["\n      transition: all 0.4s ease-in-out;\n    "],["\n      transition: all 0.4s ease-in-out;\n    "])))),wg=o.c.div(hg||(hg=O(["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"],["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"])),(function(t){return t.theme.canvas.cropBackdrop}),(function(t){return t.theme.measurements.zIndex.canvas.crop.backdrop}),_g),xg=o.c.div.attrs({"data-test-id":"CropMask"})(dg||(dg=O(["\n  position: absolute;\n  box-shadow: inset 0 0 0 2px ",";\n  cursor: move;\n  ","\n"],["\n  position: absolute;\n  box-shadow: inset 0 0 0 2px ",";\n  cursor: move;\n  ","\n"])),(function(t){return t.theme.canvas.controlsOutline}),_g),Og=o.c.div(yg||(yg=O(["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"],["\n  position: absolute;\n  background: ",";\n  z-index: ",";\n  ","\n"])),(function(t){return t.theme.canvas.controlsOutline}),(function(t){return t.theme.measurements.zIndex.canvas.crop.grid}),_g),Sg=Object(o.c)(tg)(gg||(gg=O(["\n  z-index: ",";\n  ",";\n"],["\n  z-index: ",";\n  ",";\n"])),(function(t){return t.theme.measurements.zIndex.canvas.controls}),_g),kg={Index:yy,Area:dy,Bar:{Index:gy,ButtonGroup:fy},Button:{TextSecondary:ly,Float:function(t){return s.a.createElement(uy,y({},t),s.a.createElement(cy,null))}},Container:_y,Element:wy,Wrapper:xy,Webcam:ky,Controls:{Knob:Dy,Circle:Ty,Corner:tg,Line:Cy,Area:ig,Sprite:ag,RotateHandle:mg,Container:vg,Wrapper:bg,SpriteActionsWrapper:hy,SpriteActionButton:py,Width:ng},Crop:{Mask:xg,GridLine:Og,Backdrop:wg,Control:Sg}},Tg=function(t){function e(e){var n=t.call(this,e)||this;return n.init=function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){n.video.srcObject=t})).catch((function(){n.props.modal.showActionModal({type:F.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:function(){n.props.active.selectWebcam(!1)}})})):n.props.modal.showActionModal({type:F.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:function(){n.props.active.selectWebcam(!1)}})},n.stop=function(){var t=n.props.active;n.video.srcObject.getTracks().forEach((function(t){t.stop()})),n.video.srcObject=null,t.selectWebcam(!1)},n.captureAndCloseWebcam=function(){n.canvas.width=n.video.videoWidth,n.canvas.height=n.video.videoHeight,n.canvas.getContext("2d").drawImage(n.video,0,0),n.props.active.newImage(n.canvas.toDataURL("image/webp")),n.stop()},n.videoRef=s.a.createRef(),n}return d(e,t),e.prototype.componentDidMount=function(){this.canvas=document.createElement("canvas"),this.video=this.videoRef.current,this.init()},e.prototype.render=function(){var t=this.props.editor,e=t.getPreviewSize(),n=e.height,r=e.width,i=t.configStore.measurements,o=this.props.canvas.canvasSize.height,a=(o-n)/2,l=a<24+i.buttons.float.size?o-48-i.buttons.float.size/2:o-a+24,u=this.props.active.webcamLabel;return s.a.createElement(kg.Wrapper,null,s.a.createElement(kg.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},s.a.createElement(kg.Bar.ButtonGroup,null,s.a.createElement(pf,{ariaLabel:u,onClick:this.stop},u))),s.a.createElement(kg.Webcam,{style:{height:n,width:r},autoPlay:!0,ref:this.videoRef}),s.a.createElement(kg.Button.Float,{ariaLabel:"Click and Save",style:{top:l},onClick:this.captureAndCloseWebcam}))},e}(s.a.Component),Eg=mu("active","canvas","modal","editor")(ju(Tg)),Cg=function(t){function e(e){var n=t.call(this,e)||this;return n.wrapperElementRef=null,n.timeout=null,n.updateDimensions=function(t){void 0===t&&(t=!0),t?(clearTimeout(n.timeout),n.timeout=setTimeout((function(){n.update(t)}),100)):n.update(t)},n.update=function(t){void 0===t&&(t=!0);var e=n.wrapperElementRef.current;n.props.canvas.saveDimensions({width:e&&e.clientWidth||0,height:e&&e.clientHeight||0,render:t})},n.wrapperElementRef=s.a.createRef(),n.resizeObserver=new ss((function(){n.updateDimensions(!1)})),n}return d(e,t),e.prototype.componentDidMount=function(){var t=this;this.updateDimensions(!1),window.addEventListener("resize",(function(){return t.updateDimensions(!0)})),this.wrapperElementRef.current&&this.resizeObserver.observe(this.wrapperElementRef.current)},e.prototype.componentWillUnmount=function(){var t=this;window.removeEventListener("resize",(function(){return t.updateDimensions(!0)})),this.timeout&&clearTimeout(this.timeout)},e.prototype.render=function(){return s.a.createElement(kg.Container,{"data-test-id":"CanvasContainer",ref:this.wrapperElementRef},this.props.children)},e}(a.Component),Rg=mu("canvas")(ju(Cg)),Dg=function(t,e){return void 0!==t&&void 0!==e&&!Number.isNaN(t)&&!Number.isNaN(e)},Pg=Object(o.c)(kg.Controls.Knob)(Fg||(Fg=O(["\n  margin-top: -","px;\n  margin-left: -","px;\n"],["\n  margin-top: -","px;\n  margin-left: -","px;\n"])),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop/2}),(function(t){return t.theme.measurements.canvasControls.knob.touchable.desktop/2})),Ig=Object(o.c)(kg.Controls.Container)(jg||(jg=O(["\n  overflow: unset;\n"],["\n  overflow: unset;\n"]))),Ag=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.start=function(t,n){var r=n.x,i=n.y;Dg(r,i)&&e.focusTool.setStart({x:r,y:i})},e.end=function(t,n){var r=n.x,i=n.y;Dg(r,i)&&e.focusTool.setEnd({x:r,y:i})},e.onKnob1DragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.start(t,n)},e.onKnob1DragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.start(t,n),e.focusTool.clickableCanvas(!0)},e.onKnob2DragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.end(t,n)},e.onKnob2DragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.end(t,n),e.focusTool.clickableCanvas(!0)},e.addSnapshot=function(t,n){var r=t.x,i=t.y;Dg(r,i)&&e.focusTool.toolSnapshot(n)},e.getLine=function(){var t=e.props.canvas.canvasSize,n=t.height,r=t.width,i=e.focusTool.startOnPreview,o=e.focusTool.endOnPreview;return s.a.createElement("svg",{focusable:"false",height:n,width:r},s.a.createElement("line",{x1:i.x,y1:i.y,x2:o.x,y2:o.y,strokeWidth:"2",stroke:"currentColor"}))},e}return d(e,t),Object.defineProperty(e.prototype,"focusTool",{get:function(){return this.props.focusTool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"historyLocale",{get:function(){return this.focusTool.locale.history},enumerable:!0,configurable:!0}),e.prototype.render=function(){return s.a.createElement(Ig,null,s.a.createElement(kg.Controls.Line,null,this.getLine()),s.a.createElement(ty.Draggable,{bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},s.a.createElement(Pg,null)),s.a.createElement(ty.Draggable,{bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},s.a.createElement(Pg,null)))},e}(s.a.Component);Pg.defaultProps={theme:bo};var Fg,jg,Mg,zg,Lg,Bg,Ng,Ug,Wg,Hg,Vg,Gg,Zg,Xg,qg,Yg,Kg,Qg,Jg,$g,tm,em,nm,rm,im,om,am,sm=mu("canvas","focusTool")(ju(Ag)),lm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={knobAngle:2.35},e.onCircle=function(t,n){var r=n.x,i=n.y;if(Dg(r,i)){var o=e.focusTool.radius;e.focusTool.setCenter({x:r+o,y:i+o})}},e.onKnob=function(t,n){var r=n.x,i=n.y;if(Dg(r,i)){var o=e.focusTool.center,a=new k(r,i),s=new k(o.x,o.y).subtract(a),l=s.magnitude,u=-Math.atan2(s.y,s.x);e.setState({knobAngle:u}),e.focusTool.setRadius(l)}},e.onCircleDragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.onCircle(t,n)},e.onCircleDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.onCircle(t,n),e.focusTool.clickableCanvas(!0)},e.onKnobDragStart=function(t,n){e.focusTool.clickableCanvas(!1),e.onKnob(t,n)},e.onKnobDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusSize),e.onKnob(t,n),e.focusTool.clickableCanvas(!0)},e.addSnapshot=function(t,n){var r=t.x,i=t.y;Dg(r,i)&&e.focusTool.toolSnapshot(n)},e}return d(e,t),e.prototype.componentDidMount=function(){this.setState({knobAngle:2.35})},Object.defineProperty(e.prototype,"historyLocale",{get:function(){return this.focusTool.locale.history},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusTool",{get:function(){return this.props.focusTool},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.focusTool,e=t.center,n=t.radius,r={x:e.x-n,y:e.y-n},i=Math.PI-this.state.knobAngle,o={x:e.x+n*Math.cos(i),y:e.y+n*Math.sin(i)};return s.a.createElement(kg.Controls.Container,null,s.a.createElement(ty.Draggable,{bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:o},s.a.createElement(kg.Controls.Knob,null)),s.a.createElement(ty.Draggable,{onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:r},s.a.createElement(kg.Controls.Circle,{radius:n})))},e}(s.a.Component),um=mu("focusTool","canvas")(ju(lm)),cm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getKnobPosition=function(){var t=e.focusTool.origin,n=e.focusTool.size/2,r=Math.PI/2+e.focusTool.rotation;return{x:t.x+n*Math.cos(r),y:t.y+n*Math.sin(r)}},e.onArea=function(t,n){var r=n.x,i=n.y,o=e.props.editor.configStore.measurements.canvasControls.knob.size;if(Dg(r,i)){var a=e.props.canvas,s=e.focusTool,l=s.size,u=r+s.mirroredAreaWidth/2,c=i+l/2,f=new k(e.getKnobPosition()),p=new k({x:r,y:i}).subtract(new k(e.areaPosition)),h=f.add(p);h.x>o&&h.x<a.canvasSize.width-o&&h.y>o&&h.y<a.canvasSize.height-o&&e.focusTool.setOrigin({x:u,y:c})}},e.onKnob=function(t,n){var r=n.x,i=n.y;if(Dg(r,i)){e.focusTool.clickableCanvas(!1);var o=new k(e.focusTool.origin),a=new k(r,i),s=o.subtract(a),l=s.magnitude,u=Math.PI/2+Math.atan2(s.y,s.x);e.focusTool.setSize(2*l),e.focusTool.setRotation(u)}},e.onAreaDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusPosition),e.onArea(t,n),e.focusTool.clickableCanvas(!0)},e.onKnobDragStop=function(t,n){e.addSnapshot(n,e.historyLocale.focusSize),e.onKnob(t,n),e.focusTool.clickableCanvas(!0)},e.addSnapshot=function(t,n){var r=t.x,i=t.y;Dg(r,i)&&e.focusTool.toolSnapshot(n)},e}return d(e,t),Object.defineProperty(e.prototype,"historyLocale",{get:function(){return this.focusTool.locale.history},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusTool",{get:function(){return this.props.focusTool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"areaPosition",{get:function(){var t=this.focusTool,e=t.origin,n=t.size,r=t.mirroredAreaWidth;return{x:e.x-r/2,y:e.y-n/2}},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.areaPosition,e=t.x,n=t.y;return s.a.createElement(kg.Controls.Container,null,s.a.createElement(ty.Draggable,{bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},s.a.createElement(kg.Controls.Knob,null)),s.a.createElement(ty.Draggable,{onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:e,y:n},rotation:this.focusTool.rotation},s.a.createElement(kg.Controls.Area,{height:this.focusTool.size,width:this.focusTool.mirroredAreaWidth})))},e}(s.a.Component),fm=mu("focusTool","canvas","editor")(ju(cm)),pm=mu("focusTool")(ju((function(t){var e=t.focusTool,n=e.state,r=function(){switch(n.identifier){case G.LINEAR:return sm;case G.RADIAL:return um;case G.MIRRORED:return fm}return null}();return e.isOptionSelected&&r?s.a.createElement(r,null):null}))),hm=Object(o.c)(kg.Controls.Container)(Mg||(Mg=O(["\n  cursor: none;\n"],["\n  cursor: none;\n"]))),dm=o.c.div(zg||(zg=O(["\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  border-width: 2px;\n  border-style: solid;\n  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);\n"],["\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  border-width: 2px;\n  border-style: solid;\n  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);\n"]))),ym=function(t){function e(e){var n=t.call(this,e)||this;return n.INITIAL_POSITION={x:void 0,y:void 0},n.state=y(y({},n.INITIAL_POSITION),{isDrawing:!1}),n.containerElementRef=null,n.getCursorCoordinates=function(t){var e=0,r=0;if(-1!==t.type.indexOf("touch")){if(!(i=t).touches.length)return y(y({},n.INITIAL_POSITION),{height:0,width:0});e=i.touches[0].clientX,r=i.touches[0].clientY}else{var i;e=(i=t).clientX,r=i.clientY}var o=n.containerElementRef.current.getBoundingClientRect();return{x:e-o.left,y:r-o.top,height:o.height,width:o.width}},n.draw=function(t){t.preventDefault(),t.stopPropagation(),n.touchDraw(t)},n.touchDraw=function(t){var e=n.getCursorCoordinates(t),r=e.x,i=e.y;void 0!==r&&void 0!==i&&(n.setState({x:r,y:i}),n.state.isDrawing&&n.brushTool.strokePosition({x:r,y:i}))},n.start=function(){n.brushTool.clickableCanvas(!1),n.setState({isDrawing:!0}),n.brushTool.beginStroke()},n.stop=function(t){n.state.isDrawing&&(t.preventDefault(),t.stopPropagation(),n.setState({isDrawing:!1}),n.brushTool.endStroke(),n.brushTool.clickableCanvas(!0))},n.setInitialPosition=function(){n.setState(y({},n.INITIAL_POSITION))},n.mouseOut=function(t){var e=n.props.config;t.preventDefault(),t.stopPropagation();var r=n.brushTool.sizeOnScreenSpace/2,i=n.getCursorCoordinates(t),o=i.x,a=i.y,s=i.height,l=i.width;o&&a&&(o<0||a<0||o>l-r||a>s-r||a<e.measurements.mainCanvasActionBar.height)&&n.setInitialPosition()},n.touchEnd=function(t){t.preventDefault(),t.stopPropagation();var e=n.state,r=e.x,i=e.y;r&&i&&n.setInitialPosition()},n.getCursor=function(){var t=n.state,e=t.x,r=t.y;if(e&&r){var i=Ae(n.brushTool.color),o=n.brushTool.sizeOnScreenSpace+"px",a={left:n.state.x+"px",top:n.state.y+"px",borderColor:i,height:o,width:o};return s.a.createElement(dm,{style:a})}return null},n.containerElementRef=s.a.createRef(),n}return d(e,t),e.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})},e.prototype.componentWillUnmount=function(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)},Object.defineProperty(e.prototype,"brushTool",{get:function(){return this.props.brushTool},enumerable:!0,configurable:!0}),e.prototype.render=function(){return s.a.createElement(hm,{ref:this.containerElementRef,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.start,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())},e}(s.a.Component),gm=mu("brushTool","config")(ju(ym)),mm=o.c.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})(Lg||(Lg=O([""],[""]))),vm={adjustment:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("g",null,s.a.createElement("g",{fill:"#D8D8D8",opacity:"0"},s.a.createElement("rect",{width:"48",height:"48"})),s.a.createElement("g",{transform:"translate(12 12)"},s.a.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),s.a.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},s.a.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),s.a.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),s.a.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),s.a.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},s.a.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),s.a.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},s.a.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),s.a.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))))},filter:function(){return s.a.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("g",null,s.a.createElement("g",{fill:"#D8D8D8",opacity:"0"},s.a.createElement("rect",{width:"48",height:"48"})),s.a.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},s.a.createElement("g",null,s.a.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),s.a.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),s.a.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))))},library:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},s.a.createElement("g",null,s.a.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),s.a.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),s.a.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),s.a.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),s.a.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),s.a.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},s.a.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),s.a.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))))},overlay:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},s.a.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),s.a.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))))},focus:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("g",null,s.a.createElement("g",{fill:"#D8D8D8",opacity:"0"},s.a.createElement("rect",{width:"48",height:"48"})),s.a.createElement("g",{transform:"translate(12 12)"},s.a.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),s.a.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},s.a.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),s.a.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),s.a.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))))},sticker:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},s.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.a.createElement("g",null,s.a.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},s.a.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},s.a.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),s.a.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),s.a.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),s.a.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))))},text:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},s.a.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),s.a.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),s.a.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))},textdesign:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),s.a.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),s.a.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))},frame:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},s.a.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),s.a.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),s.a.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),s.a.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})))},transform:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},s.a.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),s.a.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),s.a.createElement("g",{fillOpacity:"0.2"},s.a.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),s.a.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))},brush:function(){return s.a.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),s.a.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),s.a.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),s.a.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),s.a.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}},bm={left:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"#fff"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),s.a.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})))},right:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"#fff"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),s.a.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))},center:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"#fff"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),s.a.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))}},_m={addText:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),s.a.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})))},openWebcam:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}))},reset:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}))},shuffle:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))},uploadImage:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),s.a.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})))}},wm=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),s.a.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})))},xm=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),s.a.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})))},Om=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),s.a.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})))},Sm=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"#fff"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),s.a.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))},km={categories:(Bg={},Bg[J.CommonCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,i=void 0===r?48:r,o=t.height,a=void 0===o?48:o;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:a,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{fill:n,transform:"translate(13 13)"},s.a.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),s.a.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),s.a.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),s.a.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),s.a.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),s.a.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),s.a.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),s.a.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),s.a.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),s.a.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),s.a.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),s.a.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),s.a.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),s.a.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),s.a.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),s.a.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))))},Bg[J.FacebookCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,i=void 0===r?48:r,o=t.height,a=void 0===o?48:o;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:a,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{fill:n,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})))},Bg[J.TwitterCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,i=void 0===r?48:r,o=t.height,a=void 0===o?48:o;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:a,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{fill:n,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})))},Bg[J.InstagramCategory]=function(t){var e=t.highlight,n=void 0===e?"currentColor":e,r=t.width,i=void 0===r?48:r,o=t.height,a=void 0===o?48:o;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:a,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{fill:n,transform:"translate(13 13)"},s.a.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),s.a.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),s.a.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))))},Bg),crops:(Ng={},Ng[J.Custom]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,i=void 0===r?32:r,o=t.height,a=void 0===o?32:o;return s.a.createElement(mm,{width:i,height:a,viewBox:"0 0 32 32"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{fill:n,transform:"translate(-8 -8)"},s.a.createElement("g",{transform:"translate(8 8)"},s.a.createElement("g",null,s.a.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),s.a.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),s.a.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),s.a.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),s.a.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),s.a.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),s.a.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),s.a.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),s.a.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),s.a.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),s.a.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),s.a.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),s.a.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),s.a.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),s.a.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),s.a.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),s.a.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),s.a.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),s.a.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),s.a.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),s.a.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),s.a.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),s.a.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),s.a.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))))},Ng[J.Square]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.mask,i=void 0===r?"#fff":r,o=t.width,a=void 0===o?32:o,l=t.height,u=void 0===l?32:l;return s.a.createElement(mm,{width:a,height:u,viewBox:"0 0 32 32"},s.a.createElement("defs",null,s.a.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{transform:"translate(-8 -8)"},s.a.createElement("g",{transform:"translate(7.08 7.293)"},s.a.createElement("mask",{fill:i},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),s.a.createElement("use",{fill:n,xlinkHref:"#photoeditorsdk-square-icon"})))))},Ng[J.ThreeByFour]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,i=void 0===r?32:r,o=t.height,a=void 0===o?42:o;return s.a.createElement(mm,{width:i,height:a,viewBox:"0 0 32 42"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{fill:n,transform:"translate(-8 -3)"},s.a.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))))},Ng[J.FourByThree]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,i=void 0===r?32:r,o=t.height,a=void 0===o?48:o;return s.a.createElement(mm,{width:i,height:a,viewBox:"0 0 42 32"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{fill:n,transform:"translate(-3 -8)"},s.a.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))))},Ng[J.NineBySixteen]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,i=void 0===r?26:r,o=t.height,a=void 0===o?46:o;return s.a.createElement(mm,{width:i,height:a,viewBox:"0 0 26 46"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{fill:n,transform:"translate(-11 -1)"},s.a.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))))},Ng[J.SixteenByNine]=function(t){var e=t.highlight,n=void 0===e?"#565656":e,r=t.width,i=void 0===r?26:r,o=t.height,a=void 0===o?46:o;return s.a.createElement(mm,{width:i,height:a,viewBox:"0 0 26 46"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{fill:n,transform:"translate(-11 -1)"},s.a.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))))},Ng[J.FacebookPost]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),s.a.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:i,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),s.a.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),s.a.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),s.a.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:n,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),s.a.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:n,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),s.a.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:n,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})))},Ng[J.FacebookProfile]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",null,s.a.createElement("path",{fill:n,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),s.a.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:n,rx:"1"}),s.a.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:n,rx:"1"}),s.a.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:n,rx:"1"}),s.a.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:i,rx:"1"}),s.a.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:n,rx:"1"}))))},Ng[J.FacebookTitle]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("g",{transform:"translate(5 5)"},s.a.createElement("path",{fill:i,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),s.a.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:n,rx:"1"}),s.a.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:n,rx:"1"}),s.a.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:n,rx:"1"}),s.a.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:n,rx:"1"}),s.a.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:n,rx:"1"}))))},Ng[J.InstagramLandscape]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:n,rx:"1"}),s.a.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),s.a.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),s.a.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),s.a.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:n,rx:"1"}),s.a.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:i,rx:"1"})))},Ng[J.InstagramPortrait]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:n,rx:"1"}),s.a.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:i,rx:"1"}),s.a.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),s.a.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),s.a.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),s.a.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:n,rx:"1"})))},Ng[J.InstagramSquare]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:n,rx:"1"}),s.a.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:i,rx:"1"}),s.a.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:n,rx:"1"}),s.a.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:n,rx:"1"}),s.a.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:n,rx:"1"}),s.a.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:n,rx:"1"})))},Ng[J.InstagramStory]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:i,rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:n,rx:"1"})))},Ng[J.TwitterPost]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.shadow,a=void 0===o?"#333333":o,l=t.width,u=void 0===l?"48px":l,c=t.height,f=void 0===c?"48px":c;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:u,height:f,viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},s.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:i,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:a,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),s.a.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:n,rx:"1"})))},Ng[J.TwitterProfile]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:i,rx:"1"})))},Ng[J.TwitterTitle]=function(t){var e=t.main,n=void 0===e?"#424242":e,r=t.highlight,i=void 0===r?"#565656":r,o=t.width,a=void 0===o?"48px":o,l=t.height,u=void 0===l?"48px":l;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:u,viewBox:"0 0 48 48"},s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:i,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:n,rx:"0.5"}),s.a.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:n,rx:"1"})))},Ng),dots:function(t){var e=t.height,n=void 0===e?3:e,r=t.width,i=void 0===r?102:r,o=t.x,a=void 0===o?-102:o,l=t.className,u=t.style;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:n,viewBox:"0 0 102 3",className:l,style:u},s.a.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},s.a.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),s.a.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),s.a.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:1.5*-i,y:"0",width:4*i,height:"3",transform:"translate("+a+", 0)"}))},duplicate:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})))},edit:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}))},bringToFront:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H24V24H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})))},delete:function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})))},flipHorizontal:function(t){var e=t.className;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:e},s.a.createElement("title",null,"Flip Horizontal"),s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},s.a.createElement("mask",{fill:"none"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})))},flipVertical:function(t){var e=t.className;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:e},s.a.createElement("title",null,"Flip Vertical"),s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},s.a.createElement("mask",{fill:"none"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})))},rotate:function(t){var e=t.alt,n=void 0===e?"Rotate":e,r=t.className;return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:r},s.a.createElement("title",null,n),s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},s.a.createElement("mask",{fill:"none"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})))}},Tm=((Ug={})[H.BRIGHTNESS]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),s.a.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("mask",null,s.a.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),s.a.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})))},Ug[H.CONTRAST]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})))},Ug[H.SATURATION]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})))},Ug[H.CLARITY]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})))},Ug[H.SHADOWS]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})))},Ug[H.HIGHLIGHTS]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})))},Ug[H.EXPOSURE]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})))},Ug[H.GAMMA]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"#fff"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})))},Ug[H.BLACKS]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})))},Ug[H.WHITES]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})))},Ug[H.TEMPERATURE]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})))},Ug[H.SHARPNESS]=function(){return s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.a.createElement("defs",null,s.a.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),s.a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.a.createElement("path",{d:"M0 0H48V48H0z"}),s.a.createElement("mask",{fill:"currentColor"},s.a.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),s.a.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})))},Ug),Em=o.c.div(Hg||(Hg=O(["\n  overflow: hidden;\n  display: none;\n  position: relative;\n  transform: unset !important;\n  vertical-align: bottom;\n  ","\n"],["\n  overflow: hidden;\n  display: none;\n  position: relative;\n  transform: unset !important;\n  vertical-align: bottom;\n  ","\n"])),(function(t){return t.isVisible&&Object(o.b)(Wg||(Wg=O(["\n      display: inline-block;\n    "],["\n      display: inline-block;\n    "])))})),Cm=o.c.div(Vg||(Vg=O(["\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  align-self: center;\n"],["\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  align-self: center;\n"]))),Rm=o.c.div(Zg||(Zg=O(["\n  font-size: 15px;\n  display: none;\n  width: 33px;\n  text-align: right;\n  color: ",";\n  z-index: 1;\n  margin: 2px;\n  ","\n"],["\n  font-size: 15px;\n  display: none;\n  width: 33px;\n  text-align: right;\n  color: ",";\n  z-index: 1;\n  margin: 2px;\n  ","\n"])),(function(t){return t.theme.foreground}),(function(t){return t.isVisible&&Object(o.b)(Gg||(Gg=O(["\n      display: inline-block;\n    "],["\n      display: inline-block;\n    "])))})),Dm=o.c.div(Xg||(Xg=O(["\n  transform: translate(0, 0) !important;\n"],["\n  transform: translate(0, 0) !important;\n"]))),Pm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SLIDER_WIDTH=213,e.MAX_ROTATION=45,e.DEGREES_PER_PIXEL=2*e.MAX_ROTATION/e.SLIDER_WIDTH,e.drag=function(t,n){var r=n.x,i=e.transformTool.rotateFlipState;i.flipHorizontally!==i.flipVertically&&(r*=-1);var o=e.transformTool.defaultAngle-r*e.DEGREES_PER_PIXEL,a=Math.min(e.MAX_ROTATION,Math.max(o,-1*e.MAX_ROTATION));e.transformTool.setRotation(parseInt(""+a,10))},e.stop=function(){e.transformTool.setDefaultAngle(e.transformTool.rotationInDegrees),e.transformTool.addLocalSnapshot()},e}return d(e,t),Object.defineProperty(e.prototype,"transformTool",{get:function(){return this.props.transformTool},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.config,n=t.canvasWidth,r=this.transformTool.rotateFlipState,i=r.flipHorizontally,o=r.flipVertically,a=e.isLayoutAdvanced&&n>e.measurements.canvas.transform.minSliderWidth,l=e.isLayoutAdvanced&&n>e.measurements.canvas.transform.minValueWidth,u=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,c=i===o?-1*u:u,f=i!==o?-1*this.props.transformTool.rotationInDegrees:this.props.transformTool.rotationInDegrees;return s.a.createElement(Cm,null,s.a.createElement(ty.Draggable,{axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!a},s.a.createElement(Dm,null,s.a.createElement(Em,{isVisible:a},s.a.createElement(km.dots,{width:90,height:15,x:c})),s.a.createElement(Rm,{isVisible:l},f,"°"),s.a.createElement(Em,{isVisible:a},s.a.createElement(km.dots,{width:90,height:15,x:c})))))},e}(s.a.Component),Im=mu("transformTool","config")(ju(Pm)),Am=Object(o.c)(km.rotate)(qg||(qg=O(["\n  height: 16px;\n  width: 16px;\n  transform: scaleX(-1);\n"],["\n  height: 16px;\n  width: 16px;\n  transform: scaleX(-1);\n"]))),Fm=Object(o.c)(km.rotate)(Yg||(Yg=O(["\n  height: 16px;\n  width: 16px;\n"],["\n  height: 16px;\n  width: 16px;\n"]))),jm=Object(o.c)(km.flipHorizontal)(Kg||(Kg=O(["\n  height: 16px;\n  width: 16px;\n"],["\n  height: 16px;\n  width: 16px;\n"]))),Mm=Object(o.c)(km.flipVertical)(Qg||(Qg=O(["\n  height: 16px;\n  width: 16px;\n"],["\n  height: 16px;\n  width: 16px;\n"]))),zm=o.c.div(Jg||(Jg=O(["\n  display: inline-flex;\n  transform: scale(0.9);\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    transform: scale(0.7);\n  }\n"],["\n  display: inline-flex;\n  transform: scale(0.9);\n\n  @media all and (min-width: 0) and (max-width: 599px) {\n    transform: scale(0.7);\n  }\n"]))),Lm=mu("transformTool","config","custom","canvas")(ju((function(t){var e=t.transformTool,n=t.config,r=t.custom,i=t.canvas,o=e.locale.transformActions,a=i.canvasSize.width,l=n.isLayoutAdvanced&&a>n.measurements.canvas.transform.minFlipWidth,u=function(t){var e=t.customButtonKey,n=t.onClick,i=t.label,o=t.icon,a=r.getButton(e);return s.a.createElement(a,{key:i,onClick:n,label:i,ariaLabel:i,icon:o,style:{margin:"0 5px"}})},c=u({label:o.buttonFlipHorizontal,icon:s.a.createElement(jm,null),onClick:function(){e.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),f=u({label:o.buttonFlipVertical,icon:s.a.createElement(Mm,null),onClick:function(){e.flipVertically()},customButtonKey:"transformActionFlipVertical"}),p=u({label:o.buttonRotateClockwise,icon:s.a.createElement(Am,null),onClick:e.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),h=u({label:o.buttonRotateAntiClockwise,icon:s.a.createElement(Fm,null),onClick:e.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),d=n.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return s.a.createElement(zm,{style:d},e.config.enableFlip&&l&&c||null,e.config.enableFlip&&l&&f||null,e.config.enableRotation&&s.a.createElement(Im,{canvasWidth:a})||null,e.config.enableRotation&&h||null,e.config.enableRotation&&p||null)}))),Bm=kg.Crop.GridLine,Nm=kg.Crop.Mask,Um=ty.Draggable,Wm=Object(o.c)(Sg)($g||($g=O(["\n  left: ","px;\n  top: ","px;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    left: 6px;\n    top: 6px;\n  }\n"],["\n  left: ","px;\n  top: ","px;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    left: 6px;\n    top: 6px;\n  }\n"])),3,3),Hm=Object(o.c)(Sg)((function(t){var e=t.theme.measurements.canvasControls.corner.touchable.desktop,n=e/4-t.borderWidth;return Object(o.b)(tm||(tm=O(["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: 6px;\n    }\n  "],["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: 6px;\n    }\n  "])),n-e,3)})),Vm=Object(o.c)(Sg)((function(t){var e=t.theme.measurements.canvasControls.corner.touchable.desktop,n=e/4-t.borderWidth;return Object(o.b)(em||(em=O(["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: -30px;\n    }\n  "],["\n    left: ","px;\n    top: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      left: -30px;\n      top: -30px;\n    }\n  "])),n-e,n-e)})),Gm=Object(o.c)(Sg)((function(t){var e=t.theme.measurements.canvasControls.corner.touchable.desktop,n=e/4-t.borderWidth;return Object(o.b)(nm||(nm=O(["\n    top: ","px;\n    left: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      top: -30px;\n      left: 6px;\n    }\n  "],["\n    top: ","px;\n    left: ","px;\n    @media all and (min-width: 0) and (max-width: 599px) {\n      top: -30px;\n      left: 6px;\n    }\n  "])),n-e,3)})),Zm=mu("transformTool")(ju((function(t){var e=t.transformTool,n=e,r=n.leftTopRespectFlip,i=n.leftBottomRespectFlip,o=n.rightTopRespectFlip,a=n.rightBottomRespectFlip,l=e.cropMaskSize,u=l.height,c=l.width,f=e,p=f.maxCropMaskSize,h=f.defaultCropMaskPosition,d=e,g=d.isFlippedHorizontal,m=d.isFlippedVertical,v=p.width/2,b=p.height/2,_=y(y({},p),{left:h.x,top:h.y}),w={height:u,width:c},x=e.isDragMode?{transition:"unset"}:{},O=function(t){return g?2*v-t:t},S=function(t){return m?2*b-t:t},k=function(t,n,r){var i=O(t),o=S(n);switch(bl.getFlippedEdgeIndex(r,g,m)){case 0:e.onLeftTop({x:i,y:o});break;case 1:e.onLeftBottom({x:i,y:o});break;case 2:e.onRightTop({x:i,y:o});break;case 3:e.onRightBottom({x:i,y:o})}},T=function(t,n,r){e.setDragMode(!0),e.clickableCanvas(!1),k(t,n,r)},E=function(t,e,n){k(t,e,n)},C=function(t,n,r){e.setDragMode(!1),k(t,n,r),e.clickableCanvas(!0),e.addLocalSnapshot()},R=function(t,n){var r=O(t+c/2)-c/2,i=S(n+u/2)-u/2;e.changePosition({x:r,y:i})};return s.a.createElement("div",{style:y(y({},_),{position:"absolute"})},s.a.createElement(Um,{bounds:"parent",position:r,onStart:function(t,n){var r=n.x,i=n.y;e.setDragMode(!0),e.clickableCanvas(!1),R(r,i)},onDrag:function(t,e){var n=e.x,r=e.y;R(n,r)},onStop:function(t,n){var r=n.x,i=n.y;e.setDragMode(!1),R(r,i),e.clickableCanvas(!0),e.addLocalSnapshot()}},s.a.createElement(Nm,{style:y(y({},w),x)})),s.a.createElement(Bm,{style:y({left:r.x+c/3,top:r.y,height:u,width:1},x)}),s.a.createElement(Bm,{style:y({left:r.x+c/3*2,top:r.y,height:u,width:1},x)}),s.a.createElement(Bm,{style:y({left:r.x,top:r.y+u/3,height:1,width:c},x)}),s.a.createElement(Bm,{style:y({left:r.x,top:r.y+u/3*2,height:1,width:c},x)}),s.a.createElement(Um,{bounds:"parent",position:y({},r),onStart:function(t,e){var n=e.x,r=e.y;T(n,r,0)},onDrag:function(t,e){var n=e.x,r=e.y;E(n,r,0)},onStop:function(t,e){var n=e.x,r=e.y;C(n,r,0)}},s.a.createElement(Wm,{vertical:"top",horizontal:"left",borderWidth:3,style:x})),s.a.createElement(Um,{bounds:"parent",position:i,onStart:function(t,e){var n=e.x,r=e.y;T(n,r,1)},onDrag:function(t,e){var n=e.x,r=e.y;E(n,r,1)},onStop:function(t,e){var n=e.x,r=e.y;C(n,r,1)}},s.a.createElement(Gm,{vertical:"bottom",horizontal:"left",borderWidth:3,style:x})),s.a.createElement(Um,{bounds:"parent",position:o,onStart:function(t,e){var n=e.x,r=e.y;T(n,r,2)},onDrag:function(t,e){var n=e.x,r=e.y;E(n,r,2)},onStop:function(t,e){var n=e.x,r=e.y;C(n,r,2)}},s.a.createElement(Hm,{vertical:"top",horizontal:"right",borderWidth:3,style:x})),s.a.createElement(Um,{bounds:"parent",position:a,onStart:function(t,e){var n=e.x,r=e.y;T(n,r,3)},onDrag:function(t,e){var n=e.x,r=e.y;E(n,r,3)},onStop:function(t,e){var n=e.x,r=e.y;C(n,r,3)}},s.a.createElement(Vm,{vertical:"bottom",horizontal:"right",borderWidth:3,style:x})))}))),Xm=kg.Bar.Index,qm=kg.Crop.Backdrop,Ym=mu("transformTool","canvas","config")(ju((function(t){var e=t.transformTool,n=t.canvas,r=t.config,i=e,o=i.leftTopRespectFlip,a=i.leftBottomRespectFlip,l=i.rightTopRespectFlip,u=e.cropMaskSize.height,c=n.canvasSize,f=c.height,p=c.width,h=e.defaultCropMaskPosition,d=e.isDragMode?{transition:"unset"}:{};return s.a.createElement(kg.Controls.Container,null,s.a.createElement(qm,{style:y({left:0,top:0,width:p,height:o.y+h.y},d)}),s.a.createElement(qm,{style:y({left:0,top:o.y+h.y,width:h.x+o.x,height:u},d)}),s.a.createElement(qm,{style:y({left:l.x+h.x,top:l.y+h.y,width:p-l.x-h.x,height:u},d)}),s.a.createElement(qm,{style:y({left:0,top:a.y+h.y,width:p,height:f-a.y-h.y+r.measurements.basicToolControlBar.controlsBarHeight},d)}),s.a.createElement(Zm,null),r.isLayoutAdvanced?s.a.createElement(Xm,{bottom:!0},s.a.createElement(Lm,null)):null)}))),Km=Object(o.c)(kg.Controls.Container)(im||(im=O(["\n  ","\n  z-index: ",";\n"],["\n  ","\n  z-index: ",";\n"])),(function(t){return t.activeCursor?Object(o.b)(rm||(rm=O(["\n          cursor: move;\n        "],["\n          cursor: move;\n        "]))):""}),(function(t){return t.theme.measurements.zIndex.canvas.crop.dragImage})),Qm=function(t){function e(e){var n=t.call(this,e)||this;return n.INITIAL_POSITION={x:void 0,y:void 0},n.state=y(y({},n.INITIAL_POSITION),{isDragging:!1}),n.containerRef=null,n.getCursorCoordinates=function(t){var e=0,r=0;if(-1!==t.type.indexOf("touch")){if(!(i=t).touches.length)return n.INITIAL_POSITION;e=i.touches[0].clientX,r=i.touches[0].clientY}else{var i;e=(i=t).clientX,r=i.clientY}var o=n.containerRef.current.getBoundingClientRect();return{x:e-o.left,y:r-o.top}},n.move=function(t){if(n.scale.canDrag){var e=n.getCursorCoordinates(t),r=e.x,i=e.y;if(void 0!==r&&void 0!==i&&n.state.isDragging){var o={x:n.state.x-r,y:n.state.y-i};n.scale.setOffset(o)}}},n.touchDrag=function(t){if(n.scale.canDrag){var e=n.getCursorCoordinates(t),r=e.x,i=e.y;void 0!==r&&void 0!==i&&n.setState({x:r,y:i,isDragging:!0})}},n.drag=function(t){t.preventDefault(),n.touchDrag(t)},n.stop=function(){n.scale.canDrag&&(n.scale.savePosition(),n.setState(y(y({},n.INITIAL_POSITION),{isDragging:!1})))},n.touchEnd=function(t){t.preventDefault(),t.stopPropagation();var e=n.state,r=e.x,i=e.y;r&&i&&n.setState(y(y({},n.INITIAL_POSITION),{isDragging:!1}))},n.containerRef=s.a.createRef(),n}return d(e,t),e.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})},e.prototype.componentWillUnmount=function(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)},Object.defineProperty(e.prototype,"scale",{get:function(){return this.props.scale},enumerable:!0,configurable:!0}),e.prototype.render=function(){return s.a.createElement(Km,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})},e}(s.a.Component),Jm=mu("scale")(ju(Qm)),$m=o.c.img(om||(om=O(["\n  position: absolute;\n  left: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"],["\n  position: absolute;\n  left: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"]))),tv=o.c.img(am||(am=O(["\n  position: absolute;\n  right: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"],["\n  position: absolute;\n  right: -24px;\n  top: calc(50% - 12px);\n  cursor: ew-resize;\n"]))),ev=new k(0,0),nv=new k(0,0),rv=mu("sprite")(ju((function(t){var e=t.sprite,n=e.leftMidPosition,r=e.rightMidPosition,i=function(t,i){e.setDragMode(!0),e.clickableCanvas(!1);var o=t.clientX,a=t.clientY;ev=new k(o,a),nv=new k("left"===i?n:r)},o=function(){e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(Ui.EDIT,e.textDesignLocale.padding),ev=new k(0,0),nv=new k(0,0)},a=function(t){var n=t.clientX,r=t.clientY;if(void 0!==n&&void 0!==r){var i=nv.subtract(ev.subtract(new k(n,r)));e.onPaddingDrag(i)}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(ty.Draggable,{onStart:function(t){return i(t,"left")},onDrag:a,onStop:o},s.a.createElement($m,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANJJREFUSA3tlEsKwjAURUv9Vq3gBlyjKxF/c0EQxIEgggjiwP/ILbgU6ykYuLMGeRlp4JJH+3JOEmij6D9C3UCWZTWSBOEDbpM7eZCOqQRgSm7EjZ6ZAGIOvzoycz8kfGAJb7Hbi+x8aA0/C3xkCW8CPgl8bA0/CnzyDTwuWPSS9wmyon5p9ygBNshBTjGlNpfkO9+LZBZCUge6E8mcuuRxCf4tAPOf21YkC+qyP8Gj8yPZiGQZQlIFuhaJ3VftDgm8QlbkSbruuekMOCapKfQ3YW/1Myhh/78bMQAAAABJRU5ErkJggg=="})),s.a.createElement(ty.Draggable,{onStart:function(t){return i(t,"right")},onDrag:a,onStop:o},s.a.createElement(tv,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAPhJREFUSA3tlLkKwlAQRYOVnXZ+gEshIiJ+hAgiCBJc8Sf8XgsVFBVLt2g8UwhBMomZtLlwIMxy3uMVcZwsaV/A9/1iWoe6j3wFV+iqQ9YG0hJcQHKDntWl7iHtwPeQO999ddjaQNqGM0geMLC61D2kLTiBRA4ZqsPWBtImHEHyhJHVpe4hbcABJHKIqw5bG0jrsAeJB5MoVy6qqfQ86u9AL/gdKBs+uW0NdiCR248NmvAVZFUIyiOfJtyiVBFXYAuSF0yV0eRlZL/yWXKLsoG8DBuQyM3nymjyMrI8rEEi8kVyS8wGUhfkJ7eMGbW3kRfs29nmHy/wAUVpDIFPWLFFAAAAAElFTkSuQmCC"})))}))),iv=Object(o.c)(kg.Controls.Width)(uv||(uv=O(["\n  cursor: ew-resize;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: none;\n  }\n"],["\n  cursor: ew-resize;\n  @media all and (min-width: 0) and (max-width: 599px) {\n    display: none;\n  }\n"]))),ov=Object(o.c)(iv)(cv||(cv=O(["\n  left: -3px;\n  top: calc(50% - ","px);\n"],["\n  left: -3px;\n  top: calc(50% - ","px);\n"])),(function(t){return t.theme.measurements.canvasControls.width.size/2})),av=Object(o.c)(iv)(fv||(fv=O(["\n  right: -3px;\n  top: calc(50% - ","px);\n"],["\n  right: -3px;\n  top: calc(50% - ","px);\n"])),(function(t){return t.theme.measurements.canvasControls.width.size/2})),sv=new k(0,0),lv=new k(0,0);ov.defaultProps={theme:bo},av.defaultProps={theme:bo};var uv,cv,fv,pv=mu("sprite","textTool")(ju((function(t){var e=t.sprite,n=t.textTool,r=e.leftMidPadPosition,i=e.rightMidPadPosition,o=function(t,n){e.setDragMode(!0),e.clickableCanvas(!1);var o=t.clientX,a=t.clientY;sv=new k(o,a),lv=new k("left"===n?r:i)},a=function(){e.clickableCanvas(!0),e.setDragMode(!1),e.addSnapshot(Ui.EDIT,e.textLocale.width),n.updateDefaultFontSize(),sv=new k(0,0),lv=new k(0,0)},l=function(t){var n=t.clientX,r=t.clientY;if(void 0!==n&&void 0!==r){var i=lv.subtract(sv.subtract(new k(n,r)));e.onWidthDrag(i)}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(ty.Draggable,{onStart:function(t){return o(t,"left")},onDrag:l,onStop:a},s.a.createElement(ov,null)),s.a.createElement(ty.Draggable,{onStart:function(t){return o(t,"right")},onDrag:l,onStop:a},s.a.createElement(av,null)))}))),hv=mu("textTool","sprite","custom")(ju((function(t){var e,n=t.textTool,r=t.sprite,i=t.custom,o=n.locale.canvasActions,a=((e={})[D.EDIT]={key:D.EDIT,customButtonKey:"canvasActionEdit",onClick:function(){return n.setEditMode(!0)},label:o.buttonEdit,icon:s.a.createElement(km.edit,null)},e[D.BRING_TO_FRONT]={key:D.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:function(t){t.stopPropagation(),n.bringToFront()},label:o.buttonBringToFront,icon:s.a.createElement(km.bringToFront,null)},e[D.DUPLICATE]={key:D.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:function(){return n.duplicate()},label:o.buttonDuplicate,icon:s.a.createElement(km.duplicate,null)},e[D.DELETE]={key:D.DELETE,customButtonKey:"canvasActionDelete",onClick:function(t){t.stopPropagation(),n.delete()},label:o.buttonDelete,icon:s.a.createElement(km.delete,null)},e),l=n.config.canvasActions.map((function(t){return a[t]?function(t){var e=t.key,n=t.customButtonKey,r=t.onClick,o=t.label,a=t.icon,l=i.getButton(n);return s.a.createElement(l,{key:e,onClick:r,label:o,ariaLabel:o,icon:a})}(a[t]):null}));return r.isSpriteText?s.a.createElement(kg.Bar.ButtonGroup,null,l):null}))),dv=mu("stickerTool","custom")(ju((function(t){var e,n=t.stickerTool,r=t.custom,i=n.locale.canvasActions,o=((e={})[D.BRING_TO_FRONT]={key:D.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:function(t){t.stopPropagation(),n.bringToFront()},label:i.buttonBringToFront,icon:s.a.createElement(km.bringToFront,null)},e[D.FLIP]={key:D.FLIP,customButtonKey:"canvasActionFlip",onClick:function(t){t.stopPropagation(),n.flipHorizontally()},label:i.buttonFlipHorizontal,icon:s.a.createElement(km.flipHorizontal,null)},e[D.DUPLICATE]={key:D.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:function(){return n.duplicate()},label:i.buttonDuplicate,icon:s.a.createElement(km.duplicate,null)},e[D.DELETE]={key:D.DELETE,customButtonKey:"canvasActionDelete",onClick:function(t){t.stopPropagation(),n.delete()},label:i.buttonDelete,icon:s.a.createElement(km.delete,null)},e),a=n.config.canvasActions.map((function(t){return o[t]?function(t){var e=t.key,n=t.customButtonKey,i=t.onClick,o=t.label,a=t.icon,l=r.getButton(n);return s.a.createElement(l,{key:e,onClick:i,label:o,ariaLabel:o,icon:a})}(o[t]):null}));return n.isStickerSelected?s.a.createElement(kg.Bar.ButtonGroup,null,a):null}))),yv=mu("textDesignTool","custom")(ju((function(t){var e,n=t.textDesignTool,r=t.custom,i=n.locale.canvasActions,o=((e={})[D.EDIT]={key:D.EDIT,customButtonKey:"canvasActionEdit",onClick:function(){return n.setEditMode(!0)},label:i.buttonEdit,icon:s.a.createElement(km.edit,null)},e[D.BRING_TO_FRONT]={key:D.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:function(t){t.stopPropagation(),n.bringToFront()},label:i.buttonBringToFront,icon:s.a.createElement(km.bringToFront,null)},e[D.INVERT]={key:D.INVERT,customButtonKey:"canvasActionInvert",onClick:function(t){t.stopPropagation(),n.invertBackground()},label:i.buttonInvert,icon:s.a.createElement(km.flipHorizontal,null)},e[D.DUPLICATE]={key:D.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:function(){return n.duplicate()},label:i.buttonDuplicate,icon:s.a.createElement(km.duplicate,null)},e[D.DELETE]={key:D.DELETE,customButtonKey:"canvasActionDelete",onClick:function(t){t.stopPropagation(),n.delete()},label:i.buttonDelete,icon:s.a.createElement(km.delete,null)},e),a=n.config.canvasActions.map((function(t){return o[t]?function(t){var e=t.key,n=t.customButtonKey,i=t.onClick,o=t.label,a=t.icon,l=r.getButton(n);return s.a.createElement(l,{key:e,onClick:i,label:o,ariaLabel:o,icon:a})}(o[t]):null}));return n.isTextDesignSelected?s.a.createElement(kg.Bar.ButtonGroup,null,a):null}))),gv=function(t){function e(e){var n=t.call(this,e)||this;return n.actionsRef=null,n.spriteControlPosition=function(){var t=n.props,e=t.config,r=t.sprite,i=t.canvas.canvasSize,o=e.measurements.canvasControls.sprite,a=o.controlPadding,s=o.controlOffset,l=r.position,u=l.x,c=l.y,f=r.currentSprite.size,p=f.height,h=f.width,d=r.rotationWRTOutputRotation,y=n.actionsRef.current,g=new k(0,0);if(y){var m=y.getBoundingClientRect();g=new k(m.width/2+s,m.height+s)}var v=Math.abs(h*Math.sin(d))+Math.abs(p*Math.cos(d)),b=new k(u,c-v/2-a-s).clamp(g,new k(i.width,i.height).subtract(g));return{left:b.x,top:b.y}},n.getSpriteControls=function(){switch(n.props.sprite.tool){case P.TEXT:return s.a.createElement(hv,null);case P.TEXT_DESIGN:return s.a.createElement(yv,null);case P.STICKER:return s.a.createElement(dv,null)}return null},n.actionsRef=s.a.createRef(),n.state={isMounted:!1},n}return d(e,t),e.prototype.componentDidMount=function(){this.setState({isMounted:!0})},e.prototype.render=function(){var t=this.props.sprite,e=this.state.isMounted,n=!t.isDragMode&&!t.isEditMode,r=this.spriteControlPosition();return s.a.createElement(kg.Controls.SpriteActionsWrapper,{ref:this.actionsRef,show:n&&e,style:y({},r)},this.getSpriteControls())},e}(s.a.Component),mv=mu("sprite","config","editor","canvas")(ju(gv)),vv=Object(o.c)(kg.Controls.Knob)(wv||(wv=O(["\n  margin-left: -11px;\n  margin-top: 0px;\n  cursor: url(",") 9 9, ew-resize;\n  &:before {\n    top: unset;\n    bottom: 0px;\n    left: calc(50% - ","px);\n  }\n"],["\n  margin-left: -11px;\n  margin-top: 0px;\n  cursor: url(",") 9 9, ew-resize;\n  &:before {\n    top: unset;\n    bottom: 0px;\n    left: calc(50% - ","px);\n  }\n"])),(function(t){return t.url}),(function(t){return t.theme.measurements.canvasControls.knob.size/2})),bv=new k(0,0),_v=new k(0,0);vv.defaultProps={theme:bo};var wv,xv,Ov=mu("sprite","snapping","config")(ju((function(t){var e=t.config,n=t.sprite,r=t.snapping,i=n.rightBottomHandlePosition,o=n.leftBottomHandlePosition,a={x:(i.x+o.x)/2,y:(i.y+o.y)/2},l=e.assetProvider.getPath("controls","/"+(function(t){return void 0===t&&(t=Rt()),!!t.match(/windows/i)}()?"rotate-windows":"rotate-osx")+".png");return s.a.createElement(ty.Draggable,{onStart:function(t){var e=t.clientX,r=t.clientY;bv=new k(e,r),_v=new k(a),n.setDragMode(!0),n.clickableCanvas(!1)},onDrag:function(t){!function(t){var e=t.clientX,i=t.clientY;if(void 0!==e&&void 0!==i){var o=_v.subtract(bv.subtract(new k(e,i))),a=n.position,s=new k(a.x,a.y),l=o.subtract(s),u=Math.atan2(l.y,l.x)-Math.PI/2,c=r.snapToRotation(u,l,n.currentRect);n.setRotation(c)}}(t)},onStop:function(){n.clickableCanvas(!0),n.setDragMode(!1),n.spriteSnapshot("rotation"),r.hideRotationGuides(),bv=new k(0,0),_v=new k(0,0)}},s.a.createElement(vv,{url:l}))}))),Sv=kg.Controls.Corner,kv=ty.Draggable,Tv=new k(0,0),Ev=new k(0,0),Cv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.props.sprite},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.sprite,n=t.config,r=e,i=r.leftTopPosition,o=r.leftBottomPosition,a=r.rightTopPosition,l=r.rightBottomPosition,u=n.measurements.canvasControls.corner.borderWidth,c=function(t){var n=t.clientX,r=t.clientY;void 0!==n&&void 0!==r&&e.onCornerDrag(Ev.subtract(Tv.subtract(new k(n,r))))},f=function(t,n){var r=t.clientX,s=t.clientY;Tv=new k(r,s),Ev=new k(function(t){switch(t){case"leftTop":return i;case"leftBottom":return o;case"rightTop":return a;case"rightBottom":return l;default:return i}}(n)),e.clickableCanvas(!1),e.setDragMode(!0)},p=function(){e.clickableCanvas(!0),e.setDragMode(!1),e.spriteSnapshot("size"),Tv=new k(0,0),Ev=new k(0,0)};return s.a.createElement(s.a.Fragment,null,s.a.createElement(kv,{onStop:p,onDrag:c,onStart:function(t){return f(t,"leftTop")}},s.a.createElement(Sv,{vertical:"top",horizontal:"left",borderWidth:u})),s.a.createElement(kv,{onStop:p,onDrag:c,onStart:function(t){return f(t,"leftBottom")}},s.a.createElement(Sv,{vertical:"bottom",horizontal:"left",borderWidth:u})),s.a.createElement(kv,{onStop:p,onDrag:c,onStart:function(t){return f(t,"rightTop")}},s.a.createElement(Sv,{vertical:"top",horizontal:"right",borderWidth:u})),s.a.createElement(kv,{onStop:p,onDrag:c,onStart:function(t){return f(t,"rightBottom")}},s.a.createElement(Sv,{vertical:"bottom",horizontal:"right",borderWidth:u})))},e}(s.a.Component),Rv=mu("sprite","config")(ju(Cv)),Dv=ty.Draggable,Pv=new k(0,0),Iv=new k(0,0),Av=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onAreaDrag=function(t){var n=t.clientX,r=t.clientY,i=e.props.snapping,o=Iv.subtract(Pv.subtract(new k(n,r))),a=i.snapToPosition({x:o.x,y:o.y},e.sprite.currentRect),s=a.x,l=a.y;e.sprite.setPosition({x:s,y:l})},e.onAreaDragStart=function(t){var n=e.props.snapping,r=t.clientX,i=t.clientY;Pv=new k(r,i),Iv=new k(e.sprite.position),e.sprite.setDragMode(!0),n.updateGuides()},e.onAreaDragStop=function(){var t=e.props.snapping;Pv=new k(0,0),Iv=new k(0,0),e.sprite.setDragMode(!1),e.sprite.spriteSnapshot("position"),t.hidePositionGuides()},e.onDoubleClick=function(t){t.preventDefault(),t.stopPropagation(),e.sprite.setEditMode(!0)},e.isSpriteSelected=function(){var t=e.props.active.tool,n=e.sprite.tool;return e.sprite.isSpriteSelected&&t===n},e}return d(e,t),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.props.sprite},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.props,e=t.sprite,n=t.config;if(!this.isSpriteSelected())return null;var r=this.sprite.isSpriteText,i=this.sprite.isSpriteTextDesign&&this.sprite.textDesignToolStore.isInverted,o=e.size,a=o.height,l=o.width,u=e.spritePosition,c=e.rotationWRTOutputRotation,f=n.measurements.canvasControls.sprite.controlPadding;return s.a.createElement(kg.Controls.Container,null,s.a.createElement(Dv,{onStart:this.onAreaDragStart,onDrag:this.onAreaDrag,onStop:this.onAreaDragStop,rotation:c,position:u},s.a.createElement(kg.Controls.Sprite,{onDoubleClick:this.onDoubleClick,height:a,width:l},r&&s.a.createElement(pv,null)||null,i&&s.a.createElement(rv,null)||null,s.a.createElement(Rv,null),s.a.createElement(kg.Controls.RotateHandle,{x:l/2+f/2},s.a.createElement(Ov,null)))),s.a.createElement(mv,null))},e}(s.a.Component),Fv=mu("sprite","active","snapping","config")(ju(Av)),jv=function(t){function e(e){var n=t.call(this,e)||this;return n.containerElementRef=null,n.getControls=function(t){switch(n.props.active.tool){case P.FOCUS:return s.a.createElement(pm,null);case P.TEXT:case P.TEXT_DESIGN:case P.STICKER:return s.a.createElement(Fv,null);case P.BRUSH:return s.a.createElement(gm,null);case P.TRANSFORM:return s.a.createElement(Ym,null);default:return s.a.createElement(kg.Controls.Container,null,t)}},n.canvasClicked=function(t){if(t.preventDefault(),t.stopPropagation(),n.props.canvas.isCanvasClickable){var e=t.clientX,r=t.clientY;if(-1!==t.type.indexOf("touch")){var i=t;if(!i.touches.length)return;e=i.touches[0].clientX,r=i.touches[0].clientY}var o=n.containerElementRef.current.getBoundingClientRect(),a=e-o.left,s=r-o.top;n.props.canvas.getContainersAtPreviewPoint({x:a,y:s})}},n.onKeyDown=function(t){"Tab"===t.code&&n.props.sprite.selectLast()},n.containerElementRef=s.a.createRef(),n}return d(e,t),e.prototype.render=function(){var t=this.props.children,e=this.props.canvas.canvasSize,n={height:e.height,width:e.width};return s.a.createElement(kg.Controls.Wrapper,y({"aria-hidden":!0,ref:this.containerElementRef,onClick:this.canvasClicked,onKeyDown:this.onKeyDown},n),t,this.getControls(s.a.createElement(Jm,null)))},e}(s.a.Component),Mv=mu("active","canvas","sprite")(ju(jv)),zv=o.c.div(xv||(xv=O(["\n  display: ",";\n  position: absolute;\n  z-index: ",";\n"],["\n  display: ",";\n  position: absolute;\n  z-index: ",";\n"])),(function(t){return t.isVisible?"block":"none"}),(function(t){return t.theme.measurements.zIndex.canvas.snappingGuide})),Lv=function(t){var e=t.isVisible,n=t.className;return s.a.createElement(zv,{isVisible:e,className:n})};Lv.defaultProps={direction:"horizontal",left:0,top:0};var Bv,Nv,Uv,Wv,Hv,Vv,Gv,Zv=Object(o.c)(Lv)(Uv||(Uv=O(["\n  background: ",";\n  ","\n"],["\n  background: ",";\n  ","\n"])),(function(t){return t.theme.snapping.positionGuideColor}),(function(t){return"horizontal"===t.direction?Object(o.b)(Bv||(Bv=O(["\n        width: 100%;\n        height: 2px;\n        top: ","px;\n      "],["\n        width: 100%;\n        height: 2px;\n        top: ","px;\n      "])),(function(){return t.position})):Object(o.b)(Nv||(Nv=O(["\n      width: 2px;\n      height: 100%;\n      left: ","px;\n    "],["\n      width: 2px;\n      height: 100%;\n      left: ","px;\n    "])),(function(){return t.position}))})),Xv=Object(o.c)(Lv)(Wv||(Wv=O(["\n  border: none;\n  border-top: 2px dashed ",";\n  background: transparent;\n  left: ","px;\n  top: ","px;\n  transform: rotate(","rad);\n  width: 200%;\n"],["\n  border: none;\n  border-top: 2px dashed ",";\n  background: transparent;\n  left: ","px;\n  top: ","px;\n  transform: rotate(","rad);\n  width: 200%;\n"])),(function(t){return t.theme.snapping.rotationGuideColor}),(function(t){return t.position.x}),(function(t){return t.position.y}),(function(t){return t.rotation})),qv=o.c.div(Hv||(Hv=O(["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  top: ","px;\n  left: ","px;\n  overflow: hidden;\n"],["\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  top: ","px;\n  left: ","px;\n  overflow: hidden;\n"])),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.top}),(function(t){return t.left})),Yv=mu("snapping","editor")(ju((function(t){var e=t.snapping,n=t.editor.getPreviewSize(),r=n.width,i=n.height,o=e.previewTopLeftPosition,a=o.x,l=o.y,u=e.positionGuides.map((function(t,e){var n=t.direction,r=t.value,i=t.isVisible;return s.a.createElement(Zv,{key:"positionGuide-"+e,direction:n,position:r,isVisible:i})})),c=e.rotationGuides.find((function(t){return t.isVisible}));return s.a.createElement(qv,{width:r,height:i,left:a,top:l},u,s.a.createElement(Xv,{key:"rotationGuide",rotation:c?c.value:0,position:c?c.position:{x:0,y:0},isVisible:!!c}))}))),Kv=o.c.img(Vv||(Vv=O(["\n  z-index: 5;\n  position: absolute;\n  bottom: 30px;\n  right: 30px;\n"],["\n  z-index: 5;\n  position: absolute;\n  bottom: 30px;\n  right: 30px;\n"]))),Qv=function(){return s.a.createElement(Kv,{alt:"watermark",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAvCAYAAABzC1HpAAAAAXNSR0IArs4c6QAAE7NJREFUeAHtnFlQVdeax2UQBAEFFUUccJ7nAVEDGqNeZxOjiRq9uVpJ3apUP3TnPZXHVKUqlYcMLzGxTXc00XSMxjjjiAMqKijOAiLiBIID89C//9J1antyjp6g1zZde1cd9t5rr/Fb/+//DXtr0EcffbS4WbNmvfi5hyuBl1UCF4KZmQvSl3V73HlZCfQSUN3DlcBLLwEXqC/9FrkTlARcoLo4+EtIwAXqX2Kb3Em6QHUx8JeQgAvUv8Q2uZN87kA9dOhQjzVr1kzyJ9qLFy+29ffMLXcl4E8CzxWot27diszIyJh67dq1XuvWrUt1DnrkyJGkr7/+ehHlS69fvx7lfOZeuxJ4mgRC0tLSJjytUqDPAeGUmJiYkpkzZ24+cODAqxUVFTVhYWFVP/7446zz588P6dWrV3ZVVVV4cHBwZVJS0u1A+3XruRJoEqM2NDQ027lz56CrV6+2siLMyclJhFGTpk+fvicxMfHu1KlTf83KypqwevXqpdHR0Xfee++9FdOmTTvWoUOHQhg1wbZzz64EApFAaCCVvOvcvHkzClM++ejRow0tW7Ys7datWy6g7QFjHo+Nja1S/QEDBhTjjx4pKCjoO3/+/PSQkJBGlbdr1+7W6dOnh5aWlkbU1NSEwLj1rVq1qrLPVcc9XAl4S6BJph9QxgLAJFjyG9i1EkAOuHfvXrvXX399U0RERJ0dBOAWHTt2bNCDBw8aAXD57t27h5w5c2bY3bt3O1A+6sSJEyN0xk1IyczMHAzb5lGv0rZ3z64ErASaxKj4nuEwYDX+aA0+7hmYMaywsLCrZVPbuVgSZs0CkCknT55MiYqKKh00aNBR/NPi1q1bV+ASVOOzhl66dKn9li1b5nXs2LHctnXPrgScEmgSUOvr6x/zbfFN4zHpN5wd2+uuXbsWHz58OGrYsGG78VuP23J7joyMrMNnbRcXF1cYHh5eb8vdsysBpwSaBNTmzZvXNzY2esAKcEOJ5BucHdvrffv2jYFBs32B1Na5fPlyn549e56298/jjA/d7cqVK4mDBw8+hwty63n0+SL6KC4ujiYXPRiLUzZx4kQjE1yjnjdu3OgwZMiQM927dy95EfN42cYIGKgS4NmzZ7ty7lhSUpKA39nmk08++Q/Mu/FJAW+t9+IImhJg227Lli1b4f3M3p87dy7+zp07ibQ/acuedEYpgkiDTZS7Yetp7DZt2pSMHj36DIFZtcoPHjw4ARclNjQ0tP7/Cqhbt24dRuDZ3s7TnlHqxlmzZu2S62TL7JkAtT8yScbXL7dAxSK9Wl1dHdWiRYvKFwnU8vLy8L179yrwbSsiio+Pv/7KK6/kyApqvr/88svY+/fvx9i5YxGrkf+dUaNGncNCPhZr7Nmzpx/7EUHmJ8vWJ86Jpf/klJSUoxDVE9OVAQFVgNu4ceNCJlHMZK/CUplc32My9xFgc5irw/Hjx9NYUIZzgrBpWp8+fTKdZXaS9kwQNVz9woCvskEDWcj2Tp06+fVVWVxcXl7eUNvenvPz85uhSEPfeeedNfKVtbF6hl9839ZpylkKytr/BuBr6XsDWQqflsNX38gtGYWK9PUMRT/gC6iUm3kDSs+8qXezkoPsylX1RZ/BP/zww0zO4aQDtz1JXr7GDqSsqKgohjeMiwHfg4SEhDzk2eLUqVNj2EsBMV99kBsfhayvMb9S3Qu0xCr9SFWOJ3bZRL08lesg4O4LqYnMDFCV9Vm/fv0b9FeM8j0RpGofEFD79etXTN60DNNzZOzYsRfV0HmIsVhYZwKicYsWLdqhZ5irXsg2etKkSR4NcrbRNcBqj3/aCwCsREtr1F5515EjR6ZbNvFuA/uajVS5XAoEWQlrdRIrs8lxMFJv5ngG5m2uOgD1gc5NPQj0OiLUzmqv4DDQfsT8FqSwfUHbtm2v27aAsKp9+/b37L3zDOv8AajLly9f76yDzGL49VQZaw53Pnte19u3b5/AnpS///77q+26AWu6jSPEtrh/IcQeR52AVDkAnwtJTe3du/d3kJCxcLRtiQyMonEdsnbt2tlSxgULFmyFrZ867YCAqo4A6zGi92RfQNUoAHI/Wv4ubJdFwr8MhkwViDZs2JDmbxa8aoXxe2ahsWbT3nrrrXTMXP6uXbvmqo0vsJLa8gB1ypQphsG18M8///zf5DeXlZXF3r5921OHOdTAiMn4eImAthwG2udkMvzjNmQk+gDG9mJN2KmAcXO0ZtyWlrDIMM0lKCiogfX9bfbs2ekSvl56YM4GyhUCLNH0eWfcuHHHLLuprdrpwKqcTk1NPfvw7vG/Yi6UWim7NmQ9CgBqjGoAEqNgKGCL33//PY3x6+fNm7eLOTYgn3G2F15Zj2GuB617k5ub24EUYE/axbP2Klj44vjx48/b+vv37++DLOLHjBlzEms2CGDFLV26dKM3WJBHQo8ePbItSNXeglTXuH9Gxqz7MSKQbMDCTr0qR67d7LpFWuTcTd2ffvppCnsWuWTJktXOPtWvvyMgoKoxVJ7Dpo0mF9p/woQJud4d6m0UFH48PT09TQJn4fWwRj4bGgIrDef5WYT/GIsQMBTLfPz888/B5GD3YTrCWNxIGOgKCuFzY6ljAKCNw2wYPwighNngjrJSJ+synxkwm2kDgJuxyZVz5sw5oPmjTEmsZ5ZlX5UBvN7KYrz99ts7L1y40BHgd1S5+oe5uymlBphCYY2Z3HfXMx1sXFdcoIELFy78T4GVdh6gspkeM/6w9sO/8tFY+wI7P8ZNss9RKiMr5NMRczpA5XV1dXtYQ0vm2MfWYw498Wf36F5+IIHYVCsLlaEIfZFHBj7xYd3z/DX6Cae8J+uIxb83L2j0zHnAdg9YT2/GOmWJxPncyhh5/2Ft8jdRqBrqxKqNrEttbW2E3LBff/11DHNOgpR+8E5nOvv3vg4YqPLNkpOTdxGkTMFHzbMgcXb42muvZX7zzTfLZConT578P0OHDjVUDxOFMdlQGGG/s76utVmbNm2a/v3338/kpUEcQr8nX9CfplnTiKbX024kihBMH2bjxHoI6Sr+agc7DmmzK7DNeX0sg7BawFzmta9YGEd+ukCK332JtWXiNowQUGk/hDUcGDhwYAH+VhECT5QfPWPGjM1iHsA9VCBlDnW020ZZAwCYLADAWCMAeTrto+0cCKrm8TO31G2EldfAsjfpZ5xAylrvQQRbWX9L5DtNFS37oJiGubTxlNUCoLouXbpkA6LBgKyS7yp+lmIwXgRzmCKQdu7c+TR7lMN9ihQIFysZS5L5iB2D1L/myvr2Y45LtCbvA8bdi7s3Z9WqVcvpLxdrcYRU4x1b75Fla4RUKmyZ86y5IW/jflnrwouiLljRPsxlrbU8zjZPuv7jDJ9QG4Eydm040d40aYl3VdE+iz+EUKsQlAGp6vTv3/8sGtxPEb53Gy0eYK5l4W1ZXPW777673h9I1RYTYjYOQYcBolQClvFsZjs9I+rfof5gWMNmKNeDxYsXb0bol2BzI2Q22rAwLkYvAZdmjbD5Vr3yxUwZplVfzDdOLgLgN34pa7sFQMr0jMBgkM6MlS3TJtOKQuSrTCZcZzsHXQOeEPuTwqKMYpsWKIX5F8AjRozYN3z48Cu8DMlXfR2WhS1QkYlhLoENOZkMC/3cFeBVH1AO0BjIvppX1tvp6xq+Y6aeaUzGikEpgiU3lSGrdECeKdno3vvQfDDN32ElT4iVsSB/h7H723qybMi3whfI5RbxIicKmZmg2FoXlCmB+rUQg99g2fbvfQ4YqLBPX8zoHDEIEwlasWLFfF/Aw787iTBrqe9ZFCZ2NEItZ6ETvCegewECd2Ibm6zgysNEvuoCVANCbRzgyGPRl/Glst58881VjH1KbQCJAbOcdStIa16t7wfTxKmuvlWwJoh5eyJ6rs3LBwn8UT3jX0lBYfXWKsPFuaazDsYxbTmbdtpIldNPneZmfwSb3wrwAEd9GGWH8YtUl400bXTNnMx4FvCs19zrmbUqMs+61yHfXGfAcd1mJrzW08Canf0/5oaprffBK+37gH435LFC0b2shiyR6mkfJF/vNrrH2kRJabC6RrGZm5EhLtd6yQeim+GL6Hz1ZcsCMv1ywGEgrPnkXzDnhZiBM/gaqaQXFuKzlcgs2Q6ZYJA0GDM6Ef9qoEyzNhbtXIV5X8Jie/jSYjEA7HiaaDMVwfxm+/M+W+Dg854nYtzt/Vz3jGc2xClI2pky+UmqYwEvFte9Dvw/E8jomk0yWs/GGCHbdjKxPDYAQ/k8bRnTtKWeaWf7B2D35LOpT+dhN09lKI+Rn/X7VIZJfmyejOUBhZWBc32MZ+bpXA9zNW6OXCJlGQiyEtS3DuIDD8gflvj/CyE8gPUPszfzYNfWyuVKWZyK4mwNVgZJQQnkDNvj0kTpXgqKe4jHtmkBQfZYLFmGs92TrgNiVCL5bgxUw8+whTSWiPugqJ9FFGJ+cuyvb9++2ZiN/ZiddJjitD5WIa2VQb0KUhkZRJqp/rSJPg/gz3RjPMN23hOXSbHMaH047zq6txsJAMzm2lSKnlFmTD8bbzZKSiSTqGe4EsakA7bb8sFhs+ZSOj2jzNSHsRR8GHeAuRozr/kCMhN0sRkFqm+BIzBpvfanNehgHp4gBh8yUWVkILrrrE2VP6prFMUqnccXtGVOGdj1wORxGkM/5aXVh4JTmKwZcvAwKooQMFDVB4plFNEqsNbnVBTV0aFPPxUgg4PDNo6R+wJWzHgQUhHuYQZzS1YwaxoF8CcgRoUNtxAMDNWHI5BergC1Y8eOZDbtJqZhj79xcMYHs5i7mPVTqkPAcIr2w3EhhsDOJ7zbaWHKDhBQDEcbTT7WWQdhRcDYBlSW4ZzP7bUFKhtpgMqmGQbUc4QzHpBUw3L5CGsMII388ssvl0vobKRhHJRsv+pa/1TXfOU1Fp82VP4om1wA+yaRrptAUNNDyqjquDA3sBYmz2yBCqt1/vTTT/9dfdiDiHclrHRTlkg+I0HVbOZVyoa2VR0pB67V3Ef5UzN3ANAHeZaS+skRQ6oewB7422+/1cvXJKecp6yD+vjiiy/+ATDruNa8mjFnw1xiNt3DulUwvSEd3XsfemWL4rUGVBfFxGR7OrHW8QRVp5BdnepLxrhdRY8sjHFbUNhO2dnZKci9BIwctf3KwjlBrcCOFFkn3MNp9Pm9XAxb1985IKCqMe/qT5BLzd+2bdur33777TIJkyj+v/11LDYi1TSWV25bYQjDQNJqXpftYWOmM/lIgF6mfhRBItQYgNiBdrEwQKGvfqnjSW4DamNifdWzAQN+lQmg5INSv1CgYax2AiqKUMrG7mUTxsFQ0fppA5nfdvzwy+pXm4IfepZItS/tlJc0Jpq3ZztwfWbJp1afqqvMgYIyrVHHo0DNXHv9aUTJquSX68UGZtJE6lIYNncd6bOZagvQDYOxkRdQ7njmF2UVDiXLQbZpmrNcLfVPOu8C8zxKoDcC2caqjPnehxy2wG7mgyHGMPJjXcZ3VB1fB8+rAGuyglX7HEuRjY/pISVkHEH6bqR+tg7t7pDkz3JkGMwjQN2SZx6fWDJ64403fl+5cuUS3MeZvFRYY+Vm+/I+B/GfpH3sXfi0eyLASWhnLN+jrvNXF4d5HKyT4KvOZ5999k+0zoAIoDYHnHEs8CjaewMXokjA8tcvPlIMi2r0lduzbaTlbFaYMwUi884mxgPY+04NBmxhbHAsgqymfpm3wGRC2Yx4gFXpHFPltGsFC0cCphIBz46vs+YA2Jo7y3SNCayTG2TLVQ8XIhrFuS2XinmHokBtAEYJczLspZcSqi/f0LajTmvAEuIs07NH2YTWkECFctu2vs6SAUFcK/m/yN+4Fs7nzmvVlT+qMejnjp2LrUPQG8XePdRKCtmzCu86tq7WiNJ43BlbLtlDTpHyXW2Zv3OTgIppWYofesDfWyotgsDpH3Pnzl1j35g4J/DVV18txrwe4JcHeNrCTvM//PDDr5113GtXAk4JBGz6bSMxGkzRmug/35Y5z7BPO175zUZjS32BVHUxWZFkCwyr4BY0WL/T2Y977UrAKYE/DVQi1CRo/B7+Sxf5bPI/cQMiMN9RmKPumPvOmKOTmKuhArW3+cHMRcrfkmnTRORjYW6NiXNOzL12JeCUwJ8GKgFHDb5IuaJnfJQwOfjyGeUwEyVm8Jpxm3xATH8kQVMKb4a2Ogckj6oUUBAB2SL8slz6qnTm/px13WtXAlYCfxqoemVov4ixnShPyX8u8QFpqBPWocb/PEZEt5io9oKNohUokGMbTvsNRLZh+Kd9xcAEOFdtX+7ZlYAvCfxpoPrqhAizWu4AH3O0JRVyXflT0iepRIJFfAwyhXfi/yWWpXwkqZlSG4SROskVeIkKPYloX/27Za4EmvTPpX2JTZ+j4ZN24nVrCn5oIknmbXwltJ9P1KJxE5IB6E0S+ZPJQW50fnGD2W8gteN5Femrb7fMlYAnD/asoiAHWUBerA1fSh374IMPvlPqSX3yUmA3IC3n3e5CEtVZ/jIBzzq+2/7/twSalEf1JRIliJWw9vds8+bNybzqO2TfUvmq55a5EvAngefio6pzfyC1z3j9dtDfJNxyVwJPk8BzM/1PG8h97krgWSTgAvVZpOe2fWEScIH6wkTtDvQsEnCB+izSc9u+MAm4QH1honYHehYJ8Jo+OP9ZOnDbuhL4V0tAGDVfh3/88cfmn9D+qwd0+3cl0BQJgM+a/wXEHL3v2Wd6kwAAAABJRU5ErkJggg=="})},Jv=function(t){function e(e){var n=t.call(this,e)||this;return n.previewCanvasRef=null,n.previewCanvasRef=s.a.createRef(),n}return d(e,t),e.prototype.componentDidMount=function(){var t=this.previewCanvasRef.current;this.props.canvas.setCanvasElement(t)},e.prototype.render=function(){var t=this.props.config.licenseChecker;return s.a.createElement(Rg,null,t&&t.isWhiteLabel()?null:s.a.createElement(Qv,null),this.props.active.isWebcam?s.a.createElement(Eg,null):null,s.a.createElement(kg.Element,{ref:this.previewCanvasRef,"aria-label":"Canvas"}),s.a.createElement(Mv,null,s.a.createElement(Yv,null)))},e}(s.a.Component),$v=mu("active","canvas","config")(ju(Jv)),tb=kg.Button.TextSecondary,eb=o.c.span(Gv||(Gv=O(["\n  font-size: 14px;\n  padding: 3px 1px 2px;\n  color: ",";\n  display: flex;\n  align-self: center;\n"],["\n  font-size: 14px;\n  padding: 3px 1px 2px;\n  color: ",";\n  display: flex;\n  align-self: center;\n"])),(function(t){return t.theme.canvasActionBar.foreground})),nb=mu("scale","active")(ju((function(t){var e=t.scale,n=t.active,r=e.canZoomIn,i=e.canZoomOut,o=e.zoomLevel;return-1!==[P.TRANSFORM,P.BRUSH,P.FOCUS,P.STICKER,P.TEXT,P.TEXT_DESIGN].indexOf(n.tool)?null:s.a.createElement(kg.Bar.ButtonGroup,null,s.a.createElement(tb,{ariaLabel:"Zoom out",isDisabled:!i,onClick:e.out},"-"),s.a.createElement(eb,null,o," %"),s.a.createElement(tb,{ariaLabel:"Zoom in",isDisabled:!r,onClick:e.in},"+"))})));eb.defaultProps={theme:bo};var rb,ib,ob,ab,sb,lb,ub,cb,fb,pb,hb=Object(o.c)(kg.Bar.ButtonGroup)(rb||(rb=O(["\n  > :last-child {\n    margin-left: 10px;\n  }\n  > :first-child {\n    margin-left: 0;\n  }\n"],["\n  > :last-child {\n    margin-left: 10px;\n  }\n  > :first-child {\n    margin-left: 0;\n  }\n"]))),db=mu("config","editor","history","custom")(ju((function(t){var e=t.config,n=t.editor,r=t.history,i=t.custom,o=e.locale.mainCanvasActions,a=r.canUndo,l=r.canRedo,u=e.config.mainCanvasActions,c=function(){n.export()},f=function(){if(n.activeStore.tool===P.TRANSFORM)return null;var t=i.getButton("mainCanvasActionUndo");return s.a.createElement(t,{key:"mainCanvasActionUndo",onClick:r.undo,isDisabled:!a,label:o.buttonUndo,ariaLabel:o.buttonUndo,icon:s.a.createElement(wm,null)})},p=function(){if(n.activeStore.tool===P.TRANSFORM)return null;var t=i.getButton("mainCanvasActionRedo");return s.a.createElement(t,{key:"mainCanvasActionRedo",onClick:r.redo,isDisabled:!l,label:o.buttonRedo,ariaLabel:o.buttonRedo,icon:s.a.createElement(xm,null)})},h=function(){var t=i.getButton("mainCanvasActionExport");return s.a.createElement(t,{key:"mainCanvasActionExport",onClick:c,label:o.buttonExport,ariaLabel:o.buttonExport,icon:s.a.createElement(Sm,null)})},d=function(){if(!e.displayCloseButton)return null;var t=i.getButton("mainCanvasActionClose");return s.a.createElement(t,{key:"mainCanvasActionClose","data-test-id":"MainCanvasBarActionClose",onClick:n.close,label:o.buttonClose,ariaLabel:o.buttonClose,icon:s.a.createElement(Om,null)})},y=u.map((function(t){switch(t){case D.UNDO:return f;case D.REDO:return p;case D.EXPORT:return h;case D.CLOSE:return d}return null}));return s.a.createElement(kg.Bar.Index,null,s.a.createElement(hb,null,y[0]&&y[0]()||null,y[1]&&y[1]()||null),e.config.enableZoom?s.a.createElement(nb,null):null,s.a.createElement(hb,null,y[2]&&y[2]()||null,y[3]&&y[3]()||null))}))),yb=o.c.div(ib||(ib=O(["\n  position: absolute;\n  right: 8px;\n  top: 8px;\n"],["\n  position: absolute;\n  right: 8px;\n  top: 8px;\n"]))),gb=function(t){function e(e){var n=t.call(this,e)||this;return n.onChange=function(t){n.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:!1})},n.onSubmit=function(){var t=n.props.getCorrectValue,e=n.state,r=e.isSubmitted,i=e.value;r||n.setState({value:t(parseInt(i,10)||0).toString(),isSubmitted:!0})},n.state={isSubmitted:!1,value:e.value.toString()},n}return d(e,t),e.prototype.componentDidUpdate=function(t){var e=this.props.value;t.value!==e&&this.setState({value:e.toString()})},e.prototype.render=function(){var t,e=this.props,n=e.id,r=e.testId,i=e.isDisabled,o=e.label,a=this.state.value;return s.a.createElement(ty.Input.Text,{id:n,testId:r,value:a,isDisabled:i,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:(t=this.onSubmit,function(e){(function(t){return"Enter"===t.key})(e)&&t(e)})},s.a.createElement(yb,null,s.a.createElement(ty.Input.Label,{label:o,htmlFor:n})))},e}(s.a.Component),mb=o.c.div(ob||(ob=O(["\n  display: inline-flex;\n  justify-content: space-between;\n  max-width: ","px;\n"],["\n  display: inline-flex;\n  justify-content: space-between;\n  max-width: ","px;\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.width})),vb=o.c.span(ab||(ab=O(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  margin-top: 10px;\n  margin-right: 13px;\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  margin-top: 10px;\n  margin-right: 13px;\n"])),(function(t){return t.theme.measurements.fontSystem.body.size}),(function(t){return t.theme.measurements.fontSystem.body.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.body.case})),bb=function(t){var e=t.showLabel,n=void 0===e||e,r=t.label,i=t.isDisabled,o=t.valueHeight,a=t.valueWidth,l=t.labelWidth,u=t.labelHeight,c=t.onSubmitWidth,f=t.onSubmitHeight;return s.a.createElement("div",null,s.a.createElement(ty.Input.Label,{label:r,show:n}),s.a.createElement(mb,null,s.a.createElement(gb,{id:"photoeditorsdk-transformScaleWidth",testId:"TransformScaleWidth",value:a,getCorrectValue:c,label:l,isDisabled:i}),s.a.createElement(vb,null,"x"),s.a.createElement(gb,{id:"photoeditorsdk-transformScaleHeight",testId:"TransformScaleHeight",value:o,getCorrectValue:f,label:u,isDisabled:i})))},_b=mu("textTool","textDesignTool","modal","config","custom")(ju((function(t){var e=t.modal,n=t.textTool,r=t.textDesignTool,i=t.config,o=t.custom,a=e.type,l=e.identifier,u=e.isVisible,c=e.modalProps,f=e.positionOffset,p=c.headerLabel,h=c.bodyLabel,d=c.confirmLabel,g=c.dismissLabel,m=c.handleClose,v=c.handleConfirm,b=c.handleDismiss,_=o.getDialog();if(a===F.INFO)return s.a.createElement(ty.InfoModal,{headerLabel:p,bodyLabel:h},s.a.createElement(_,{type:a,isVisible:u,identifier:l,position:f,handleClose:m,headerLabel:p,bodyLabel:h}));if(a===F.TEXT_EDIT){var w=n.locale.canvasControls,x=w.buttonSave,O=w.buttonClose,S={type:a,isVisible:e.isVisible,confirmLabel:x,dismissLabel:O,headerLabel:n.locale.canvasControls.inputText,maxLength:i.config.text.maxCharacterLimit};if(n.isTextSelected)return s.a.createElement(ty.TextEditModal,y({},S,{defaultText:Ys.defaultText(),handleConfirm:n.changeText,handleDismiss:n.setEditMode,text:n.text}),s.a.createElement(_,{type:a,isVisible:u,identifier:l,position:f,handleClose:m,confirmLabel:x,dismissLabel:O,headerLabel:n.locale.canvasControls.inputText}));if(r.isTextDesignSelected)return s.a.createElement(ty.TextEditModal,y({},S,{defaultText:$s.defaultText(),handleConfirm:r.changeText,handleDismiss:r.setEditMode,text:r.text}),s.a.createElement(_,{type:a,isVisible:u,identifier:l,position:f,handleClose:m,confirmLabel:x,dismissLabel:O,headerLabel:n.locale.canvasControls.inputText}))}return s.a.createElement(ty.ActionModal,{type:a,headerLabel:p,bodyLabel:h,confirmLabel:d,dismissLabel:g,handleClose:m,handleConfirm:v,handleDismiss:b},s.a.createElement(_,{type:a,isVisible:u,identifier:l,position:f,confirmLabel:d,dismissLabel:g,headerLabel:p,bodyLabel:h,handleClose:m}))}))),wb=function(t,e){var n=this;void 0===t&&(t={}),void 0===e&&(e={}),this.getAdvancedCategoryCard=function(){return n.components.advancedUICategoryCard},this.getAdvancedItemCard=function(){return n.components.advancedUIItemCard},this.getAdvancedToolbarItem=function(){return n.components.advancedUIToolbarItem},this.getDialog=function(){return n.components.dialog},this.getButton=function(t){return n.components.buttons[t]},this.getColorItem=function(){return n.components.colorItem},this.getCheckbox=function(){return n.components.checkbox};var r={dialog:ty.Dialog,colorItem:ty.ColorItem,checkbox:ty.Input.Checkbox,buttons:{mainCanvasActionUndo:kg.Button.TextSecondary,mainCanvasActionRedo:kg.Button.TextSecondary,mainCanvasActionExport:gf,mainCanvasActionClose:pf,canvasActionEdit:kg.Controls.SpriteActionButton,canvasActionBringToFront:kg.Controls.SpriteActionButton,canvasActionDuplicate:kg.Controls.SpriteActionButton,canvasActionDelete:kg.Controls.SpriteActionButton,canvasActionInvert:kg.Controls.SpriteActionButton,canvasActionFlip:kg.Controls.SpriteActionButton,transformActionFlipHorizontal:yf,transformActionFlipVertical:yf,transformActionRotateClockwise:yf,transformActionRotateAntiClockwise:yf,textAlignment:yf,toolControlBarPrimaryButton:uf,toolControlBarSecondaryButton:pf}};this.components=oo([r,e,t])},xb=o.c.div(sb||(sb=O(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Ob=function(t){function e(e){var r=t.call(this,e)||this;r.onClick=function(t){return function(e){var i=r.props,o=i.onAddSnapshot,a=i.config,s=i.onChange,l=i.colorPickerDirection,u=r.state,c=u.activeIdentifier,f=u.showColorPicker,p=u.colorList.find((function(e){return e.identifier===t}));if(c!==p.identifier||f)f?r.setState({showColorPicker:!1}):(s(p.color),r.setState({activeIdentifier:t}),o&&o());else{r.UIComponent||n.e(3).then(n.bind(null,30)).then((function(t){var e=t.ColorPicker;r.UIComponent=e,r.forceUpdate()}));var h=e.currentTarget.getBoundingClientRect(),d=h.left,y=h.width,g=h.top,m=h.height,v=e.currentTarget.parentElement.getBoundingClientRect(),b=v.left,_=v.top,w=a.measurements.color.colorPicker,x=d-b+y/2-2,O="bottom"===l?g-_+m+w.arrow.width/2:g-_-w.arrow.width/2,S=-24,k=w.width-w.arrow.width-12;x>k&&(x-=S+=x-k),r.setState({showColorPicker:!0,arrowOffset:x,topOffset:O,leftOffset:S})}}},r.onChange=function(t){var e=t.color,n=t.colorString,i=r.props.onChange,o=r.state,a=o.activeIdentifier,s=o.colorList,l=s.findIndex((function(t){return t.identifier===a}));if(-1!==l){var u=x(s);u[l]={identifier:s[l].identifier,colorString:n,color:e},r.setState({colorList:u})}i(e)},r.onChangeColorPicker=function(t){var e=t.color,n=t.colorString;r.onChange({color:[e[0]/255,e[1]/255,e[2]/255,e[3]],colorString:n})},r.closeColorPicker=function(){r.setState({showColorPicker:!1})},r.getColorPicker=function(){var t=r.props,e=t.activeColor,n=t.parentId,i=t.labelsColor,o=t.colorPickerDirection,a=t.onAddSnapshot,l=r.state,u=l.showColorPicker,c=l.arrowOffset,f=l.leftOffset,p=l.topOffset;if(!r.UIComponent)return null;var h=r.UIComponent;return s.a.createElement(h,{parentId:n,color:Qr(e),show:u,direction:o,arrowOffset:c,leftOffset:f,topOffset:p,labelHex:i.hex,labelR:i.r,labelG:i.g,labelB:i.b,labelSliderOpacity:i.sliderOpacity,labelSliderHue:i.sliderHue,onChange:r.onChangeColorPicker,onRequestClose:r.closeColorPicker,onAddSnapshot:a})};var i=r.props.colors;return r.state={activeIdentifier:"",activeSprite:"",colorList:x(i),showColorPicker:!1,arrowOffset:0,leftOffset:0,topOffset:0},r.UIComponent=null,r}return d(e,t),e.getDerivedStateFromProps=function(t,e){var n=t.activeSprite,r=t.activeColor,i=e.activeSprite,o=e.colorList;if(n!==i||!n){var a=Ae(Qr(r)),s=o.find((function(t){return t.colorString===a}));return{activeSprite:n,activeIdentifier:s?s.identifier:""}}return null},e.prototype.render=function(){var t=this,e=this.props,n=e.isDisabled,r=e.custom,i=e.config,o=this.state,a=o.activeIdentifier,l=o.colorList,u=r.getColorItem(),c=i.assetProvider.getPath("controls","/tiled-background.png"),f=l.map((function(e){return s.a.createElement(u,{key:e.colorString+"-item-"+e.identifier,isActive:e.identifier===a,isDisabled:n,onClick:t.onClick(e.identifier),color:e.colorString,label:e.identifier,tiledBackgroundUrl:c})}));return s.a.createElement(xb,null,f,this.getColorPicker())},e.defaultProps={colorPickerDirection:"bottom",isDisabled:!1},m([mu("config","custom"),ju],e)}(s.a.Component),Sb=o.c.div(fb||(fb=O(["\n  z-index: ",";\n  flex-shrink: 0;\n  background-color: ",";\n  color: ",";\n  ","\n  height: 100%;\n  width: ","px;\n  margin-bottom: ","px;\n"],["\n  z-index: ",";\n  flex-shrink: 0;\n  background-color: ",";\n  color: ",";\n  ","\n  height: 100%;\n  width: ","px;\n  margin-bottom: ","px;\n"])),(function(t){return t.theme.measurements.zIndex.toolbar}),(function(t){return t.theme.toolbar.background}),(function(t){return t.theme.toolbar.foreground}),(function(t){var e=t.theme.toolbar.border?t.theme.toolbar.border:Object(o.b)(lb||(lb=O(["\n          1px solid ",";\n        "],["\n          1px solid ",";\n        "])),t.theme.toolbar.borderColor);return t.reverse?Object(o.b)(cb||(cb=O(["\n          border-left: ",";\n        "],["\n          border-left: ",";\n        "])),e):Object(o.b)(ub||(ub=O(["\n          border-right: ",";\n        "],["\n          border-right: ",";\n        "])),e)}),(function(t){return t.theme.measurements.advancedUIToolbar.width}),(function(t){return t.theme.measurements.advancedUIToolbar.marginBottom})),kb=o.c.ul.attrs((function(){return{role:"menubar","aria-label":"Tool Navigation","data-simplebar":"init","data-simplebar-auto-hide":"false"}}))(pb||(pb=O(["\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  list-style: none;\n  overflow-x: hidden;\n  overflow-y: overlay;\n  height: 100%;\n  .simplebar-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n"],["\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  list-style: none;\n  overflow-x: hidden;\n  overflow-y: overlay;\n  height: 100%;\n  .simplebar-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n"]))),Tb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={reverse:!1},e}return d(e,t),e.prototype.componentDidMount=function(){var t=document.getElementById("photoeditorsdk-AdvancedToolbar");t&&t.offsetLeft>window.innerWidth/2&&this.setState({reverse:!0})},e.prototype.render=function(){return s.a.createElement(Sb,{reverse:this.state.reverse},s.a.createElement(kb,{id:"photoeditorsdk-AdvancedToolbar"},this.props.children(this.state.reverse)))},e}(s.a.Component);Sb.defaultProps={theme:bo},kb.defaultProps={theme:bo};var Eb,Cb,Rb,Db,Pb,Ib=Object(o.c)(cf)(Db||(Db=O(["\n  width: inherit;\n  height: inherit;\n  padding: 0;\n  margin: 0;\n  ","\n\n  ","\n"],["\n  width: inherit;\n  height: inherit;\n  padding: 0;\n  margin: 0;\n  ","\n\n  ","\n"])),Pt()?Object(o.b)(Eb||(Eb=O(["\n        background-color: transparent;\n      "],["\n        background-color: transparent;\n      "]))):Object(o.b)(Cb||(Cb=O(["\n        background-color: inherit;\n      "],["\n        background-color: inherit;\n      "]))),(function(t){return t.isActive&&Object(o.b)(Rb||(Rb=O(["\n      background-color: ",";\n      color: ",";\n    "],["\n      background-color: ",";\n      color: ",";\n    "])),t.theme.toolbar.activeBackground,t.theme.toolbar.activeForeground)})),Ab=o.c.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})(Pb||(Pb=O(["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"],["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"])),(function(t){return t.theme.measurements.advancedUIToolbar.itemHeight}));Ab.defaultProps={theme:bo};var Fb,jb=o.c.li.attrs({role:"none"})(Fb||(Fb=O(["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"],["\n  height: ","px;\n  cursor: pointer;\n  position: relative;\n"])),(function(t){return t.theme.measurements.advancedUIToolbar.seperatorHeight}));jb.defaultProps={theme:bo};var Mb,zb,Lb,Bb,Nb,Ub,Wb,Hb=o.c.div(Ub||(Ub=O(["\n  ","\n  position: -ms-device-fixed;\n  top: ","px;\n  left: ","px;\n  z-index: ",";\n  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out, right 0.25s ease-in-out, visibility 0.5s ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n  cursor: pointer;\n\n  &:before {\n    content: ' ';\n    position: absolute;\n    top: 10px;\n    left: -8px;\n    width: 0;\n    height: 0;\n    border-right: 8px solid ",";\n    border-bottom: 6px solid transparent;\n    border-top: 6px solid transparent;\n  }\n\n  &:after {\n    content: '","';\n    position: absolute;\n    transition: margin-left 0.15s ease-in-out, opacity 0.15s ease-in-out;\n    color: ",";\n    background: ",";\n    padding: 8px 12px;\n    text-align: center;\n    vertical-align: super;\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    border-radius: ","px;\n    white-space: nowrap;\n  }\n\n  ","\n\n  ","\n\n  ","\n"],["\n  ","\n  position: -ms-device-fixed;\n  top: ","px;\n  left: ","px;\n  z-index: ",";\n  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out, right 0.25s ease-in-out, visibility 0.5s ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n  cursor: pointer;\n\n  &:before {\n    content: ' ';\n    position: absolute;\n    top: 10px;\n    left: -8px;\n    width: 0;\n    height: 0;\n    border-right: 8px solid ",";\n    border-bottom: 6px solid transparent;\n    border-top: 6px solid transparent;\n  }\n\n  &:after {\n    content: '","';\n    position: absolute;\n    transition: margin-left 0.15s ease-in-out, opacity 0.15s ease-in-out;\n    color: ",";\n    background: ",";\n    padding: 8px 12px;\n    text-align: center;\n    vertical-align: super;\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    border-radius: ","px;\n    white-space: nowrap;\n  }\n\n  ","\n\n  ","\n\n  ","\n"])),Pt()?Object(o.b)(Mb||(Mb=O(["\n        position: -ms-device-fixed;\n      "],["\n        position: -ms-device-fixed;\n      "]))):Object(o.b)(zb||(zb=O(["\n        position: fixed;\n      "],["\n        position: fixed;\n      "]))),(function(t){return t.position.y-5}),(function(t){return t.position.x+t.theme.measurements.advancedUIToolbar.width-10}),(function(t){return t.theme.measurements.zIndex.toolbar}),(function(t){return t.theme.tooltip.background}),(function(t){return t.label}),(function(t){return t.theme.tooltip.foreground}),(function(t){return t.theme.tooltip.background}),(function(t){return t.theme.measurements.fontSystem.label.size}),(function(t){return t.theme.measurements.fontSystem.label.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.label.case}),(function(t){return t.theme.shape.radiusSmall}),(function(t){return t.reverse&&Object(o.b)(Lb||(Lb=O(["\n      left: unset;\n      right: ","px;\n      direction: rtl;\n\n      &:before {\n        border-left: 8px solid ",";\n        border-right: none;\n        right: -8px;\n        left: unset;\n        top: 10px;\n      }\n    "],["\n      left: unset;\n      right: ","px;\n      direction: rtl;\n\n      &:before {\n        border-left: 8px solid ",";\n        border-right: none;\n        right: -8px;\n        left: unset;\n        top: 10px;\n      }\n    "])),t.position.x+t.theme.measurements.advancedUIToolbar.width-10,t.theme.tooltip.background)}),(function(t){return t.show&&!t.reverse&&Object(o.b)(Bb||(Bb=O(["\n      opacity: 1;\n      visibility: visible;\n      left: ","px;\n    "],["\n      opacity: 1;\n      visibility: visible;\n      left: ","px;\n    "])),t.position.x+t.theme.measurements.advancedUIToolbar.width+16)}),(function(t){return t.show&&t.reverse&&Object(o.b)(Nb||(Nb=O(["\n      opacity: 1;\n      visibility: visible;\n      right: ","px;\n    "],["\n      opacity: 1;\n      visibility: visible;\n      right: ","px;\n    "])),t.position.x+t.theme.measurements.advancedUIToolbar.width+16)})),Vb=o.c.span(Wb||(Wb=O(["\n  display: none;\n"],["\n  display: none;\n"]))),Gb=function(t){var e=t.show,n=t.reverse,r=t.position,i=t.children,o="string"==typeof i?i:"";return s.a.createElement(Hb,{"data-test-id":"Tooltip",show:e,reverse:n,position:r,label:o},s.a.createElement(Vb,null,o))};Hb.defaultProps={theme:bo},Gb.defaultProps={show:!1};var Zb,Xb,qb,Yb,Kb=o.c.div(qb||(qb=O(["\n  flex-shrink: 0;\n  background: ",";\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  display: flex;\n  flex-direction: column;\n  transition: width 0.4s ease-in;\n  width: ","px;\n  margin-bottom: ","px;\n  ","\n  z-index: ",";\n  /* for Firefox */\n  min-height: 0;\n"],["\n  flex-shrink: 0;\n  background: ",";\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  display: flex;\n  flex-direction: column;\n  transition: width 0.4s ease-in;\n  width: ","px;\n  margin-bottom: ","px;\n  ","\n  z-index: ",";\n  /* for Firefox */\n  min-height: 0;\n"])),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.measurements.advancedUIToolControlBar.marginBottom}),(function(t){return t.reverse?Object(o.b)(Xb||(Xb=O(["\n          border-left: 1px solid ",";\n        "],["\n          border-left: 1px solid ",";\n        "])),t.theme.toolControlBar.borderColor):Object(o.b)(Zb||(Zb=O(["\n          border-right: 1px solid ",";\n        "],["\n          border-right: 1px solid ",";\n        "])),t.theme.toolControlBar.borderColor)}),(function(t){return t.theme.measurements.zIndex.toolControlBar})),Qb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={reverse:!1},e}return d(e,t),e.prototype.componentDidMount=function(){var t=document.getElementById("photoeditorsdk-Sidebar");t&&t.offsetLeft>window.innerWidth/2&&this.setState({reverse:!0})},e.prototype.render=function(){return s.a.createElement(Kb,{id:"photoeditorsdk-Sidebar",reverse:this.state.reverse},this.props.children)},e}(s.a.Component),Jb=o.c.h2(Yb||(Yb=O(["\n  /* Center text horizontally and vertically */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 0;\n  padding: 0 4px;\n  margin: 0;\n  min-height: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  background: ",";\n  color: ",";\n  border-bottom: 1px solid ",";\n  font-weight: 500;\n  text-align: center;\n"],["\n  /* Center text horizontally and vertically */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 0;\n  padding: 0 4px;\n  margin: 0;\n  min-height: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  background: ",";\n  color: ",";\n  border-bottom: 1px solid ",";\n  font-weight: 500;\n  text-align: center;\n"])),(function(t){return t.theme.measurements.mainCanvasActionBar.height-2}),(function(t){return t.theme.measurements.fontSystem.headline1.size}),(function(t){return t.theme.measurements.fontSystem.headline1.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.headline1.case}),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.toolControlBar.titleForeground}),(function(t){return t.theme.toolControlBar.separatorColor}));Jb.defaultProps={theme:bo};var $b,t_,e_=o.c.div($b||($b=O(["\n  position: relative;\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: ","px;\n  opacity: ",";\n  visibility: ",";\n  overflow: ",";\n  transition: ",";\n  background: ",";\n  color: ",";\n"],["\n  position: relative;\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: ","px;\n  opacity: ",";\n  visibility: ",";\n  overflow: ",";\n  transition: ",";\n  background: ",";\n  color: ",";\n"])),(function(t){return t.height}),(function(t){return t.opacity}),(function(t){return t.visibility}),(function(t){var e=t.shouldAnimateOverflow,n=t.overflow;return e?n:void 0}),(function(t){return t.shouldAnimateHeight?"opacity 0.5s ease-in, height 0.4s ease-out":"opacity 0.5s ease-in"}),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.toolControlBar.inputLabelForeground})),n_=o.c.div(t_||(t_=O(["\n  position: relative;\n  padding: ",";\n"],["\n  position: relative;\n  padding: ",";\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.padding})),r_=function(t){function e(e){var n=t.call(this,e)||this;return n.contentRef=null,n.enableOverflow=function(){n.props.show&&n.contentRef.current&&n.setState({overflow:!0})},n.contentRef=s.a.createRef(),n.state={height:0,mounted:!1,overflow:!1},n}return d(e,t),e.prototype.componentDidMount=function(){var t=this.props.overflowAfterExpand;this.contentRef.current&&(t&&this.contentRef.current.addEventListener("transitionend",this.enableOverflow),this.setState({height:this.contentRef.current.scrollHeight,mounted:!0}))},e.prototype.componentWillUnmount=function(){this.contentRef.current&&this.contentRef.current.removeEventListener("transitionend",this.enableOverflow)},e.prototype.render=function(){var t=this.props,e=t.show,n=t.shouldAnimateOverflow,r=t.shouldAnimateHeight,i=t.children,o=this.state,a=o.height,l=o.mounted,u=o.overflow,c=l&&(e&&n||!n),f=c?a:0,p=c?1:0,h=c?"visible":"hidden";return s.a.createElement(e_,{"data-test-id":"ToolControlBar",ref:this.contentRef,height:f,opacity:p,visibility:h,overflow:u?"visible":"hidden",shouldAnimateHeight:r,shouldAnimateOverflow:n},s.a.createElement(n_,null,i))},e.defaultProps={show:!0,shouldAnimateOverflow:!0,shouldAnimateHeight:!0},e}(s.a.Component);e_.defaultProps={theme:bo};var i_,o_=o.c.div.attrs({"data-simplebar":"init","data-simplebar-auto-hide":"false"})(i_||(i_=O(["\n  &&& {\n    flex-grow: 1;\n    position: relative;\n    box-sizing: border-box;\n    padding: ",";\n    width: ","px;\n    overflow: visible;\n    /* for Firefox */\n    min-height: 0;\n    transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n    background: ",";\n    color: ",";\n\n    ","\n    .photoeditorsdk-simplebar-placeholder {\n      height: 0px !important;\n    }\n  }\n"],["\n  &&& {\n    flex-grow: 1;\n    position: relative;\n    box-sizing: border-box;\n    padding: ",";\n    width: ","px;\n    overflow: visible;\n    /* for Firefox */\n    min-height: 0;\n    transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);\n    background: ",";\n    color: ",";\n\n    ","\n    .photoeditorsdk-simplebar-placeholder {\n      height: 0px !important;\n    }\n  }\n"])),(function(t){return t.theme.measurements.advancedUIToolControlBar.padding}),(function(t){return t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.theme.toolControlBar.inputLabelForeground}),Tf.HiddenScrollbar);o_.defaultProps={theme:bo};var a_,s_=o.c.h2(a_||(a_=O(["\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-weight: 500;\n  min-height: ","px;\n"],["\n  color: ",";\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-weight: 500;\n  min-height: ","px;\n"])),(function(t){return t.theme.toolControlBar.titleForeground}),(function(t){return t.theme.measurements.fontSystem.headline2.size}),(function(t){return t.theme.measurements.fontSystem.headline2.letterSpacing}),(function(t){return t.theme.measurements.fontSystem.headline2.case}),(function(t){return 2*t.theme.measurements.advancedSpacer}));s_.defaultProps={theme:bo};var l_,u_,c_=o.c.div(u_||(u_=O(["\n  &:after {\n    content: '';\n    position: absolute;\n    bottom: 0px;\n    ","\n    border-bottom: 2px solid ",";\n  }\n"],["\n  &:after {\n    content: '';\n    position: absolute;\n    bottom: 0px;\n    ","\n    border-bottom: 2px solid ",";\n  }\n"])),(function(t){return t.full?Object(o.b)(l_||(l_=O(["\n            left: -","px;\n            width: calc(100% + ","px);\n          "],["\n            left: -","px;\n            width: calc(100% + ","px);\n          "])),3*t.theme.measurements.advancedSpacer/2,3*t.theme.measurements.advancedSpacer):"\n      left: "+3*t.theme.measurements.advancedSpacer/2+"px;\n      width: calc(100% - "+3*t.theme.measurements.advancedSpacer+"px);\n    "}),(function(t){return t.theme.toolControlBar.separatorColor}));c_.defaultProps={theme:bo};var f_,p_,h_,d_,y_,g_,m_,v_,b_,__,w_,x_,O_,S_=o.c.div(f_||(f_=O(["\n  position: relative;\n  width: 100%;\n"],["\n  position: relative;\n  width: 100%;\n"]))),k_=o.c.div(y_||(y_=O(["\n  transition: max-height 0.8s ease-out, transform 0.8s ease-out;\n  background: ",";\n  visibility: hidden;\n  opacity: 0;\n  transform-origin: 0 0;\n  display: none;\n  flex-wrap: wrap;\n\n  ","\n"],["\n  transition: max-height 0.8s ease-out, transform 0.8s ease-out;\n  background: ",";\n  visibility: hidden;\n  opacity: 0;\n  transform-origin: 0 0;\n  display: none;\n  flex-wrap: wrap;\n\n  ","\n"])),(function(t){return t.theme.toolControlBar.background}),(function(t){return t.show&&Object(o.b)(d_||(d_=O(["\n      opacity: 1;\n      visibility: visible;\n      ","\n    "],["\n      opacity: 1;\n      visibility: visible;\n      ","\n    "])),Pt()?Object(o.b)(p_||(p_=O(["\n            display: block;\n          "],["\n            display: block;\n          "]))):Object(o.b)(h_||(h_=O(["\n            display: flex;\n          "],["\n            display: flex;\n          "]))))})),T_={Card:oy,CardContainer:ay,CardLabel:sy,Toolbar:{Index:Tb,Item:function(t){return s.a.createElement(Ab,null,s.a.createElement(Ib,y({isActive:t.isActive,"data-test-id":t.ariaLabel},t)))},Separator:jb,Tooltip:Gb},Itemsbar:o_,BarSeparator:"",ItemsSeparator:c_,Controlsbar:r_,Sidebar:{Index:Qb,Heading:Jb,SubHeading:s_,TextCategory:function(t){var e=t.name,n=t.isFirstCategory,r=t.isLastCategory,i=t.children;return s.a.createElement(S_,null,n&&s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(s_,{"data-test-id":e},e),s.a.createElement(ay,null,i),s.a.createElement(ty.Spacer,{count:2}),r&&s.a.createElement(c_,{full:!0}))},ExpandableContainer:k_}},E_=function(t){function e(e){var n=t.call(this,e)||this;return n.ref=null,n.updatePosition=function(){var t=n.props.isReverse,e={x:0,y:0};if(n.ref.current){var r=n.ref.current.getBoundingClientRect(),i=r.top,o=r.height,a=r.left,s=r.right;e.y=i+o/4,e.x=t?window.innerWidth-s:a}n.setState({tooltipPosition:e})},n.mouseOver=function(t){n.updatePosition(),n.setState({hoverTool:t})},n.mouseOut=function(){n.setState({hoverTool:null})},n.state={hoverTool:null,tooltipPosition:{x:0,y:0}},n.ref=s.a.createRef(),n}return d(e,t),e.prototype.componentDidMount=function(){this.updatePosition()},e.prototype.componentDidUpdate=function(t){this.props.isReverse!==t.isReverse&&this.updatePosition()},e.prototype.render=function(){var t=this,e=this.props,n=e.tool,r=e.isActive,i=e.isReverse,o=e.icon,a=e.label,l=e.onClick,u=e.className,c=e.children,f=this.state,p=f.hoverTool,h=f.tooltipPosition;return s.a.createElement(C_,{ref:this.ref,onMouseOver:function(){return t.mouseOver(n)},onMouseOut:function(){return t.mouseOut()},className:u},s.a.createElement(T_.Toolbar.Item,{ariaLabel:a,isActive:r,onClick:function(){return l(n)}},o,c),s.a.createElement(T_.Toolbar.Tooltip,{position:h,reverse:i,show:p===n},a))},e}(s.a.Component),C_=o.c.div(g_||(g_=O(["\n  position: relative;\n"],["\n  position: relative;\n"]))),R_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderIcon=function(t){var e=vm[t];return s.a.createElement(e,null)||null},e.update=function(t){e.props.active.selectTool(t)},e}return d(e,t),e.prototype.getToolTitle=function(t){return this.props.config.locale[t].title},e.prototype.render=function(){var t=this,e=this.props.active.tool,n=this.props,r=n.tool,i=n.custom;if(r){var o=i.getAdvancedToolbarItem();return s.a.createElement(o,{key:r,isActive:r===e,isReverse:this.props.isReverse,icon:this.renderIcon(r),onClick:function(){return t.update(r)},tool:r,label:this.getToolTitle(r)})}return s.a.createElement(T_.Toolbar.Separator,null)},m([mu("active","config","custom"),ju],e)}(s.a.Component),D_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderTools=function(t){return e.props.config.tools.map((function(e,n){return s.a.createElement(R_,{key:e||n,tool:e,isReverse:t})}))},e}return d(e,t),e.prototype.render=function(){return s.a.createElement(T_.Toolbar.Index,null,this.renderTools)},m([mu("config"),ju],e)}(s.a.Component),P_=mu("library","active","custom")(ju((function(t){var e=t.library,n=t.active,r=t.custom,i=e.locale.controls.placeholderSearch,o=e,a=o.config,l=o.libraryProvider,u=r.getButton("toolControlBarPrimaryButton"),c=r.getButton("toolControlBarSecondaryButton");return s.a.createElement(T_.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1},s.a.createElement(ty.Spacer,null),l&&s.a.createElement(s.a.Fragment,null,s.a.createElement(ty.Input.Search,{onChange:function(t){e.fetchImages(t)},placeholder:i}),s.a.createElement(ty.Spacer,{count:2})),a.enableUpload&&s.a.createElement(u,{tool:P.LIBRARY,ariaLabel:e.locale.controls.buttonUpload,onClick:function(){var t=document.getElementById("fileUpload");t&&t.click()},fullWidth:!0,label:e.locale.controls.buttonUpload},s.a.createElement(ty.Input.File,{onChange:function(t){var e=t.target.files;if(e.length){var r=new FileReader;r.onload=function(t){n.newImage(t.target.result)},r.readAsDataURL(e[0])}}})),s.a.createElement(ty.Spacer,null),a.enableWebcam&&s.a.createElement(c,{tool:P.LIBRARY,ariaLabel:e.locale.controls.buttonWebcamOpen,onClick:function(){n.selectWebcam(!0)},fullWidth:!0,label:e.locale.controls.buttonWebcamOpen}),s.a.createElement(T_.ItemsSeparator,null))}))),I_=mu("library","active","custom")(ju((function(t){var e=t.active,n=t.library,r=t.custom,i=n,o=i.query,a=i.config,l=i.selectedCategoryIdentifier,u=i.categories,c=i.images,f=r.getAdvancedCategoryCard(),p=r.getAdvancedItemCard(),h=function(t,n){return s.a.createElement(p,{tool:P.LIBRARY,type:A.MEDIUM,onClick:function(){return e.newImage(t.rawUrl)},key:t.identifier+"-"+n,image:t.coverImage,label:t.name,style:{animationDelay:.08*n+"s"}},s.a.createElement(T_.CardLabel,{hidden:!0},t.name))};return o?c.length?s.a.createElement(s.a.Fragment,null,c.map(h)):s.a.createElement("p",{"data-test-id":"LibraryNoResult"},n.locale.controls.noResults):a.flattenCategories?s.a.createElement(s.a.Fragment,null,c.map(h)):a.categoryHeaderType===I.CARD?s.a.createElement(s.a.Fragment,null,u.map((function(t){var e=l===t.identifier;return t.items?s.a.createElement("div",{key:t.identifier},s.a.createElement(f,{isActive:e,tool:P.LIBRARY,type:A.LARGE,onClick:function(){return n.toggleCategorySelection(t.identifier)},image:t.coverImage,label:t.name,style:{animationDelay:(t.delay||0)+"s"}},s.a.createElement(T_.CardLabel,{withBackground:!0,caret:!0,isActive:e},t.name)),s.a.createElement(T_.Sidebar.ExpandableContainer,{show:e},t.items.map(h))):null}))):a.categoryHeaderType===I.TEXT?s.a.createElement(s.a.Fragment,null,u.map((function(t,e){return t.items?s.a.createElement(T_.Sidebar.TextCategory,{key:t.identifier,name:t.name,isFirstCategory:0!==e,isLastCategory:e!==u.length-1},t.items.map(h)):null}))):null}))),A_=mu("library")(ju((function(t){var e=t.library,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(P_,null),s.a.createElement(T_.Itemsbar,null,s.a.createElement(T_.CardContainer,null,s.a.createElement(I_,null))))}))),F_=mu("filterTool","custom")(ju((function(t){var e=t.filterTool,n=t.custom,r=e.locale.controls,i=e.state,o=n.getButton("toolControlBarSecondaryButton"),a=function(){e.toolSnapshot()};return s.a.createElement(T_.Controlsbar,{show:e.isOptionSelected},s.a.createElement(ty.Input.Form,null,s.a.createElement(o,{tool:P.FILTER,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderIntensity,value:i.intensity,min:0,max:1,onChange:e.changeIntensity,onMouseUp:a,onTouchEnd:a,snap:i.isDuotone?.5:null}),s.a.createElement(ty.Spacer,null)),s.a.createElement(T_.ItemsSeparator,null))}))),j_=mu("filterTool","custom")(ju((function(t){var e=t.filterTool,n=t.custom,r=e,i=r.categories,o=r.config,a=r.entities,l=r.locale,u=n.getAdvancedItemCard(),c=n.getAdvancedCategoryCard(),f=function(t){var n=l.items[t.identifier]||t.name;return s.a.createElement(u,{tool:P.FILTER,type:A.MEDIUM,onClick:function(){return e.selectFilter(t.identifier,t.defaultIntensity)},key:t.identifier,image:t.thumbnail||t.thumbnailURI,label:n,style:{animationDelay:(t.delay||0)+"s"},isActive:e.identifier===t.identifier},s.a.createElement(T_.CardLabel,{withBackground:!0},n))};return o.flattenCategories?s.a.createElement(s.a.Fragment,null,a.map(f)):o.categoryHeaderType===I.CARD?s.a.createElement(s.a.Fragment,null,i.map((function(t){var n=e.selectedCategoryIdentifier===t.identifier,r=l.categories[t.identifier]||t.name;return t.items?s.a.createElement("div",{key:t.identifier},s.a.createElement(c,{isActive:n,tool:P.FILTER,type:A.LARGE,onClick:function(){return e.toggleCategorySelection(t.identifier)},image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"}},s.a.createElement(T_.CardLabel,{withBackground:!0,caret:!0,isActive:n},r)),s.a.createElement(T_.Sidebar.ExpandableContainer,{show:n},t.items.map(f))):null}))):o.categoryHeaderType===I.TEXT?s.a.createElement(s.a.Fragment,null,i.map((function(t,e){var n=l.categories[t.identifier]||t.name;return t.items?s.a.createElement(T_.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==i.length-1},t.items.map(f)):null}))):null}))),M_=mu("filterTool")(ju((function(t){var e=t.filterTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(F_,null),s.a.createElement(T_.Itemsbar,{key:"filterToolItemsbar"},s.a.createElement(T_.CardContainer,null,s.a.createElement(j_,null))))}))),z_=mu("focusTool","custom")(ju((function(t){var e=t.focusTool,n=t.custom,r=e.locale.controls,i=n.getButton("toolControlBarSecondaryButton"),o=function(){e.toolSnapshot(r.sliderIntensity)};return s.a.createElement(T_.Controlsbar,{show:e.isOptionSelected},s.a.createElement(ty.Input.Form,null,s.a.createElement(i,{tool:P.FOCUS,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderIntensity,value:e.intensity,min:wl.minIntensity,max:e.maxIntensity,divider:1,onChange:e.changeIntensity,onMouseUp:o,onTouchEnd:o})),s.a.createElement(ty.Spacer,{count:1}),s.a.createElement(T_.ItemsSeparator,null))}))),L_=mu("focusTool","custom")(ju((function(t){var e=t.focusTool,n=t.custom,r=e.entities;return s.a.createElement(T_.Itemsbar,null,s.a.createElement(T_.CardContainer,null,r.map((function(t){var r=e.locale.items[t.identifier]||t.name,i=n.getAdvancedItemCard();return s.a.createElement(i,{tool:P.FOCUS,type:A.LARGE,onClick:function(){return e.selectFocus(t.identifier)},key:t.identifier,image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"},isActive:t.identifier===e.identifier},s.a.createElement(T_.CardLabel,{withBackground:!0},r))}))))}))),B_=mu("focusTool")(ju((function(t){var e=t.focusTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(z_,null),s.a.createElement(L_,null))}))),N_=Object(o.c)(ty.Input.Slider)(m_||(m_=O(["\n  padding-bottom: 16px;\n"],["\n  padding-bottom: 16px;\n"]))),U_=mu("adjustmentsTool")(ju((function(t){var e=t.adjustmentsTool,n=e,r=n.categories,i=n.items,o=n.config,a=n.locale,l=function(){e.toolSnapshot()},u=function(t){var n=e.locale.categories[t.identifier]||t.name;return s.a.createElement(N_,{adjust:!0,key:t.identifier,label:n,value:e[t.identifier],onChange:function(n){return function(t,n){e.editAdjustments({type:t,value:n})}(t.identifier,n)},onMouseUp:l,onTouchEnd:l,snap:0})};return o.flattenCategories?s.a.createElement(s.a.Fragment,null,i.map(u)):s.a.createElement(s.a.Fragment,null,r.map((function(t,e){var n=a.categories[t.identifier]||t.name;return t.items?s.a.createElement(T_.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==r.length-1},t.items.map(u)):null})))}))),W_=mu("adjustmentsTool","custom")(ju((function(t){var e=t.adjustmentsTool,n=t.custom,r=e.locale.controls,i=n.getButton("toolControlBarSecondaryButton");return s.a.createElement(T_.Controlsbar,{show:e.isDirty},s.a.createElement(i,{tool:P.ADJUSTMENT,label:r.buttonReset,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0}),s.a.createElement(T_.ItemsSeparator,null))}))),H_=mu("adjustmentsTool")(ju((function(t){var e=t.adjustmentsTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(W_,null),s.a.createElement(T_.Itemsbar,null,s.a.createElement(U_,null)))}))),V_=mu("overlayTool","custom")(ju((function(t){var e=t.overlayTool,n=t.custom,r=e.locale.controls,i=e.allBlendModes,o=e.blendMode,a=n.getButton("toolControlBarSecondaryButton"),l=function(){e.toolSnapshot()};return s.a.createElement(T_.Controlsbar,{show:e.isOptionSelected},s.a.createElement(a,{tool:P.OVERLAY,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.CarouselSlider,{label:r.carouselBlendMode,defaultIdentifier:o,onSelect:function(t){e.changeBlendMode(t)},list:i}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:l,onTouchEnd:l}),s.a.createElement(ty.Spacer,null),s.a.createElement(T_.ItemsSeparator,null))}))),G_=mu("overlayTool","custom")(ju((function(t){var e=t.overlayTool,n=t.custom;return s.a.createElement(T_.Itemsbar,null,s.a.createElement(T_.CardContainer,null,e.entities.map((function(t){var r=e.locale.items[t.identifier]||t.name,i=n.getAdvancedItemCard();return s.a.createElement(i,{tool:P.OVERLAY,type:A.MEDIUM,onClick:function(){return e.selectOverlay(t.identifier)},key:t.identifier,image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"},isActive:t.identifier===e.identifier},s.a.createElement(T_.CardLabel,{withBackground:!0},r))}))))}))),Z_=mu("overlayTool")(ju((function(t){var e=t.overlayTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(V_,null),s.a.createElement(G_,null))}))),X_=o.c.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})(v_||(v_=O(["\n  ","\n"],["\n  ","\n"])),Tf.VisuallyHidden),q_=mu("stickerTool","custom")(ju((function(t){var e=t.stickerTool,n=t.custom,r=e.colorList,i=e.locale.controls,o=e.localeColor.colorPicker,a=n.getButton("toolControlBarPrimaryButton"),l=function(){e.toolSnapshot()},u=!e.isStickerSelected||!e.tintable&&e.isStickerSelected;return s.a.createElement(T_.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1,overflowAfterExpand:!0},s.a.createElement(ty.Input.Form,null,e.isCustomStickerEnabled?s.a.createElement(a,{tool:P.STICKER,ariaLabel:i.buttonUpload,onClick:function(){var t=document.getElementById("fileUpload");t&&(t.value=null,t.click())},fullWidth:!0,label:i.buttonUpload},s.a.createElement(X_,{onChange:function(t){var n=t.target.files;e.addFiles(n)}})):null,s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{isDisabled:!e.isStickerSelected,label:i.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:l,onTouchEnd:l}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Selection,{isDisabled:u,label:i.selectColor},s.a.createElement(Ob,{activeSprite:e.id,parentId:i.selectColor,activeColor:e.tintColor,colors:r,labelsColor:o,isDisabled:u,onChange:e.changeTintColor,onAddSnapshot:e.tintColorSnapshot}))),s.a.createElement(T_.ItemsSeparator,null))}))),Y_=mu("stickerTool","custom")(ju((function(t){var e=t.stickerTool,n=t.custom,r=e,i=r.categories,o=r.selectedCategoryIdentifier,a=r.config,l=r.entities,u=r.locale,c=n.getAdvancedCategoryCard(),f=n.getAdvancedItemCard(),p=function(t){var n=u.items[t.identifier]||t.name;return s.a.createElement(f,{key:t.identifier,tool:P.STICKER,type:A.SMALL,onClick:function(){return e.add(t.identifier)},image:t.thumbnailURI,label:n,style:{backgroundSize:"75%",animationDelay:(.3*t.delay||0)+"s"}},s.a.createElement(T_.CardLabel,{hidden:!0},n))};return a.flattenCategories?s.a.createElement(s.a.Fragment,null,l.map(p)):a.categoryHeaderType===I.CARD?s.a.createElement(s.a.Fragment,null,i.map((function(t){var n=o===t.identifier,r=u.categories[t.identifier]||t.name;return t.items?s.a.createElement("div",{key:t.identifier},s.a.createElement(c,{isActive:n,tool:P.STICKER,type:A.LARGE,onClick:function(){return e.toggleCategorySelection(t.identifier)},image:t.thumbnailURI,label:r,style:{animationDelay:(t.delay||0)+"s"}},s.a.createElement(T_.CardLabel,{withBackground:!0,caret:!0,isActive:n},r)),s.a.createElement(T_.Sidebar.ExpandableContainer,{show:n,key:t.identifier+"-items"},t.items.map(p))):null}))):a.categoryHeaderType===I.TEXT?s.a.createElement(s.a.Fragment,null,i.map((function(t,e){var n=u.categories[t.identifier]||t.name;return t.items?s.a.createElement(T_.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==i.length-1},t.items.map(p)):null}))):null}))),K_=mu("stickerTool")(ju((function(t){var e=t.stickerTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(q_,null),s.a.createElement(T_.Itemsbar,null,s.a.createElement(T_.CardContainer,null,s.a.createElement(Y_,null))))}))),Q_=o.c.div(b_||(b_=O(["\n  position: relative;\n"],["\n  position: relative;\n"]))),J_=o.c.div(__||(__=O(["\n  display: flex;\n  justify-content: space-between;\n"],["\n  display: flex;\n  justify-content: space-between;\n"]))),$_=Object(o.c)(ty.Input.NumericInput)(w_||(w_=O(["\n  max-width: 50%;\n  margin-right: 16px;\n"],["\n  max-width: 50%;\n  margin-right: 16px;\n"]))),tw=Object(o.c)(ty.Input.Selection)(x_||(x_=O(["\n  width: 50%;\n"],["\n  width: 50%;\n"]))),ew=mu("textTool","custom")(ju((function(t){var e=t.textTool,n=t.custom,r=e.locale.controls,i=e.localeColor.colorPicker,o=e,a=o.fontFamilies,l=o.alignment,u=o.isTextSelected,c=o.fontFamily,f=o.fontStyle,p=o.fontWeight,h=o.colorList,d=o.backgroundColorList,y=n.getButton("textAlignment"),g=n.getButton("toolControlBarPrimaryButton"),m=function(){e.toolSnapshot()},v=a.map((function(t){return{label:t.fontFamily+" "+Ys.getDisplayFontStyle(t),fontWeight:t.fontWeight||"",fontStyle:t.fontStyle||"",fontFamily:t.fontFamily||"",value:t.identifier}})),b=v.filter((function(t){return t.value===e.identifier}))[0];return s.a.createElement(T_.Controlsbar,{show:!0,overflowAfterExpand:!0,shouldAnimateHeight:!1},s.a.createElement(ty.Input.Form,null,s.a.createElement(g,{tool:P.TEXT,ariaLabel:r.buttonNew,onClick:function(){e.add()},fullWidth:!0,label:r.buttonNew}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Dropdown,{isDisabled:!u,style:{fontFamily:c,fontStyle:f,fontWeight:p},itemStyle:function(t){return{fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight}},label:r.dropdownFontFamily,list:v,onSelect:e.changeFont,selectedItem:b.label}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(J_,null,s.a.createElement($_,{value:e.fontSize.toFixed(0),onSubmit:function(t){var n=t?parseFloat(t):0;e.setFontSize(Math.max(10,Math.min(690,n)))},label:r.textFontSize,isDisabled:!u}),s.a.createElement(tw,{isDisabled:!u,inline:!0,label:r.selectAlignment},["left","center","right"].map((function(t){var n=bm[t];return s.a.createElement(y,{tool:t,isDisabled:!u,ariaLabel:"Align "+t,isActive:t===l,key:t,style:{padding:"1px 3px 2px"},icon:s.a.createElement(n,null),onClick:function(){return e.changeAlignment(t)}})})))),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(Q_,null,s.a.createElement(T_.ItemsSeparator,{full:!0})),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Selection,{isDisabled:!u,label:r.selectFontColor},s.a.createElement(Ob,{activeSprite:e.id,parentId:r.selectFontColor,activeColor:e.textColor,colors:h,labelsColor:i,isDisabled:!u,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Selection,{isDisabled:!u,label:r.selectBackgroundColor},s.a.createElement(Ob,{activeSprite:e.id,parentId:r.selectBackgroundColor,activeColor:e.backgroundColor,colors:d,labelsColor:i,isDisabled:!u,onChange:e.changeBackgroundColor,onAddSnapshot:e.backgroundColorSnapshot})),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(Q_,null,s.a.createElement(T_.ItemsSeparator,{full:!0})),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{isDisabled:!u,label:r.sliderLineSpacing,value:e.lineHeight,min:.5,max:3,onChange:e.changeLineHeight,onMouseUp:m,onTouchEnd:m,snap:1,divider:1,decimal:1}),s.a.createElement(ty.Spacer,{count:1})))}))),nw=mu("textTool")(ju((function(t){var e=t.textTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(ew,null),s.a.createElement(T_.Itemsbar,null))}))),rw=mu("textDesignTool","custom")(ju((function(t){var e=t.textDesignTool,n=t.custom,r=e.locale.controls,i=e.localeColor.colorPicker,o=e.colorList,a=e.isTextDesignSelected,l=n.getButton("toolControlBarPrimaryButton"),u=n.getButton("toolControlBarSecondaryButton");return s.a.createElement(T_.Controlsbar,{shouldAnimateOverflow:!1,shouldAnimateHeight:!1},s.a.createElement(ty.Input.Form,null,s.a.createElement(l,{tool:P.TEXT_DESIGN,ariaLabel:r.buttonNew,onClick:function(){e.add()},fullWidth:!0,label:r.buttonNew}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(u,{tool:P.TEXT_DESIGN,ariaLabel:r.buttonShuffle,isDisabled:!a,onClick:function(){e.changeSeed()},fullWidth:!0,label:r.buttonShuffle}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Selection,{isDisabled:!a,label:r.selectColor},s.a.createElement(Ob,{activeSprite:e.id,parentId:r.selectColor,activeColor:e.color,colors:o,labelsColor:i,isDisabled:!a,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot}))),s.a.createElement(T_.ItemsSeparator,null))}))),iw=mu("textDesignTool","custom")(ju((function(t){var e=t.textDesignTool,n=t.custom,r=e.entities,i=e.identifier;return s.a.createElement(T_.Itemsbar,null,s.a.createElement(T_.CardContainer,null,r.map((function(t){var r=n.getAdvancedItemCard();return s.a.createElement(r,{key:t.identifier,tool:P.TEXT_DESIGN,type:A.MEDIUM,onClick:function(){return n=t.identifier,void e.changeIdentifier(n);var n},image:t.thumbnailURI,label:t.name||"",style:{animationDelay:(t.delay||0)+"s",backgroundSize:"60%"},isDisabled:!e.isTextDesignSelected,isActive:i===t.identifier},s.a.createElement(T_.CardLabel,{hidden:!0},t.name))}))))}))),ow=mu("textDesignTool")(ju((function(t){var e=t.textDesignTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(rw,null),s.a.createElement(iw,null))}))),aw=mu("frameTool","custom")(ju((function(t){var e=t.frameTool,n=t.custom,r=e.entities,i=e.state?e.state.identifier:null;return s.a.createElement(T_.Itemsbar,null,s.a.createElement(T_.CardContainer,null,r.map((function(t){var r=e.locale.items[t.identifier]||t.name,o=n.getAdvancedItemCard();return s.a.createElement(o,{tool:P.FRAME,type:A.MEDIUM,onClick:function(){return e.selectFrame(t.identifier)},key:t.identifier,image:t.thumbnailURI,label:r,style:{backgroundSize:"75%",animationDelay:(t.delay||0)+"s"},isActive:t.identifier===i},s.a.createElement(T_.CardLabel,{hidden:!0},r))}))))}))),sw=mu("frameTool","custom")(ju((function(t){var e=t.frameTool,n=t.custom,r=e.locale.controls,i=e.localeColor.colorPicker,o=e,a=o.tintable,l=o.colorList,u=n.getButton("toolControlBarSecondaryButton"),c=function(t){e.toolSnapshot(t)};return s.a.createElement(T_.Controlsbar,{show:e.isOptionSelected,overflowAfterExpand:!0},s.a.createElement(u,{tool:P.FRAME,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderOpacity,value:e.opacity,min:0,max:1,onChange:e.changeOpacity,onMouseUp:function(){c(r.sliderOpacity)},onTouchEnd:function(){c(r.sliderOpacity)}}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{"aria-hidden":!e.isOptionSelected,label:r.sliderSize,value:e.size,min:e.minSize,max:e.maxSize,divider:1,onChange:e.changeWidth,onMouseUp:function(){c(r.sliderSize)},onTouchEnd:function(){c(r.sliderSize)}}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Selection,{isDisabled:!a,label:r.selectColor},s.a.createElement(Ob,{parentId:r.selectColor,activeColor:e.color,colors:l,labelsColor:i,isDisabled:!a,onChange:e.changeColor,onAddSnapshot:e.colorSnapshot})),s.a.createElement(T_.ItemsSeparator,null))}))),lw=mu("frameTool")(ju((function(t){var e=t.frameTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(sw,null),s.a.createElement(aw,null))}))),uw=mu("brushTool","custom")(ju((function(t){var e=t.brushTool,n=t.custom,r=e.colorList,i=e.locale.controls,o=e.localeColor.colorPicker,a=n.getButton("toolControlBarSecondaryButton");return s.a.createElement(s.a.Fragment,null,s.a.createElement(T_.Controlsbar,{show:e.isDirty},s.a.createElement(a,{tool:P.BRUSH,ariaLabel:i.buttonReset,onClick:e.reset,fullWidth:!0,label:i.buttonReset}),s.a.createElement(T_.ItemsSeparator,null)),s.a.createElement(T_.Controlsbar,{overflowAfterExpand:!0},s.a.createElement(ty.Input.Selection,{label:i.selectColor},s.a.createElement(Ob,{parentId:i.selectColor,activeColor:e.color,colors:r,labelsColor:o,onChange:e.changeColor})),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(ty.Input.Slider,{label:i.sliderSize,value:e.relativeSize,min:1,max:100,divider:1,onChange:e.changeRelativeSize}),s.a.createElement(ty.Spacer,{count:3}),s.a.createElement(ty.Input.Slider,{label:i.sliderHardness,value:e.hardness,min:0,max:1,onChange:e.changeHardness}),s.a.createElement(ty.Spacer,null)))}))),cw=mu("brushTool")(ju((function(t){var e=t.brushTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(uw,null),s.a.createElement(T_.Itemsbar,null))}))),fw=mu("transformTool","custom")(ju((function(t){var e=t.transformTool,n=t.custom,r=e.locale.controls,i=e,o=i.forceDimensions,a=i.lockResolution,l=i.localOutputHeight,u=i.localOutputWidth,c=n.getButton("toolControlBarSecondaryButton"),f=n.getCheckbox();return s.a.createElement(T_.Controlsbar,{shouldAnimateHeight:!1},s.a.createElement(ty.Input.Form,null,s.a.createElement(c,{tool:P.TRANSFORM,ariaLabel:r.buttonReset,onClick:function(){e.reset()},fullWidth:!0,label:r.buttonReset}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(f,{isDisabled:o,value:a,label:r.checkboxKeepResolution,checkMarkPosition:"right",onClick:e.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}}),s.a.createElement(ty.Spacer,{count:2}),s.a.createElement(bb,{isDisabled:o,showLabel:!0,valueHeight:l,valueWidth:u,onSubmitWidth:e.onPixelWidth,onSubmitHeight:e.onPixelHeight,label:r.inputCropSize,labelHeight:r.inputHeight,labelWidth:r.inputWidth}),s.a.createElement(ty.Spacer,{count:1})),s.a.createElement(T_.ItemsSeparator,null))}))),pw=mu("transformTool","custom","editor")(ju((function(t){var e=t.transformTool,n=t.custom,r=t.editor,i=e,o=i.categories,a=i.entities,l=i.identifier,u=i.config,f=i.locale,p=n.getAdvancedItemCard(),h=n.getAdvancedCategoryCard(),d=function(t){var n=r.configStore,i=n.theme,o=n.measurements,a=f.items[t.identifier]||t.name,u=t.thumbnailURI||"",h="80%";if(!e.checkIfTransformThumbnailExits(t.thumbnailURI)){var d=t.identifier.includes("imgly_transform_common"),y=km.crops[t.identifier]||km.crops.imgly_transform_common_custom,g=s.a.createElement(y,{width:o.advancedCard.medium.width-(d?42:0),height:o.advancedCard.medium.height-(d?42:0),main:i.transform.crops.main,highlight:i.transform.crops.highlight,shadow:i.transform.crops.shadow});u="'data:image/svg+xml,"+encodeURIComponent(Object(c.renderToStaticMarkup)(g))+"'",h=Pt()||Dt()?"auto":"unset"}return s.a.createElement(p,{key:t.identifier,tool:P.TRANSFORM,type:A.MEDIUM,onClick:function(){return e.changeIdentifier(t.identifier,!0)},image:u,label:a,style:{backgroundSize:h,animationDelay:(t.delay||0)+"s"},isActive:t.identifier===l},s.a.createElement(T_.CardLabel,null,a))};return u.flattenCategories?s.a.createElement(s.a.Fragment,null,a.map(d)):u.categoryHeaderType===I.CARD?s.a.createElement(s.a.Fragment,null,o.map((function(t){var n=r.configStore,i=n.theme,o=n.measurements,a=e.selectedCategoryIdentifier===t.identifier,l=f.categories[t.identifier]||t.name,u=t.thumbnailURI||"";if(!t.items)return null;if(!e.checkIfTransformThumbnailExits(t.thumbnailURI)){var p=km.categories[t.identifier]||km.crops.imgly_transform_common_custom,y=s.a.createElement(p,{width:o.advancedCard.large.width-42,height:o.advancedCard.large.height-42,main:i.transform.crops.main,highlight:i.transform.crops.highlight,shadow:i.transform.crops.shadow});u="'data:image/svg+xml,"+encodeURIComponent(Object(c.renderToStaticMarkup)(y))+"'"}return s.a.createElement("div",{key:t.identifier},s.a.createElement(h,{type:t.type,onClick:function(){return e.toggleCategorySelection(t.identifier)},key:t.identifier,image:u,style:{animationDelay:(t.delay||0)+"s"},label:t.name,tool:P.TRANSFORM},s.a.createElement(T_.CardLabel,{caret:!0,isActive:a},l)),s.a.createElement(T_.Sidebar.ExpandableContainer,{show:a},t.items.map(d)))}))):u.categoryHeaderType===I.TEXT?s.a.createElement(s.a.Fragment,null,o.map((function(t,e){var n=f.categories[t.identifier]||t.name;return t.items?s.a.createElement(T_.Sidebar.TextCategory,{key:t.identifier,name:n,isFirstCategory:0!==e,isLastCategory:e!==o.length-1},t.items.map(d)):null}))):null}))),hw=mu("transformTool")(ju((function(t){var e=t.transformTool,n=t.displayTitle;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(T_.Sidebar.Heading,null,e.locale.title),s.a.createElement(fw,null),s.a.createElement(T_.Itemsbar,null,s.a.createElement(T_.CardContainer,null,s.a.createElement(pw,null))))}))),dw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.render=function(){var t=this.props.active.tool,e=this.props.config.config.displayToolControlBarTitle;return s.a.createElement(T_.Sidebar.Index,null,s.a.createElement(ty.Switch.Index,{type:t},s.a.createElement(ty.Switch.Case,{value:P.LIBRARY},s.a.createElement(A_,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.FILTER},s.a.createElement(M_,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.FOCUS},s.a.createElement(B_,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.ADJUSTMENT},s.a.createElement(H_,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.OVERLAY},s.a.createElement(Z_,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.STICKER},s.a.createElement(K_,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.TEXT},s.a.createElement(nw,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.TEXT_DESIGN},s.a.createElement(ow,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.FRAME},s.a.createElement(lw,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.BRUSH},s.a.createElement(cw,{displayTitle:e})),s.a.createElement(ty.Switch.Case,{value:P.TRANSFORM},s.a.createElement(hw,{displayTitle:e}))))},m([mu("active","config"),ju],e)}(s.a.Component),yw=o.c.div(O_||(O_=O(["\n  position: absolute;\n  height: 100%;\n  width: ","px;\n  top: 0;\n  background: ",";\n  z-index: ",";\n"],["\n  position: absolute;\n  height: 100%;\n  width: ","px;\n  top: 0;\n  background: ",";\n  z-index: ",";\n"])),(function(t){return t.theme.measurements.advancedUIToolbar.width+t.theme.measurements.advancedUIToolControlBar.width}),(function(t){return t.theme.webcam.backdrop}),(function(t){return t.theme.measurements.zIndex.disable})),gw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e}return d(e,t),e.getDerivedStateFromError=function(t){return console.error(t),{hasError:!0}},e.prototype.render=function(){var t=this.props,e=t.config,n=t.active;return e.isOrderDefault?s.a.createElement(ty.Container,{"data-test-id":"EditorContainer"},n.isWebcam?s.a.createElement(yw,{style:{left:0}}):null,s.a.createElement(_b,null),s.a.createElement(D_,null),s.a.createElement(dw,null),s.a.createElement(dy,null,s.a.createElement(db,null),s.a.createElement($v,null))):s.a.createElement(ty.Container,{"data-test-id":"EditorContainer"},n.isWebcam?s.a.createElement(yw,{style:{right:0}}):null,s.a.createElement(_b,null),s.a.createElement(dy,null,s.a.createElement(db,null),s.a.createElement($v,null)),s.a.createElement(dw,null),s.a.createElement(D_,null))},e}(s.a.Component),mw=mu("config","active")(ju(gw)),vw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.componentDidMount=function(){this.editor=this.props.editor,this.storeProps=this.props.storeProps;var t=new wb(this.editor.configStore.config.custom.components,{advancedUICategoryCard:T_.Card,advancedUIItemCard:T_.Card,advancedUIToolbarItem:E_}),e={getAdvancedCategoryCard:t.getAdvancedCategoryCard,getAdvancedItemCard:t.getAdvancedItemCard,getAdvancedToolbarItem:t.getAdvancedToolbarItem,getDialog:t.getDialog,getButton:t.getButton,getColorItem:t.getColorItem,getCheckbox:t.getCheckbox};this.storeProps.custom=e,this.forceUpdate()},e.prototype.render=function(){return this.storeProps?s.a.createElement(Wu,y({},this.storeProps),s.a.createElement(o.a,{theme:y(y({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},s.a.createElement(mw,null))):null},e}(s.a.Component),bw=T_.CardLabel,_w=Object.freeze({__proto__:null,AdvancedUI:vw,ToolbarItem:E_,CardLabel:bw});document.onkeydown=function(t){13===t.keyCode&&document.activeElement&&document.activeElement.click()};var ww=function(t){function e(e,n){var r=t.call(this)||this;return r.dispose=function(){r.container&&(u.a.unmountComponentAtNode(r.container),r.removeAllListeners($.EXPORT),r.removeAllListeners($.HISTORY_CHANGE),r.removeAllListeners($.EDITOR_READY),r.removeAllListeners($.ERROR_IMAGE_LOADING))},r.serialize=function(t){return r.editor.serialize(t)},r.deserialize=function(t){return r.editor.deserialize(t)},r.export=function(t){return r.editor.export(t)},r.close=function(){return r.editor.close()},r.setImage=function(t){return r.editor.setImage(t)},r.container=n,r.editor=new ul(y({},e)),r.editor.configStore.events.on($.EXPORT,(function(t){r.emit($.EXPORT,t)})),r.editor.configStore.events.on($.CLOSE,(function(){r.dispose(),r.emit($.CLOSE)})),r.editor.configStore.events.on($.HISTORY_CHANGE,(function(){r.emit($.HISTORY_CHANGE)})),r}return d(e,t),e.prototype.hasChanges=function(){return this.editor.hasChanges()},e}(et),xw=function(){function t(){this.container=null}return t.prototype.init=function(t){var e=this;return new Promise((function(n,r){e.container="string"==typeof t.container?document.querySelector(t.container):t.container,e.container?(e.editorApi=new ww(t,e.container),u.a.render(s.a.createElement(Ow,{editor:e.editorApi.editor}),e.container),e.editorApi.editor.configStore.events.on($.EDITOR_READY,(function(){setTimeout((function(){e.editorApi.emit($.EDITOR_READY)}),0),n(e.editorApi)})),e.editorApi.editor.configStore.events.on($.ERROR_IMAGE_LOADING,(function(t){setTimeout((function(){e.editorApi.emit($.ERROR_IMAGE_LOADING,t)}),0),n(e.editorApi)}))):r(new Error("Provide a container"))}))},t}(),Ow=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIComponent=null,e}return d(e,t),e.prototype.componentDidMount=function(){var t=this;this.editor=this.props.editor,this.storeProps={filterTool:this.editor.filterToolStore,focusTool:this.editor.focusToolStore,adjustmentsTool:this.editor.adjustmentsToolStore,overlayTool:this.editor.overlayToolStore,frameTool:this.editor.frameToolStore,brushTool:this.editor.brushToolStore,transformTool:this.editor.transformToolStore,scale:this.editor.scale,sprite:this.editor.spriteStore,stickerTool:this.editor.spriteStore.stickerToolStore,textTool:this.editor.spriteStore.textToolStore,textDesignTool:this.editor.spriteStore.textDesignToolStore,library:this.editor.libraryStore,modal:this.editor.modalStore,snapping:this.editor.snappingStore,config:this.editor.configStore,active:this.editor.activeStore,canvas:this.editor.canvasStore,history:this.editor.historyStore,editor:this.editor},"basic"===this.editor.configStore.config.layout?n.e(1).then(n.bind(null,18)).then((function(e){var n=e.BasicUI;t.UIComponent=n,t.forceUpdate()})):Promise.resolve().then((function(){return _w})).then((function(e){var n=e.AdvancedUI;t.UIComponent=n,t.forceUpdate()}))},e.prototype.componentWillUnmount=function(){this.editor.engine.dispose(),this.editor.configStore.events.removeAllListeners($.EXPORT),this.editor.configStore.events.removeAllListeners($.CLOSE),this.editor.configStore.events.removeAllListeners($.HISTORY_CHANGE),this.editor.configStore.events.removeAllListeners($.EDITOR_READY),this.editor.configStore.events.removeAllListeners($.ERROR_IMAGE_LOADING)},e.prototype.render=function(){if(this.editor){var t=this.UIComponent;return this.storeProps&&t?s.a.createElement(t,{editor:this.editor,storeProps:this.storeProps}):null}return null},e}(s.a.Component),Sw={init:function(t){return(new xw).init(t)}};!function(t){function e(e){var r=t.call(this,e)||this;return r.ui=new et,r.serialize=function(t){return r.editor.serialize(t)},r.deserialize=function(t){return r.editor.deserialize(t)},r.export=function(t){return r.editor.export(t)},r.close=function(){return r.editor.close()},r.setImage=function(t){return r.editor.setImage(t)},r.editor=new ul(y({},e)),r.editor.configStore.events.on($.EXPORT,(function(t){r.ui.emit($.EXPORT,t)})),r.editor.configStore.events.on($.CLOSE,(function(){r.componentWillUnmount(),r.ui.emit($.CLOSE)})),r.editor.configStore.events.on($.HISTORY_CHANGE,(function(){r.ui.emit($.HISTORY_CHANGE)})),r.editor.configStore.events.on($.EDITOR_READY,(function(){r.ui.emit($.EDITOR_READY)})),r.editor.configStore.events.on($.ERROR_IMAGE_LOADING,(function(t){r.ui.emit($.ERROR_IMAGE_LOADING,t)})),r.storeProps={filterTool:r.editor.filterToolStore,focusTool:r.editor.focusToolStore,adjustmentsTool:r.editor.adjustmentsToolStore,overlayTool:r.editor.overlayToolStore,frameTool:r.editor.frameToolStore,brushTool:r.editor.brushToolStore,transformTool:r.editor.transformToolStore,scale:r.editor.scale,sprite:r.editor.spriteStore,stickerTool:r.editor.spriteStore.stickerToolStore,textTool:r.editor.spriteStore.textToolStore,textDesignTool:r.editor.spriteStore.textDesignToolStore,library:r.editor.libraryStore,modal:r.editor.modalStore,snapping:r.editor.snappingStore,config:r.editor.configStore,active:r.editor.activeStore,canvas:r.editor.canvasStore,history:r.editor.historyStore,editor:r.editor},"basic"===r.editor.configStore.config.layout?n.e(1).then(n.bind(null,18)).then((function(t){var e=t.BasicUI;r.UIComponent=e,r.forceUpdate()})):Promise.resolve().then((function(){return _w})).then((function(t){var e=t.AdvancedUI;r.UIComponent=e,r.forceUpdate()})),r}d(e,t),e.prototype.componentWillUnmount=function(){this.ui.removeAllListeners($.EXPORT),this.ui.removeAllListeners($.HISTORY_CHANGE),this.ui.removeAllListeners($.EDITOR_READY),this.ui.removeAllListeners($.ERROR_IMAGE_LOADING)},e.prototype.hasChanges=function(){return this.editor.hasChanges()},e.prototype.render=function(){if(this.editor){var t=this.UIComponent;return this.storeProps&&t?s.a.createElement(t,{editor:this.editor,storeProps:this.storeProps}):null}return null}}(s.a.Component);Vr({isolateGlobalState:!0});var kw=ty.Input;ty.ColorItem,ty.ColorItemBase,ty.ColorItemBackground,ty.ColorItemTiledBackground,ty.ColorItemActiveOverlay,ty.Dialog,ty.DialogBase,ty.DialogContainer,ty.DialogBackdrop,ty.DialogHeader,ty.DialogBody,ty.DialogFooter,ty.DialogSpinner,kw.Label,kw.Checkbox,kw.CheckboxBase,kw.CheckboxInput,kw.CheckboxCheckMark}).call(this,n(7),n(5),n(12).setImmediate)},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}}(),t.exports=n(21)},function(t,e,n){"use strict";t.exports=n(24)},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,u=[],c=!1,f=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var t=s(p);c=!0;for(var e=u.length;e;){for(l=u,u=[];++f<e;)l&&l[f].run();f=-1,e=u.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,l=a(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(l[s[f]]=n[s[f]])}}return l}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=function t(e){"use strict";var n=/^\0+/g,r=/[\0\r\f]/g,i=/: */g,o=/zoo|gra/,a=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,l=/ +\s*(?![^(]*[)])/g,u=/ *[\0] */g,c=/,\r+?/g,f=/([\t\r\n ])*\f?&/g,p=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,h=/\W+/g,d=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,g=/:(read-only)/g,m=/\s+(?=[{\];=:>])/g,v=/([[}=:>])\s+/g,b=/(\{[^{]+?);(?=\})/g,_=/\s{2,}/g,w=/([^\(])(:+) */g,x=/[svh]\w+-[tblr]{2}/,O=/\(\s*(.*)\s*\)/g,S=/([\s\S]*?);/g,k=/-self|flex-/g,T=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,R="-webkit-",D="-moz-",P="-ms-",I=59,A=125,F=123,j=40,M=41,z=10,L=13,B=32,N=45,U=42,W=44,H=58,V=47,G=1,Z=1,X=0,q=1,Y=1,K=1,Q=0,J=0,$=0,tt=[],et=[],nt=0,rt=null,it=0,ot=1,at="",st="",lt="";function ut(t,e,i,o,a){for(var s,l,c=0,f=0,p=0,h=0,m=0,v=0,b=0,_=0,x=0,S=0,k=0,T=0,E=0,C=0,D=0,P=0,Q=0,et=0,rt=0,ft=i.length,mt=ft-1,vt="",bt="",_t="",wt="",xt="",Ot="";D<ft;){if(b=i.charCodeAt(D),D===mt&&f+h+p+c!==0&&(0!==f&&(b=f===V?z:V),h=p=c=0,ft++,mt++),f+h+p+c===0){if(D===mt&&(P>0&&(bt=bt.replace(r,"")),bt.trim().length>0)){switch(b){case B:case 9:case I:case L:case z:break;default:bt+=i.charAt(D)}b=I}if(1===Q)switch(b){case F:case A:case I:case 34:case 39:case j:case M:case W:Q=0;case 9:case L:case z:case B:break;default:for(Q=0,rt=D,m=b,D--,b=I;rt<ft;)switch(i.charCodeAt(rt++)){case z:case L:case I:++D,b=m,rt=ft;break;case H:P>0&&(++D,b=m);case F:rt=ft}}switch(b){case F:for(m=(bt=bt.trim()).charCodeAt(0),k=1,rt=++D;D<ft;){switch(b=i.charCodeAt(D)){case F:k++;break;case A:k--;break;case V:switch(v=i.charCodeAt(D+1)){case U:case V:D=gt(v,D,mt,i)}break;case 91:b++;case j:b++;case 34:case 39:for(;D++<mt&&i.charCodeAt(D)!==b;);}if(0===k)break;D++}switch(_t=i.substring(rt,D),0===m&&(m=(bt=bt.replace(n,"").trim()).charCodeAt(0)),m){case 64:switch(P>0&&(bt=bt.replace(r,"")),v=bt.charCodeAt(1)){case 100:case 109:case 115:case N:s=e;break;default:s=tt}if(rt=(_t=ut(e,s,_t,v,a+1)).length,$>0&&0===rt&&(rt=bt.length),nt>0&&(l=yt(3,_t,s=ct(tt,bt,et),e,Z,G,rt,v,a,o),bt=s.join(""),void 0!==l&&0===(rt=(_t=l.trim()).length)&&(v=0,_t="")),rt>0)switch(v){case 115:bt=bt.replace(O,dt);case 100:case 109:case N:_t=bt+"{"+_t+"}";break;case 107:_t=(bt=bt.replace(d,"$1 $2"+(ot>0?at:"")))+"{"+_t+"}",_t=1===Y||2===Y&&ht("@"+_t,3)?"@"+R+_t+"@"+_t:"@"+_t;break;default:_t=bt+_t,112===o&&(wt+=_t,_t="")}else _t="";break;default:_t=ut(e,ct(e,bt,et),_t,o,a+1)}xt+=_t,T=0,Q=0,C=0,P=0,et=0,E=0,bt="",_t="",b=i.charCodeAt(++D);break;case A:case I:if((rt=(bt=(P>0?bt.replace(r,""):bt).trim()).length)>1)switch(0===C&&((m=bt.charCodeAt(0))===N||m>96&&m<123)&&(rt=(bt=bt.replace(" ",":")).length),nt>0&&void 0!==(l=yt(1,bt,e,t,Z,G,wt.length,o,a,o))&&0===(rt=(bt=l.trim()).length)&&(bt="\0\0"),m=bt.charCodeAt(0),v=bt.charCodeAt(1),m){case 0:break;case 64:if(105===v||99===v){Ot+=bt+i.charAt(D);break}default:if(bt.charCodeAt(rt-1)===H)break;wt+=pt(bt,m,v,bt.charCodeAt(2))}T=0,Q=0,C=0,P=0,et=0,bt="",b=i.charCodeAt(++D)}}switch(b){case L:case z:if(f+h+p+c+J===0)switch(S){case M:case 39:case 34:case 64:case 126:case 62:case U:case 43:case V:case N:case H:case W:case I:case F:case A:break;default:C>0&&(Q=1)}f===V?f=0:q+T===0&&107!==o&&bt.length>0&&(P=1,bt+="\0"),nt*it>0&&yt(0,bt,e,t,Z,G,wt.length,o,a,o),G=1,Z++;break;case I:case A:if(f+h+p+c===0){G++;break}default:switch(G++,vt=i.charAt(D),b){case 9:case B:if(h+c+f===0)switch(_){case W:case H:case 9:case B:vt="";break;default:b!==B&&(vt=" ")}break;case 0:vt="\\0";break;case 12:vt="\\f";break;case 11:vt="\\v";break;case 38:h+f+c===0&&q>0&&(et=1,P=1,vt="\f"+vt);break;case 108:if(h+f+c+X===0&&C>0)switch(D-C){case 2:112===_&&i.charCodeAt(D-3)===H&&(X=_);case 8:111===x&&(X=x)}break;case H:h+f+c===0&&(C=D);break;case W:f+p+h+c===0&&(P=1,vt+="\r");break;case 34:case 39:0===f&&(h=h===b?0:0===h?b:h);break;case 91:h+f+p===0&&c++;break;case 93:h+f+p===0&&c--;break;case M:h+f+c===0&&p--;break;case j:if(h+f+c===0){if(0===T)switch(2*_+3*x){case 533:break;default:k=0,T=1}p++}break;case 64:f+p+h+c+C+E===0&&(E=1);break;case U:case V:if(h+c+p>0)break;switch(f){case 0:switch(2*b+3*i.charCodeAt(D+1)){case 235:f=V;break;case 220:rt=D,f=U}break;case U:b===V&&_===U&&rt+2!==D&&(33===i.charCodeAt(rt+2)&&(wt+=i.substring(rt,D+1)),vt="",f=0)}}if(0===f){if(q+h+c+E===0&&107!==o&&b!==I)switch(b){case W:case 126:case 62:case 43:case M:case j:if(0===T){switch(_){case 9:case B:case z:case L:vt+="\0";break;default:vt="\0"+vt+(b===W?"":"\0")}P=1}else switch(b){case j:C+7===D&&108===_&&(C=0),T=++k;break;case M:0==(T=--k)&&(P=1,vt+="\0")}break;case 9:case B:switch(_){case 0:case F:case A:case I:case W:case 12:case 9:case B:case z:case L:break;default:0===T&&(P=1,vt+="\0")}}bt+=vt,b!==B&&9!==b&&(S=b)}}x=_,_=b,D++}if(rt=wt.length,$>0&&0===rt&&0===xt.length&&0===e[0].length==0&&(109!==o||1===e.length&&(q>0?st:lt)===e[0])&&(rt=e.join(",").length+2),rt>0){if(s=0===q&&107!==o?function(t){for(var e,n,i=0,o=t.length,a=Array(o);i<o;++i){for(var s=t[i].split(u),l="",c=0,f=0,p=0,h=0,d=s.length;c<d;++c)if(!(0===(f=(n=s[c]).length)&&d>1)){if(p=l.charCodeAt(l.length-1),h=n.charCodeAt(0),e="",0!==c)switch(p){case U:case 126:case 62:case 43:case B:case j:break;default:e=" "}switch(h){case 38:n=e+st;case 126:case 62:case 43:case B:case M:case j:break;case 91:n=e+n+st;break;case H:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(K>0){n=e+n.substring(8,f-1);break}default:(c<1||s[c-1].length<1)&&(n=e+st+n)}break;case W:e="";default:n=f>1&&n.indexOf(":")>0?e+n.replace(w,"$1"+st+"$2"):e+n+st}l+=n}a[i]=l.replace(r,"").trim()}return a}(e):e,nt>0&&void 0!==(l=yt(2,wt,s,t,Z,G,rt,o,a,o))&&0===(wt=l).length)return Ot+wt+xt;if(wt=s.join(",")+"{"+wt+"}",Y*X!=0){switch(2!==Y||ht(wt,2)||(X=0),X){case 111:wt=wt.replace(g,":-moz-$1")+wt;break;case 112:wt=wt.replace(y,"::"+R+"input-$1")+wt.replace(y,"::-moz-$1")+wt.replace(y,":-ms-input-$1")+wt}X=0}}return Ot+wt+xt}function ct(t,e,n){var r=e.trim().split(c),i=r,o=r.length,a=t.length;switch(a){case 0:case 1:for(var s=0,l=0===a?"":t[0]+" ";s<o;++s)i[s]=ft(l,i[s],n,a).trim();break;default:s=0;var u=0;for(i=[];s<o;++s)for(var f=0;f<a;++f)i[u++]=ft(t[f]+" ",r[s],n,a).trim()}return i}function ft(t,e,n,r){var i=e,o=i.charCodeAt(0);switch(o<33&&(o=(i=i.trim()).charCodeAt(0)),o){case 38:switch(q+r){case 0:case 1:if(0===t.trim().length)break;default:return i.replace(f,"$1"+t.trim())}break;case H:switch(i.charCodeAt(1)){case 103:if(K>0&&q>0)return i.replace(p,"$1").replace(f,"$1"+lt);break;default:return t.trim()+i.replace(f,"$1"+t.trim())}default:if(n*q>0&&i.indexOf("\f")>0)return i.replace(f,(t.charCodeAt(0)===H?"":"$1")+t.trim())}return t+i}function pt(t,e,n,r){var u,c=0,f=t+";",p=2*e+3*n+4*r;if(944===p)return function(t){var e=t.length,n=t.indexOf(":",9)+1,r=t.substring(0,n).trim(),i=t.substring(n,e-1).trim();switch(t.charCodeAt(9)*ot){case 0:break;case N:if(110!==t.charCodeAt(10))break;default:var o=i.split((i="",s)),a=0;for(n=0,e=o.length;a<e;n=0,++a){for(var u=o[a],c=u.split(l);u=c[n];){var f=u.charCodeAt(0);if(1===ot&&(f>64&&f<90||f>96&&f<123||95===f||f===N&&u.charCodeAt(1)!==N))switch(isNaN(parseFloat(u))+(-1!==u.indexOf("("))){case 1:switch(u){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:u+=at}}c[n++]=u}i+=(0===a?"":",")+c.join(" ")}}return i=r+i+";",1===Y||2===Y&&ht(i,1)?R+i+i:i}(f);if(0===Y||2===Y&&!ht(f,1))return f;switch(p){case 1015:return 97===f.charCodeAt(10)?R+f+f:f;case 951:return 116===f.charCodeAt(3)?R+f+f:f;case 963:return 110===f.charCodeAt(5)?R+f+f:f;case 1009:if(100!==f.charCodeAt(4))break;case 969:case 942:return R+f+f;case 978:return R+f+D+f+f;case 1019:case 983:return R+f+D+f+P+f+f;case 883:return f.charCodeAt(8)===N?R+f+f:f.indexOf("image-set(",11)>0?f.replace(C,"$1"+R+"$2")+f:f;case 932:if(f.charCodeAt(4)===N)switch(f.charCodeAt(5)){case 103:return R+"box-"+f.replace("-grow","")+R+f+P+f.replace("grow","positive")+f;case 115:return R+f+P+f.replace("shrink","negative")+f;case 98:return R+f+P+f.replace("basis","preferred-size")+f}return R+f+P+f+f;case 964:return R+f+P+"flex-"+f+f;case 1023:if(99!==f.charCodeAt(8))break;return u=f.substring(f.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),R+"box-pack"+u+R+f+P+"flex-pack"+u+f;case 1005:return o.test(f)?f.replace(i,":"+R)+f.replace(i,":"+D)+f:f;case 1e3:switch(c=(u=f.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(c)){case 226:u=f.replace(x,"tb");break;case 232:u=f.replace(x,"tb-rl");break;case 220:u=f.replace(x,"lr");break;default:return f}return R+f+P+u+f;case 1017:if(-1===f.indexOf("sticky",9))return f;case 975:switch(c=(f=t).length-10,p=(u=(33===f.charCodeAt(c)?f.substring(0,c):f).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(u.charCodeAt(8)<111)break;case 115:f=f.replace(u,R+u)+";"+f;break;case 207:case 102:f=f.replace(u,R+(p>102?"inline-":"")+"box")+";"+f.replace(u,R+u)+";"+f.replace(u,P+u+"box")+";"+f}return f+";";case 938:if(f.charCodeAt(5)===N)switch(f.charCodeAt(6)){case 105:return u=f.replace("-items",""),R+f+R+"box-"+u+P+"flex-"+u+f;case 115:return R+f+P+"flex-item-"+f.replace(k,"")+f;default:return R+f+P+"flex-line-pack"+f.replace("align-content","").replace(k,"")+f}break;case 973:case 989:if(f.charCodeAt(3)!==N||122===f.charCodeAt(4))break;case 931:case 953:if(!0===E.test(t))return 115===(u=t.substring(t.indexOf(":")+1)).charCodeAt(0)?pt(t.replace("stretch","fill-available"),e,n,r).replace(":fill-available",":stretch"):f.replace(u,R+u)+f.replace(u,D+u.replace("fill-",""))+f;break;case 962:if(f=R+f+(102===f.charCodeAt(5)?P+f:"")+f,n+r===211&&105===f.charCodeAt(13)&&f.indexOf("transform",10)>0)return f.substring(0,f.indexOf(";",27)+1).replace(a,"$1"+R+"$2")+f}return f}function ht(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10),i=t.substring(n+1,t.length-1);return rt(2!==e?r:r.replace(T,"$1"),i,e)}function dt(t,e){var n=pt(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(S," or ($1)").substring(4):"("+e+")"}function yt(t,e,n,r,i,o,a,s,l,u){for(var c,f=0,p=e;f<nt;++f)switch(c=et[f].call(vt,t,p,n,r,i,o,a,s,l,u)){case void 0:case!1:case!0:case null:break;default:p=c}if(p!==e)return p}function gt(t,e,n,r){for(var i=e+1;i<n;++i)switch(r.charCodeAt(i)){case V:if(t===U&&r.charCodeAt(i-1)===U&&e+2!==i)return i+1;break;case z:if(t===V)return i+1}return i}function mt(t){for(var e in t){var n=t[e];switch(e){case"keyframe":ot=0|n;break;case"global":K=0|n;break;case"cascade":q=0|n;break;case"compress":Q=0|n;break;case"semicolon":J=0|n;break;case"preserve":$=0|n;break;case"prefix":rt=null,n?"function"!=typeof n?Y=1:(Y=2,rt=n):Y=0}}return mt}function vt(e,n){if(void 0!==this&&this.constructor===vt)return t(e);var i=e,o=i.charCodeAt(0);o<33&&(o=(i=i.trim()).charCodeAt(0)),ot>0&&(at=i.replace(h,91===o?"":"-")),o=1,1===q?lt=i:st=i;var a,s=[lt];nt>0&&void 0!==(a=yt(-1,n,s,s,Z,G,0,0,0,0))&&"string"==typeof a&&(n=a);var l=ut(tt,s,n,0,0);return nt>0&&void 0!==(a=yt(-2,l,s,s,Z,G,l.length,0,0,0))&&"string"!=typeof(l=a)&&(o=0),at="",lt="",st="",X=0,Z=1,G=1,Q*o==0?l:l.replace(r,"").replace(m,"").replace(v,"$1").replace(b,"$1").replace(_," ")}return vt.use=function t(e){switch(e){case void 0:case null:nt=et.length=0;break;default:if("function"==typeof e)et[nt++]=e;else if("object"==typeof e)for(var n=0,r=e.length;n<r;++n)t(e[n]);else it=0|!!e}return t},vt.set=mt,void 0!==e&&mt(e),vt}(null)},function(t,e,n){"use strict";t.exports=n(25)},function(t,e,n){"use strict";function r(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}e.a=function(t,e){var n;void 0===e&&(e=r);var i,o=[],a=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return a&&n===this&&e(r,o)||(i=t.apply(this,r),a=!0,n=this,o=r),i}}},function(t,e,n){"use strict";(function(t,r){var i=n(2);n.d(e,"a",(function(){return i.e})),n.d(e,"b",(function(){return i.K})),n.d(e,"c",(function(){return i.b}));n(0),n(3),n(4);function o(){}function a(){a.init.call(this)}function s(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,n){if(e)t.call(n);else for(var r=t.length,i=g(t,r),o=0;o<r;++o)i[o].call(n)}function u(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=g(t,i),a=0;a<i;++a)o[a].call(n,r)}function c(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=g(t,o),s=0;s<o;++s)a[s].call(n,r,i)}function f(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,s=g(t,a),l=0;l<a;++l)s[l].call(n,r,i,o)}function p(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=g(t,i),a=0;a<i;++a)o[a].apply(n,r)}function h(t,e,n,r){var i,a,l;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=t._events)?(a.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),a=t._events),l=a[e]):(a=t._events=new o,t._eventsCount=0),l){if("function"==typeof l?l=a[e]=r?[n,l]:[l,n]:r?l.unshift(n):l.push(n),!l.warned&&(i=s(t))&&i>0&&l.length>i){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,function(t){"function"==typeof console.warn?console.warn(t):console.log(t)}(u)}}else l=a[e]=n,++t._eventsCount;return t}function d(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function y(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function m(){var t;a.call(this),this.__emitError=(t=this,function(e){t.emit("error",e)})}function v(){return new m}o.prototype=Object.create(null),a.EventEmitter=a,a.usingDomains=!1,a.prototype.domain=void 0,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.init=function(){this.domain=null,a.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new o,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return s(this)},a.prototype.emit=function(t){var e,n,r,i,o,a,s,h="error"===t;if(a=this._events)h=h&&null==a.error;else if(!h)return!1;if(s=this.domain,h){if(e=arguments[1],!s){if(e instanceof Error)throw e;var d=new Error('Uncaught, unspecified "error" event. ('+e+")");throw d.context=e,d}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var y="function"==typeof n;switch(r=arguments.length){case 1:l(n,y,this);break;case 2:u(n,y,this,arguments[1]);break;case 3:c(n,y,this,arguments[1],arguments[2]);break;case 4:f(n,y,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];p(n,y,this,i)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,d(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,r,i,a,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new o:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,a=n.length;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){s=n[a].listener,i=a;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new o,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new o,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new o:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new o,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},a.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},a.prototype.listenerCount=y,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},("function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t})(m,a),m.prototype.add=function(t){t.on("error",this.__emitError)},m.prototype.remove=function(t){t.removeListener("error",this.__emitError)},m.prototype.bind=function(t){var e=this.__emitError;return function(){var n=Array.prototype.slice.call(arguments);try{t.apply(null,n)}catch(t){e(t)}}},m.prototype.intercept=function(t){var e=this.__emitError;return function(n){if(n)e(n);else{var r=Array.prototype.slice.call(arguments,1);try{t.apply(null,r)}catch(n){e(n)}}}},m.prototype.run=function(t){var e=this.__emitError;try{t()}catch(t){e(t)}return this},m.prototype.dispose=function(){return this.removeAllListeners(),this},m.prototype.enter=m.prototype.exit=function(){return this};var b,_={Domain:m,createDomain:v,create:v},w="function"==typeof t,x=O;function O(t){S.length||(C(),k=!0),S[S.length]=t}var S=[],k=!1,T=0;function E(){for(;T<S.length;){var t=T;if(T+=1,S[t].call(),T>1024){for(var e=0,n=S.length-T;e<n;e++)S[e]=S[e+T];S.length-=T,T=0}}S.length=0,T=0,k=!1}function C(){var e=r.domain;e&&(b||(b=_),b.active=r.domain=null),k&&w?t(E):r.nextTick(E),e&&(b.active=r.domain=e)}function R(){}O.requestFlush=C;var D=null,P={},I=A;function A(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,t!==R&&B(t,this)}function F(t,e){for(;3===t._V;)t=t._W;if(A._Y&&A._Y(t),0===t._V)return 0===t._U?(t._U=1,void(t._X=e)):1===t._U?(t._U=2,void(t._X=[t._X,e])):void t._X.push(e);!function(t,e){x((function(){var n=1===t._V?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return D=t,P}}(n,t._W);r===P?M(e.promise,D):j(e.promise,r)}else 1===t._V?j(e.promise,t._W):M(e.promise,t._W)}))}(t,e)}function j(t,e){if(e===t)return M(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return D=t,P}}(e);if(n===P)return M(t,D);if(n===t.then&&e instanceof A)return t._V=3,t._W=e,void z(t);if("function"==typeof n)return void B(n.bind(e),t)}t._V=1,t._W=e,z(t)}function M(t,e){t._V=2,t._W=e,A._Z&&A._Z(t,e),z(t)}function z(t){if(1===t._U&&(F(t,t._X),t._X=null),2===t._U){for(var e=0;e<t._X.length;e++)F(t,t._X[e]);t._X=null}}function L(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function B(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return D=t,P}}(t,(function(t){n||(n=!0,j(e,t))}),(function(t){n||(n=!0,M(e,t))}));n||r!==P||(n=!0,M(e,D))}A._Y=null,A._Z=null,A._0=R,A.prototype.then=function(t,e){if(this.constructor!==A)return function(t,e,n){return new t.constructor((function(r,i){var o=new A(R);o.then(r,i),F(t,new L(e,n,o))}))}(this,t,e);var n=new A(R);return F(this,new L(t,e,n)),n};var N=[ReferenceError,TypeError,RangeError],U=!1;function W(){U=!1,I._Y=null,I._Z=null}function H(t,e){return e.some((function(e){return t instanceof e}))}var V=function(t){t=t||{},U&&W(),U=!0;var e=0,n=0,r={};function i(e){(t.allRejections||H(r[e].error,t.whitelist||N))&&(r[e].displayId=n++,t.onUnhandled?(r[e].logged=!0,t.onUnhandled(r[e].displayId,r[e].error)):(r[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach((function(t){console.warn("  "+t)}))}(r[e].displayId,r[e].error)))}I._Y=function(e){2===e._V&&r[e._1]&&(r[e._1].logged?function(e){r[e].logged&&(t.onHandled?t.onHandled(r[e].displayId,r[e].error):r[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+r[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+r[e].displayId+".")))}(e._1):clearTimeout(r[e._1].timeout),delete r[e._1])},I._Z=function(t,n){0===t._U&&(t._1=e++,r[t._1]={displayId:null,error:n,timeout:setTimeout(i.bind(null,t._1),H(n,N)?100:2e3),logged:!1})}},G=I,Z=J(!0),X=J(!1),q=J(null),Y=J(void 0),K=J(0),Q=J("");function J(t){var e=new I(I._0);return e._V=1,e._W=t,e}I.resolve=function(t){if(t instanceof I)return t;if(null===t)return q;if(void 0===t)return Y;if(!0===t)return Z;if(!1===t)return X;if(0===t)return K;if(""===t)return Q;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new I(e.bind(t))}catch(t){return new I((function(e,n){n(t)}))}return J(t)};var $=function(t){return"function"==typeof Array.from?($=Array.from,Array.from(t)):($=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(t))};I.all=function(t){var e=$(t);return new I((function(t,n){if(0===e.length)return t([]);var r=e.length;function i(o,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof I&&a.then===I.prototype.then){for(;3===a._V;)a=a._W;return 1===a._V?i(o,a._W):(2===a._V&&n(a._W),void a.then((function(t){i(o,t)}),n))}var s=a.then;if("function"==typeof s)return void new I(s.bind(a)).then((function(t){i(o,t)}),n)}e[o]=a,0==--r&&t(e)}for(var o=0;o<e.length;o++)i(o,e[o])}))},I.reject=function(t){return new I((function(e,n){n(t)}))},I.race=function(t){return new I((function(e,n){$(t).forEach((function(t){I.resolve(t).then(e,n)}))}))},I.prototype.catch=function(t){return this.then(null,t)};var tt="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==tt&&tt,et="URLSearchParams"in tt,nt="Symbol"in tt&&"iterator"in Symbol,rt="FileReader"in tt&&"Blob"in tt&&function(){try{return new Blob,!0}catch(t){return!1}}(),it="FormData"in tt,ot="ArrayBuffer"in tt;if(ot)var at=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],st=ArrayBuffer.isView||function(t){return t&&at.indexOf(Object.prototype.toString.call(t))>-1};function lt(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function ut(t){return"string"!=typeof t&&(t=String(t)),t}function ct(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return nt&&(e[Symbol.iterator]=function(){return e}),e}function ft(t){this.map={},t instanceof ft?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function pt(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function ht(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function dt(t){var e=new FileReader,n=ht(e);return e.readAsArrayBuffer(t),n}function yt(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function gt(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:rt&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:it&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:et&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():ot&&rt&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=yt(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ot&&(ArrayBuffer.prototype.isPrototypeOf(t)||st(t))?this._bodyArrayBuffer=yt(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):et&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},rt&&(this.blob=function(){var t=pt(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?pt(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(dt)}),this.text=function(){var t=pt(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=ht(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},it&&(this.formData=function(){return this.text().then(bt)}),this.json=function(){return this.text().then(JSON.parse)},this}ft.prototype.append=function(t,e){t=lt(t),e=ut(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},ft.prototype.delete=function(t){delete this.map[lt(t)]},ft.prototype.get=function(t){return t=lt(t),this.has(t)?this.map[t]:null},ft.prototype.has=function(t){return this.map.hasOwnProperty(lt(t))},ft.prototype.set=function(t,e){this.map[lt(t)]=ut(e)},ft.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},ft.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),ct(t)},ft.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),ct(t)},ft.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),ct(t)},nt&&(ft.prototype[Symbol.iterator]=ft.prototype.entries);var mt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function vt(t,e){if(!(this instanceof vt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(e=e||{}).body;if(t instanceof vt){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new ft(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new ft(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),mt.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function bt(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function _t(t,e){if(!(this instanceof _t))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new ft(e.headers),this.url=e.url||"",this._initBody(t)}vt.prototype.clone=function(){return new vt(this,{body:this._bodyInit})},gt.call(vt.prototype),gt.call(_t.prototype),_t.prototype.clone=function(){return new _t(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ft(this.headers),url:this.url})},_t.error=function(){var t=new _t(null,{status:0,statusText:""});return t.type="error",t};var wt=[301,302,303,307,308];_t.redirect=function(t,e){if(-1===wt.indexOf(e))throw new RangeError("Invalid status code");return new _t(null,{status:e,headers:{location:t}})};var xt=tt.DOMException;try{new xt}catch(us){(xt=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),xt.prototype.constructor=xt}function Ot(t,e){return new Promise((function(n,r){var i=new vt(t,e);if(i.signal&&i.signal.aborted)return r(new xt("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}o.onload=function(){var t,e,r={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new ft,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;setTimeout((function(){n(new _t(i,r))}),0)},o.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){r(new xt("Aborted","AbortError"))}),0)},o.open(i.method,function(t){try{return""===t&&tt.location.href?tt.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&(rt?o.responseType="blob":ot&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof ft?i.headers.forEach((function(t,e){o.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){o.setRequestHeader(t,ut(e.headers[t]))})),i.signal&&(i.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",a)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}Ot.polyfill=!0,tt.fetch||(tt.fetch=Ot,tt.Headers=ft,tt.Request=vt,tt.Response=_t
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/);var St=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable;function Et(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var Ct=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=Et(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))kt.call(n,a)&&(i[a]=n[a]);if(St){r=St(n);for(var s=0;s<r.length;s++)Tt.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},Rt=function(t){return t&&t.Math==Math&&t},Dt=Rt("object"==typeof globalThis&&globalThis)||Rt("object"==typeof window&&window)||Rt("object"==typeof self&&self)||Rt("object"==typeof i.ab&&i.ab)||Function("return this")(),Pt=function(t){try{return!!t()}catch(t){return!0}},It=!Pt((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),At={}.propertyIsEnumerable,Ft=Object.getOwnPropertyDescriptor,jt={f:Ft&&!At.call({1:2},1)?function(t){var e=Ft(this,t);return!!e&&e.enumerable}:At},Mt=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},zt={}.toString,Lt=function(t){return zt.call(t).slice(8,-1)},Bt="".split,Nt=Pt((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==Lt(t)?Bt.call(t,""):Object(t)}:Object,Ut=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},Wt=function(t){return Nt(Ut(t))},Ht=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Vt=function(t,e){if(!Ht(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Ht(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Ht(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Ht(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Gt={}.hasOwnProperty,Zt=function(t,e){return Gt.call(t,e)},Xt=Dt.document,qt=Ht(Xt)&&Ht(Xt.createElement),Yt=function(t){return qt?Xt.createElement(t):{}},Kt=!It&&!Pt((function(){return 7!=Object.defineProperty(Yt("div"),"a",{get:function(){return 7}}).a})),Qt=Object.getOwnPropertyDescriptor,Jt={f:It?Qt:function(t,e){if(t=Wt(t),e=Vt(e,!0),Kt)try{return Qt(t,e)}catch(t){}if(Zt(t,e))return Mt(!jt.f.call(t,e),t[e])}},$t=function(t){if(!Ht(t))throw TypeError(String(t)+" is not an object");return t},te=Object.defineProperty,ee={f:It?te:function(t,e,n){if($t(t),e=Vt(e,!0),$t(n),Kt)try{return te(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ne=It?function(t,e,n){return ee.f(t,e,Mt(1,n))}:function(t,e,n){return t[e]=n,t},re=function(t,e){try{ne(Dt,t,e)}catch(n){Dt[t]=e}return e},ie=Dt["__core-js_shared__"]||re("__core-js_shared__",{}),oe=Function.toString;"function"!=typeof ie.inspectSource&&(ie.inspectSource=function(t){return oe.call(t)});var ae,se,le,ue=ie.inspectSource,ce=Dt.WeakMap,fe="function"==typeof ce&&/native code/.test(ue(ce)),pe=Object(i.g)((function(t){(t.exports=function(t,e){return ie[t]||(ie[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),he=0,de=Math.random(),ye=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++he+de).toString(36)},ge=pe("keys"),me=function(t){return ge[t]||(ge[t]=ye(t))},ve={},be=Dt.WeakMap;if(fe){var _e=new be,we=_e.get,xe=_e.has,Oe=_e.set;ae=function(t,e){return Oe.call(_e,t,e),e},se=function(t){return we.call(_e,t)||{}},le=function(t){return xe.call(_e,t)}}else{var Se=me("state");ve[Se]=!0,ae=function(t,e){return ne(t,Se,e),e},se=function(t){return Zt(t,Se)?t[Se]:{}},le=function(t){return Zt(t,Se)}}var ke,Te,Ee={set:ae,get:se,has:le,enforce:function(t){return le(t)?se(t):ae(t,{})},getterFor:function(t){return function(e){var n;if(!Ht(e)||(n=se(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Ce=Object(i.g)((function(t){var e=Ee.get,n=Ee.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||Zt(i,"name")||ne(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==Dt?(a?!l&&t[e]&&(s=!0):delete t[e],s?t[e]=i:ne(t,e,i)):s?t[e]=i:re(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||ue(this)}))})),Re=Dt,De=function(t){return"function"==typeof t?t:void 0},Pe=function(t,e){return arguments.length<2?De(Re[t])||De(Dt[t]):Re[t]&&Re[t][e]||Dt[t]&&Dt[t][e]},Ie=Math.ceil,Ae=Math.floor,Fe=function(t){return isNaN(t=+t)?0:(t>0?Ae:Ie)(t)},je=Math.min,Me=function(t){return t>0?je(Fe(t),9007199254740991):0},ze=Math.max,Le=Math.min,Be=function(t,e){var n=Fe(t);return n<0?ze(n+e,0):Le(n,e)},Ne=function(t){return function(e,n,r){var i,o=Wt(e),a=Me(o.length),s=Be(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Ue={includes:Ne(!0),indexOf:Ne(!1)},We=Ue.indexOf,He=function(t,e){var n,r=Wt(t),i=0,o=[];for(n in r)!Zt(ve,n)&&Zt(r,n)&&o.push(n);for(;e.length>i;)Zt(r,n=e[i++])&&(~We(o,n)||o.push(n));return o},Ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ge=Ve.concat("length","prototype"),Ze={f:Object.getOwnPropertyNames||function(t){return He(t,Ge)}},Xe={f:Object.getOwnPropertySymbols},qe=Pe("Reflect","ownKeys")||function(t){var e=Ze.f($t(t)),n=Xe.f;return n?e.concat(n(t)):e},Ye=function(t,e){for(var n=qe(e),r=ee.f,i=Jt.f,o=0;o<n.length;o++){var a=n[o];Zt(t,a)||r(t,a,i(e,a))}},Ke=/#|\.prototype\./,Qe=function(t,e){var n=$e[Je(t)];return n==en||n!=tn&&("function"==typeof e?Pt(e):!!e)},Je=Qe.normalize=function(t){return String(t).replace(Ke,".").toLowerCase()},$e=Qe.data={},tn=Qe.NATIVE="N",en=Qe.POLYFILL="P",nn=Qe,rn=Jt.f,on=function(t,e){var n,r,i,o,a,s=t.target,l=t.global,u=t.stat;if(n=l?Dt:u?Dt[s]||re(s,{}):(Dt[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=rn(n,r))&&a.value:n[r],!nn(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Ye(o,i)}(t.sham||i&&i.sham)&&ne(o,"sham",!0),Ce(n,r,o,t)}},an=Array.isArray||function(t){return"Array"==Lt(t)},sn=function(t){return Object(Ut(t))},ln=function(t,e,n){var r=Vt(e);r in t?ee.f(t,r,Mt(0,n)):t[r]=n},un=!!Object.getOwnPropertySymbols&&!Pt((function(){return!String(Symbol())})),cn=un&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,fn=pe("wks"),pn=Dt.Symbol,hn=cn?pn:pn&&pn.withoutSetter||ye,dn=function(t){return Zt(fn,t)||(un&&Zt(pn,t)?fn[t]=pn[t]:fn[t]=hn("Symbol."+t)),fn[t]},yn=dn("species"),gn=function(t,e){var n;return an(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!an(n.prototype)?Ht(n)&&null===(n=n[yn])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},mn=Pe("navigator","userAgent")||"",vn=Dt.process,bn=vn&&vn.versions,_n=bn&&bn.v8;_n?Te=(ke=_n.split("."))[0]+ke[1]:mn&&(!(ke=mn.match(/Edge\/(\d+)/))||ke[1]>=74)&&(ke=mn.match(/Chrome\/(\d+)/))&&(Te=ke[1]);var wn=Te&&+Te,xn=dn("species"),On=function(t){return wn>=51||!Pt((function(){var e=[];return(e.constructor={})[xn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Sn=dn("isConcatSpreadable"),kn=wn>=51||!Pt((function(){var t=[];return t[Sn]=!1,t.concat()[0]!==t})),Tn=On("concat"),En=function(t){if(!Ht(t))return!1;var e=t[Sn];return void 0!==e?!!e:an(t)};on({target:"Array",proto:!0,forced:!kn||!Tn},{concat:function(t){var e,n,r,i,o,a=sn(this),s=gn(a,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(En(o=-1===e?a:arguments[e])){if(l+(i=Me(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,l++)n in o&&ln(s,l,o[n])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");ln(s,l++,o)}return s.length=l,s}});var Cn={};Cn[dn("toStringTag")]="z";var Rn="[object z]"===String(Cn),Dn=dn("toStringTag"),Pn="Arguments"==Lt(function(){return arguments}()),In=Rn?Lt:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Dn))?n:Pn?Lt(e):"Object"==(r=Lt(e))&&"function"==typeof e.callee?"Arguments":r},An=Rn?{}.toString:function(){return"[object "+In(this)+"]"};Rn||Ce(Object.prototype,"toString",An,{unsafe:!0});var Fn,jn=Object.keys||function(t){return He(t,Ve)},Mn=It?Object.defineProperties:function(t,e){$t(t);for(var n,r=jn(e),i=r.length,o=0;i>o;)ee.f(t,n=r[o++],e[n]);return t},zn=Pe("document","documentElement"),Ln=me("IE_PROTO"),Bn=function(){},Nn=function(t){return"<script>"+t+"<\/script>"},Un=function(){try{Fn=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Un=Fn?function(t){t.write(Nn("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Fn):((e=Yt("iframe")).style.display="none",zn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Nn("document.F=Object")),t.close(),t.F);for(var n=Ve.length;n--;)delete Un.prototype[Ve[n]];return Un()};ve[Ln]=!0;var Wn=Object.create||function(t,e){var n;return null!==t?(Bn.prototype=$t(t),n=new Bn,Bn.prototype=null,n[Ln]=t):n=Un(),void 0===e?n:Mn(n,e)},Hn=Ze.f,Vn={}.toString,Gn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Zn={f:function(t){return Gn&&"[object Window]"==Vn.call(t)?function(t){try{return Hn(t)}catch(t){return Gn.slice()}}(t):Hn(Wt(t))}},Xn={f:dn},qn=ee.f,Yn=function(t){var e=Re.Symbol||(Re.Symbol={});Zt(e,t)||qn(e,t,{value:Xn.f(t)})},Kn=ee.f,Qn=dn("toStringTag"),Jn=function(t,e,n){t&&!Zt(t=n?t:t.prototype,Qn)&&Kn(t,Qn,{configurable:!0,value:e})},$n=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},tr=function(t,e,n){if($n(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},er=[].push,nr=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(s,l,u,c){for(var f,p,h=sn(s),d=Nt(h),y=tr(l,u,3),g=Me(d.length),m=0,v=c||gn,b=e?v(s,g):n?v(s,0):void 0;g>m;m++)if((a||m in d)&&(p=y(f=d[m],m,h),t))if(e)b[m]=p;else if(p)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:er.call(b,f)}else if(i)return!1;return o?-1:r||i?i:b}},rr={forEach:nr(0),map:nr(1),filter:nr(2),some:nr(3),every:nr(4),find:nr(5),findIndex:nr(6)},ir=rr.forEach,or=me("hidden"),ar=dn("toPrimitive"),sr=Ee.set,lr=Ee.getterFor("Symbol"),ur=Object.prototype,cr=Dt.Symbol,fr=Pe("JSON","stringify"),pr=Jt.f,hr=ee.f,dr=Zn.f,yr=jt.f,gr=pe("symbols"),mr=pe("op-symbols"),vr=pe("string-to-symbol-registry"),br=pe("symbol-to-string-registry"),_r=pe("wks"),wr=Dt.QObject,xr=!wr||!wr.prototype||!wr.prototype.findChild,Or=It&&Pt((function(){return 7!=Wn(hr({},"a",{get:function(){return hr(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=pr(ur,e);r&&delete ur[e],hr(t,e,n),r&&t!==ur&&hr(ur,e,r)}:hr,Sr=function(t,e){var n=gr[t]=Wn(cr.prototype);return sr(n,{type:"Symbol",tag:t,description:e}),It||(n.description=e),n},kr=cn?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof cr},Tr=function(t,e,n){t===ur&&Tr(mr,e,n),$t(t);var r=Vt(e,!0);return $t(n),Zt(gr,r)?(n.enumerable?(Zt(t,or)&&t[or][r]&&(t[or][r]=!1),n=Wn(n,{enumerable:Mt(0,!1)})):(Zt(t,or)||hr(t,or,Mt(1,{})),t[or][r]=!0),Or(t,r,n)):hr(t,r,n)},Er=function(t,e){$t(t);var n=Wt(e),r=jn(n).concat(Pr(n));return ir(r,(function(e){It&&!Cr.call(n,e)||Tr(t,e,n[e])})),t},Cr=function(t){var e=Vt(t,!0),n=yr.call(this,e);return!(this===ur&&Zt(gr,e)&&!Zt(mr,e))&&(!(n||!Zt(this,e)||!Zt(gr,e)||Zt(this,or)&&this[or][e])||n)},Rr=function(t,e){var n=Wt(t),r=Vt(e,!0);if(n!==ur||!Zt(gr,r)||Zt(mr,r)){var i=pr(n,r);return!i||!Zt(gr,r)||Zt(n,or)&&n[or][r]||(i.enumerable=!0),i}},Dr=function(t){var e=dr(Wt(t)),n=[];return ir(e,(function(t){Zt(gr,t)||Zt(ve,t)||n.push(t)})),n},Pr=function(t){var e=t===ur,n=dr(e?mr:Wt(t)),r=[];return ir(n,(function(t){!Zt(gr,t)||e&&!Zt(ur,t)||r.push(gr[t])})),r};if(un||(Ce((cr=function(){if(this instanceof cr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=ye(t),n=function(t){this===ur&&n.call(mr,t),Zt(this,or)&&Zt(this[or],e)&&(this[or][e]=!1),Or(this,e,Mt(1,t))};return It&&xr&&Or(ur,e,{configurable:!0,set:n}),Sr(e,t)}).prototype,"toString",(function(){return lr(this).tag})),Ce(cr,"withoutSetter",(function(t){return Sr(ye(t),t)})),jt.f=Cr,ee.f=Tr,Jt.f=Rr,Ze.f=Zn.f=Dr,Xe.f=Pr,Xn.f=function(t){return Sr(dn(t),t)},It&&(hr(cr.prototype,"description",{configurable:!0,get:function(){return lr(this).description}}),Ce(ur,"propertyIsEnumerable",Cr,{unsafe:!0}))),on({global:!0,wrap:!0,forced:!un,sham:!un},{Symbol:cr}),ir(jn(_r),(function(t){Yn(t)})),on({target:"Symbol",stat:!0,forced:!un},{for:function(t){var e=String(t);if(Zt(vr,e))return vr[e];var n=cr(e);return vr[e]=n,br[n]=e,n},keyFor:function(t){if(!kr(t))throw TypeError(t+" is not a symbol");if(Zt(br,t))return br[t]},useSetter:function(){xr=!0},useSimple:function(){xr=!1}}),on({target:"Object",stat:!0,forced:!un,sham:!It},{create:function(t,e){return void 0===e?Wn(t):Er(Wn(t),e)},defineProperty:Tr,defineProperties:Er,getOwnPropertyDescriptor:Rr}),on({target:"Object",stat:!0,forced:!un},{getOwnPropertyNames:Dr,getOwnPropertySymbols:Pr}),on({target:"Object",stat:!0,forced:Pt((function(){Xe.f(1)}))},{getOwnPropertySymbols:function(t){return Xe.f(sn(t))}}),fr){var Ir=!un||Pt((function(){var t=cr();return"[null]"!=fr([t])||"{}"!=fr({a:t})||"{}"!=fr(Object(t))}));on({target:"JSON",stat:!0,forced:Ir},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(Ht(e)||void 0!==t)&&!kr(t))return an(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!kr(e))return e}),i[1]=e,fr.apply(null,i)}})}cr.prototype[ar]||ne(cr.prototype,ar,cr.prototype.valueOf),Jn(cr,"Symbol"),ve[or]=!0,Yn("asyncIterator");var Ar=ee.f,Fr=Dt.Symbol;if(It&&"function"==typeof Fr&&(!("description"in Fr.prototype)||void 0!==Fr().description)){var jr={},Mr=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Mr?new Fr(t):void 0===t?Fr():Fr(t);return""===t&&(jr[e]=!0),e};Ye(Mr,Fr);var zr=Mr.prototype=Fr.prototype;zr.constructor=Mr;var Lr=zr.toString,Br="Symbol(test)"==String(Fr("test")),Nr=/^Symbol\((.*)\)[^)]+$/;Ar(zr,"description",{configurable:!0,get:function(){var t=Ht(this)?this.valueOf():this,e=Lr.call(t);if(Zt(jr,t))return"";var n=Br?e.slice(7,-1):e.replace(Nr,"$1");return""===n?void 0:n}}),on({global:!0,forced:!0},{Symbol:Mr})}Yn("hasInstance"),Yn("isConcatSpreadable"),Yn("iterator"),Yn("match"),Yn("matchAll"),Yn("replace"),Yn("search"),Yn("species"),Yn("split"),Yn("toPrimitive"),Yn("toStringTag"),Yn("unscopables"),Jn(Math,"Math",!0),Jn(Dt.JSON,"JSON",!0),Re.Symbol,Yn("asyncDispose"),Yn("dispose"),Yn("observable"),Yn("patternMatch"),Yn("replaceAll");var Ur,Wr,Hr,Vr=function(t){return function(e,n){var r,i,o=String(Ut(e)),a=Fe(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Gr={codeAt:Vr(!1),charAt:Vr(!0)},Zr=!Pt((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Xr=me("IE_PROTO"),qr=Object.prototype,Yr=Zr?Object.getPrototypeOf:function(t){return t=sn(t),Zt(t,Xr)?t[Xr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?qr:null},Kr=dn("iterator"),Qr=!1;[].keys&&("next"in(Hr=[].keys())?(Wr=Yr(Yr(Hr)))!==Object.prototype&&(Ur=Wr):Qr=!0),null==Ur&&(Ur={}),Zt(Ur,Kr)||ne(Ur,Kr,(function(){return this}));var Jr={IteratorPrototype:Ur,BUGGY_SAFARI_ITERATORS:Qr},$r={},ti=Jr.IteratorPrototype,ei=function(){return this},ni=function(t,e,n){var r=e+" Iterator";return t.prototype=Wn(ti,{next:Mt(1,n)}),Jn(t,r,!1),$r[r]=ei,t},ri=function(t){if(!Ht(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},ii=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return $t(n),ri(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),oi=Jr.IteratorPrototype,ai=Jr.BUGGY_SAFARI_ITERATORS,si=dn("iterator"),li=function(){return this},ui=function(t,e,n,r,i,o,a){ni(n,e,r);var s,l,u,c=function(t){if(t===i&&y)return y;if(!ai&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",p=!1,h=t.prototype,d=h[si]||h["@@iterator"]||i&&h[i],y=!ai&&d||c(i),g="Array"==e&&h.entries||d;if(g&&(s=Yr(g.call(new t)),oi!==Object.prototype&&s.next&&(Yr(s)!==oi&&(ii?ii(s,oi):"function"!=typeof s[si]&&ne(s,si,li)),Jn(s,f,!0))),"values"==i&&d&&"values"!==d.name&&(p=!0,y=function(){return d.call(this)}),h[si]!==y&&ne(h,si,y),$r[e]=y,i)if(l={values:c("values"),keys:o?y:c("keys"),entries:c("entries")},a)for(u in l)(ai||p||!(u in h))&&Ce(h,u,l[u]);else on({target:e,proto:!0,forced:ai||p},l);return l},ci=Gr.charAt,fi=Ee.set,pi=Ee.getterFor("String Iterator");ui(String,"String",(function(t){fi(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=pi(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ci(n,r),e.index+=t.length,{value:t,done:!1})}));var hi=function(t,e,n,r){try{return r?e($t(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&$t(i.call(t)),e}},di=dn("iterator"),yi=Array.prototype,gi=function(t){return void 0!==t&&($r.Array===t||yi[di]===t)},mi=dn("iterator"),vi=function(t){if(null!=t)return t[mi]||t["@@iterator"]||$r[In(t)]},bi=function(t){var e,n,r,i,o,a,s=sn(t),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,f=void 0!==c,p=vi(s),h=0;if(f&&(c=tr(c,u>2?arguments[2]:void 0,2)),null==p||l==Array&&gi(p))for(n=new l(e=Me(s.length));e>h;h++)a=f?c(s[h],h):s[h],ln(n,h,a);else for(o=(i=p.call(s)).next,n=new l;!(r=o.call(i)).done;h++)a=f?hi(i,c,[r.value,h],!0):r.value,ln(n,h,a);return n.length=h,n},_i=dn("iterator"),wi=!1;try{var xi=0,Oi={next:function(){return{done:!!xi++}},return:function(){wi=!0}};Oi[_i]=function(){return this},Array.from(Oi,(function(){throw 2}))}catch(us){}var Si=function(t,e){if(!e&&!wi)return!1;var n=!1;try{var r={};r[_i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},ki=!Si((function(t){Array.from(t)}));on({target:"Array",stat:!0,forced:ki},{from:bi}),Re.Array.from,"undefined"==typeof Promise&&(V(),self.Promise=G),Object.assign=Ct;var Ti=Object.assign,Ei=Object.defineProperty,Ci=!Ti||Pt((function(){if(It&&1!==Ti({b:1},Ti(Ei({},"a",{enumerable:!0,get:function(){Ei(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=Ti({},t)[n]||"abcdefghijklmnopqrst"!=jn(Ti({},e)).join("")}))?function(t,e){for(var n=sn(t),r=arguments.length,i=1,o=Xe.f,a=jt.f;r>i;)for(var s,l=Nt(arguments[i++]),u=o?jn(l).concat(o(l)):jn(l),c=u.length,f=0;c>f;)s=u[f++],It&&!a.call(l,s)||(n[s]=l[s]);return n}:Ti;on({target:"Object",stat:!0,forced:Object.assign!==Ci},{assign:Ci}),on({target:"Object",stat:!0,sham:!It},{create:Wn}),on({target:"Object",stat:!0,forced:!It,sham:!It},{defineProperty:ee.f}),on({target:"Object",stat:!0,forced:!It,sham:!It},{defineProperties:Mn});var Ri=jt.f,Di=function(t){return function(e){for(var n,r=Wt(e),i=jn(r),o=i.length,a=0,s=[];o>a;)n=i[a++],It&&!Ri.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},Pi={entries:Di(!0),values:Di(!1)},Ii=Pi.entries;on({target:"Object",stat:!0},{entries:function(t){return Ii(t)}});var Ai=!Pt((function(){return Object.isExtensible(Object.preventExtensions({}))})),Fi=Object(i.g)((function(t){var e=ee.f,n=ye("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!Ht(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Zt(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!Zt(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Ai&&a.REQUIRED&&i(t)&&!Zt(t,n)&&o(t),t}};ve[n]=!0})),ji=Fi.onFreeze,Mi=Object.freeze,zi=Pt((function(){Mi(1)}));on({target:"Object",stat:!0,forced:zi,sham:!Ai},{freeze:function(t){return Mi&&Ht(t)?Mi(ji(t)):t}});var Li=Object(i.g)((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var a,s,l,u,c,f,p,h=tr(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(s=vi(t)))throw TypeError("Target is not iterable");if(gi(s)){for(l=0,u=Me(t.length);u>l;l++)if((c=i?h($t(p=t[l])[0],p[1]):h(t[l]))&&c instanceof e)return c;return new e(!1)}a=s.call(t)}for(f=a.next;!(p=f.call(a)).done;)if("object"==typeof(c=hi(a,h,p.value,i))&&c&&c instanceof e)return c;return new e(!1)}).stop=function(t){return new e(!0,t)}}));on({target:"Object",stat:!0},{fromEntries:function(t){var e={};return Li(t,(function(t,n){ln(e,t,n)}),void 0,!0),e}});var Bi=Jt.f,Ni=Pt((function(){Bi(1)}));on({target:"Object",stat:!0,forced:!It||Ni,sham:!It},{getOwnPropertyDescriptor:function(t,e){return Bi(Wt(t),e)}}),on({target:"Object",stat:!0,sham:!It},{getOwnPropertyDescriptors:function(t){for(var e,n,r=Wt(t),i=Jt.f,o=qe(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&ln(a,e,n);return a}});var Ui=Zn.f,Wi=Pt((function(){return!Object.getOwnPropertyNames(1)}));on({target:"Object",stat:!0,forced:Wi},{getOwnPropertyNames:Ui});var Hi=Pt((function(){Yr(1)}));on({target:"Object",stat:!0,forced:Hi,sham:!Zr},{getPrototypeOf:function(t){return Yr(sn(t))}});var Vi=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};on({target:"Object",stat:!0},{is:Vi});var Gi=Object.isExtensible,Zi=Pt((function(){Gi(1)}));on({target:"Object",stat:!0,forced:Zi},{isExtensible:function(t){return!!Ht(t)&&(!Gi||Gi(t))}});var Xi=Object.isFrozen,qi=Pt((function(){Xi(1)}));on({target:"Object",stat:!0,forced:qi},{isFrozen:function(t){return!Ht(t)||!!Xi&&Xi(t)}});var Yi=Object.isSealed,Ki=Pt((function(){Yi(1)}));on({target:"Object",stat:!0,forced:Ki},{isSealed:function(t){return!Ht(t)||!!Yi&&Yi(t)}});var Qi=Pt((function(){jn(1)}));on({target:"Object",stat:!0,forced:Qi},{keys:function(t){return jn(sn(t))}});var Ji=Fi.onFreeze,$i=Object.preventExtensions,to=Pt((function(){$i(1)}));on({target:"Object",stat:!0,forced:to,sham:!Ai},{preventExtensions:function(t){return $i&&Ht(t)?$i(Ji(t)):t}});var eo=Fi.onFreeze,no=Object.seal,ro=Pt((function(){no(1)}));on({target:"Object",stat:!0,forced:ro,sham:!Ai},{seal:function(t){return no&&Ht(t)?no(eo(t)):t}}),on({target:"Object",stat:!0},{setPrototypeOf:ii});var io=Pi.values;on({target:"Object",stat:!0},{values:function(t){return io(t)}});var oo=!Pt((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete Dt[t]}));It&&on({target:"Object",proto:!0,forced:oo},{__defineGetter__:function(t,e){ee.f(sn(this),t,{get:$n(e),enumerable:!0,configurable:!0})}}),It&&on({target:"Object",proto:!0,forced:oo},{__defineSetter__:function(t,e){ee.f(sn(this),t,{set:$n(e),enumerable:!0,configurable:!0})}});var ao=Jt.f;It&&on({target:"Object",proto:!0,forced:oo},{__lookupGetter__:function(t){var e,n=sn(this),r=Vt(t,!0);do{if(e=ao(n,r))return e.get}while(n=Yr(n))}});var so=Jt.f;It&&on({target:"Object",proto:!0,forced:oo},{__lookupSetter__:function(t){var e,n=sn(this),r=Vt(t,!0);do{if(e=so(n,r))return e.set}while(n=Yr(n))}});var lo=[].slice,uo={},co=function(t,e,n){if(!(e in uo)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";uo[e]=Function("C,a","return new C("+r.join(",")+")")}return uo[e](t,n)},fo=Function.bind||function(t){var e=$n(this),n=lo.call(arguments,1),r=function(){var i=n.concat(lo.call(arguments));return this instanceof r?co(e,i.length,i):e.apply(t,i)};return Ht(e.prototype)&&(r.prototype=e.prototype),r};on({target:"Function",proto:!0},{bind:fo});var po=ee.f,ho=Function.prototype,yo=ho.toString,go=/^\s*function ([^ (]*)/;It&&!("name"in ho)&&po(ho,"name",{configurable:!0,get:function(){try{return yo.call(this).match(go)[1]}catch(t){return""}}});var mo=dn("hasInstance"),vo=Function.prototype;mo in vo||ee.f(vo,mo,{value:function(t){if("function"!=typeof this||!Ht(t))return!1;if(!Ht(this.prototype))return t instanceof this;for(;t=Yr(t);)if(this.prototype===t)return!0;return!1}}),on({global:!0},{globalThis:Dt}),on({target:"Array",stat:!0},{isArray:an});var bo=Pt((function(){function t(){}return!(Array.of.call(t)instanceof t)}));on({target:"Array",stat:!0,forced:bo},{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)ln(n,t,arguments[t++]);return n.length=e,n}});var _o=Math.min,wo=[].copyWithin||function(t,e){var n=sn(this),r=Me(n.length),i=Be(t,r),o=Be(e,r),a=arguments.length>2?arguments[2]:void 0,s=_o((void 0===a?r:Be(a,r))-o,r-i),l=1;for(o<i&&i<o+s&&(l=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=l,o+=l;return n},xo=dn("unscopables"),Oo=Array.prototype;null==Oo[xo]&&ee.f(Oo,xo,{configurable:!0,value:Wn(null)});var So=function(t){Oo[xo][t]=!0};on({target:"Array",proto:!0},{copyWithin:wo}),So("copyWithin");var ko=function(t,e){var n=[][t];return!!n&&Pt((function(){n.call(null,e||function(){throw 1},1)}))},To=Object.defineProperty,Eo={},Co=function(t){throw t},Ro=function(t,e){if(Zt(Eo,t))return Eo[t];e||(e={});var n=[][t],r=!!Zt(e,"ACCESSORS")&&e.ACCESSORS,i=Zt(e,0)?e[0]:Co,o=Zt(e,1)?e[1]:void 0;return Eo[t]=!!n&&!Pt((function(){if(r&&!It)return!0;var t={length:-1};r?To(t,1,{enumerable:!0,get:Co}):t[1]=1,n.call(t,i,o)}))},Do=rr.every,Po=ko("every"),Io=Ro("every");on({target:"Array",proto:!0,forced:!Po||!Io},{every:function(t){return Do(this,t,arguments.length>1?arguments[1]:void 0)}});var Ao=function(t){for(var e=sn(this),n=Me(e.length),r=arguments.length,i=Be(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:Be(o,n);a>i;)e[i++]=t;return e};on({target:"Array",proto:!0},{fill:Ao}),So("fill");var Fo=rr.filter,jo=On("filter"),Mo=Ro("filter");on({target:"Array",proto:!0,forced:!jo||!Mo},{filter:function(t){return Fo(this,t,arguments.length>1?arguments[1]:void 0)}});var zo=rr.find,Lo=!0,Bo=Ro("find");"find"in[]&&Array(1).find((function(){Lo=!1})),on({target:"Array",proto:!0,forced:Lo||!Bo},{find:function(t){return zo(this,t,arguments.length>1?arguments[1]:void 0)}}),So("find");var No=rr.findIndex,Uo=!0,Wo=Ro("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){Uo=!1})),on({target:"Array",proto:!0,forced:Uo||!Wo},{findIndex:function(t){return No(this,t,arguments.length>1?arguments[1]:void 0)}}),So("findIndex");var Ho=function(t,e,n,r,i,o,a,s){for(var l,u=i,c=0,f=!!a&&tr(a,s,3);c<r;){if(c in n){if(l=f?f(n[c],c,e):n[c],o>0&&an(l))u=Ho(t,e,l,Me(l.length),u,o-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[u]=l}u++}c++}return u},Vo=Ho;on({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=sn(this),n=Me(e.length),r=gn(e,0);return r.length=Vo(r,e,e,n,0,void 0===t?1:Fe(t)),r}}),on({target:"Array",proto:!0},{flatMap:function(t){var e,n=sn(this),r=Me(n.length);return $n(t),(e=gn(n,0)).length=Vo(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var Go=rr.forEach,Zo=ko("forEach"),Xo=Ro("forEach"),qo=Zo&&Xo?[].forEach:function(t){return Go(this,t,arguments.length>1?arguments[1]:void 0)};on({target:"Array",proto:!0,forced:[].forEach!=qo},{forEach:qo});var Yo=Ue.includes,Ko=Ro("indexOf",{ACCESSORS:!0,1:0});on({target:"Array",proto:!0,forced:!Ko},{includes:function(t){return Yo(this,t,arguments.length>1?arguments[1]:void 0)}}),So("includes");var Qo=Ue.indexOf,Jo=[].indexOf,$o=!!Jo&&1/[1].indexOf(1,-0)<0,ta=ko("indexOf"),ea=Ro("indexOf",{ACCESSORS:!0,1:0});on({target:"Array",proto:!0,forced:$o||!ta||!ea},{indexOf:function(t){return $o?Jo.apply(this,arguments)||0:Qo(this,t,arguments.length>1?arguments[1]:void 0)}});var na=[].join,ra=Nt!=Object,ia=ko("join",",");on({target:"Array",proto:!0,forced:ra||!ia},{join:function(t){return na.call(Wt(this),void 0===t?",":t)}});var oa=Math.min,aa=[].lastIndexOf,sa=!!aa&&1/[1].lastIndexOf(1,-0)<0,la=ko("lastIndexOf"),ua=Ro("indexOf",{ACCESSORS:!0,1:0}),ca=!sa&&la&&ua?aa:function(t){if(sa)return aa.apply(this,arguments)||0;var e=Wt(this),n=Me(e.length),r=n-1;for(arguments.length>1&&(r=oa(r,Fe(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1};on({target:"Array",proto:!0,forced:ca!==[].lastIndexOf},{lastIndexOf:ca});var fa=rr.map,pa=On("map"),ha=Ro("map");on({target:"Array",proto:!0,forced:!pa||!ha},{map:function(t){return fa(this,t,arguments.length>1?arguments[1]:void 0)}});var da=function(t){return function(e,n,r,i){$n(n);var o=sn(e),a=Nt(o),s=Me(o.length),l=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(l in a){i=a[l],l+=u;break}if(l+=u,t?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:s>l;l+=u)l in a&&(i=n(i,a[l],l,o));return i}},ya={left:da(!1),right:da(!0)},ga=ya.left,ma=ko("reduce"),va=Ro("reduce",{1:0});on({target:"Array",proto:!0,forced:!ma||!va},{reduce:function(t){return ga(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var ba=ya.right,_a=ko("reduceRight"),wa=Ro("reduce",{1:0});on({target:"Array",proto:!0,forced:!_a||!wa},{reduceRight:function(t){return ba(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var xa=[].reverse,Oa=[1,2];on({target:"Array",proto:!0,forced:String(Oa)===String(Oa.reverse())},{reverse:function(){return an(this)&&(this.length=this.length),xa.call(this)}});var Sa=On("slice"),ka=Ro("slice",{ACCESSORS:!0,0:0,1:2}),Ta=dn("species"),Ea=[].slice,Ca=Math.max;on({target:"Array",proto:!0,forced:!Sa||!ka},{slice:function(t,e){var n,r,i,o=Wt(this),a=Me(o.length),s=Be(t,a),l=Be(void 0===e?a:e,a);if(an(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!an(n.prototype)?Ht(n)&&null===(n=n[Ta])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ea.call(o,s,l);for(r=new(void 0===n?Array:n)(Ca(l-s,0)),i=0;s<l;s++,i++)s in o&&ln(r,i,o[s]);return r.length=i,r}});var Ra=rr.some,Da=ko("some"),Pa=Ro("some");on({target:"Array",proto:!0,forced:!Da||!Pa},{some:function(t){return Ra(this,t,arguments.length>1?arguments[1]:void 0)}});var Ia=[],Aa=Ia.sort,Fa=Pt((function(){Ia.sort(void 0)})),ja=Pt((function(){Ia.sort(null)})),Ma=ko("sort");on({target:"Array",proto:!0,forced:Fa||!ja||!Ma},{sort:function(t){return void 0===t?Aa.call(sn(this)):Aa.call(sn(this),$n(t))}});var za=On("splice"),La=Ro("splice",{ACCESSORS:!0,0:0,1:2}),Ba=Math.max,Na=Math.min;on({target:"Array",proto:!0,forced:!za||!La},{splice:function(t,e){var n,r,i,o,a,s,l=sn(this),u=Me(l.length),c=Be(t,u),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=u-c):(n=f-2,r=Na(Ba(Fe(e),0),u-c)),u+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=gn(l,r),o=0;o<r;o++)(a=c+o)in l&&ln(i,o,l[a]);if(i.length=r,n<r){for(o=c;o<u-r;o++)s=o+n,(a=o+r)in l?l[s]=l[a]:delete l[s];for(o=u;o>u-r+n;o--)delete l[o-1]}else if(n>r)for(o=u-r;o>c;o--)s=o+n-1,(a=o+r-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+c]=arguments[o+2];return l.length=u-r+n,i}});var Ua=dn("species"),Wa=function(t){var e=Pe(t),n=ee.f;It&&e&&!e[Ua]&&n(e,Ua,{configurable:!0,get:function(){return this}})};Wa("Array"),So("flat"),So("flatMap");var Ha=Ee.set,Va=Ee.getterFor("Array Iterator"),Ga=ui(Array,"Array",(function(t,e){Ha(this,{type:"Array Iterator",target:Wt(t),index:0,kind:e})}),(function(){var t=Va(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");$r.Arguments=$r.Array,So("keys"),So("values"),So("entries");var Za=String.fromCharCode,Xa=String.fromCodePoint,qa=!!Xa&&1!=Xa.length;on({target:"String",stat:!0,forced:qa},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],Be(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?Za(e):Za(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}}),on({target:"String",stat:!0},{raw:function(t){for(var e=Wt(t.raw),n=Me(e.length),r=arguments.length,i=[],o=0;n>o;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}});var Ya=Gr.codeAt;on({target:"String",proto:!0},{codePointAt:function(t){return Ya(this,t)}});var Ka,Qa=dn("match"),Ja=function(t){var e;return Ht(t)&&(void 0!==(e=t[Qa])?!!e:"RegExp"==Lt(t))},$a=function(t){if(Ja(t))throw TypeError("The method doesn't accept regular expressions");return t},ts=dn("match"),es=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ts]=!1,"/./"[t](e)}catch(t){}}return!1},ns=Jt.f,rs="".endsWith,is=Math.min,os=es("endsWith"),as=!(os||(Ka=ns(String.prototype,"endsWith"),!Ka||Ka.writable));on({target:"String",proto:!0,forced:!as&&!os},{endsWith:function(t){var e=String(Ut(this));$a(t);var n=arguments.length>1?arguments[1]:void 0,r=Me(e.length),i=void 0===n?r:is(Me(n),r),o=String(t);return rs?rs.call(e,o,i):e.slice(i-o.length,i)===o}}),on({target:"String",proto:!0,forced:!es("includes")},{includes:function(t){return!!~String(Ut(this)).indexOf($a(t),arguments.length>1?arguments[1]:void 0)}});var ss=function(){var t=$t(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function ls(t,e){return RegExp(t,e)}var us,cs,fs={UNSUPPORTED_Y:Pt((function(){var t=ls("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:Pt((function(){var t=ls("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ps=RegExp.prototype.exec,hs=String.prototype.replace,ds=ps,ys=(us=/a/,cs=/b*/g,ps.call(us,"a"),ps.call(cs,"a"),0!==us.lastIndex||0!==cs.lastIndex),gs=fs.UNSUPPORTED_Y||fs.BROKEN_CARET,ms=void 0!==/()??/.exec("")[1];(ys||ms||gs)&&(ds=function(t){var e,n,r,i,o=this,a=gs&&o.sticky,s=ss.call(o),l=o.source,u=0,c=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),c=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(l="(?: "+l+")",c=" "+c,u++),n=new RegExp("^(?:"+l+")",s)),ms&&(n=new RegExp("^"+l+"$(?!\\s)",s)),ys&&(e=o.lastIndex),r=ps.call(a?n:o,c),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:ys&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),ms&&r&&r.length>1&&hs.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var vs=ds;on({target:"RegExp",proto:!0,forced:/./.exec!==vs},{exec:vs});var bs=dn("species"),_s=!Pt((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ws="$0"==="a".replace(/./,"$0"),xs=dn("replace"),Os=!!/./[xs]&&""===/./[xs]("a","$0"),Ss=!Pt((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),ks=function(t,e,n,r){var i=dn(t),o=!Pt((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!Pt((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[bs]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!_s||!ws||Os)||"split"===t&&!Ss){var s=/./[i],l=n(i,""[t],(function(t,e,n,r,i){return e.exec===vs?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:ws,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Os}),u=l[0],c=l[1];Ce(String.prototype,t,u),Ce(RegExp.prototype,i,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}r&&ne(RegExp.prototype[i],"sham",!0)},Ts=Gr.charAt,Es=function(t,e,n){return e+(n?Ts(t,e).length:1)},Cs=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Lt(t))throw TypeError("RegExp#exec called on incompatible receiver");return vs.call(t,e)};ks("match",1,(function(t,e,n){return[function(e){var n=Ut(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=$t(t),o=String(this);if(!i.global)return Cs(i,o);var a=i.unicode;i.lastIndex=0;for(var s,l=[],u=0;null!==(s=Cs(i,o));){var c=String(s[0]);l[u]=c,""===c&&(i.lastIndex=Es(o,Me(i.lastIndex),a)),u++}return 0===u?null:l}]}));var Rs=dn("species"),Ds=function(t,e){var n,r=$t(t).constructor;return void 0===r||null==(n=$t(r)[Rs])?e:$n(n)},Ps=dn("matchAll"),Is=Ee.set,As=Ee.getterFor("RegExp String Iterator"),Fs=RegExp.prototype,js=Fs.exec,Ms="".matchAll,zs=!!Ms&&!Pt((function(){"a".matchAll(/./)})),Ls=ni((function(t,e,n,r){Is(this,{type:"RegExp String Iterator",regexp:t,string:e,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var t=As(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=function(t,e){var n,r=t.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(t,e)))throw TypeError("Incorrect exec result");return n}return js.call(t,e)}(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""==String(r[0])&&(e.lastIndex=Es(n,Me(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})}));on({target:"String",proto:!0,forced:zs},{matchAll:function(t){var e,n,r=Ut(this);if(null!=t){if(Ja(t)&&!~String(Ut("flags"in Fs?t.flags:ss.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(zs)return Ms.apply(r,arguments);if(null!=(n=t[Ps]))return $n(n).call(t,r)}else if(zs)return Ms.apply(r,arguments);return e=String(r),new RegExp(t,"g")[Ps](e)}}),Ps in Fs||ne(Fs,Ps,(function(t){var e,n,r,i,o,a,s=$t(this),l=String(t);return e=Ds(s,RegExp),void 0===(n=s.flags)&&s instanceof RegExp&&!("flags"in Fs)&&(n=ss.call(s)),r=void 0===n?"":String(n),i=new e(e===RegExp?s.source:s,r),o=!!~r.indexOf("g"),a=!!~r.indexOf("u"),i.lastIndex=Me(s.lastIndex),new Ls(i,l,o,a)}));var Bs="".repeat||function(t){var e=String(Ut(this)),n="",r=Fe(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},Ns=Math.ceil,Us=function(t){return function(e,n,r){var i,o,a=String(Ut(e)),s=a.length,l=void 0===r?" ":String(r),u=Me(n);return u<=s||""==l?a:(i=u-s,(o=Bs.call(l,Ns(i/l.length))).length>i&&(o=o.slice(0,i)),t?a+o:o+a)}},Ws={start:Us(!1),end:Us(!0)},Hs=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(mn),Vs=Ws.end;on({target:"String",proto:!0,forced:Hs},{padEnd:function(t){return Vs(this,t,arguments.length>1?arguments[1]:void 0)}});var Gs=Ws.start;on({target:"String",proto:!0,forced:Hs},{padStart:function(t){return Gs(this,t,arguments.length>1?arguments[1]:void 0)}}),on({target:"String",proto:!0},{repeat:Bs});var Zs=Math.max,Xs=Math.min,qs=Math.floor,Ys=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ks=/\$([$&'`]|\d\d?)/g;ks("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=Ut(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var l=n(e,t,this,r);if(l.done)return l.value}var u=$t(t),c=String(this),f="function"==typeof r;f||(r=String(r));var p=u.global;if(p){var h=u.unicode;u.lastIndex=0}for(var d=[];;){var y=Cs(u,c);if(null===y)break;if(d.push(y),!p)break;""===String(y[0])&&(u.lastIndex=Es(c,Me(u.lastIndex),h))}for(var g,m="",v=0,b=0;b<d.length;b++){y=d[b];for(var _=String(y[0]),w=Zs(Xs(Fe(y.index),c.length),0),x=[],O=1;O<y.length;O++)x.push(void 0===(g=y[O])?g:String(g));var S=y.groups;if(f){var k=[_].concat(x,w,c);void 0!==S&&k.push(S);var T=String(r.apply(void 0,k))}else T=s(_,c,w,x,S,r);w>=v&&(m+=c.slice(v,w)+T,v=w+_.length)}return m+c.slice(v)}];function s(t,n,r,i,o,a){var s=r+t.length,l=i.length,u=Ks;return void 0!==o&&(o=sn(o),u=Ys),e.call(a,u,(function(e,a){var u;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":u=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return e;if(c>l){var f=qs(c/10);return 0===f?e:f<=l?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):e}u=i[c-1]}return void 0===u?"":u}))}})),ks("search",1,(function(t,e,n){return[function(e){var n=Ut(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=$t(t),o=String(this),a=i.lastIndex;Vi(a,0)||(i.lastIndex=0);var s=Cs(i,o);return Vi(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var Qs=[].push,Js=Math.min,$s=!Pt((function(){return!RegExp(4294967295,"y")}));ks("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(Ut(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Ja(t))return e.call(r,t,i);for(var o,a,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,f=new RegExp(t.source,u+"g");(o=vs.call(f,r))&&!((a=f.lastIndex)>c&&(l.push(r.slice(c,o.index)),o.length>1&&o.index<r.length&&Qs.apply(l,o.slice(1)),s=o[0].length,c=a,l.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return c===r.length?!s&&f.test("")||l.push(""):l.push(r.slice(c)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=Ut(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=$t(t),s=String(this),l=Ds(a,RegExp),u=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+($s?"y":"g"),f=new l($s?a:"^(?:"+a.source+")",c),p=void 0===i?4294967295:i>>>0;if(0===p)return[];if(0===s.length)return null===Cs(f,s)?[s]:[];for(var h=0,d=0,y=[];d<s.length;){f.lastIndex=$s?d:0;var g,m=Cs(f,$s?s:s.slice(d));if(null===m||(g=Js(Me(f.lastIndex+($s?0:d)),s.length))===h)d=Es(s,d,u);else{if(y.push(s.slice(h,d)),y.length===p)return y;for(var v=1;v<=m.length-1;v++)if(y.push(m[v]),y.length===p)return y;d=h=g}}return y.push(s.slice(h)),y}]}),!$s);var tl=Jt.f,el="".startsWith,nl=Math.min,rl=es("startsWith"),il=!rl&&!!function(){var t=tl(String.prototype,"startsWith");return t&&!t.writable}();on({target:"String",proto:!0,forced:!il&&!rl},{startsWith:function(t){var e=String(Ut(this));$a(t);var n=Me(nl(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return el?el.call(e,r,n):e.slice(n,n+r.length)===r}});var ol="\t\n\v\f\r                　\u2028\u2029\ufeff",al="["+ol+"]",sl=RegExp("^"+al+al+"*"),ll=RegExp(al+al+"*$"),ul=function(t){return function(e){var n=String(Ut(e));return 1&t&&(n=n.replace(sl,"")),2&t&&(n=n.replace(ll,"")),n}},cl={start:ul(1),end:ul(2),trim:ul(3)},fl=function(t){return Pt((function(){return!!ol[t]()||"​᠎"!="​᠎"[t]()||ol[t].name!==t}))},pl=cl.trim;on({target:"String",proto:!0,forced:fl("trim")},{trim:function(){return pl(this)}});var hl=cl.start,dl=fl("trimStart"),yl=dl?function(){return hl(this)}:"".trimStart;on({target:"String",proto:!0,forced:dl},{trimStart:yl,trimLeft:yl});var gl=cl.end,ml=fl("trimEnd"),vl=ml?function(){return gl(this)}:"".trimEnd;on({target:"String",proto:!0,forced:ml},{trimEnd:vl,trimRight:vl});var bl=/"/g,_l=function(t,e,n,r){var i=String(Ut(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(bl,"&quot;")+'"'),o+">"+i+"</"+e+">"},wl=function(t){return Pt((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))};on({target:"String",proto:!0,forced:wl("anchor")},{anchor:function(t){return _l(this,"a","name",t)}}),on({target:"String",proto:!0,forced:wl("big")},{big:function(){return _l(this,"big","","")}}),on({target:"String",proto:!0,forced:wl("blink")},{blink:function(){return _l(this,"blink","","")}}),on({target:"String",proto:!0,forced:wl("bold")},{bold:function(){return _l(this,"b","","")}}),on({target:"String",proto:!0,forced:wl("fixed")},{fixed:function(){return _l(this,"tt","","")}}),on({target:"String",proto:!0,forced:wl("fontcolor")},{fontcolor:function(t){return _l(this,"font","color",t)}}),on({target:"String",proto:!0,forced:wl("fontsize")},{fontsize:function(t){return _l(this,"font","size",t)}}),on({target:"String",proto:!0,forced:wl("italics")},{italics:function(){return _l(this,"i","","")}}),on({target:"String",proto:!0,forced:wl("link")},{link:function(t){return _l(this,"a","href",t)}}),on({target:"String",proto:!0,forced:wl("small")},{small:function(){return _l(this,"small","","")}}),on({target:"String",proto:!0,forced:wl("strike")},{strike:function(){return _l(this,"strike","","")}}),on({target:"String",proto:!0,forced:wl("sub")},{sub:function(){return _l(this,"sub","","")}}),on({target:"String",proto:!0,forced:wl("sup")},{sup:function(){return _l(this,"sup","","")}});var xl=function(t,e,n){var r,i;return ii&&"function"==typeof(r=e.constructor)&&r!==n&&Ht(i=r.prototype)&&i!==n.prototype&&ii(t,i),t},Ol=ee.f,Sl=Ze.f,kl=Ee.set,Tl=dn("match"),El=Dt.RegExp,Cl=El.prototype,Rl=/a/g,Dl=/a/g,Pl=new El(Rl)!==Rl,Il=fs.UNSUPPORTED_Y;if(It&&nn("RegExp",!Pl||Il||Pt((function(){return Dl[Tl]=!1,El(Rl)!=Rl||El(Dl)==Dl||"/a/i"!=El(Rl,"i")})))){for(var Al=function(t,e){var n,r=this instanceof Al,i=Ja(t),o=void 0===e;if(!r&&i&&t.constructor===Al&&o)return t;Pl?i&&!o&&(t=t.source):t instanceof Al&&(o&&(e=ss.call(t)),t=t.source),Il&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=xl(Pl?new El(t,e):El(t,e),r?this:Cl,Al);return Il&&n&&kl(a,{sticky:n}),a},Fl=function(t){t in Al||Ol(Al,t,{configurable:!0,get:function(){return El[t]},set:function(e){El[t]=e}})},jl=Sl(El),Ml=0;jl.length>Ml;)Fl(jl[Ml++]);Cl.constructor=Al,Al.prototype=Cl,Ce(Dt,"RegExp",Al)}Wa("RegExp"),It&&("g"!=/./g.flags||fs.UNSUPPORTED_Y)&&ee.f(RegExp.prototype,"flags",{configurable:!0,get:ss});var zl=fs.UNSUPPORTED_Y,Ll=ee.f,Bl=Ee.get,Nl=RegExp.prototype;It&&zl&&Ll(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==Nl){if(this instanceof RegExp)return!!Bl(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}});var Ul=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),Wl=/./.test;on({target:"RegExp",proto:!0,forced:!Ul},{test:function(t){if("function"!=typeof this.exec)return Wl.call(this,t);var e=this.exec(t);if(null!==e&&!Ht(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}});var Hl=RegExp.prototype,Vl=Hl.toString,Gl=Pt((function(){return"/a/b"!=Vl.call({source:"a",flags:"b"})})),Zl="toString"!=Vl.name;(Gl||Zl)&&Ce(RegExp.prototype,"toString",(function(){var t=$t(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Hl)?ss.call(t):n)}),{unsafe:!0});var Xl=cl.trim,ql=Dt.parseInt,Yl=/^[+-]?0[Xx]/,Kl=8!==ql(ol+"08")||22!==ql(ol+"0x16")?function(t,e){var n=Xl(String(t));return ql(n,e>>>0||(Yl.test(n)?16:10))}:ql;on({global:!0,forced:parseInt!=Kl},{parseInt:Kl});var Ql=cl.trim,Jl=Dt.parseFloat,$l=1/Jl(ol+"-0")!=-1/0?function(t){var e=Ql(String(t)),n=Jl(e);return 0===n&&"-"==e.charAt(0)?-0:n}:Jl;on({global:!0,forced:parseFloat!=$l},{parseFloat:$l});var tu=Ze.f,eu=Jt.f,nu=ee.f,ru=cl.trim,iu=Dt.Number,ou=iu.prototype,au="Number"==Lt(Wn(ou)),su=function(t){var e,n,r,i,o,a,s,l,u=Vt(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=ru(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((l=o.charCodeAt(s))<48||l>i)return NaN;return parseInt(o,r)}return+u};if(nn("Number",!iu(" 0o1")||!iu("0b1")||iu("+0x1"))){for(var lu,uu=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof uu&&(au?Pt((function(){ou.valueOf.call(n)})):"Number"!=Lt(n))?xl(new iu(su(e)),n,uu):su(e)},cu=It?tu(iu):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),fu=0;cu.length>fu;fu++)Zt(iu,lu=cu[fu])&&!Zt(uu,lu)&&nu(uu,lu,eu(iu,lu));uu.prototype=ou,ou.constructor=uu,Ce(Dt,"Number",uu)}on({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var pu=Dt.isFinite,hu=Number.isFinite||function(t){return"number"==typeof t&&pu(t)};on({target:"Number",stat:!0},{isFinite:hu});var du=Math.floor,yu=function(t){return!Ht(t)&&isFinite(t)&&du(t)===t};on({target:"Number",stat:!0},{isInteger:yu}),on({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var gu=Math.abs;on({target:"Number",stat:!0},{isSafeInteger:function(t){return yu(t)&&gu(t)<=9007199254740991}}),on({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),on({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991}),on({target:"Number",stat:!0,forced:Number.parseFloat!=$l},{parseFloat:$l}),on({target:"Number",stat:!0,forced:Number.parseInt!=Kl},{parseInt:Kl});var mu=function(t){if("number"!=typeof t&&"Number"!=Lt(t))throw TypeError("Incorrect invocation");return+t},vu=1..toFixed,bu=Math.floor,_u=function(t,e,n){return 0===e?n:e%2==1?_u(t,e-1,n*t):_u(t*t,e/2,n)},wu=vu&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!Pt((function(){vu.call({})}));on({target:"Number",proto:!0,forced:wu},{toFixed:function(t){var e,n,r,i,o=mu(this),a=Fe(t),s=[0,0,0,0,0,0],l="",u="0",c=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*s[n],s[n]=r%1e7,r=bu(r/1e7)},f=function(t){for(var e=6,n=0;--e>=0;)n+=s[e],s[e]=bu(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==s[t]){var n=String(s[t]);e=""===e?n:e+Bs.call("0",7-n.length)+n}return e};if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*_u(2,69,1))-69)<0?o*_u(2,-e,1):o/_u(2,e,1),n*=4503599627370496,(e=52-e)>0){for(c(0,n),r=a;r>=7;)c(1e7,0),r-=7;for(c(_u(10,r,1),0),r=e-1;r>=23;)f(1<<23),r-=23;f(1<<r),c(1,1),f(2),u=p()}else c(0,n),c(1<<-e,0),u=p()+Bs.call("0",a);return a>0?l+((i=u.length)<=a?"0."+Bs.call("0",a-i)+u:u.slice(0,i-a)+"."+u.slice(i-a)):l+u}});var xu=1..toPrecision,Ou=Pt((function(){return"1"!==xu.call(1,void 0)}))||!Pt((function(){xu.call({})}));on({target:"Number",proto:!0,forced:Ou},{toPrecision:function(t){return void 0===t?xu.call(mu(this)):xu.call(mu(this),t)}});var Su=Math.log,ku=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Su(1+t)},Tu=Math.acosh,Eu=Math.log,Cu=Math.sqrt,Ru=Math.LN2,Du=!Tu||710!=Math.floor(Tu(Number.MAX_VALUE))||Tu(1/0)!=1/0;on({target:"Math",stat:!0,forced:Du},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Eu(t)+Ru:ku(t-1+Cu(t-1)*Cu(t+1))}});var Pu=Math.asinh,Iu=Math.log,Au=Math.sqrt;on({target:"Math",stat:!0,forced:!(Pu&&1/Pu(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Iu(e+Au(e*e+1)):e}});var Fu=Math.atanh,ju=Math.log;on({target:"Math",stat:!0,forced:!(Fu&&1/Fu(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:ju((1+t)/(1-t))/2}});var Mu=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1},zu=Math.abs,Lu=Math.pow;on({target:"Math",stat:!0},{cbrt:function(t){return Mu(t=+t)*Lu(zu(t),1/3)}});var Bu=Math.floor,Nu=Math.log,Uu=Math.LOG2E;on({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-Bu(Nu(t+.5)*Uu):32}});var Wu=Math.expm1,Hu=Math.exp,Vu=!Wu||Wu(10)>22025.465794806718||Wu(10)<22025.465794806718||-2e-17!=Wu(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Hu(t)-1}:Wu,Gu=Math.cosh,Zu=Math.abs,Xu=Math.E;on({target:"Math",stat:!0,forced:!Gu||Gu(710)===1/0},{cosh:function(t){var e=Vu(Zu(t)-1)+1;return(e+1/(e*Xu*Xu))*(Xu/2)}}),on({target:"Math",stat:!0,forced:Vu!=Math.expm1},{expm1:Vu});var qu=Math.abs,Yu=Math.pow,Ku=Yu(2,-52),Qu=Yu(2,-23),Ju=Yu(2,127)*(2-Qu),$u=Yu(2,-126),tc=Math.fround||function(t){var e,n,r=qu(t),i=Mu(t);return r<$u?i*function(t){return t+1/Ku-1/Ku}(r/$u/Qu)*$u*Qu:(n=(e=(1+Qu/Ku)*r)-(e-r))>Ju||n!=n?i*(1/0):i*n};on({target:"Math",stat:!0},{fround:tc});var ec=Math.hypot,nc=Math.abs,rc=Math.sqrt,ic=!!ec&&ec(1/0,NaN)!==1/0;on({target:"Math",stat:!0,forced:ic},{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=nc(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*rc(i)}});var oc=Math.imul,ac=Pt((function(){return-5!=oc(4294967295,5)||2!=oc.length}));on({target:"Math",stat:!0,forced:ac},{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}});var sc=Math.log,lc=Math.LOG10E;on({target:"Math",stat:!0},{log10:function(t){return sc(t)*lc}}),on({target:"Math",stat:!0},{log1p:ku});var uc=Math.log,cc=Math.LN2;on({target:"Math",stat:!0},{log2:function(t){return uc(t)/cc}}),on({target:"Math",stat:!0},{sign:Mu});var fc=Math.abs,pc=Math.exp,hc=Math.E,dc=Pt((function(){return-2e-17!=Math.sinh(-2e-17)}));on({target:"Math",stat:!0,forced:dc},{sinh:function(t){return fc(t=+t)<1?(Vu(t)-Vu(-t))/2:(pc(t-1)-pc(-t-1))*(hc/2)}});var yc=Math.exp;on({target:"Math",stat:!0},{tanh:function(t){var e=Vu(t=+t),n=Vu(-t);return e==1/0?1:n==1/0?-1:(e-n)/(yc(t)+yc(-t))}});var gc=Math.ceil,mc=Math.floor;on({target:"Math",stat:!0},{trunc:function(t){return(t>0?mc:gc)(t)}}),on({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var vc=Pt((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));on({target:"Date",proto:!0,forced:vc},{toJSON:function(t){var e=sn(this),n=Vt(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var bc=Ws.start,_c=Math.abs,wc=Date.prototype,xc=wc.getTime,Oc=wc.toISOString,Sc=Pt((function(){return"0385-07-25T07:06:39.999Z"!=Oc.call(new Date(-50000000000001))}))||!Pt((function(){Oc.call(new Date(NaN))}))?function(){if(!isFinite(xc.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+bc(_c(t),n?6:4,0)+"-"+bc(this.getUTCMonth()+1,2,0)+"-"+bc(this.getUTCDate(),2,0)+"T"+bc(this.getUTCHours(),2,0)+":"+bc(this.getUTCMinutes(),2,0)+":"+bc(this.getUTCSeconds(),2,0)+"."+bc(e,3,0)+"Z"}:Oc;on({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Sc},{toISOString:Sc});var kc=Date.prototype,Tc=kc.toString,Ec=kc.getTime;new Date(NaN)+""!="Invalid Date"&&Ce(kc,"toString",(function(){var t=Ec.call(this);return t==t?Tc.call(this):"Invalid Date"}));var Cc=dn("toPrimitive"),Rc=Date.prototype;Cc in Rc||ne(Rc,Cc,(function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return Vt($t(this),"number"!==t)}));var Dc=Pe("JSON","stringify"),Pc=/[\uD800-\uDFFF]/g,Ic=/^[\uD800-\uDBFF]$/,Ac=/^[\uDC00-\uDFFF]$/,Fc=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return Ic.test(t)&&!Ac.test(i)||Ac.test(t)&&!Ic.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},jc=Pt((function(){return'"\\udf06\\ud834"'!==Dc("\udf06\ud834")||'"\\udead"'!==Dc("\udead")}));Dc&&on({target:"JSON",stat:!0,forced:jc},{stringify:function(t,e,n){var r=Dc.apply(null,arguments);return"string"==typeof r?r.replace(Pc,Fc):r}});var Mc,zc,Lc,Bc=Dt.Promise,Nc=function(t,e,n){for(var r in e)Ce(t,r,e[r],n);return t},Uc=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Wc=/(iphone|ipod|ipad).*applewebkit/i.test(mn),Hc=Dt.location,Vc=Dt.setImmediate,Gc=Dt.clearImmediate,Zc=Dt.process,Xc=Dt.MessageChannel,qc=Dt.Dispatch,Yc=0,Kc={},Qc=function(t){if(Kc.hasOwnProperty(t)){var e=Kc[t];delete Kc[t],e()}},Jc=function(t){return function(){Qc(t)}},$c=function(t){Qc(t.data)},tf=function(t){Dt.postMessage(t+"",Hc.protocol+"//"+Hc.host)};Vc&&Gc||(Vc=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Kc[++Yc]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Mc(Yc),Yc},Gc=function(t){delete Kc[t]},"process"==Lt(Zc)?Mc=function(t){Zc.nextTick(Jc(t))}:qc&&qc.now?Mc=function(t){qc.now(Jc(t))}:Xc&&!Wc?(Lc=(zc=new Xc).port2,zc.port1.onmessage=$c,Mc=tr(Lc.postMessage,Lc,1)):!Dt.addEventListener||"function"!=typeof postMessage||Dt.importScripts||Pt(tf)||"file:"===Hc.protocol?Mc="onreadystatechange"in Yt("script")?function(t){zn.appendChild(Yt("script")).onreadystatechange=function(){zn.removeChild(this),Qc(t)}}:function(t){setTimeout(Jc(t),0)}:(Mc=tf,Dt.addEventListener("message",$c,!1)));var ef,nf,rf,of,af,sf,lf,uf,cf={set:Vc,clear:Gc},ff=Jt.f,pf=cf.set,hf=Dt.MutationObserver||Dt.WebKitMutationObserver,df=Dt.process,yf=Dt.Promise,gf="process"==Lt(df),mf=ff(Dt,"queueMicrotask"),vf=mf&&mf.value;vf||(ef=function(){var t,e;for(gf&&(t=df.domain)&&t.exit();nf;){e=nf.fn,nf=nf.next;try{e()}catch(t){throw nf?of():rf=void 0,t}}rf=void 0,t&&t.enter()},gf?of=function(){df.nextTick(ef)}:hf&&!Wc?(af=!0,sf=document.createTextNode(""),new hf(ef).observe(sf,{characterData:!0}),of=function(){sf.data=af=!af}):yf&&yf.resolve?(lf=yf.resolve(void 0),uf=lf.then,of=function(){uf.call(lf,ef)}):of=function(){pf.call(Dt,ef)});var bf,_f,wf,xf,Of=vf||function(t){var e={fn:t,next:void 0};rf&&(rf.next=e),nf||(nf=e,of()),rf=e},Sf=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=$n(e),this.reject=$n(n)},kf={f:function(t){return new Sf(t)}},Tf=function(t,e){if($t(t),Ht(e)&&e.constructor===t)return e;var n=kf.f(t);return(0,n.resolve)(e),n.promise},Ef=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Cf=cf.set,Rf=dn("species"),Df="Promise",Pf=Ee.get,If=Ee.set,Af=Ee.getterFor(Df),Ff=Bc,jf=Dt.TypeError,Mf=Dt.document,zf=Dt.process,Lf=Pe("fetch"),Bf=kf.f,Nf=Bf,Uf="process"==Lt(zf),Wf=!!(Mf&&Mf.createEvent&&Dt.dispatchEvent),Hf=nn(Df,(function(){if(ue(Ff)===String(Ff)){if(66===wn)return!0;if(!Uf&&"function"!=typeof PromiseRejectionEvent)return!0}if(wn>=51&&/native code/.test(Ff))return!1;var t=Ff.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Rf]=e,!(t.then((function(){}))instanceof e)})),Vf=Hf||!Si((function(t){Ff.all(t).catch((function(){}))})),Gf=function(t){var e;return!(!Ht(t)||"function"!=typeof(e=t.then))&&e},Zf=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;Of((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var s,l,u,c=r[a++],f=o?c.ok:c.fail,p=c.resolve,h=c.reject,d=c.domain;try{f?(o||(2===e.rejection&&Kf(t,e),e.rejection=1),!0===f?s=i:(d&&d.enter(),s=f(i),d&&(d.exit(),u=!0)),s===c.promise?h(jf("Promise-chain cycle")):(l=Gf(s))?l.call(s,p,h):p(s)):h(i)}catch(t){d&&!u&&d.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&qf(t,e)}))}},Xf=function(t,e,n){var r,i;Wf?((r=Mf.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Dt.dispatchEvent(r)):r={promise:e,reason:n},(i=Dt["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=Dt.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},qf=function(t,e){Cf.call(Dt,(function(){var n,r=e.value;if(Yf(e)&&(n=Ef((function(){Uf?zf.emit("unhandledRejection",r,t):Xf("unhandledrejection",t,r)})),e.rejection=Uf||Yf(e)?2:1,n.error))throw n.value}))},Yf=function(t){return 1!==t.rejection&&!t.parent},Kf=function(t,e){Cf.call(Dt,(function(){Uf?zf.emit("rejectionHandled",t):Xf("rejectionhandled",t,e.value)}))},Qf=function(t,e,n,r){return function(i){t(e,n,i,r)}},Jf=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Zf(t,e,!0))},$f=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw jf("Promise can't be resolved itself");var i=Gf(n);i?Of((function(){var r={done:!1};try{i.call(n,Qf($f,t,r,e),Qf(Jf,t,r,e))}catch(n){Jf(t,r,n,e)}})):(e.value=n,e.state=1,Zf(t,e,!1))}catch(n){Jf(t,{done:!1},n,e)}}};Hf&&(Ff=function(t){Uc(this,Ff,Df),$n(t),bf.call(this);var e=Pf(this);try{t(Qf($f,this,e),Qf(Jf,this,e))}catch(t){Jf(this,e,t)}},(bf=function(t){If(this,{type:Df,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Nc(Ff.prototype,{then:function(t,e){var n=Af(this),r=Bf(Ds(this,Ff));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Uf?zf.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Zf(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),_f=function(){var t=new bf,e=Pf(t);this.promise=t,this.resolve=Qf($f,t,e),this.reject=Qf(Jf,t,e)},kf.f=Bf=function(t){return t===Ff||t===wf?new _f(t):Nf(t)},"function"==typeof Bc&&(xf=Bc.prototype.then,Ce(Bc.prototype,"then",(function(t,e){var n=this;return new Ff((function(t,e){xf.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Lf&&on({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Tf(Ff,Lf.apply(Dt,arguments))}}))),on({global:!0,wrap:!0,forced:Hf},{Promise:Ff}),Jn(Ff,Df,!1),Wa(Df),wf=Pe(Df),on({target:Df,stat:!0,forced:Hf},{reject:function(t){var e=Bf(this);return e.reject.call(void 0,t),e.promise}}),on({target:Df,stat:!0,forced:Hf},{resolve:function(t){return Tf(this,t)}}),on({target:Df,stat:!0,forced:Vf},{all:function(t){var e=this,n=Bf(e),r=n.resolve,i=n.reject,o=Ef((function(){var n=$n(e.resolve),o=[],a=0,s=1;Li(t,(function(t){var l=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Bf(e),r=n.reject,i=Ef((function(){var i=$n(e.resolve);Li(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),on({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=kf.f(e),r=n.resolve,i=n.reject,o=Ef((function(){var n=$n(e.resolve),i=[],o=0,a=1;Li(t,(function(t){var s=o++,l=!1;i.push(void 0),a++,n.call(e,t).then((function(t){l||(l=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){l||(l=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var tp=!!Bc&&Pt((function(){Bc.prototype.finally.call({then:function(){}},(function(){}))}));on({target:"Promise",proto:!0,real:!0,forced:tp},{finally:function(t){var e=Ds(this,Pe("Promise")),n="function"==typeof t;return this.then(n?function(n){return Tf(e,t()).then((function(){return n}))}:t,n?function(n){return Tf(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof Bc||Bc.prototype.finally||Ce(Bc.prototype,"finally",Pe("Promise").prototype.finally);var ep=function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=Dt[t],s=a&&a.prototype,l=a,u={},c=function(t){var e=s[t];Ce(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!Ht(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!Ht(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!Ht(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(nn(t,"function"!=typeof a||!(i||s.forEach&&!Pt((function(){(new a).entries().next()})))))l=n.getConstructor(e,t,r,o),Fi.REQUIRED=!0;else if(nn(t,!0)){var f=new l,p=f[o](i?{}:-0,1)!=f,h=Pt((function(){f.has(1)})),d=Si((function(t){new a(t)})),y=!i&&Pt((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));d||((l=e((function(e,n){Uc(e,l,t);var i=xl(new a,e,l);return null!=n&&Li(n,i[o],i,r),i}))).prototype=s,s.constructor=l),(h||y)&&(c("delete"),c("has"),r&&c("get")),(y||p)&&c(o),i&&s.clear&&delete s.clear}return u[t]=l,on({global:!0,forced:l!=a},u),Jn(l,t),i||n.setStrong(l,t,r),l},np=ee.f,rp=Fi.fastKey,ip=Ee.set,op=Ee.getterFor,ap={getConstructor:function(t,e,n,r){var i=t((function(t,o){Uc(t,i,e),ip(t,{type:e,index:Wn(null),first:void 0,last:void 0,size:0}),It||(t.size=0),null!=o&&Li(o,t[r],t,n)})),o=op(e),a=function(t,e,n){var r,i,a=o(t),l=s(t,e);return l?l.value=n:(a.last=l={index:i=rp(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=l),r&&(r.next=l),It?a.size++:t.size++,"F"!==i&&(a.index[i]=l)),t},s=function(t,e){var n,r=o(t),i=rp(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Nc(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,It?t.size=0:this.size=0},delete:function(t){var e=o(this),n=s(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),It?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=o(this),r=tr(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Nc(i.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),It&&np(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=op(e),o=op(r);ui(t,e,(function(t,e){ip(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Wa(e)}},sp=(ep("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),ap),ep("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),ap),Fi.getWeakData),lp=Ee.set,up=Ee.getterFor,cp=rr.find,fp=rr.findIndex,pp=0,hp=function(t){return t.frozen||(t.frozen=new dp)},dp=function(){this.entries=[]},yp=function(t,e){return cp(t.entries,(function(t){return t[0]===e}))};dp.prototype={get:function(t){var e=yp(this,t);if(e)return e[1]},has:function(t){return!!yp(this,t)},set:function(t,e){var n=yp(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=fp(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}};var gp={getConstructor:function(t,e,n,r){var i=t((function(t,o){Uc(t,i,e),lp(t,{type:e,id:pp++,frozen:void 0}),null!=o&&Li(o,t[r],t,n)})),o=up(e),a=function(t,e,n){var r=o(t),i=sp($t(e),!0);return!0===i?hp(r).set(e,n):i[r.id]=n,t};return Nc(i.prototype,{delete:function(t){var e=o(this);if(!Ht(t))return!1;var n=sp(t);return!0===n?hp(e).delete(t):n&&Zt(n,e.id)&&delete n[e.id]},has:function(t){var e=o(this);if(!Ht(t))return!1;var n=sp(t);return!0===n?hp(e).has(t):n&&Zt(n,e.id)}}),Nc(i.prototype,n?{get:function(t){var e=o(this);if(Ht(t)){var n=sp(t);return!0===n?hp(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return a(this,t,e)}}:{add:function(t){return a(this,t,!0)}}),i}};Object(i.g)((function(t){var e,n=Ee.enforce,r=!Dt.ActiveXObject&&"ActiveXObject"in Dt,i=Object.isExtensible,o=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},a=t.exports=ep("WeakMap",o,gp);if(fe&&r){e=gp.getConstructor(o,"WeakMap",!0),Fi.REQUIRED=!0;var s=a.prototype,l=s.delete,u=s.has,c=s.get,f=s.set;Nc(s,{delete:function(t){if(Ht(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),l.call(this,t)||r.frozen.delete(t)}return l.call(this,t)},has:function(t){if(Ht(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),u.call(this,t)||r.frozen.has(t)}return u.call(this,t)},get:function(t){if(Ht(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),u.call(this,t)?c.call(this,t):r.frozen.get(t)}return c.call(this,t)},set:function(t,r){if(Ht(t)&&!i(t)){var o=n(this);o.frozen||(o.frozen=new e),u.call(this,t)?f.call(this,t,r):o.frozen.set(t,r)}else f.call(this,t,r);return this}})}})),ep("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),gp);var mp="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,vp=function(t){if(void 0===t)return 0;var e=Fe(t),n=Me(e);if(e!==n)throw RangeError("Wrong length or index");return n},bp=Math.abs,_p=Math.pow,wp=Math.floor,xp=Math.log,Op=Math.LN2,Sp=Ze.f,kp=ee.f,Tp=Ee.get,Ep=Ee.set,Cp=Dt.ArrayBuffer,Rp=Cp,Dp=Dt.DataView,Pp=Dp&&Dp.prototype,Ip=Object.prototype,Ap=Dt.RangeError,Fp=function(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,l=(1<<s)-1,u=l>>1,c=23===e?_p(2,-24)-_p(2,-77):0,f=t<0||0===t&&1/t<0?1:0,p=0;for((t=bp(t))!=t||t===1/0?(i=t!=t?1:0,r=l):(r=wp(xp(t)/Op),t*(o=_p(2,-r))<1&&(r--,o*=2),(t+=r+u>=1?c/o:c*_p(2,1-u))*o>=2&&(r++,o/=2),r+u>=l?(i=0,r=l):r+u>=1?(i=(t*o-1)*_p(2,e),r+=u):(i=t*_p(2,u-1)*_p(2,e),r=0));e>=8;a[p++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[p++]=255&r,r/=256,s-=8);return a[--p]|=128*f,a},jp=function(t,e){var n,r=t.length,i=8*r-e-1,o=(1<<i)-1,a=o>>1,s=i-7,l=r-1,u=t[l--],c=127&u;for(u>>=7;s>0;c=256*c+t[l],l--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=e;s>0;n=256*n+t[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return n?NaN:u?-1/0:1/0;n+=_p(2,e),c-=a}return(u?-1:1)*n*_p(2,c-e)},Mp=function(t){return[255&t]},zp=function(t){return[255&t,t>>8&255]},Lp=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Bp=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Np=function(t){return Fp(t,23,4)},Up=function(t){return Fp(t,52,8)},Wp=function(t,e){kp(t.prototype,e,{get:function(){return Tp(this)[e]}})},Hp=function(t,e,n,r){var i=vp(n),o=Tp(t);if(i+e>o.byteLength)throw Ap("Wrong index");var a=Tp(o.buffer).bytes,s=i+o.byteOffset,l=a.slice(s,s+e);return r?l:l.reverse()},Vp=function(t,e,n,r,i,o){var a=vp(n),s=Tp(t);if(a+e>s.byteLength)throw Ap("Wrong index");for(var l=Tp(s.buffer).bytes,u=a+s.byteOffset,c=r(+i),f=0;f<e;f++)l[u+f]=c[o?f:e-f-1]};if(mp){if(!Pt((function(){Cp(1)}))||!Pt((function(){new Cp(-1)}))||Pt((function(){return new Cp,new Cp(1.5),new Cp(NaN),"ArrayBuffer"!=Cp.name}))){for(var Gp,Zp=(Rp=function(t){return Uc(this,Rp),new Cp(vp(t))}).prototype=Cp.prototype,Xp=Sp(Cp),qp=0;Xp.length>qp;)(Gp=Xp[qp++])in Rp||ne(Rp,Gp,Cp[Gp]);Zp.constructor=Rp}ii&&Yr(Pp)!==Ip&&ii(Pp,Ip);var Yp=new Dp(new Rp(2)),Kp=Pp.setInt8;Yp.setInt8(0,2147483648),Yp.setInt8(1,2147483649),!Yp.getInt8(0)&&Yp.getInt8(1)||Nc(Pp,{setInt8:function(t,e){Kp.call(this,t,e<<24>>24)},setUint8:function(t,e){Kp.call(this,t,e<<24>>24)}},{unsafe:!0})}else Rp=function(t){Uc(this,Rp,"ArrayBuffer");var e=vp(t);Ep(this,{bytes:Ao.call(new Array(e),0),byteLength:e}),It||(this.byteLength=e)},Dp=function(t,e,n){Uc(this,Dp,"DataView"),Uc(t,Rp,"DataView");var r=Tp(t).byteLength,i=Fe(e);if(i<0||i>r)throw Ap("Wrong offset");if(i+(n=void 0===n?r-i:Me(n))>r)throw Ap("Wrong length");Ep(this,{buffer:t,byteLength:n,byteOffset:i}),It||(this.buffer=t,this.byteLength=n,this.byteOffset=i)},It&&(Wp(Rp,"byteLength"),Wp(Dp,"buffer"),Wp(Dp,"byteLength"),Wp(Dp,"byteOffset")),Nc(Dp.prototype,{getInt8:function(t){return Hp(this,1,t)[0]<<24>>24},getUint8:function(t){return Hp(this,1,t)[0]},getInt16:function(t){var e=Hp(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Hp(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Bp(Hp(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Bp(Hp(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return jp(Hp(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return jp(Hp(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Vp(this,1,t,Mp,e)},setUint8:function(t,e){Vp(this,1,t,Mp,e)},setInt16:function(t,e){Vp(this,2,t,zp,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Vp(this,2,t,zp,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Vp(this,4,t,Lp,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Vp(this,4,t,Lp,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Vp(this,4,t,Np,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Vp(this,8,t,Up,e,arguments.length>2?arguments[2]:void 0)}});Jn(Rp,"ArrayBuffer"),Jn(Dp,"DataView");var Qp={ArrayBuffer:Rp,DataView:Dp},Jp=Qp.ArrayBuffer,$p=Dt.ArrayBuffer;on({global:!0,forced:$p!==Jp},{ArrayBuffer:Jp}),Wa("ArrayBuffer");var th,eh=ee.f,nh=Dt.Int8Array,rh=nh&&nh.prototype,ih=Dt.Uint8ClampedArray,oh=ih&&ih.prototype,ah=nh&&Yr(nh),sh=rh&&Yr(rh),lh=Object.prototype,uh=lh.isPrototypeOf,ch=dn("toStringTag"),fh=ye("TYPED_ARRAY_TAG"),ph=mp&&!!ii&&"Opera"!==In(Dt.opera),hh=!1,dh={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},yh=function(t){return Ht(t)&&Zt(dh,In(t))};for(th in dh)Dt[th]||(ph=!1);if((!ph||"function"!=typeof ah||ah===Function.prototype)&&(ah=function(){throw TypeError("Incorrect invocation")},ph))for(th in dh)Dt[th]&&ii(Dt[th],ah);if((!ph||!sh||sh===lh)&&(sh=ah.prototype,ph))for(th in dh)Dt[th]&&ii(Dt[th].prototype,sh);if(ph&&Yr(oh)!==sh&&ii(oh,sh),It&&!Zt(sh,ch))for(th in hh=!0,eh(sh,ch,{get:function(){return Ht(this)?this[fh]:void 0}}),dh)Dt[th]&&ne(Dt[th],fh,th);var gh={NATIVE_ARRAY_BUFFER_VIEWS:ph,TYPED_ARRAY_TAG:hh&&fh,aTypedArray:function(t){if(yh(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(ii){if(uh.call(ah,t))return t}else for(var e in dh)if(Zt(dh,th)){var n=Dt[e];if(n&&(t===n||uh.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(It){if(n)for(var r in dh){var i=Dt[r];i&&Zt(i.prototype,t)&&delete i.prototype[t]}sh[t]&&!n||Ce(sh,t,n?e:ph&&rh[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(It){if(ii){if(n)for(r in dh)(i=Dt[r])&&Zt(i,t)&&delete i[t];if(ah[t]&&!n)return;try{return Ce(ah,t,n?e:ph&&nh[t]||e)}catch(t){}}for(r in dh)!(i=Dt[r])||i[t]&&!n||Ce(i,t,e)}},isView:function(t){var e=In(t);return"DataView"===e||Zt(dh,e)},isTypedArray:yh,TypedArray:ah,TypedArrayPrototype:sh};on({target:"ArrayBuffer",stat:!0,forced:!gh.NATIVE_ARRAY_BUFFER_VIEWS},{isView:gh.isView});var mh=Qp.ArrayBuffer,vh=Qp.DataView,bh=mh.prototype.slice,_h=Pt((function(){return!new mh(2).slice(1,void 0).byteLength}));on({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:_h},{slice:function(t,e){if(void 0!==bh&&void 0===e)return bh.call($t(this),t);for(var n=$t(this).byteLength,r=Be(t,n),i=Be(void 0===e?n:e,n),o=new(Ds(this,mh))(Me(i-r)),a=new vh(this),s=new vh(o),l=0;r<i;)s.setUint8(l++,a.getUint8(r++));return o}}),on({global:!0,forced:!mp},{DataView:Qp.DataView});var wh=gh.NATIVE_ARRAY_BUFFER_VIEWS,xh=Dt.ArrayBuffer,Oh=Dt.Int8Array,Sh=!wh||!Pt((function(){Oh(1)}))||!Pt((function(){new Oh(-1)}))||!Si((function(t){new Oh,new Oh(null),new Oh(1.5),new Oh(t)}),!0)||Pt((function(){return 1!==new Oh(new xh(2),1,void 0).length})),kh=function(t,e){var n=function(t){var e=Fe(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}(t);if(n%e)throw RangeError("Wrong offset");return n},Th=gh.aTypedArrayConstructor,Eh=function(t){var e,n,r,i,o,a,s=sn(t),l=arguments.length,u=l>1?arguments[1]:void 0,c=void 0!==u,f=vi(s);if(null!=f&&!gi(f))for(a=(o=f.call(s)).next,s=[];!(i=a.call(o)).done;)s.push(i.value);for(c&&l>2&&(u=tr(u,arguments[2],2)),n=Me(s.length),r=new(Th(this))(n),e=0;n>e;e++)r[e]=c?u(s[e],e):s[e];return r},Ch=Object(i.g)((function(t){var e=Ze.f,n=rr.forEach,r=Ee.get,i=Ee.set,o=ee.f,a=Jt.f,s=Math.round,l=Dt.RangeError,u=Qp.ArrayBuffer,c=Qp.DataView,f=gh.NATIVE_ARRAY_BUFFER_VIEWS,p=gh.TYPED_ARRAY_TAG,h=gh.TypedArray,d=gh.TypedArrayPrototype,y=gh.aTypedArrayConstructor,g=gh.isTypedArray,m=function(t,e){for(var n=0,r=e.length,i=new(y(t))(r);r>n;)i[n]=e[n++];return i},v=function(t,e){o(t,e,{get:function(){return r(this)[e]}})},b=function(t){var e;return t instanceof u||"ArrayBuffer"==(e=In(t))||"SharedArrayBuffer"==e},_=function(t,e){return g(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},w=function(t,e){return _(t,e=Vt(e,!0))?Mt(2,t[e]):a(t,e)},x=function(t,e,n){return!(_(t,e=Vt(e,!0))&&Ht(n)&&Zt(n,"value"))||Zt(n,"get")||Zt(n,"set")||n.configurable||Zt(n,"writable")&&!n.writable||Zt(n,"enumerable")&&!n.enumerable?o(t,e,n):(t[e]=n.value,t)};It?(f||(Jt.f=w,ee.f=x,v(d,"buffer"),v(d,"byteOffset"),v(d,"byteLength"),v(d,"length")),on({target:"Object",stat:!0,forced:!f},{getOwnPropertyDescriptor:w,defineProperty:x}),t.exports=function(t,a,y){var v=t.match(/\d+$/)[0]/8,_=t+(y?"Clamped":"")+"Array",w="get"+t,x="set"+t,O=Dt[_],S=O,k=S&&S.prototype,T={},E=function(t,e){o(t,e,{get:function(){return function(t,e){var n=r(t);return n.view[w](e*v+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var i=r(t);y&&(n=(n=s(n))<0?0:n>255?255:255&n),i.view[x](e*v+i.byteOffset,n,!0)}(this,e,t)},enumerable:!0})};f?Sh&&(S=a((function(t,e,n,r){return Uc(t,S,_),xl(Ht(e)?b(e)?void 0!==r?new O(e,kh(n,v),r):void 0!==n?new O(e,kh(n,v)):new O(e):g(e)?m(S,e):Eh.call(S,e):new O(vp(e)),t,S)})),ii&&ii(S,h),n(e(O),(function(t){t in S||ne(S,t,O[t])})),S.prototype=k):(S=a((function(t,e,n,r){Uc(t,S,_);var o,a,s,f=0,p=0;if(Ht(e)){if(!b(e))return g(e)?m(S,e):Eh.call(S,e);o=e,p=kh(n,v);var h=e.byteLength;if(void 0===r){if(h%v)throw l("Wrong length");if((a=h-p)<0)throw l("Wrong length")}else if((a=Me(r)*v)+p>h)throw l("Wrong length");s=a/v}else s=vp(e),o=new u(a=s*v);for(i(t,{buffer:o,byteOffset:p,byteLength:a,length:s,view:new c(o)});f<s;)E(t,f++)})),ii&&ii(S,h),k=S.prototype=Wn(d)),k.constructor!==S&&ne(k,"constructor",S),p&&ne(k,p,_),T[_]=S,on({global:!0,forced:S!=O,sham:!f},T),"BYTES_PER_ELEMENT"in S||ne(S,"BYTES_PER_ELEMENT",v),"BYTES_PER_ELEMENT"in k||ne(k,"BYTES_PER_ELEMENT",v),Wa(_)}):t.exports=function(){}}));Ch("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ch("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ch("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0),Ch("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ch("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ch("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ch("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ch("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Ch("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}})),(0,gh.exportTypedArrayStaticMethod)("from",Eh,Sh);var Rh=gh.aTypedArrayConstructor;(0,gh.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,n=new(Rh(this))(e);e>t;)n[t]=arguments[t++];return n}),Sh);var Dh=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("copyWithin",(function(t,e){return wo.call(Dh(this),t,e,arguments.length>2?arguments[2]:void 0)}));var Ph=rr.every,Ih=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("every",(function(t){return Ph(Ih(this),t,arguments.length>1?arguments[1]:void 0)}));var Ah=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("fill",(function(t){return Ao.apply(Ah(this),arguments)}));var Fh=rr.filter,jh=gh.aTypedArray,Mh=gh.aTypedArrayConstructor;(0,gh.exportTypedArrayMethod)("filter",(function(t){for(var e=Fh(jh(this),t,arguments.length>1?arguments[1]:void 0),n=Ds(this,this.constructor),r=0,i=e.length,o=new(Mh(n))(i);i>r;)o[r]=e[r++];return o}));var zh=rr.find,Lh=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("find",(function(t){return zh(Lh(this),t,arguments.length>1?arguments[1]:void 0)}));var Bh=rr.findIndex,Nh=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("findIndex",(function(t){return Bh(Nh(this),t,arguments.length>1?arguments[1]:void 0)}));var Uh=rr.forEach,Wh=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("forEach",(function(t){Uh(Wh(this),t,arguments.length>1?arguments[1]:void 0)}));var Hh=Ue.includes,Vh=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("includes",(function(t){return Hh(Vh(this),t,arguments.length>1?arguments[1]:void 0)}));var Gh=Ue.indexOf,Zh=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("indexOf",(function(t){return Gh(Zh(this),t,arguments.length>1?arguments[1]:void 0)}));var Xh=dn("iterator"),qh=Dt.Uint8Array,Yh=Ga.values,Kh=Ga.keys,Qh=Ga.entries,Jh=gh.aTypedArray,$h=gh.exportTypedArrayMethod,td=qh&&qh.prototype[Xh],ed=!!td&&("values"==td.name||null==td.name),nd=function(){return Yh.call(Jh(this))};$h("entries",(function(){return Qh.call(Jh(this))})),$h("keys",(function(){return Kh.call(Jh(this))})),$h("values",nd,!ed),$h(Xh,nd,!ed);var rd=gh.aTypedArray,id=[].join;(0,gh.exportTypedArrayMethod)("join",(function(t){return id.apply(rd(this),arguments)}));var od=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("lastIndexOf",(function(t){return ca.apply(od(this),arguments)}));var ad=rr.map,sd=gh.aTypedArray,ld=gh.aTypedArrayConstructor;(0,gh.exportTypedArrayMethod)("map",(function(t){return ad(sd(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(ld(Ds(t,t.constructor)))(e)}))}));var ud=ya.left,cd=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("reduce",(function(t){return ud(cd(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var fd=ya.right,pd=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("reduceRight",(function(t){return fd(pd(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var hd=gh.aTypedArray,dd=gh.exportTypedArrayMethod,yd=Math.floor;dd("reverse",(function(){for(var t,e=hd(this).length,n=yd(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}));var gd=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("set",(function(t){gd(this);var e=kh(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=sn(t),i=Me(r.length),o=0;if(i+e>n)throw RangeError("Wrong length");for(;o<i;)this[e+o]=r[o++]}),Pt((function(){new Int8Array(1).set({})})));var md=gh.aTypedArray,vd=gh.aTypedArrayConstructor,bd=[].slice;(0,gh.exportTypedArrayMethod)("slice",(function(t,e){for(var n=bd.call(md(this),t,e),r=Ds(this,this.constructor),i=0,o=n.length,a=new(vd(r))(o);o>i;)a[i]=n[i++];return a}),Pt((function(){new Int8Array(1).slice()})));var _d=rr.some,wd=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("some",(function(t){return _d(wd(this),t,arguments.length>1?arguments[1]:void 0)}));var xd=gh.aTypedArray,Od=[].sort;(0,gh.exportTypedArrayMethod)("sort",(function(t){return Od.call(xd(this),t)}));var Sd=gh.aTypedArray;(0,gh.exportTypedArrayMethod)("subarray",(function(t,e){var n=Sd(this),r=n.length,i=Be(t,r);return new(Ds(n,n.constructor))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,Me((void 0===e?r:Be(e,r))-i))}));var kd=Dt.Int8Array,Td=gh.aTypedArray,Ed=gh.exportTypedArrayMethod,Cd=[].toLocaleString,Rd=[].slice,Dd=!!kd&&Pt((function(){Cd.call(new kd(1))}));Ed("toLocaleString",(function(){return Cd.apply(Dd?Rd.call(Td(this)):Td(this),arguments)}),Pt((function(){return[1,2].toLocaleString()!=new kd([1,2]).toLocaleString()}))||!Pt((function(){kd.prototype.toLocaleString.call([1,2])})));var Pd=gh.exportTypedArrayMethod,Id=Dt.Uint8Array,Ad=Id&&Id.prototype||{},Fd=[].toString,jd=[].join;Pt((function(){Fd.call({})}))&&(Fd=function(){return jd.call(this)});var Md=Ad.toString!=Fd;Pd("toString",Fd,Md);var zd=Pe("Reflect","apply"),Ld=Function.apply,Bd=!Pt((function(){zd((function(){}))}));on({target:"Reflect",stat:!0,forced:Bd},{apply:function(t,e,n){return $n(t),$t(n),zd?zd(t,e,n):Ld.call(t,e,n)}});var Nd=Pe("Reflect","construct"),Ud=Pt((function(){function t(){}return!(Nd((function(){}),[],t)instanceof t)})),Wd=!Pt((function(){Nd((function(){}))})),Hd=Ud||Wd;on({target:"Reflect",stat:!0,forced:Hd,sham:Hd},{construct:function(t,e){$n(t),$t(e);var n=arguments.length<3?t:$n(arguments[2]);if(Wd&&!Ud)return Nd(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(fo.apply(t,r))}var i=n.prototype,o=Wn(Ht(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return Ht(a)?a:o}});var Vd=Pt((function(){Reflect.defineProperty(ee.f({},1,{value:1}),1,{value:2})}));on({target:"Reflect",stat:!0,forced:Vd,sham:!It},{defineProperty:function(t,e,n){$t(t);var r=Vt(e,!0);$t(n);try{return ee.f(t,r,n),!0}catch(t){return!1}}});var Gd=Jt.f;on({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=Gd($t(t),e);return!(n&&!n.configurable)&&delete t[e]}}),on({target:"Reflect",stat:!0},{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return $t(e)===o?e[n]:(r=Jt.f(e,n))?Zt(r,"value")?r.value:void 0===r.get?void 0:r.get.call(o):Ht(i=Yr(e))?t(i,n,o):void 0}}),on({target:"Reflect",stat:!0,sham:!It},{getOwnPropertyDescriptor:function(t,e){return Jt.f($t(t),e)}}),on({target:"Reflect",stat:!0,sham:!Zr},{getPrototypeOf:function(t){return Yr($t(t))}}),on({target:"Reflect",stat:!0},{has:function(t,e){return e in t}});var Zd=Object.isExtensible;on({target:"Reflect",stat:!0},{isExtensible:function(t){return $t(t),!Zd||Zd(t)}}),on({target:"Reflect",stat:!0},{ownKeys:qe}),on({target:"Reflect",stat:!0,sham:!Ai},{preventExtensions:function(t){$t(t);try{var e=Pe("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}});var Xd=Pt((function(){var t=ee.f({},"a",{configurable:!0});return!1!==Reflect.set(Yr(t),"a",1,t)}));on({target:"Reflect",stat:!0,forced:Xd},{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],s=Jt.f($t(e),n);if(!s){if(Ht(o=Yr(e)))return t(o,n,r,a);s=Mt(0)}if(Zt(s,"value")){if(!1===s.writable||!Ht(a))return!1;if(i=Jt.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,ee.f(a,n,i)}else ee.f(a,n,Mt(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}}),ii&&on({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){$t(t),ri(e);try{return ii(t,e),!0}catch(t){return!1}}});var qd={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Yd in qd){var Kd=Dt[Yd],Qd=Kd&&Kd.prototype;if(Qd&&Qd.forEach!==qo)try{ne(Qd,"forEach",qo)}catch(us){Qd.forEach=qo}}var Jd=dn("iterator"),$d=dn("toStringTag"),ty=Ga.values;for(var ey in qd){var ny=Dt[ey],ry=ny&&ny.prototype;if(ry){if(ry[Jd]!==ty)try{ne(ry,Jd,ty)}catch(us){ry[Jd]=ty}if(ry[$d]||ne(ry,$d,ey),qd[ey])for(var iy in Ga)if(ry[iy]!==Ga[iy])try{ne(ry,iy,Ga[iy])}catch(us){ry[iy]=Ga[iy]}}}var oy=!Dt.setImmediate||!Dt.clearImmediate;on({global:!0,bind:!0,enumerable:!0,forced:oy},{setImmediate:cf.set,clearImmediate:cf.clear});var ay=Dt.process,sy="process"==Lt(ay);on({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=sy&&ay.domain;Of(e?e.bind(t):t)}});var ly=[].slice,uy=/MSIE .\./.test(mn),cy=function(t){return function(e,n){var r=arguments.length>2,i=r?ly.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};on({global:!0,bind:!0,forced:uy},{setTimeout:cy(Dt.setTimeout),setInterval:cy(Dt.setInterval)});var fy=dn("iterator"),py=!Pt((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[fy]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),hy=/[^\0-\u007E]/,dy=/[.\u3002\uFF0E\uFF61]/g,yy="Overflow: input needs wider integers to process",gy=Math.floor,my=String.fromCharCode,vy=function(t){return t+22+75*(t<26)},by=function(t,e,n){var r=0;for(t=n?gy(t/700):t>>1,t+=gy(t/e);t>455;r+=36)t=gy(t/35);return gy(r+36*t/(t+38))},_y=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,o=128,a=0,s=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(my(n));var l=r.length,u=l;for(l&&r.push("-");u<i;){var c=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<c&&(c=n);var f=u+1;if(c-o>gy((2147483647-a)/f))throw RangeError(yy);for(a+=(c-o)*f,o=c,e=0;e<t.length;e++){if((n=t[e])<o&&++a>2147483647)throw RangeError(yy);if(n==o){for(var p=a,h=36;;h+=36){var d=h<=s?1:h>=s+26?26:h-s;if(p<d)break;var y=p-d,g=36-d;r.push(my(vy(d+y%g))),p=gy(y/g)}r.push(my(vy(p))),s=by(a,f,u==l),a=0,++u}}++a,++o}return r.join("")},wy=function(t){var e=vi(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return $t(e.call(t))},xy=Pe("fetch"),Oy=Pe("Headers"),Sy=dn("iterator"),ky=Ee.set,Ty=Ee.getterFor("URLSearchParams"),Ey=Ee.getterFor("URLSearchParamsIterator"),Cy=/\+/g,Ry=Array(4),Dy=function(t){return Ry[t-1]||(Ry[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},Py=function(t){try{return decodeURIComponent(t)}catch(e){return t}},Iy=function(t){var e=t.replace(Cy," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(Dy(n--),Py);return e}},Ay=/[!'()~]|%20/g,Fy={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},jy=function(t){return Fy[t]},My=function(t){return encodeURIComponent(t).replace(Ay,jy)},zy=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:Iy(r.shift()),value:Iy(r.join("="))}))},Ly=function(t){this.entries.length=0,zy(this.entries,t)},By=function(t,e){if(t<e)throw TypeError("Not enough arguments")},Ny=ni((function(t,e){ky(this,{type:"URLSearchParamsIterator",iterator:wy(Ty(t).entries),kind:e})}),"Iterator",(function(){var t=Ey(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),Uy=function(){Uc(this,Uy,"URLSearchParams");var t,e,n,r,i,o,a,s,l,u=arguments.length>0?arguments[0]:void 0,c=this,f=[];if(ky(c,{type:"URLSearchParams",entries:f,updateURL:function(){},updateSearchParams:Ly}),void 0!==u)if(Ht(u))if("function"==typeof(t=vi(u)))for(n=(e=t.call(u)).next;!(r=n.call(e)).done;){if((a=(o=(i=wy($t(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:a.value+"",value:s.value+""})}else for(l in u)Zt(u,l)&&f.push({key:l,value:u[l]+""});else zy(f,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},Wy=Uy.prototype;Nc(Wy,{append:function(t,e){By(arguments.length,2);var n=Ty(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){By(arguments.length,1);for(var e=Ty(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){By(arguments.length,1);for(var e=Ty(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){By(arguments.length,1);for(var e=Ty(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){By(arguments.length,1);for(var e=Ty(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){By(arguments.length,1);for(var n,r=Ty(this),i=r.entries,o=!1,a=t+"",s=e+"",l=0;l<i.length;l++)(n=i[l]).key===a&&(o?i.splice(l--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=Ty(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=Ty(this).entries,r=tr(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new Ny(this,"keys")},values:function(){return new Ny(this,"values")},entries:function(){return new Ny(this,"entries")}},{enumerable:!0}),Ce(Wy,Sy,Wy.entries),Ce(Wy,"toString",(function(){for(var t,e=Ty(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(My(t.key)+"="+My(t.value));return n.join("&")}),{enumerable:!0}),Jn(Uy,"URLSearchParams"),on({global:!0,forced:!py},{URLSearchParams:Uy}),py||"function"!=typeof xy||"function"!=typeof Oy||on({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(Ht(e=arguments[1])&&(n=e.body,"URLSearchParams"===In(n)&&((r=e.headers?new Oy(e.headers):new Oy).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=Wn(e,{body:Mt(0,String(n)),headers:Mt(0,r)}))),i.push(e)),xy.apply(this,i)}});var Hy,Vy={URLSearchParams:Uy,getState:Ty},Gy=Gr.codeAt,Zy=Dt.URL,Xy=Vy.URLSearchParams,qy=Vy.getState,Yy=Ee.set,Ky=Ee.getterFor("URL"),Qy=Math.floor,Jy=Math.pow,$y=/[A-Za-z]/,tg=/[\d+-.A-Za-z]/,eg=/\d/,ng=/^(0x|0X)/,rg=/^[0-7]+$/,ig=/^\d+$/,og=/^[\dA-Fa-f]+$/,ag=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,sg=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,lg=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ug=/[\u0009\u000A\u000D]/g,cg=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=pg(e.slice(1,-1))))return"Invalid host";t.host=n}else if(_g(t)){if(e=function(t){var e,n,r=[],i=t.toLowerCase().replace(dy,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(hy.test(n)?"xn--"+_y(n):n);return r.join(".")}(e),ag.test(e))return"Invalid host";if(null===(n=fg(e)))return"Invalid host";t.host=n}else{if(sg.test(e))return"Invalid host";for(n="",r=bi(e),i=0;i<r.length;i++)n+=vg(r[i],dg);t.host=n}},fg=function(t){var e,n,r,i,o,a,s,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(e=l.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=l[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=ng.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?ig:8==o?rg:og).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=Jy(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*Jy(256,3-r);return s},pg=function(t){var e,n,r,i,o,a,s,l=[0,0,0,0,0,0,0,0],u=0,c=null,f=0,p=function(){return t.charAt(f)};if(":"==p()){if(":"!=t.charAt(1))return;f+=2,c=++u}for(;p();){if(8==u)return;if(":"!=p()){for(e=n=0;n<4&&og.test(p());)e=16*e+parseInt(p(),16),f++,n++;if("."==p()){if(0==n)return;if(f-=n,u>6)return;for(r=0;p();){if(i=null,r>0){if(!("."==p()&&r<4))return;f++}if(!eg.test(p()))return;for(;eg.test(p());){if(o=parseInt(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}l[u]=256*l[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==p()){if(f++,!p())return}else if(p())return;l[u++]=e}else{if(null!==c)return;f++,c=++u}}if(null!==c)for(a=u-c,u=7;0!=u&&a>0;)s=l[u],l[u--]=l[c+a-1],l[c+--a]=s;else if(8!=u)return;return l},hg=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=Qy(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},dg={},yg=Ci({},dg,{" ":1,'"':1,"<":1,">":1,"`":1}),gg=Ci({},yg,{"#":1,"?":1,"{":1,"}":1}),mg=Ci({},gg,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),vg=function(t,e){var n=Gy(t,0);return n>32&&n<127&&!Zt(e,t)?t:encodeURIComponent(t)},bg={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_g=function(t){return Zt(bg,t.scheme)},wg=function(t){return""!=t.username||""!=t.password},xg=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Og=function(t,e){var n;return 2==t.length&&$y.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},Sg=function(t){var e;return t.length>1&&Og(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},kg=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&Og(e[0],!0)||e.pop()},Tg=function(t){return"."===t||"%2e"===t.toLowerCase()},Eg={},Cg={},Rg={},Dg={},Pg={},Ig={},Ag={},Fg={},jg={},Mg={},zg={},Lg={},Bg={},Ng={},Ug={},Wg={},Hg={},Vg={},Gg={},Zg={},Xg={},qg=function(t,e,n,r){var i,o,a,s,l,u=n||Eg,c=0,f="",p=!1,h=!1,d=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(lg,"")),e=e.replace(ug,""),i=bi(e);c<=i.length;){switch(o=i[c],u){case Eg:if(!o||!$y.test(o)){if(n)return"Invalid scheme";u=Rg;continue}f+=o.toLowerCase(),u=Cg;break;case Cg:if(o&&(tg.test(o)||"+"==o||"-"==o||"."==o))f+=o.toLowerCase();else{if(":"!=o){if(n)return"Invalid scheme";f="",u=Rg,c=0;continue}if(n&&(_g(t)!=Zt(bg,f)||"file"==f&&(wg(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,n)return void(_g(t)&&bg[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?u=Ng:_g(t)&&r&&r.scheme==t.scheme?u=Dg:_g(t)?u=Fg:"/"==i[c+1]?(u=Pg,c++):(t.cannotBeABaseURL=!0,t.path.push(""),u=Gg)}break;case Rg:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,u=Xg;break}u="file"==r.scheme?Ng:Ig;continue;case Dg:if("/"!=o||"/"!=i[c+1]){u=Ig;continue}u=jg,c++;break;case Pg:if("/"==o){u=Mg;break}u=Vg;continue;case Ig:if(t.scheme=r.scheme,o==Hy)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==o||"\\"==o&&_g(t))u=Ag;else if("?"==o)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",u=Zg;else{if("#"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),u=Vg;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Xg}break;case Ag:if(!_g(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,u=Vg;continue}u=Mg}else u=jg;break;case Fg:if(u=jg,"/"!=o||"/"!=f.charAt(c+1))continue;c++;break;case jg:if("/"!=o&&"\\"!=o){u=Mg;continue}break;case Mg:if("@"==o){p&&(f="%40"+f),p=!0,a=bi(f);for(var y=0;y<a.length;y++){var g=a[y];if(":"!=g||d){var m=vg(g,mg);d?t.password+=m:t.username+=m}else d=!0}f=""}else if(o==Hy||"/"==o||"?"==o||"#"==o||"\\"==o&&_g(t)){if(p&&""==f)return"Invalid authority";c-=bi(f).length+1,f="",u=zg}else f+=o;break;case zg:case Lg:if(n&&"file"==t.scheme){u=Wg;continue}if(":"!=o||h){if(o==Hy||"/"==o||"?"==o||"#"==o||"\\"==o&&_g(t)){if(_g(t)&&""==f)return"Invalid host";if(n&&""==f&&(wg(t)||null!==t.port))return;if(s=cg(t,f))return s;if(f="",u=Hg,n)return;continue}"["==o?h=!0:"]"==o&&(h=!1),f+=o}else{if(""==f)return"Invalid host";if(s=cg(t,f))return s;if(f="",u=Bg,n==Lg)return}break;case Bg:if(!eg.test(o)){if(o==Hy||"/"==o||"?"==o||"#"==o||"\\"==o&&_g(t)||n){if(""!=f){var v=parseInt(f,10);if(v>65535)return"Invalid port";t.port=_g(t)&&v===bg[t.scheme]?null:v,f=""}if(n)return;u=Hg;continue}return"Invalid port"}f+=o;break;case Ng:if(t.scheme="file","/"==o||"\\"==o)u=Ug;else{if(!r||"file"!=r.scheme){u=Vg;continue}if(o==Hy)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==o)t.host=r.host,t.path=r.path.slice(),t.query="",u=Zg;else{if("#"!=o){Sg(i.slice(c).join(""))||(t.host=r.host,t.path=r.path.slice(),kg(t)),u=Vg;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Xg}}break;case Ug:if("/"==o||"\\"==o){u=Wg;break}r&&"file"==r.scheme&&!Sg(i.slice(c).join(""))&&(Og(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),u=Vg;continue;case Wg:if(o==Hy||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&Og(f))u=Vg;else if(""==f){if(t.host="",n)return;u=Hg}else{if(s=cg(t,f))return s;if("localhost"==t.host&&(t.host=""),n)return;f="",u=Hg}continue}f+=o;break;case Hg:if(_g(t)){if(u=Vg,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Hy&&(u=Vg,"/"!=o))continue}else t.fragment="",u=Xg;else t.query="",u=Zg;break;case Vg:if(o==Hy||"/"==o||"\\"==o&&_g(t)||!n&&("?"==o||"#"==o)){if(".."===(l=(l=f).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(kg(t),"/"==o||"\\"==o&&_g(t)||t.path.push("")):Tg(f)?"/"==o||"\\"==o&&_g(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Og(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(o==Hy||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",u=Zg):"#"==o&&(t.fragment="",u=Xg)}else f+=vg(o,gg);break;case Gg:"?"==o?(t.query="",u=Zg):"#"==o?(t.fragment="",u=Xg):o!=Hy&&(t.path[0]+=vg(o,dg));break;case Zg:n||"#"!=o?o!=Hy&&("'"==o&&_g(t)?t.query+="%27":t.query+="#"==o?"%23":vg(o,dg)):(t.fragment="",u=Xg);break;case Xg:o!=Hy&&(t.fragment+=vg(o,yg))}c++}},Yg=function(t){var e,n,r=Uc(this,Yg,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(t),a=Yy(r,{type:"URL"});if(void 0!==i)if(i instanceof Yg)e=Ky(i);else if(n=qg(e={},String(i)))throw TypeError(n);if(n=qg(a,o,null,e))throw TypeError(n);var s=a.searchParams=new Xy,l=qy(s);l.updateSearchParams(a.query),l.updateURL=function(){a.query=String(s)||null},It||(r.href=Qg.call(r),r.origin=Jg.call(r),r.protocol=$g.call(r),r.username=tm.call(r),r.password=em.call(r),r.host=nm.call(r),r.hostname=rm.call(r),r.port=im.call(r),r.pathname=om.call(r),r.search=am.call(r),r.searchParams=sm.call(r),r.hash=lm.call(r))},Kg=Yg.prototype,Qg=function(){var t=Ky(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,l=t.fragment,u=e+":";return null!==i?(u+="//",wg(t)&&(u+=n+(r?":"+r:"")+"@"),u+=hg(i),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==l&&(u+="#"+l),u},Jg=function(){var t=Ky(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&_g(t)?e+"://"+hg(t.host)+(null!==n?":"+n:""):"null"},$g=function(){return Ky(this).scheme+":"},tm=function(){return Ky(this).username},em=function(){return Ky(this).password},nm=function(){var t=Ky(this),e=t.host,n=t.port;return null===e?"":null===n?hg(e):hg(e)+":"+n},rm=function(){var t=Ky(this).host;return null===t?"":hg(t)},im=function(){var t=Ky(this).port;return null===t?"":String(t)},om=function(){var t=Ky(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},am=function(){var t=Ky(this).query;return t?"?"+t:""},sm=function(){return Ky(this).searchParams},lm=function(){var t=Ky(this).fragment;return t?"#"+t:""},um=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(It&&Mn(Kg,{href:um(Qg,(function(t){var e=Ky(this),n=String(t),r=qg(e,n);if(r)throw TypeError(r);qy(e.searchParams).updateSearchParams(e.query)})),origin:um(Jg),protocol:um($g,(function(t){var e=Ky(this);qg(e,String(t)+":",Eg)})),username:um(tm,(function(t){var e=Ky(this),n=bi(String(t));if(!xg(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=vg(n[r],mg)}})),password:um(em,(function(t){var e=Ky(this),n=bi(String(t));if(!xg(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=vg(n[r],mg)}})),host:um(nm,(function(t){var e=Ky(this);e.cannotBeABaseURL||qg(e,String(t),zg)})),hostname:um(rm,(function(t){var e=Ky(this);e.cannotBeABaseURL||qg(e,String(t),Lg)})),port:um(im,(function(t){var e=Ky(this);xg(e)||(""==(t=String(t))?e.port=null:qg(e,t,Bg))})),pathname:um(om,(function(t){var e=Ky(this);e.cannotBeABaseURL||(e.path=[],qg(e,t+"",Hg))})),search:um(am,(function(t){var e=Ky(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",qg(e,t,Zg)),qy(e.searchParams).updateSearchParams(e.query)})),searchParams:um(sm),hash:um(lm,(function(t){var e=Ky(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",qg(e,t,Xg)):e.fragment=null}))}),Ce(Kg,"toJSON",(function(){return Qg.call(this)}),{enumerable:!0}),Ce(Kg,"toString",(function(){return Qg.call(this)}),{enumerable:!0}),Zy){var cm=Zy.createObjectURL,fm=Zy.revokeObjectURL;cm&&Ce(Yg,"createObjectURL",(function(t){return cm.apply(Zy,arguments)})),fm&&Ce(Yg,"revokeObjectURL",(function(t){return fm.apply(Zy,arguments)}))}Jn(Yg,"URL"),on({global:!0,forced:!py,sham:!It},{URL:Yg}),on({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}}),Object(i.g)((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function p(){}function h(){}var d={};d[i]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(S([])));g&&g!==e&&n.call(g,i)&&(d=g);var m=h.prototype=f.prototype=Object.create(d);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var l=u(t[i],t,o);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m.constructor=h,h.constructor=p,p.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},v(b.prototype),b.prototype[o]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(m),s(m,a,"Generator"),m[i]=function(){return this},m.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));var pm=Function.call,hm=function(t,e,n){return tr(pm,Dt[t].prototype[e],n)};hm("Array","find"),hm("Array","map")}).call(this,n(12).setImmediate,n(5))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(20),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(7))},function(t,e,n){t.exports=function(){"use strict";return function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(n,r,i,o,a,s,l,u,c,f){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return t(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return t(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(e)}}}}()},function(t,e,n){"use strict";e.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(t,e,n){"use strict";var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return r.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));e.a=i},function(t,e,n){"use strict";function r(t){return Object.prototype.toString.call(t).slice(8,-1)}function i(t){return"Object"===r(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function o(t){return"Array"===r(t)}function a(t){return"Symbol"===r(t)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function l(t,e,n,r){var i=r.propertyIsEnumerable(e)?"enumerable":"nonenumerable";"enumerable"===i&&(t[e]=n),"nonenumerable"===i&&Object.defineProperty(t,e,{value:n,enumerable:!1,writable:!0,configurable:!0})}function u(t,e,n){if(!i(e))return n&&o(n)&&n.forEach((function(n){e=n(t,e)})),e;var r={};i(t)&&(r=s(Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)).reduce((function(n,r){var i=t[r];return(!a(r)&&!Object.getOwnPropertyNames(e).includes(r)||a(r)&&!Object.getOwnPropertySymbols(e).includes(r))&&l(n,r,i,t),n}),{}));return s(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)).reduce((function(r,a){var s=e[a],c=i(t)?t[a]:void 0;return n&&o(n)&&n.forEach((function(t){s=t(c,s)})),void 0!==c&&i(s)&&(s=u(c,s,n)),l(r,a,s,e),r}),r)}e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=null,o=t;return i(t)&&t.extensions&&1===Object.keys(t).length&&(o={},r=t.extensions),e.reduce((function(t,e){return u(t,e,r)}),o)}},,,function(t,e,n){"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(6),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||v}function w(){}function x(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(m(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=_.prototype;var O=x.prototype=new w;O.constructor=x,r(O,_.prototype),O.isPureReactComponent=!0;var S={current:null},k=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)k.call(e,r)&&!T.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:S.current}}function C(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var R=/\/+/g,D=[];function P(t,e,n,r){if(D.length){var i=D.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>D.length&&D.push(t)}function A(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case a:l=!0}}if(l)return r(i,e,""===n?"."+F(e,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=n+F(s=e[u],u);l+=t(s,c,r,i)}else if(null===e||"object"!=typeof e?c=null:c="function"==typeof(c=g&&e[g]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=t(s=s.value,c=n+F(s,u++),r,i);else if("object"===s)throw r=""+e,Error(m(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return l}(t,"",e,n)}function F(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function j(t,e){t.func.call(t.context,e,t.count++)}function M(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?z(t,r,n,(function(t){return t})):null!=t&&(C(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(R,"$&/")+"/")+n)),r.push(t))}function z(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),A(t,M,e=P(e,o,r,i)),I(e)}var L={current:null};function B(){var t=L.current;if(null===t)throw Error(m(321));return t}var N={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return z(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;A(t,j,e=P(null,null,e,n)),I(e)},count:function(t){return A(t,(function(){return null}),null)},toArray:function(t){var e=[];return z(t,e,null,(function(t){return t})),e},only:function(t){if(!C(t))throw Error(m(143));return t}},e.Component=_,e.Fragment=s,e.Profiler=u,e.PureComponent=x,e.StrictMode=l,e.Suspense=h,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,e.cloneElement=function(t,e,n){if(null==t)throw Error(m(267,t));var i=r({},t.props),a=t.key,s=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,l=S.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)k.call(e,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:p,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return B().useCallback(t,e)},e.useContext=function(t,e){return B().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return B().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return B().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return B().useLayoutEffect(t,e)},e.useMemo=function(t,e){return B().useMemo(t,e)},e.useReducer=function(t,e,n){return B().useReducer(t,e,n)},e.useRef=function(t){return B().useRef(t)},e.useState=function(t){return B().useState(t)},e.version="16.13.1"},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,l=1,u={},c=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[l]=i,r(l),l++},p.clearImmediate=h}function h(t){delete u[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{h(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(7),n(5))},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(6),o=n(22);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(t){this.onError(t)}}var l=!1,u=null,c=!1,f=null,p={onError:function(t){l=!0,u=t}};function h(t,e,n,r,i,o,a,c,f){l=!1,u=null,s.apply(p,arguments)}var d=null,y=null,g=null;function m(t,e,n){var r=t.type||"unknown-event";t.currentTarget=g(n),function(t,e,n,r,i,o,s,p,d){if(h.apply(this,arguments),l){if(!l)throw Error(a(198));var y=u;l=!1,u=null,c||(c=!0,f=y)}}(r,e,void 0,t),t.currentTarget=null}var v=null,b={};function _(){if(v)for(var t in b){var e=b[t],n=v.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!x[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in x[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,l=r;if(O.hasOwnProperty(l))throw Error(a(99,l));O[l]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&w(u[i],s,l);i=!0}else o.registrationName?(w(o.registrationName,s,l),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function w(t,e,n){if(S[t])throw Error(a(100,t));S[t]=e,k[t]=e.eventTypes[n].dependencies}var x=[],O={},S={},k={};function T(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!b.hasOwnProperty(e)||b[e]!==r){if(b[e])throw Error(a(102,e));b[e]=r,n=!0}}n&&_()}var E=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),C=null,R=null,D=null;function P(t){if(t=y(t)){if("function"!=typeof C)throw Error(a(280));var e=t.stateNode;e&&(e=d(e),C(t.stateNode,t.type,e))}}function I(t){R?D?D.push(t):D=[t]:R=t}function A(){if(R){var t=R,e=D;if(D=R=null,P(t),e)for(t=0;t<e.length;t++)P(e[t])}}function F(t,e){return t(e)}function j(t,e,n,r,i){return t(e,n,r,i)}function M(){}var z=F,L=!1,B=!1;function N(){null===R&&null===D||(M(),A())}function U(t,e,n){if(B)return t(e,n);B=!0;try{return z(t,e,n)}finally{B=!1,N()}}var W=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H=Object.prototype.hasOwnProperty,V={},G={};function Z(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var X={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){X[t]=new Z(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];X[e]=new Z(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){X[t]=new Z(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){X[t]=new Z(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){X[t]=new Z(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){X[t]=new Z(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){X[t]=new Z(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){X[t]=new Z(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){X[t]=new Z(t,5,!1,t.toLowerCase(),null,!1)}));var q=/[\-:]([a-z])/g;function Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(q,Y);X[e]=new Z(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(q,Y);X[e]=new Z(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(q,Y);X[e]=new Z(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){X[t]=new Z(t,1,!1,t.toLowerCase(),null,!1)})),X.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){X[t]=new Z(t,1,!1,t.toLowerCase(),null,!0)}));var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Q(t,e,n,r){var i=X.hasOwnProperty(e)?X[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!H.call(G,t)||!H.call(V,t)&&(W.test(t)?G[t]=!0:(V[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}K.hasOwnProperty("ReactCurrentDispatcher")||(K.ReactCurrentDispatcher={current:null}),K.hasOwnProperty("ReactCurrentBatchConfig")||(K.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,$="function"==typeof Symbol&&Symbol.for,tt=$?Symbol.for("react.element"):60103,et=$?Symbol.for("react.portal"):60106,nt=$?Symbol.for("react.fragment"):60107,rt=$?Symbol.for("react.strict_mode"):60108,it=$?Symbol.for("react.profiler"):60114,ot=$?Symbol.for("react.provider"):60109,at=$?Symbol.for("react.context"):60110,st=$?Symbol.for("react.concurrent_mode"):60111,lt=$?Symbol.for("react.forward_ref"):60112,ut=$?Symbol.for("react.suspense"):60113,ct=$?Symbol.for("react.suspense_list"):60120,ft=$?Symbol.for("react.memo"):60115,pt=$?Symbol.for("react.lazy"):60116,ht=$?Symbol.for("react.block"):60121,dt="function"==typeof Symbol&&Symbol.iterator;function yt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function gt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ut:return"Suspense";case ct:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case at:return"Context.Consumer";case ot:return"Context.Provider";case lt:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ft:return gt(t.type);case ht:return gt(t.render);case pt:if(t=1===t._status?t._result:null)return gt(t)}return null}function mt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=gt(t.type);n=null,r&&(n=gt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function vt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function _t(t){t._valueTracker||(t._valueTracker=function(t){var e=bt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function xt(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Ot(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=vt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function St(t,e){null!=(e=e.checked)&&Q(t,"checked",e,!1)}function kt(t,e){St(t,e);var n=vt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Et(t,e.type,n):e.hasOwnProperty("defaultValue")&&Et(t,e.type,vt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Tt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Et(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Ct(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Rt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Dt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:vt(n)}}function It(t,e){var n=vt(e.value),r=vt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function At(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Ft="http://www.w3.org/1999/xhtml",jt="http://www.w3.org/2000/svg";function Mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Mt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Lt,Bt=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==jt||"innerHTML"in t)t.innerHTML=e;else{for((Lt=Lt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Nt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Ut(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wt={animationend:Ut("Animation","AnimationEnd"),animationiteration:Ut("Animation","AnimationIteration"),animationstart:Ut("Animation","AnimationStart"),transitionend:Ut("Transition","TransitionEnd")},Ht={},Vt={};function Gt(t){if(Ht[t])return Ht[t];if(!Wt[t])return t;var e,n=Wt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Vt)return Ht[t]=n[e];return t}E&&(Vt=document.createElement("div").style,"AnimationEvent"in window||(delete Wt.animationend.animation,delete Wt.animationiteration.animation,delete Wt.animationstart.animation),"TransitionEvent"in window||delete Wt.transitionend.transition);var Zt=Gt("animationend"),Xt=Gt("animationiteration"),qt=Gt("animationstart"),Yt=Gt("transitionend"),Kt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qt=new("function"==typeof WeakMap?WeakMap:Map);function Jt(t){var e=Qt.get(t);return void 0===e&&(e=new Map,Qt.set(t,e)),e}function $t(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if($t(t)!==t)throw Error(a(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=$t(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function ae(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)m(t,e[r],n[r]);else e&&m(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,ae),oe)throw Error(a(95));if(c)throw t=f,c=!1,f=null,t}}function le(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ue(t){if(!E)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var ce=[];function fe(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>ce.length&&ce.push(t)}function pe(t,e,n,r){if(ce.length){var i=ce.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function he(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=En(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=le(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,l=0;l<x.length;l++){var u=x[l];u&&(u=u.extractEvents(r,e,o,i,a))&&(s=re(s,u))}se(s)}}function de(t,e,n){if(!n.has(t)){switch(t){case"scroll":qe(e,"scroll",!0);break;case"focus":case"blur":qe(e,"focus",!0),qe(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ue(t)&&qe(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Kt.indexOf(t)&&Xe(t,e)}n.set(t,null)}}var ye,ge,me,ve=!1,be=[],_e=null,we=null,xe=null,Oe=new Map,Se=new Map,ke=[],Te="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ee="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ce(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Re(t,e){switch(t){case"focus":case"blur":_e=null;break;case"dragenter":case"dragleave":we=null;break;case"mouseover":case"mouseout":xe=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Se.delete(e.pointerId)}}function De(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ce(e,n,r,i,o),null!==e&&(null!==(e=Cn(e))&&ge(e)),t):(t.eventSystemFlags|=r,t)}function Pe(t){var e=En(t.target);if(null!==e){var n=$t(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){me(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ie(t){if(null!==t.blockedOn)return!1;var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Cn(e);return null!==n&&ge(n),t.blockedOn=e,!1}return!0}function Ae(t,e,n){Ie(t)&&n.delete(e)}function Fe(){for(ve=!1;0<be.length;){var t=be[0];if(null!==t.blockedOn){null!==(t=Cn(t.blockedOn))&&ye(t);break}var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:be.shift()}null!==_e&&Ie(_e)&&(_e=null),null!==we&&Ie(we)&&(we=null),null!==xe&&Ie(xe)&&(xe=null),Oe.forEach(Ae),Se.forEach(Ae)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,ve||(ve=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Fe)))}function Me(t){function e(e){return je(e,t)}if(0<be.length){je(be[0],t);for(var n=1;n<be.length;n++){var r=be[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==_e&&je(_e,t),null!==we&&je(we,t),null!==xe&&je(xe,t),Oe.forEach(e),Se.forEach(e),n=0;n<ke.length;n++)(r=ke[n]).blockedOn===t&&(r.blockedOn=null);for(;0<ke.length&&null===(n=ke[0]).blockedOn;)Pe(n),null===n.blockedOn&&ke.shift()}var ze={},Le=new Map,Be=new Map,Ne=["abort","abort",Zt,"animationEnd",Xt,"animationIteration",qt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Yt,"transitionEnd","waiting","waiting"];function Ue(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Be.set(r,e),Le.set(r,o),ze[i]=o}}Ue("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ue("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ue(Ne,2);for(var We="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),He=0;He<We.length;He++)Be.set(We[He],0);var Ve=o.unstable_UserBlockingPriority,Ge=o.unstable_runWithPriority,Ze=!0;function Xe(t,e){qe(e,t,!1)}function qe(t,e,n){var r=Be.get(e);switch(void 0===r?2:r){case 0:r=Ye.bind(null,e,1,t);break;case 1:r=Ke.bind(null,e,1,t);break;default:r=Qe.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ye(t,e,n,r){L||M();var i=Qe,o=L;L=!0;try{j(i,t,e,n,r)}finally{(L=o)||N()}}function Ke(t,e,n,r){Ge(Ve,Qe.bind(null,t,e,n,r))}function Qe(t,e,n,r){if(Ze)if(0<be.length&&-1<Te.indexOf(t))t=Ce(null,t,e,n,r),be.push(t);else{var i=Je(t,e,n,r);if(null===i)Re(t,r);else if(-1<Te.indexOf(t))t=Ce(i,t,e,n,r),be.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return _e=De(_e,t,e,n,r,i),!0;case"dragenter":return we=De(we,t,e,n,r,i),!0;case"mouseover":return xe=De(xe,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Oe.set(o,De(Oe.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Se.set(o,De(Se.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Re(t,r),t=pe(t,r,null,e);try{U(he,t)}finally{fe(t)}}}}function Je(t,e,n,r){if(null!==(n=En(n=le(r)))){var i=$t(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=pe(t,r,n,e);try{U(he,t)}finally{fe(t)}return null}var $e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||$e.hasOwnProperty(t)&&$e[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys($e).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$e[e]=$e[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(a(62,""))}}function an(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Ft;function ln(t,e){var n=Jt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=k[e];for(var r=0;r<e.length;r++)de(e[r],t,n)}function un(){}function cn(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function fn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pn(t,e){var n,r=fn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=fn(r)}}function hn(){for(var t=window,e=cn();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=cn((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yn=null,gn=null;function mn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function vn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var bn="function"==typeof setTimeout?setTimeout:void 0,_n="function"==typeof clearTimeout?clearTimeout:void 0;function wn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function xn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var On=Math.random().toString(36).slice(2),Sn="__reactInternalInstance$"+On,kn="__reactEventHandlers$"+On,Tn="__reactContainere$"+On;function En(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tn]||n[Sn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=xn(t);null!==t;){if(n=t[Sn])return n;t=xn(t)}return e}n=(t=n).parentNode}return null}function Cn(t){return!(t=t[Sn]||t[Tn])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Rn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function Dn(t){return t[kn]||null}function Pn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function In(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(a(231,e,typeof n));return n}function An(t,e,n){(e=In(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Fn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Pn(e);for(e=n.length;0<e--;)An(n[e],"captured",t);for(e=0;e<n.length;e++)An(n[e],"bubbled",t)}}function jn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=In(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Mn(t){t&&t.dispatchConfig.registrationName&&jn(t._targetInst,null,t)}function zn(t){ie(t,Fn)}var Ln=null,Bn=null,Nn=null;function Un(){if(Nn)return Nn;var t,e,n=Bn,r=n.length,i="value"in Ln?Ln.value:Ln.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Nn=i.slice(t,1<e?1-e:void 0)}function Wn(){return!0}function Hn(){return!1}function Vn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Wn:Hn,this.isPropagationStopped=Hn,this}function Gn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Zn(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Xn(t){t.eventPool=[],t.getPooled=Gn,t.release=Zn}i(Vn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){this.isPersistent=Wn},isPersistent:Hn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Hn,this._dispatchInstances=this._dispatchListeners=null}}),Vn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Vn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Xn(n),n},Xn(Vn);var qn=Vn.extend({data:null}),Yn=Vn.extend({data:null}),Kn=[9,13,27,32],Qn=E&&"CompositionEvent"in window,Jn=null;E&&"documentMode"in document&&(Jn=document.documentMode);var $n=E&&"TextEvent"in window&&!Jn,tr=E&&(!Qn||Jn&&8<Jn&&11>=Jn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==Kn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Qn)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else ar?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=Un()):(Bn="value"in(Ln=r)?Ln.value:Ln.textContent,ar=!0)),o=qn.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),zn(o),i=o):i=null,(t=$n?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(ar)return"compositionend"===t||!Qn&&ir(t,e)?(t=Un(),Nn=Bn=Ln=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Yn.getPooled(nr.beforeInput,e,n,r)).data=t,zn(e)):e=null,null===i?e:null===e?i:[i,e]}},lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!lr[t.type]:"textarea"===e}var cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fr(t,e,n){return(t=Vn.getPooled(cr.change,t,e,n)).type="change",I(n),zn(t),t}var pr=null,hr=null;function dr(t){se(t)}function yr(t){if(wt(Rn(t)))return t}function gr(t,e){if("change"===t)return e}var mr=!1;function vr(){pr&&(pr.detachEvent("onpropertychange",br),hr=pr=null)}function br(t){if("value"===t.propertyName&&yr(hr))if(t=fr(hr,t,le(t)),L)se(t);else{L=!0;try{F(dr,t)}finally{L=!1,N()}}}function _r(t,e,n){"focus"===t?(vr(),hr=n,(pr=e).attachEvent("onpropertychange",br)):"blur"===t&&vr()}function wr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return yr(hr)}function xr(t,e){if("click"===t)return yr(e)}function Or(t,e){if("input"===t||"change"===t)return yr(e)}E&&(mr=ue("input")&&(!document.documentMode||9<document.documentMode));var Sr={eventTypes:cr,_isInputEventSupported:mr,extractEvents:function(t,e,n,r){var i=e?Rn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=gr;else if(ur(i))if(mr)a=Or;else{a=wr;var s=_r}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=xr);if(a&&(a=a(t,e)))return fr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Et(i,"number",i.value)}},kr=Vn.extend({view:null,detail:null}),Tr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Er(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Tr[t])&&!!e[t]}function Cr(){return Er}var Rr=0,Dr=0,Pr=!1,Ir=!1,Ar=kr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Cr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Rr;return Rr=t.screenX,Pr?"mousemove"===t.type?t.screenX-e:0:(Pr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Dr;return Dr=t.screenY,Ir?"mousemove"===t.type?t.screenY-e:0:(Ir=!0,0)}}),Fr=Ar.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),jr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Mr={eventTypes:jr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?En(e):null)&&(e!==$t(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var s=Ar,l=jr.mouseLeave,u=jr.mouseEnter,c="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Fr,l=jr.pointerLeave,u=jr.pointerEnter,c="pointer");if(t=null==a?o:Rn(a),o=null==e?o:Rn(e),(l=s.getPooled(l,a,n,r)).type=c+"leave",l.target=t,l.relatedTarget=o,(n=s.getPooled(u,e,n,r)).type=c+"enter",n.target=o,n.relatedTarget=t,c=e,(r=a)&&c)t:{for(u=c,a=0,t=s=r;t;t=Pn(t))a++;for(t=0,e=u;e;e=Pn(e))t++;for(;0<a-t;)s=Pn(s),a--;for(;0<t-a;)u=Pn(u),t--;for(;a--;){if(s===u||s===u.alternate)break t;s=Pn(s),u=Pn(u)}s=null}else s=null;for(u=s,s=[];r&&r!==u&&(null===(a=r.alternate)||a!==u);)s.push(r),r=Pn(r);for(r=[];c&&c!==u&&(null===(a=c.alternate)||a!==u);)r.push(c),c=Pn(c);for(c=0;c<s.length;c++)jn(s[c],"bubbled",l);for(c=r.length;0<c--;)jn(r[c],"captured",n);return 0==(64&i)?[l]:[l,n]}};var zr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},Lr=Object.prototype.hasOwnProperty;function Br(t,e){if(zr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Lr.call(e,n[r])||!zr(t[n[r]],e[n[r]]))return!1;return!0}var Nr=E&&"documentMode"in document&&11>=document.documentMode,Ur={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Wr=null,Hr=null,Vr=null,Gr=!1;function Zr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Gr||null==Wr||Wr!==cn(n)?null:("selectionStart"in(n=Wr)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vr&&Br(Vr,n)?null:(Vr=n,(t=Vn.getPooled(Ur.select,Hr,t,e)).type="select",t.target=Wr,zn(t),t))}var Xr={eventTypes:Ur,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Jt(i),o=k.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?Rn(e):window,t){case"focus":(ur(i)||"true"===i.contentEditable)&&(Wr=i,Hr=e,Vr=null);break;case"blur":Vr=Hr=Wr=null;break;case"mousedown":Gr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Gr=!1,Zr(n,r);case"selectionchange":if(Nr)break;case"keydown":case"keyup":return Zr(n,r)}return null}},qr=Vn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yr=Vn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kr=kr.extend({relatedTarget:null});function Qr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=kr.extend({key:function(t){if(t.key){var e=Jr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Qr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?$r[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Cr,charCode:function(t){return"keypress"===t.type?Qr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Qr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Ar.extend({dataTransfer:null}),ni=kr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Cr}),ri=Vn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Ar.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:ze,extractEvents:function(t,e,n,r){var i=Le.get(t);if(!i)return null;switch(t){case"keypress":if(0===Qr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=Kr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Zt:case Xt:case qt:t=qr;break;case Yt:t=ri;break;case"scroll":t=kr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Fr;break;default:t=Vn}return zn(e=t.getPooled(i,e,n,r)),e}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),d=Dn,y=Cn,g=Rn,T({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Mr,ChangeEventPlugin:Sr,SelectEventPlugin:Xr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function li(t){0>si||(t.current=ai[si],ai[si]=null,si--)}function ui(t,e){si++,ai[si]=t.current,t.current=e}var ci={},fi={current:ci},pi={current:!1},hi=ci;function di(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function yi(t){return null!=(t=t.childContextTypes)}function gi(){li(pi),li(fi)}function mi(t,e,n){if(fi.current!==ci)throw Error(a(168));ui(fi,e),ui(pi,n)}function vi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,gt(e)||"Unknown",o));return i({},n,{},r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,hi=fi.current,ui(fi,t),ui(pi,pi.current),!0}function _i(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=vi(t,e,hi),r.__reactInternalMemoizedMergedChildContext=t,li(pi),li(fi),ui(fi,t)):li(pi),ui(pi,n)}var wi=o.unstable_runWithPriority,xi=o.unstable_scheduleCallback,Oi=o.unstable_cancelCallback,Si=o.unstable_requestPaint,ki=o.unstable_now,Ti=o.unstable_getCurrentPriorityLevel,Ei=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,Ri=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Ii={},Ai=o.unstable_shouldYield,Fi=void 0!==Si?Si:function(){},ji=null,Mi=null,zi=!1,Li=ki(),Bi=1e4>Li?ki:function(){return ki()-Li};function Ni(){switch(Ti()){case Ei:return 99;case Ci:return 98;case Ri:return 97;case Di:return 96;case Pi:return 95;default:throw Error(a(332))}}function Ui(t){switch(t){case 99:return Ei;case 98:return Ci;case 97:return Ri;case 96:return Di;case 95:return Pi;default:throw Error(a(332))}}function Wi(t,e){return t=Ui(t),wi(t,e)}function Hi(t,e,n){return t=Ui(t),xi(t,e,n)}function Vi(t){return null===ji?(ji=[t],Mi=xi(Ei,Zi)):ji.push(t),Ii}function Gi(){if(null!==Mi){var t=Mi;Mi=null,Oi(t)}Zi()}function Zi(){if(!zi&&null!==ji){zi=!0;var t=0;try{var e=ji;Wi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),ji=null}catch(e){throw null!==ji&&(ji=ji.slice(t+1)),xi(Ei,Gi),e}finally{zi=!1}}}function Xi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function qi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Yi={current:null},Ki=null,Qi=null,Ji=null;function $i(){Ji=Qi=Ki=null}function to(t){var e=Yi.current;li(Yi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){Ki=t,Ji=Qi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Da=!0),t.firstContext=null)}function ro(t,e){if(Ji!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Ji=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Qi){if(null===Ki)throw Error(a(308));Qi=e,Ki.dependencies={expirationTime:0,firstContext:e,responders:null}}else Qi=Qi.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function so(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function lo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function uo(t,e){var n=t.alternate;null!==n&&ao(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function co(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,null!==(l=t.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=s))}if(null!==a){l=a.next;var u=o.baseState,c=0,f=null,p=null,h=null;if(null!==l)for(var d=l;;){if((s=d.expirationTime)<r){var y={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===h?(p=h=y,f=u):h=h.next=y,s>c&&(c=s)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),ol(s,d.suspenseConfig);t:{var g=t,m=d;switch(s=e,y=n,m.tag){case 1:if("function"==typeof(g=m.payload)){u=g.call(y,u,s);break t}u=g;break t;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=m.payload)?g.call(y,u,s):g))break t;u=i({},u,s);break t;case 2:io=!0}}null!==d.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===l){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}null===h?f=u:h.next=p,o.baseState=f,o.baseQueue=h,al(c),t.expirationTime=c,t.memoizedState=u}}function fo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var po=K.ReactCurrentBatchConfig,ho=(new r.Component).refs;function yo(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var go={isMounted:function(t){return!!(t=t._reactInternalFiber)&&$t(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Zs(),i=po.suspense;(i=so(r=Xs(r,t,i),i)).payload=e,null!=n&&(i.callback=n),lo(t,i),qs(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Zs(),i=po.suspense;(i=so(r=Xs(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),lo(t,i),qs(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Zs(),r=po.suspense;(r=so(n=Xs(n,t,r),r)).tag=2,null!=e&&(r.callback=e),lo(t,r),qs(t,n)}};function mo(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!Br(n,r)||!Br(i,o))}function vo(t,e,n){var r=!1,i=ci,o=e.contextType;return"object"==typeof o&&null!==o?o=ro(o):(i=yi(e)?hi:fi.current,o=(r=null!=(r=e.contextTypes))?di(t,i):ci),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=go,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&go.enqueueReplaceState(e,e.state,null)}function _o(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=ho,oo(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=ro(o):(o=yi(e)?hi:fi.current,i.context=di(t,o)),co(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(yo(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&go.enqueueReplaceState(i,i.state,null),co(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var wo=Array.isArray;function xo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===ho&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Oo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function So(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Tl(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Rl(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=xo(t,e,n),r.return=t,r):((r=El(n.type,n.key,n.props,null,t.mode,r)).ref=xo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Dl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,o){return null===e||7!==e.tag?((e=Cl(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Rl(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=El(e.type,e.key,e.props,null,t.mode,n)).ref=xo(t,null,e),n.return=t,n;case et:return(e=Dl(e,t.mode,n)).return=t,e}if(wo(e)||yt(e))return(e=Cl(e,t.mode,n,null)).return=t,e;Oo(t,e)}return null}function h(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?f(t,e,n.props.children,r,i):u(t,e,n,r):null;case et:return n.key===i?c(t,e,n,r):null}if(wo(n)||yt(n))return null!==i?null:f(t,e,n,r,null);Oo(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?f(e,t,r.props.children,i,r.key):u(e,t,r,i);case et:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||yt(r))return f(e,t=t.get(n)||null,r,i,null);Oo(e,r)}return null}function y(i,a,s,l){for(var u=null,c=null,f=a,y=a=0,g=null;null!==f&&y<s.length;y++){f.index>y?(g=f,f=null):g=f.sibling;var m=h(i,f,s[y],l);if(null===m){null===f&&(f=g);break}t&&f&&null===m.alternate&&e(i,f),a=o(m,a,y),null===c?u=m:c.sibling=m,c=m,f=g}if(y===s.length)return n(i,f),u;if(null===f){for(;y<s.length;y++)null!==(f=p(i,s[y],l))&&(a=o(f,a,y),null===c?u=f:c.sibling=f,c=f);return u}for(f=r(i,f);y<s.length;y++)null!==(g=d(f,i,y,s[y],l))&&(t&&null!==g.alternate&&f.delete(null===g.key?y:g.key),a=o(g,a,y),null===c?u=g:c.sibling=g,c=g);return t&&f.forEach((function(t){return e(i,t)})),u}function g(i,s,l,u){var c=yt(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var f=c=null,y=s,g=s=0,m=null,v=l.next();null!==y&&!v.done;g++,v=l.next()){y.index>g?(m=y,y=null):m=y.sibling;var b=h(i,y,v.value,u);if(null===b){null===y&&(y=m);break}t&&y&&null===b.alternate&&e(i,y),s=o(b,s,g),null===f?c=b:f.sibling=b,f=b,y=m}if(v.done)return n(i,y),c;if(null===y){for(;!v.done;g++,v=l.next())null!==(v=p(i,v.value,u))&&(s=o(v,s,g),null===f?c=v:f.sibling=v,f=v);return c}for(y=r(i,y);!v.done;g++,v=l.next())null!==(v=d(y,i,g,v.value,u))&&(t&&null!==v.alternate&&y.delete(null===v.key?g:v.key),s=o(v,s,g),null===f?c=v:f.sibling=v,f=v);return t&&y.forEach((function(t){return e(i,t)})),c}return function(t,r,o,l){var u="object"==typeof o&&null!==o&&o.type===nt&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case tt:t:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===nt){n(t,u.sibling),(r=i(u,o.props.children)).return=t,t=r;break t}break;default:if(u.elementType===o.type){n(t,u.sibling),(r=i(u,o.props)).ref=xo(t,u,o),r.return=t,t=r;break t}}n(t,u);break}e(t,u),u=u.sibling}o.type===nt?((r=Cl(o.props.children,t.mode,l,o.key)).return=t,t=r):((l=El(o.type,o.key,o.props,null,t.mode,l)).ref=xo(t,r,o),l.return=t,t=l)}return s(t);case et:t:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Dl(o,t.mode,l)).return=t,t=r}return s(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Rl(o,t.mode,l)).return=t,t=r),s(t);if(wo(o))return y(t,r,o,l);if(yt(o))return g(t,r,o,l);if(c&&Oo(t,o),void 0===o&&!u)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var ko=So(!0),To=So(!1),Eo={},Co={current:Eo},Ro={current:Eo},Do={current:Eo};function Po(t){if(t===Eo)throw Error(a(174));return t}function Io(t,e){switch(ui(Do,e),ui(Ro,t),ui(Co,Eo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zt(null,"");break;default:e=zt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}li(Co),ui(Co,e)}function Ao(){li(Co),li(Ro),li(Do)}function Fo(t){Po(Do.current);var e=Po(Co.current),n=zt(e,t.type);e!==n&&(ui(Ro,t),ui(Co,n))}function jo(t){Ro.current===t&&(li(Co),li(Ro))}var Mo={current:0};function zo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Lo(t,e){return{responder:t,props:e}}var Bo=K.ReactCurrentDispatcher,No=K.ReactCurrentBatchConfig,Uo=0,Wo=null,Ho=null,Vo=null,Go=!1;function Zo(){throw Error(a(321))}function Xo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zr(t[n],e[n]))return!1;return!0}function qo(t,e,n,r,i,o){if(Uo=o,Wo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Bo.current=null===t||null===t.memoizedState?ma:va,t=n(r,i),e.expirationTime===Uo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Vo=Ho=null,e.updateQueue=null,Bo.current=ba,t=n(r,i)}while(e.expirationTime===Uo)}if(Bo.current=ga,e=null!==Ho&&null!==Ho.next,Uo=0,Vo=Ho=Wo=null,Go=!1,e)throw Error(a(300));return t}function Yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Vo?Wo.memoizedState=Vo=t:Vo=Vo.next=t,Vo}function Ko(){if(null===Ho){var t=Wo.alternate;t=null!==t?t.memoizedState:null}else t=Ho.next;var e=null===Vo?Wo.memoizedState:Vo.next;if(null!==e)Vo=e,Ho=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Ho=t).memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},null===Vo?Wo.memoizedState=Vo=t:Vo=Vo.next=t}return Vo}function Qo(t,e){return"function"==typeof e?e(t):e}function Jo(t){var e=Ko(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.expirationTime;if(c<Uo){var f={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=f,o=r):l=l.next=f,c>Wo.expirationTime&&(Wo.expirationTime=c,al(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),ol(c,u.suspenseConfig),r=u.eagerReducer===t?u.eagerState:t(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,zr(r,e.memoizedState)||(Da=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function $o(t){var e=Ko(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);zr(o,e.memoizedState)||(Da=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(t){var e=Yo();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t}).dispatch=ya.bind(null,Wo,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Wo.updateQueue)?(e={lastEffect:null},Wo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function na(){return Ko().memoizedState}function ra(t,e,n,r){var i=Yo();Wo.effectTag|=t,i.memoizedState=ea(1|e,n,void 0,void 0===r?null:r)}function ia(t,e,n,r){var i=Ko();r=void 0===r?null:r;var o=void 0;if(null!==Ho){var a=Ho.memoizedState;if(o=a.destroy,null!==r&&Xo(r,a.deps))return void ea(e,n,o,r)}Wo.effectTag|=t,i.memoizedState=ea(1|e,n,o,r)}function oa(t,e){return ra(516,4,t,e)}function aa(t,e){return ia(516,4,t,e)}function sa(t,e){return ia(4,2,t,e)}function la(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ua(t,e,n){return n=null!=n?n.concat([t]):null,ia(4,2,la.bind(null,e,t),n)}function ca(){}function fa(t,e){return Yo().memoizedState=[t,void 0===e?null:e],t}function pa(t,e){var n=Ko();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Xo(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ha(t,e){var n=Ko();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Xo(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function da(t,e,n){var r=Ni();Wi(98>r?98:r,(function(){t(!0)})),Wi(97<r?97:r,(function(){var r=No.suspense;No.suspense=void 0===e?null:e;try{t(!1),n()}finally{No.suspense=r}}))}function ya(t,e,n){var r=Zs(),i=po.suspense;i={expirationTime:r=Xs(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Wo||null!==o&&o===Wo)Go=!0,i.expirationTime=Uo,Wo.expirationTime=Uo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,zr(s,a))return}catch(t){}qs(t,r)}}var ga={readContext:ro,useCallback:Zo,useContext:Zo,useEffect:Zo,useImperativeHandle:Zo,useLayoutEffect:Zo,useMemo:Zo,useReducer:Zo,useRef:Zo,useState:Zo,useDebugValue:Zo,useResponder:Zo,useDeferredValue:Zo,useTransition:Zo},ma={readContext:ro,useCallback:fa,useContext:ro,useEffect:oa,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,ra(4,2,la.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Yo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ya.bind(null,Wo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Yo().memoizedState=t},useState:ta,useDebugValue:ca,useResponder:Lo,useDeferredValue:function(t,e){var n=ta(t),r=n[0],i=n[1];return oa((function(){var n=No.suspense;No.suspense=void 0===e?null:e;try{i(t)}finally{No.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ta(!1),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},va={readContext:ro,useCallback:pa,useContext:ro,useEffect:aa,useImperativeHandle:ua,useLayoutEffect:sa,useMemo:ha,useReducer:Jo,useRef:na,useState:function(){return Jo(Qo)},useDebugValue:ca,useResponder:Lo,useDeferredValue:function(t,e){var n=Jo(Qo),r=n[0],i=n[1];return aa((function(){var n=No.suspense;No.suspense=void 0===e?null:e;try{i(t)}finally{No.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo(Qo),n=e[0];return e=e[1],[pa(da.bind(null,e,t),[e,t]),n]}},ba={readContext:ro,useCallback:pa,useContext:ro,useEffect:aa,useImperativeHandle:ua,useLayoutEffect:sa,useMemo:ha,useReducer:$o,useRef:na,useState:function(){return $o(Qo)},useDebugValue:ca,useResponder:Lo,useDeferredValue:function(t,e){var n=$o(Qo),r=n[0],i=n[1];return aa((function(){var n=No.suspense;No.suspense=void 0===e?null:e;try{i(t)}finally{No.suspense=n}}),[t,e]),r},useTransition:function(t){var e=$o(Qo),n=e[0];return e=e[1],[pa(da.bind(null,e,t),[e,t]),n]}},_a=null,wa=null,xa=!1;function Oa(t,e){var n=Sl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Sa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function ka(t){if(xa){var e=wa;if(e){var n=e;if(!Sa(t,e)){if(!(e=wn(n.nextSibling))||!Sa(t,e))return t.effectTag=-1025&t.effectTag|2,xa=!1,void(_a=t);Oa(_a,n)}_a=t,wa=wn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,xa=!1,_a=t}}function Ta(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;_a=t}function Ea(t){if(t!==_a)return!1;if(!xa)return Ta(t),xa=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!vn(e,t.memoizedProps))for(e=wa;e;)Oa(t,e),e=wn(e.nextSibling);if(Ta(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){wa=wn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}wa=null}}else wa=_a?wn(t.stateNode.nextSibling):null;return!0}function Ca(){wa=_a=null,xa=!1}var Ra=K.ReactCurrentOwner,Da=!1;function Pa(t,e,n,r){e.child=null===t?To(e,null,n,r):ko(e,t.child,n,r)}function Ia(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=qo(t,e,n,r,o,i),null===t||Da?(e.effectTag|=1,Pa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),qa(t,e,i))}function Aa(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||kl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=El(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Fa(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Br)(i,r)&&t.ref===e.ref)?qa(t,e,o):(e.effectTag|=1,(t=Tl(a,r)).ref=e.ref,t.return=e,e.child=t)}function Fa(t,e,n,r,i,o){return null!==t&&Br(t.memoizedProps,r)&&t.ref===e.ref&&(Da=!1,i<o)?(e.expirationTime=t.expirationTime,qa(t,e,o)):Ma(t,e,n,r,o)}function ja(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Ma(t,e,n,r,i){var o=yi(n)?hi:fi.current;return o=di(e,o),no(e,i),n=qo(t,e,n,r,o,i),null===t||Da?(e.effectTag|=1,Pa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),qa(t,e,i))}function za(t,e,n,r,i){if(yi(n)){var o=!0;bi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),vo(e,n,r),_o(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=ro(u):u=di(e,u=yi(n)?hi:fi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&bo(e,a,r,u),io=!1;var p=e.memoizedState;a.state=p,co(e,r,a,i),l=e.memoizedState,s!==r||p!==l||pi.current||io?("function"==typeof c&&(yo(e,n,c,r),l=e.memoizedState),(s=io||mo(e,n,s,r,p,l,u))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,ao(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:qi(e.type,s),l=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=ro(u):u=di(e,u=yi(n)?hi:fi.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&bo(e,a,r,u),io=!1,l=e.memoizedState,a.state=l,co(e,r,a,i),p=e.memoizedState,s!==r||l!==p||pi.current||io?("function"==typeof c&&(yo(e,n,c,r),p=e.memoizedState),(c=io||mo(e,n,s,r,l,p,u))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),r=!1);return La(t,e,n,r,o,i)}function La(t,e,n,r,i,o){ja(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&_i(e,n,!1),qa(t,e,o);r=e.stateNode,Ra.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=ko(e,t.child,null,o),e.child=ko(e,null,s,o)):Pa(t,e,s,o),e.memoizedState=r.state,i&&_i(e,n,!0),e.child}function Ba(t){var e=t.stateNode;e.pendingContext?mi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&mi(0,e.context,!1),Io(t,e.containerInfo)}var Na,Ua,Wa,Ha={dehydrated:null,retryTime:0};function Va(t,e,n){var r,i=e.mode,o=e.pendingProps,a=Mo.current,s=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ui(Mo,1&a),null===t){if(void 0!==o.fallback&&ka(e),s){if(s=o.fallback,(o=Cl(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Cl(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=Ha,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=To(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=Tl(t,t.pendingProps)).return=e,0==(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Tl(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Ha,e.child=n,i}return n=ko(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=Cl(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Cl(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ha,e.child=o,n}return e.memoizedState=null,e.child=ko(e,t,o.children,n)}function Ga(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Za(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Xa(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Pa(t,e,r.children,n),0!=(2&(r=Mo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ga(t,n);else if(19===t.tag)Ga(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ui(Mo,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===zo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Za(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===zo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Za(e,!0,n,null,o,e.lastEffect);break;case"together":Za(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function qa(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&al(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Tl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Tl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ya(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ka(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return yi(e.type)&&gi(),null;case 3:return Ao(),li(pi),li(fi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ea(e)||(e.effectTag|=4),null;case 5:jo(e),n=Po(Do.current);var o=e.type;if(null!==t&&null!=e.stateNode)Ua(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Po(Co.current),Ea(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[Sn]=e,r[kn]=s,o){case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(t=0;t<Kt.length;t++)Xe(Kt[t],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"form":Xe("reset",r),Xe("submit",r);break;case"details":Xe("toggle",r);break;case"input":Ot(r,s),Xe("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",r),ln(n,"onChange");break;case"textarea":Pt(r,s),Xe("invalid",r),ln(n,"onChange")}for(var l in on(o,s),t=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"==typeof u?r.textContent!==u&&(t=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(t=["children",""+u]):S.hasOwnProperty(l)&&null!=u&&ln(n,l)}switch(o){case"input":_t(r),Tt(r,s,!0);break;case"textarea":_t(r),At(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=un)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=Mt(o)),t===sn?"script"===o?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=l.createElement(o,{is:r.is}):(t=l.createElement(o),"select"===o&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,o),t[Sn]=e,t[kn]=r,Na(t,e),e.stateNode=t,l=an(o,r),o){case"iframe":case"object":case"embed":Xe("load",t),u=r;break;case"video":case"audio":for(u=0;u<Kt.length;u++)Xe(Kt[u],t);u=r;break;case"source":Xe("error",t),u=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),u=r;break;case"form":Xe("reset",t),Xe("submit",t),u=r;break;case"details":Xe("toggle",t),u=r;break;case"input":Ot(t,r),u=xt(t,r),Xe("invalid",t),ln(n,"onChange");break;case"option":u=Ct(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Xe("invalid",t),ln(n,"onChange");break;case"textarea":Pt(t,r),u=Dt(t,r),Xe("invalid",t),ln(n,"onChange");break;default:u=r}on(o,u);var c=u;for(s in c)if(c.hasOwnProperty(s)){var f=c[s];"style"===s?nn(t,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&Bt(t,f):"children"===s?"string"==typeof f?("textarea"!==o||""!==f)&&Nt(t,f):"number"==typeof f&&Nt(t,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(S.hasOwnProperty(s)?null!=f&&ln(n,s):null!=f&&Q(t,s,f,l))}switch(o){case"input":_t(t),Tt(t,r,!1);break;case"textarea":_t(t),At(t);break;case"option":null!=r.value&&t.setAttribute("value",""+vt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?Rt(t,!!r.multiple,n,!1):null!=r.defaultValue&&Rt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof u.onClick&&(t.onclick=un)}mn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Wa(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(a(166));n=Po(Do.current),Po(Co.current),Ea(e)?(n=e.stateNode,r=e.memoizedProps,n[Sn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Sn]=e,e.stateNode=n)}return null;case 13:return li(Mo),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ea(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Mo.current)?Es===_s&&(Es=ws):(Es!==_s&&Es!==ws||(Es=xs),0!==Is&&null!==Ss&&(Al(Ss,Ts),Fl(Ss,Is)))),(n||r)&&(e.effectTag|=4),null);case 4:return Ao(),null;case 10:return to(e),null;case 17:return yi(e.type)&&gi(),null;case 19:if(li(Mo),null===(r=e.memoizedState))return null;if(o=0!=(64&e.effectTag),null===(s=r.rendering)){if(o)Ya(r,!1);else if(Es!==_s||null!==t&&0!=(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=zo(s))){for(e.effectTag|=64,Ya(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ui(Mo,1&Mo.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=zo(s))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ya(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Ya(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Bi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,e=Mo.current,ui(Mo,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function Qa(t){switch(t.tag){case 1:yi(t.type)&&gi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Ao(),li(pi),li(fi),0!=(64&(e=t.effectTag)))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return jo(t),null;case 13:return li(Mo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return li(Mo),null;case 4:return Ao(),null;case 10:return to(t),null;default:return null}}function Ja(t,e){return{value:t,source:e,stack:mt(e)}}Na=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ua=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,l,u=e.stateNode;switch(Po(Co.current),t=null,n){case"input":a=xt(u,a),r=xt(u,r),t=[];break;case"option":a=Ct(u,a),r=Ct(u,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Dt(u,a),r=Dt(u,r),t=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(u.onclick=un)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in u=a[s])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(S.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var c=r[s];if(u=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&c!==u&&(null!=c||null!=u))if("style"===s)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(t||(t=[]),t.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(t=t||[]).push(s,c)):"children"===s?u===c||"string"!=typeof c&&"number"!=typeof c||(t=t||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(S.hasOwnProperty(s)?(null!=c&&ln(o,s),t||u===c||(t=[])):(t=t||[]).push(s,c))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Wa=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var $a="function"==typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=mt(n)),null!==n&&gt(n.type),e=e.value,null!==t&&1===t.tag&&gt(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function es(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){vl(t,e)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:qi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:qi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&fo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}fo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&mn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Me(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(t,e,n){switch("function"==typeof xl&&xl(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Wi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){vl(i,t)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){vl(t,e)}}(e,n);break;case 5:es(e);break;case 4:cs(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function ls(t){return 5===t.tag||3===t.tag||4===t.tag}function us(t){t:{for(var e=t.return;null!==e;){if(ls(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Nt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ls(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=un));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function cs(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var l=t,u=o,c=n,f=u;;)if(as(l,f,c),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===u)break t;for(;null===f.sibling;){if(null===f.return||f.return===u)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function fs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[kn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&St(n,r),an(t,i),e=an(t,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?nn(n,l):"dangerouslySetInnerHTML"===s?Bt(n,l):"children"===s?Nt(n,l):Q(n,s,l,e)}switch(t){case"input":kt(n,r);break;case"textarea":It(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Rt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Rt(n,!!r.multiple,r.defaultValue,!0):Rt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Me(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Fs=Bi()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void ps(e);case 19:return void ps(e);case 17:return}throw Error(a(163))}function ps(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $a),e.forEach((function(e){var r=_l.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var hs="function"==typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ms||(Ms=!0,zs=r),ts(t,e)},n}function ys(t,e,n){(n=so(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ls?Ls=new Set([this]):Ls.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var gs,ms=Math.ceil,vs=K.ReactCurrentDispatcher,bs=K.ReactCurrentOwner,_s=0,ws=3,xs=4,Os=0,Ss=null,ks=null,Ts=0,Es=_s,Cs=null,Rs=1073741823,Ds=1073741823,Ps=null,Is=0,As=!1,Fs=0,js=null,Ms=!1,zs=null,Ls=null,Bs=!1,Ns=null,Us=90,Ws=null,Hs=0,Vs=null,Gs=0;function Zs(){return 0!=(48&Os)?1073741821-(Bi()/10|0):0!==Gs?Gs:Gs=1073741821-(Bi()/10|0)}function Xs(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=Ni();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(16&Os))return Ts;if(null!==n)t=Xi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Xi(t,150,100);break;case 97:case 96:t=Xi(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==Ss&&t===Ts&&--t,t}function qs(t,e){if(50<Hs)throw Hs=0,Vs=null,Error(a(185));if(null!==(t=Ys(t,e))){var n=Ni();1073741823===e?0!=(8&Os)&&0==(48&Os)?$s(t):(Qs(t),0===Os&&Gi()):Qs(t),0==(4&Os)||98!==n&&99!==n||(null===Ws?Ws=new Map([[t,e]]):(void 0===(n=Ws.get(t))||n>e)&&Ws.set(t,e))}}function Ys(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ss===i&&(al(e),Es===xs&&Al(i,Ts)),Fl(i,e)),i}function Ks(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Il(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Qs(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Vi($s.bind(null,t));else{var e=Ks(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Zs();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Ii&&Oi(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Vi($s.bind(null,t)):Hi(r,Js.bind(null,t),{timeout:10*(1073741821-e)-Bi()}),t.callbackNode=e}}}function Js(t,e){if(Gs=0,e)return jl(t,e=Zs()),Qs(t),null;var n=Ks(t);if(0!==n){if(e=t.callbackNode,0!=(48&Os))throw Error(a(327));if(yl(),t===Ss&&n===Ts||nl(t,n),null!==ks){var r=Os;Os|=16;for(var i=il();;)try{ll();break}catch(e){rl(t,e)}if($i(),Os=r,vs.current=i,1===Es)throw e=Cs,nl(t,n),Al(t,n),Qs(t),e;if(null===ks)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=Es,Ss=null,r){case _s:case 1:throw Error(a(345));case 2:jl(t,2<n?2:n);break;case ws:if(Al(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fl(i)),1073741823===Rs&&10<(i=Fs+500-Bi())){if(As){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nl(t,n);break}}if(0!==(o=Ks(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=bn(pl.bind(null,t),i);break}pl(t);break;case xs:if(Al(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=fl(i)),As&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nl(t,n);break}if(0!==(i=Ks(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Ds?r=10*(1073741821-Ds)-Bi():1073741823===Rs?r=0:(r=10*(1073741821-Rs)-5e3,0>(r=(i=Bi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ms(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=bn(pl.bind(null,t),r);break}pl(t);break;case 5:if(1073741823!==Rs&&null!==Ps){o=Rs;var s=Ps;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Bi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Al(t,n),t.timeoutHandle=bn(pl.bind(null,t),r);break}}pl(t);break;default:throw Error(a(329))}if(Qs(t),t.callbackNode===e)return Js.bind(null,t)}}return null}function $s(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!=(48&Os))throw Error(a(327));if(yl(),t===Ss&&e===Ts||nl(t,e),null!==ks){var n=Os;Os|=16;for(var r=il();;)try{sl();break}catch(e){rl(t,e)}if($i(),Os=n,vs.current=r,1===Es)throw n=Cs,nl(t,e),Al(t,e),Qs(t),n;if(null!==ks)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Ss=null,pl(t),Qs(t)}return null}function tl(t,e){var n=Os;Os|=1;try{return t(e)}finally{0===(Os=n)&&Gi()}}function el(t,e){var n=Os;Os&=-2,Os|=8;try{return t(e)}finally{0===(Os=n)&&Gi()}}function nl(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,_n(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&gi();break;case 3:Ao(),li(pi),li(fi);break;case 5:jo(r);break;case 4:Ao();break;case 13:case 19:li(Mo);break;case 10:to(r)}n=n.return}Ss=t,ks=Tl(t.current,null),Ts=e,Es=_s,Cs=null,Ds=Rs=1073741823,Ps=null,Is=0,As=!1}function rl(t,e){for(;;){try{if($i(),Bo.current=ga,Go)for(var n=Wo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Uo=0,Vo=Ho=Wo=null,Go=!1,null===ks||null===ks.return)return Es=1,Cs=e,ks=null;t:{var i=t,o=ks.return,a=ks,s=e;if(e=Ts,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&Mo.current),f=o;do{var p;if(p=13===f.tag){var h=f.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var d=f.memoizedProps;p=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!c)}}if(p){var y=f.updateQueue;if(null===y){var g=new Set;g.add(l),f.updateQueue=g}else y.add(l);if(0==(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var m=so(1073741823,null);m.tag=2,lo(a,m)}a.expirationTime=1073741823;break t}s=void 0,a=e;var v=i.pingCache;if(null===v?(v=i.pingCache=new hs,s=new Set,v.set(l,s)):void 0===(s=v.get(l))&&(s=new Set,v.set(l,s)),!s.has(a)){s.add(a);var b=bl.bind(null,i,l,a);l.then(b,b)}f.effectTag|=4096,f.expirationTime=e;break t}f=f.return}while(null!==f);s=Error((gt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+mt(a))}5!==Es&&(Es=2),s=Ja(s,a),f=o;do{switch(f.tag){case 3:l=s,f.effectTag|=4096,f.expirationTime=e,uo(f,ds(f,l,e));break t;case 1:l=s;var _=f.type,w=f.stateNode;if(0==(64&f.effectTag)&&("function"==typeof _.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Ls||!Ls.has(w)))){f.effectTag|=4096,f.expirationTime=e,uo(f,ys(f,l,e));break t}}f=f.return}while(null!==f)}ks=cl(ks)}catch(t){e=t;continue}break}}function il(){var t=vs.current;return vs.current=ga,null===t?ga:t}function ol(t,e){t<Rs&&2<t&&(Rs=t),null!==e&&t<Ds&&2<t&&(Ds=t,Ps=e)}function al(t){t>Is&&(Is=t)}function sl(){for(;null!==ks;)ks=ul(ks)}function ll(){for(;null!==ks&&!Ai();)ks=ul(ks)}function ul(t){var e=gs(t.alternate,t,Ts);return t.memoizedProps=t.pendingProps,null===e&&(e=cl(t)),bs.current=null,e}function cl(t){ks=t;do{var e=ks.alternate;if(t=ks.return,0==(2048&ks.effectTag)){if(e=Ka(e,ks,Ts),1===Ts||1!==ks.childExpirationTime){for(var n=0,r=ks.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}ks.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=ks.firstEffect),null!==ks.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=ks.firstEffect),t.lastEffect=ks.lastEffect),1<ks.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=ks:t.firstEffect=ks,t.lastEffect=ks))}else{if(null!==(e=Qa(ks)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=ks.sibling))return e;ks=t}while(null!==ks);return Es===_s&&(Es=5),null}function fl(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function pl(t){var e=Ni();return Wi(99,hl.bind(null,t,e)),null}function hl(t,e){do{yl()}while(null!==Ns);if(0!=(48&Os))throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=fl(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Ss&&(ks=Ss=null,Ts=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Os;Os|=32,bs.current=null,yn=Ze;var s=hn();if(dn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{var u=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{l.nodeType,f.nodeType}catch(t){l=null;break t}var p=0,h=-1,d=-1,y=0,g=0,m=s,v=null;e:for(;;){for(var b;m!==l||0!==c&&3!==m.nodeType||(h=p+c),m!==f||0!==u&&3!==m.nodeType||(d=p+u),3===m.nodeType&&(p+=m.nodeValue.length),null!==(b=m.firstChild);)v=m,m=b;for(;;){if(m===s)break e;if(v===l&&++y===c&&(h=p),v===f&&++g===u&&(d=p),null!==(b=m.nextSibling))break;v=(m=v).parentNode}m=b}l=-1===h||-1===d?null:{start:h,end:d}}else l=null}l=l||{start:0,end:0}}else l=null;gn={activeElementDetached:null,focusedElem:s,selectionRange:l},Ze=!1,js=i;do{try{dl()}catch(t){if(null===js)throw Error(a(330));vl(js,t),js=js.nextEffect}}while(null!==js);js=i;do{try{for(s=t,l=e;null!==js;){var _=js.effectTag;if(16&_&&Nt(js.stateNode,""),128&_){var w=js.alternate;if(null!==w){var x=w.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&_){case 2:us(js),js.effectTag&=-3;break;case 6:us(js),js.effectTag&=-3,fs(js.alternate,js);break;case 1024:js.effectTag&=-1025;break;case 1028:js.effectTag&=-1025,fs(js.alternate,js);break;case 4:fs(js.alternate,js);break;case 8:cs(s,c=js,l),ss(c)}js=js.nextEffect}}catch(t){if(null===js)throw Error(a(330));vl(js,t),js=js.nextEffect}}while(null!==js);if(x=gn,w=hn(),_=x.focusedElem,l=x.selectionRange,w!==_&&_&&_.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(_.ownerDocument.documentElement,_)){null!==l&&dn(_)&&(w=l.start,void 0===(x=l.end)&&(x=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(x,_.value.length)):(x=(w=_.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),c=_.textContent.length,s=Math.min(l.start,c),l=void 0===l.end?s:Math.min(l.end,c),!x.extend&&s>l&&(c=l,l=s,s=c),c=pn(_,s),f=pn(_,l),c&&f&&(1!==x.rangeCount||x.anchorNode!==c.node||x.anchorOffset!==c.offset||x.focusNode!==f.node||x.focusOffset!==f.offset)&&((w=w.createRange()).setStart(c.node,c.offset),x.removeAllRanges(),s>l?(x.addRange(w),x.extend(f.node,f.offset)):(w.setEnd(f.node,f.offset),x.addRange(w))))),w=[];for(x=_;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<w.length;_++)(x=w[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ze=!!yn,gn=yn=null,t.current=n,js=i;do{try{for(_=t;null!==js;){var O=js.effectTag;if(36&O&&os(_,js.alternate,js),128&O){w=void 0;var S=js.ref;if(null!==S){var k=js.stateNode;switch(js.tag){case 5:w=k;break;default:w=k}"function"==typeof S?S(w):S.current=w}}js=js.nextEffect}}catch(t){if(null===js)throw Error(a(330));vl(js,t),js=js.nextEffect}}while(null!==js);js=null,Fi(),Os=o}else t.current=n;if(Bs)Bs=!1,Ns=t,Us=e;else for(js=i;null!==js;)e=js.nextEffect,js.nextEffect=null,js=e;if(0===(e=t.firstPendingTime)&&(Ls=null),1073741823===e?t===Vs?Hs++:(Hs=0,Vs=t):Hs=0,"function"==typeof wl&&wl(n.stateNode,r),Qs(t),Ms)throw Ms=!1,t=zs,zs=null,t;return 0!=(8&Os)||Gi(),null}function dl(){for(;null!==js;){var t=js.effectTag;0!=(256&t)&&ns(js.alternate,js),0==(512&t)||Bs||(Bs=!0,Hi(97,(function(){return yl(),null}))),js=js.nextEffect}}function yl(){if(90!==Us){var t=97<Us?97:Us;return Us=90,Wi(t,gl)}}function gl(){if(null===Ns)return!1;var t=Ns;if(Ns=null,0!=(48&Os))throw Error(a(331));var e=Os;for(Os|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(e){if(null===t)throw Error(a(330));vl(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Os=e,Gi(),!0}function ml(t,e,n){lo(t,e=ds(t,e=Ja(n,e),1073741823)),null!==(t=Ys(t,1073741823))&&Qs(t)}function vl(t,e){if(3===t.tag)ml(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){ml(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ls||!Ls.has(r))){lo(n,t=ys(n,t=Ja(e,t),1073741823)),null!==(n=Ys(n,1073741823))&&Qs(n);break}}n=n.return}}function bl(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Ss===t&&Ts===n?Es===xs||Es===ws&&1073741823===Rs&&Bi()-Fs<500?nl(t,Ts):As=!0:Il(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Qs(t)))}function _l(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Xs(e=Zs(),t,null)),null!==(t=Ys(t,e))&&Qs(t)}gs=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||pi.current)Da=!0;else{if(r<n){switch(Da=!1,e.tag){case 3:Ba(e),Ca();break;case 5:if(Fo(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:yi(e.type)&&bi(e);break;case 4:Io(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,ui(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Va(t,e,n):(ui(Mo,1&Mo.current),null!==(e=qa(t,e,n))?e.sibling:null);ui(Mo,1&Mo.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return Xa(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),ui(Mo,Mo.current),!r)return null}return qa(t,e,n)}Da=!1}}else Da=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,fi.current),no(e,n),i=qo(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,yi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"==typeof s&&yo(e,r,s,t),i.updater=go,e.stateNode=i,i._reactInternalFiber=e,_o(e,r,t,n),e=La(null,e,r,!0,o,n)}else e.tag=0,Pa(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return kl(t)?1:0;if(null!=t){if((t=t.$$typeof)===lt)return 11;if(t===ft)return 14}return 2}(i),t=qi(i,t),o){case 0:e=Ma(null,e,i,t,n);break t;case 1:e=za(null,e,i,t,n);break t;case 11:e=Ia(null,e,i,t,n);break t;case 14:e=Aa(null,e,i,qi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ma(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 1:return r=e.type,i=e.pendingProps,za(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 3:if(Ba(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),co(e,r,null,n),(r=e.memoizedState.element)===i)Ca(),e=qa(t,e,n);else{if((i=e.stateNode.hydrate)&&(wa=wn(e.stateNode.containerInfo.firstChild),_a=e,i=xa=!0),i)for(n=To(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Pa(t,e,r,n),Ca();e=e.child}return e;case 5:return Fo(e),null===t&&ka(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,vn(r,i)?s=null:null!==o&&vn(r,o)&&(e.effectTag|=16),ja(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Pa(t,e,s,n),e=e.child),e;case 6:return null===t&&ka(e),null;case 13:return Va(t,e,n);case 4:return Io(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=ko(e,null,r,n):Pa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ia(t,e,r,i=e.elementType===r?i:qi(r,i),n);case 7:return Pa(t,e,e.pendingProps,n),e.child;case 8:case 12:return Pa(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var l=e.type._context;if(ui(Yi,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=zr(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!pi.current){e=qa(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=so(n,null)).tag=2,lo(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),eo(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===e.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===e){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Pa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Pa(t,e,r,n),e.child;case 14:return o=qi(i=e.type,e.pendingProps),Aa(t,e,i,o=qi(i.type,o),r,n);case 15:return Fa(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,yi(r)?(t=!0,bi(e)):t=!1,no(e,n),vo(e,r,i),_o(e,r,i,n),La(null,e,r,!0,t,n);case 19:return Xa(t,e,n)}throw Error(a(156,e.tag))};var wl=null,xl=null;function Ol(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sl(t,e,n,r){return new Ol(t,e,n,r)}function kl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Tl(t,e){var n=t.alternate;return null===n?((n=Sl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function El(t,e,n,r,i,o){var s=2;if(r=t,"function"==typeof t)kl(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case nt:return Cl(n.children,i,o,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=Sl(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ut:return(t=Sl(13,n,e,i)).type=ut,t.elementType=ut,t.expirationTime=o,t;case ct:return(t=Sl(19,n,e,i)).elementType=ct,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case at:s=9;break t;case lt:s=11;break t;case ft:s=14;break t;case pt:s=16,r=null;break t;case ht:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Sl(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Cl(t,e,n,r){return(t=Sl(7,t,r,e)).expirationTime=n,t}function Rl(t,e,n){return(t=Sl(6,t,null,e)).expirationTime=n,t}function Dl(t,e,n){return(e=Sl(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pl(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Il(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Al(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Fl(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function jl(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Ml(t,e,n,r){var i=e.current,o=Zs(),s=po.suspense;o=Xs(o,i,s);t:if(n){e:{if($t(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(yi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(yi(u)){n=vi(n,u,l);break t}}n=l}else n=ci;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),lo(i,e),qs(i,o),o}function zl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Ll(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Bl(t,e){Ll(t,e),(t=t.alternate)&&Ll(t,e)}function Nl(t,e,n){var r=new Pl(t,e,n=null!=n&&!0===n.hydrate),i=Sl(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[Tn]=r.current,n&&0!==e&&function(t,e){var n=Jt(e);Te.forEach((function(t){de(t,e,n)})),Ee.forEach((function(t){de(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function Ul(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Wl(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var t=zl(a);s.call(t)}}Ml(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Nl(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var t=zl(a);l.call(t)}}el((function(){Ml(e,a,t,i)}))}return zl(a)}function Hl(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Vl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ul(e))throw Error(a(200));return Hl(t,e,null,n)}Nl.prototype.render=function(t){Ml(t,this._internalRoot,null,null)},Nl.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Ml(null,t,null,(function(){e[Tn]=null}))},ye=function(t){if(13===t.tag){var e=Xi(Zs(),150,100);qs(t,e),Bl(t,e)}},ge=function(t){13===t.tag&&(qs(t,3),Bl(t,3))},me=function(t){if(13===t.tag){var e=Zs();qs(t,e=Xs(e,t,null)),Bl(t,e)}},C=function(t,e,n){switch(e){case"input":if(kt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dn(r);if(!i)throw Error(a(90));wt(r),kt(r,i)}}}break;case"textarea":It(t,n);break;case"select":null!=(e=n.value)&&Rt(t,!!n.multiple,e,!1)}},F=tl,j=function(t,e,n,r,i){var o=Os;Os|=4;try{return Wi(98,t.bind(null,e,n,r,i))}finally{0===(Os=o)&&Gi()}},M=function(){0==(49&Os)&&(function(){if(null!==Ws){var t=Ws;Ws=null,t.forEach((function(t,e){jl(e,t),Qs(e)})),Gi()}}(),yl())},z=function(t,e){var n=Os;Os|=2;try{return t(e)}finally{0===(Os=n)&&Gi()}};var Gl,Zl,Xl={Events:[Cn,Rn,Dn,T,O,zn,function(t){ie(t,Mn)},I,A,Qe,se,yl,{current:!1}]};Zl=(Gl={findFiberByHostInstance:En,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);wl=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},xl=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},Gl,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Zl?Zl(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xl,e.createPortal=Vl,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!=(48&Os))throw Error(a(187));var n=Os;Os|=1;try{return Wi(99,t.bind(null,e))}finally{Os=n,Gi()}},e.hydrate=function(t,e,n){if(!Ul(e))throw Error(a(200));return Wl(null,t,e,!0,n)},e.render=function(t,e,n){if(!Ul(e))throw Error(a(200));return Wl(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ul(t))throw Error(a(40));return!!t._reactRootContainer&&(el((function(){Wl(null,null,t,!1,(function(){t._reactRootContainer=null,t[Tn]=null}))})),!0)},e.unstable_batchedUpdates=tl,e.unstable_createPortal=function(t,e){return Vl(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ul(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return Wl(t,e,n,!1,r)},e.version="16.13.1"},function(t,e,n){"use strict";t.exports=n(23)},function(t,e,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var t=e.unstable_now();l(!0,t),l=null}catch(t){throw setTimeout(c,0),t}},f=Date.now();e.unstable_now=function(){return Date.now()-f},r=function(t){null!==l?setTimeout(r,0,t):(l=t,setTimeout(c,0))},i=function(t,e){u=setTimeout(t,e)},o=function(){clearTimeout(u)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var p=window.performance,h=window.Date,d=window.setTimeout,y=window.clearTimeout;if("undefined"!=typeof console){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof p&&"function"==typeof p.now)e.unstable_now=function(){return p.now()};else{var m=h.now();e.unstable_now=function(){return h.now()-m}}var v=!1,b=null,_=-1,w=5,x=0;a=function(){return e.unstable_now()>=x},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<t?Math.floor(1e3/t):5};var O=new MessageChannel,S=O.port2;O.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();x=t+w;try{b(!0,t)?S.postMessage(null):(v=!1,b=null)}catch(t){throw S.postMessage(null),t}}else v=!1},r=function(t){b=t,v||(v=!0,S.postMessage(null))},i=function(t,n){_=d((function(){t(e.unstable_now())}),n)},o=function(){y(_),_=-1}}function k(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<C(i,e)))break t;t[r]=e,t[n]=i,n=r}}function T(t){return void 0===(t=t[0])?null:t}function E(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,l=t[s];if(void 0!==a&&0>C(a,n))void 0!==l&&0>C(l,a)?(t[r]=l,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==l&&0>C(l,n)))break t;t[r]=l,t[s]=n,r=s}}}return e}return null}function C(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var R=[],D=[],P=1,I=null,A=3,F=!1,j=!1,M=!1;function z(t){for(var e=T(D);null!==e;){if(null===e.callback)E(D);else{if(!(e.startTime<=t))break;E(D),e.sortIndex=e.expirationTime,k(R,e)}e=T(D)}}function L(t){if(M=!1,z(t),!j)if(null!==T(R))j=!0,r(B);else{var e=T(D);null!==e&&i(L,e.startTime-t)}}function B(t,n){j=!1,M&&(M=!1,o()),F=!0;var r=A;try{for(z(n),I=T(R);null!==I&&(!(I.expirationTime>n)||t&&!a());){var s=I.callback;if(null!==s){I.callback=null,A=I.priorityLevel;var l=s(I.expirationTime<=n);n=e.unstable_now(),"function"==typeof l?I.callback=l:I===T(R)&&E(R),z(n)}else E(R);I=T(R)}if(null!==I)var u=!0;else{var c=T(D);null!==c&&i(L,c.startTime-n),u=!1}return u}finally{I=null,A=r,F=!1}}function N(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){j||F||(j=!0,r(B))},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return T(R)},e.unstable_next=function(t){switch(A){case 1:case 2:case 3:var e=3;break;default:e=A}var n=A;A=e;try{return t()}finally{A=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=U,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=A;A=t;try{return e()}finally{A=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:N(t)}else a=N(t),l=s;return t={id:P++,callback:n,priorityLevel:t,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(t.sortIndex=l,k(D,t),null===T(R)&&t===T(D)&&(M?o():M=!0,i(L,l-s))):(t.sortIndex=a,k(R,t),j||F||(j=!0,r(B))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();z(t);var n=T(R);return n!==I&&null!==I&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<I.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=A;return function(){var n=A;A=e;try{return t.apply(this,arguments)}finally{A=n}}}},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(6),i=n(0);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a="function"==typeof Symbol&&Symbol.for,s=a?Symbol.for("react.portal"):60106,l=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,c=a?Symbol.for("react.profiler"):60114,f=a?Symbol.for("react.provider"):60109,p=a?Symbol.for("react.context"):60110,h=a?Symbol.for("react.concurrent_mode"):60111,d=a?Symbol.for("react.forward_ref"):60112,y=a?Symbol.for("react.suspense"):60113,g=a?Symbol.for("react.suspense_list"):60120,m=a?Symbol.for("react.memo"):60115,v=a?Symbol.for("react.lazy"):60116,b=a?Symbol.for("react.block"):60121,_=a?Symbol.for("react.fundamental"):60117,w=a?Symbol.for("react.scope"):60119;function x(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case l:return"Fragment";case s:return"Portal";case c:return"Profiler";case u:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case p:return"Context.Consumer";case f:return"Context.Provider";case d:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case m:return x(t.type);case b:return x(t.render);case v:if(t=1===t._status?t._result:null)return x(t)}return null}var O=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;O.hasOwnProperty("ReactCurrentDispatcher")||(O.ReactCurrentDispatcher={current:null}),O.hasOwnProperty("ReactCurrentBatchConfig")||(O.ReactCurrentBatchConfig={suspense:null});var S={};function k(t,e){for(var n=0|t._threadCount;n<=e;n++)t[n]=t._currentValue2,t._threadCount=n+1}for(var T=new Uint16Array(16),E=0;15>E;E++)T[E]=E+1;T[15]=0;var C=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R=Object.prototype.hasOwnProperty,D={},P={};function I(t){return!!R.call(P,t)||!R.call(D,t)&&(C.test(t)?P[t]=!0:(D[t]=!0,!1))}function A(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){F[t]=new A(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];F[e]=new A(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){F[t]=new A(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){F[t]=new A(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){F[t]=new A(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){F[t]=new A(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){F[t]=new A(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){F[t]=new A(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){F[t]=new A(t,5,!1,t.toLowerCase(),null,!1)}));var j=/[\-:]([a-z])/g;function M(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(j,M);F[e]=new A(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(j,M);F[e]=new A(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(j,M);F[e]=new A(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){F[t]=new A(t,1,!1,t.toLowerCase(),null,!1)})),F.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){F[t]=new A(t,1,!1,t.toLowerCase(),null,!0)}));var z=/["'&<>]/;function L(t){if("boolean"==typeof t||"number"==typeof t)return""+t;t=""+t;var e=z.exec(t);if(e){var n,r="",i=0;for(n=e.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==n&&(r+=t.substring(i,n)),i=n+1,r+=e}t=i!==n?r+t.substring(i,n):r}return t}function B(t,e){var n,r=F.hasOwnProperty(t)?F[t]:null;return(n="style"!==t)&&(n=null!==r?0===r.type:2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])),n||function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(t,e,r,!1)?"":null!==r?(t=r.attributeName,3===(n=r.type)||4===n&&!0===e?t+'=""':(r.sanitizeURL&&(e=""+e),t+'="'+L(e)+'"')):I(t)?t+'="'+L(e)+'"':""}var N="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},U=null,W=null,H=null,V=!1,G=!1,Z=null,X=0;function q(){if(null===U)throw Error(o(321));return U}function Y(){if(0<X)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function K(){return null===H?null===W?(V=!1,W=H=Y()):(V=!0,H=W):null===H.next?(V=!1,H=H.next=Y()):(V=!0,H=H.next),H}function Q(t,e,n,r){for(;G;)G=!1,X+=1,H=null,n=t(e,r);return W=U=null,X=0,H=Z=null,n}function J(t,e){return"function"==typeof e?e(t):e}function $(t,e,n){if(U=q(),H=K(),V){var r=H.queue;if(e=r.dispatch,null!==Z&&void 0!==(n=Z.get(r))){Z.delete(r),r=H.memoizedState;do{r=t(r,n.action),n=n.next}while(null!==n);return H.memoizedState=r,[r,e]}return[H.memoizedState,e]}return t=t===J?"function"==typeof e?e():e:void 0!==n?n(e):e,H.memoizedState=t,t=(t=H.queue={last:null,dispatch:null}).dispatch=tt.bind(null,U,t),[H.memoizedState,t]}function tt(t,e,n){if(!(25>X))throw Error(o(301));if(t===U)if(G=!0,t={action:n,next:null},null===Z&&(Z=new Map),void 0===(n=Z.get(e)))Z.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}}function et(){}var nt=0,rt={readContext:function(t){var e=nt;return k(t,e),t[e]},useContext:function(t){q();var e=nt;return k(t,e),t[e]},useMemo:function(t,e){if(U=q(),e=void 0===e?null:e,null!==(H=K())){var n=H.memoizedState;if(null!==n&&null!==e){t:{var r=n[1];if(null===r)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!N(e[i],r[i])){r=!1;break t}r=!0}}if(r)return n[0]}}return t=t(),H.memoizedState=[t,e],t},useReducer:$,useRef:function(t){U=q();var e=(H=K()).memoizedState;return null===e?(t={current:t},H.memoizedState=t):e},useState:function(t){return $(J,t)},useLayoutEffect:function(){},useCallback:function(t){return t},useImperativeHandle:et,useEffect:et,useDebugValue:et,useResponder:function(t,e){return{props:e,responder:t}},useDeferredValue:function(t){return q(),t},useTransition:function(){return q(),[function(t){t()},!1]}},it="http://www.w3.org/1999/xhtml";function ot(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var at={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},st=r({menuitem:!0},at),lt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(lt).forEach((function(t){ut.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lt[e]=lt[t]}))}));var ct=/([A-Z])/g,ft=/^ms-/,pt=i.Children.toArray,ht=O.ReactCurrentDispatcher,dt={listing:!0,pre:!0,textarea:!0},yt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,gt={},mt={};var vt=Object.prototype.hasOwnProperty,bt={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function _t(t,e){if(void 0===t)throw Error(o(152,x(e)||"Component"))}function wt(t,e,n){function a(i,a){var s=a.prototype&&a.prototype.isReactComponent,l=function(t,e,n,r){if(r&&("object"==typeof(r=t.contextType)&&null!==r))return k(r,n),r[n];if(t=t.contextTypes){for(var i in n={},t)n[i]=e[i];e=n}else e=S;return e}(a,e,n,s),u=[],c=!1,f={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===u)return null},enqueueReplaceState:function(t,e){c=!0,u=[e]},enqueueSetState:function(t,e){if(null===u)return null;u.push(e)}};if(s){if(s=new a(i.props,l,f),"function"==typeof a.getDerivedStateFromProps){var p=a.getDerivedStateFromProps.call(null,i.props,s.state);null!=p&&(s.state=r({},s.state,p))}}else if(U={},s=a(i.props,l,f),null==(s=Q(a,i.props,s,l))||null==s.render)return void _t(t=s,a);if(s.props=i.props,s.context=l,s.updater=f,void 0===(f=s.state)&&(s.state=f=null),"function"==typeof s.UNSAFE_componentWillMount||"function"==typeof s.componentWillMount)if("function"==typeof s.componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&s.UNSAFE_componentWillMount(),u.length){f=u;var h=c;if(u=null,c=!1,h&&1===f.length)s.state=f[0];else{p=h?f[0]:s.state;var d=!0;for(h=h?1:0;h<f.length;h++){var y=f[h];null!=(y="function"==typeof y?y.call(s,p,i.props,l):y)&&(d?(d=!1,p=r({},p,y)):r(p,y))}s.state=p}}else u=null;if(_t(t=s.render(),a),"function"==typeof s.getChildContext&&"object"==typeof(i=a.childContextTypes)){var g=s.getChildContext();for(var m in g)if(!(m in i))throw Error(o(108,x(a)||"Unknown",m))}g&&(e=r({},e,g))}for(;i.isValidElement(t);){var s=t,l=s.type;if("function"!=typeof l)break;a(s,l)}return{child:t,context:e}}var xt=function(){function t(t,e){i.isValidElement(t)?t.type!==l?t=[t]:(t=t.props.children,t=i.isValidElement(t)?[t]:pt(t)):t=pt(t),t={type:null,domNamespace:it,children:t,childIndex:0,context:S,footer:""};var n=T[0];if(0===n){var r=T,a=2*(n=r.length);if(!(65536>=a))throw Error(o(304));var s=new Uint16Array(a);for(s.set(r),(T=s)[0]=n+1,r=n;r<a-1;r++)T[r]=r+1;T[a-1]=0}else T[0]=T[n];this.threadID=n,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=e,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var e=t.prototype;return e.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var t=this.threadID;T[t]=T[0],T[0]=t}},e.pushProvider=function(t){var e=++this.contextIndex,n=t.type._context,r=this.threadID;k(n,r);var i=n[r];this.contextStack[e]=n,this.contextValueStack[e]=i,n[r]=t.props.value},e.popProvider=function(){var t=this.contextIndex,e=this.contextStack[t],n=this.contextValueStack[t];this.contextStack[t]=null,this.contextValueStack[t]=null,this.contextIndex--,e[this.threadID]=n},e.clearProviders=function(){for(var t=this.contextIndex;0<=t;t--)this.contextStack[t][this.threadID]=this.contextValueStack[t]},e.read=function(t){if(this.exhausted)return null;var e=nt;nt=this.threadID;var n=ht.current;ht.current=rt;try{for(var r=[""],i=!1;r[0].length<t;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;T[a]=T[0],T[0]=a;break}var s=this.stack[this.stack.length-1];if(i||s.childIndex>=s.children.length){var l=s.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===f)this.popProvider(s.type);else if(s.type===y){this.suspenseDepth--;var u=r.pop();if(i){i=!1;var c=s.fallbackFrame;if(!c)throw Error(o(303));this.stack.push(c),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=u}r[this.suspenseDepth]+=l}else{var p=s.children[s.childIndex++],h="";try{h+=this.render(p,s.context,s.domNamespace)}catch(t){if(null!=t&&"function"==typeof t.then)throw Error(o(294));throw t}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=h}}return r[0]}finally{ht.current=n,nt=e}},e.render=function(t,e,n){if("string"==typeof t||"number"==typeof t)return""===(n=""+t)?"":this.makeStaticMarkup?L(n):this.previousWasTextNode?"\x3c!-- --\x3e"+L(n):(this.previousWasTextNode=!0,L(n));if(t=(e=wt(t,e,this.threadID)).child,e=e.context,null===t||!1===t)return"";if(!i.isValidElement(t)){if(null!=t&&null!=t.$$typeof){if((n=t.$$typeof)===s)throw Error(o(257));throw Error(o(258,n.toString()))}return t=pt(t),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),""}var a=t.type;if("string"==typeof a)return this.renderDOM(t,e,n);switch(a){case u:case h:case c:case g:case l:return t=pt(t.props.children),this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case y:throw Error(o(294))}if("object"==typeof a&&null!==a)switch(a.$$typeof){case d:U={};var b=a.render(t.props,t.ref);return b=Q(a.render,t.props,b,t.ref),b=pt(b),this.stack.push({type:null,domNamespace:n,children:b,childIndex:0,context:e,footer:""}),"";case m:return t=[i.createElement(a.type,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case f:return n={type:t,domNamespace:n,children:a=pt(t.props.children),childIndex:0,context:e,footer:""},this.pushProvider(t),this.stack.push(n),"";case p:a=t.type,b=t.props;var x=this.threadID;return k(a,x),a=pt(b.children(a[x])),this.stack.push({type:t,domNamespace:n,children:a,childIndex:0,context:e,footer:""}),"";case _:throw Error(o(338));case v:switch(function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(a=t.type),a._status){case 1:return t=[i.createElement(a._result,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:n,children:t,childIndex:0,context:e,footer:""}),"";case 2:throw a._result;default:throw Error(o(295))}case w:throw Error(o(343))}throw Error(o(130,null==a?a:typeof a,""))},e.renderDOM=function(t,e,n){var a=t.type.toLowerCase();if(n===it&&ot(a),!gt.hasOwnProperty(a)){if(!yt.test(a))throw Error(o(65,a));gt[a]=!0}var s=t.props;if("input"===a)s=r({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===a){var l=s.value;if(null==l){l=s.defaultValue;var u=s.children;if(null!=u){if(null!=l)throw Error(o(92));if(Array.isArray(u)){if(!(1>=u.length))throw Error(o(93));u=u[0]}l=""+u}null==l&&(l="")}s=r({},s,{value:void 0,children:""+l})}else if("select"===a)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=r({},s,{value:void 0});else if("option"===a){u=this.currentSelectValue;var c=function(t){if(null==t)return t;var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(s.children);if(null!=u){var f=null!=s.value?s.value+"":c;if(l=!1,Array.isArray(u)){for(var p=0;p<u.length;p++)if(""+u[p]===f){l=!0;break}}else l=""+u===f;s=r({selected:void 0,children:void 0},s,{selected:l,children:c})}}if(l=s){if(st[a]&&(null!=l.children||null!=l.dangerouslySetInnerHTML))throw Error(o(137,a,""));if(null!=l.dangerouslySetInnerHTML){if(null!=l.children)throw Error(o(60));if("object"!=typeof l.dangerouslySetInnerHTML||!("__html"in l.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=l.style&&"object"!=typeof l.style)throw Error(o(62,""))}for(_ in l=s,u=this.makeStaticMarkup,c=1===this.stack.length,f="<"+t.type,l)if(vt.call(l,_)){var h=l[_];if(null!=h){if("style"===_){p=void 0;var d="",y="";for(p in h)if(h.hasOwnProperty(p)){var g=0===p.indexOf("--"),m=h[p];if(null!=m){if(g)var v=p;else if(v=p,mt.hasOwnProperty(v))v=mt[v];else{var b=v.replace(ct,"-$1").toLowerCase().replace(ft,"-ms-");v=mt[v]=b}d+=y+v+":",y=p,d+=g=null==m||"boolean"==typeof m||""===m?"":g||"number"!=typeof m||0===m||lt.hasOwnProperty(y)&&lt[y]?(""+m).trim():m+"px",y=";"}}h=d||null}p=null;t:if(g=a,m=l,-1===g.indexOf("-"))g="string"==typeof m.is;else switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":g=!1;break t;default:g=!0}g?bt.hasOwnProperty(_)||(p=I(p=_)&&null!=h?p+'="'+L(h)+'"':""):p=B(_,h),p&&(f+=" "+p)}}u||c&&(f+=' data-reactroot=""');var _=f;l="",at.hasOwnProperty(a)?_+="/>":(_+=">",l="</"+t.type+">");t:{if(null!=(u=s.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break t}}else if("string"==typeof(u=s.children)||"number"==typeof u){u=L(u);break t}u=null}return null!=u?(s=[],dt.hasOwnProperty(a)&&"\n"===u.charAt(0)&&(_+="\n"),_+=u):s=pt(s.children),t=t.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?ot(t):"http://www.w3.org/2000/svg"===n&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:a,children:s,childIndex:0,context:e,footer:l}),this.previousWasTextNode=!1,_},t}(),Ot={renderToString:function(t){t=new xt(t,!1);try{return t.read(1/0)}finally{t.destroy()}},renderToStaticMarkup:function(t){t=new xt(t,!0);try{return t.read(1/0)}finally{t.destroy()}},renderToNodeStream:function(){throw Error(o(207))},renderToStaticNodeStream:function(){throw Error(o(208))},version:"16.13.1"};t.exports=Ot.default||Ot},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function x(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case p:case a:case l:case s:case d:return t;default:switch(t=t&&t.$$typeof){case c:case h:case m:case g:case u:return t;default:return e}}case o:return e}}}function O(t){return x(t)===p}e.AsyncMode=f,e.ConcurrentMode=p,e.ContextConsumer=c,e.ContextProvider=u,e.Element=i,e.ForwardRef=h,e.Fragment=a,e.Lazy=m,e.Memo=g,e.Portal=o,e.Profiler=l,e.StrictMode=s,e.Suspense=d,e.isAsyncMode=function(t){return O(t)||x(t)===f},e.isConcurrentMode=O,e.isContextConsumer=function(t){return x(t)===c},e.isContextProvider=function(t){return x(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return x(t)===h},e.isFragment=function(t){return x(t)===a},e.isLazy=function(t){return x(t)===m},e.isMemo=function(t){return x(t)===g},e.isPortal=function(t){return x(t)===o},e.isProfiler=function(t){return x(t)===l},e.isStrictMode=function(t){return x(t)===s},e.isSuspense=function(t){return x(t)===d},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===p||t===l||t===s||t===d||t===y||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===u||t.$$typeof===c||t.$$typeof===h||t.$$typeof===b||t.$$typeof===_||t.$$typeof===w||t.$$typeof===v)},e.typeOf=x},function(t,e,n){t.exports=n(27)()},function(t,e,n){"use strict";var r=n(28);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(11);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(d,t);var e,n,r,a,p,h=f(d);function d(){var t;l(this,d);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=h.call.apply(h,[this].concat(n))).config={container:"#editor",image:"./example.jpg",license:'{"api_token":"c7OYtP2BYIjYn2OX0A653Q","app_identifiers":["localhost"],"available_actions":[],"domains":["https://api.photoeditorsdk.com"],"enterprise_license":false,"expires_at":1603756800,"features":["camera","library","export","customassets","whitelabel","focus","textdesign","transform","brush","text","frame","overlay","sticker","adjustment","filter"],"issued_at":1601188903,"minimum_sdk_version":"1.0","owner":"Test test","platform":"HTML5","products":["pesdk"],"version":"2.4","signature":"hY+Y0ECiz1RaxxIK4yJwrAAIRDM9vA3zZecih4oHcSus1EVKHIJFP0tmllAjV1Hz7G33XI0Gp4P68rXElA/A9C7Ll1gi1dQwoq1aADqDlGdJtPqNdlsCVFGCx4maVfRbJ9hl0q2Ms9TtmSEDcQVsiTjzFHNcDq7P9/wN9QUxKm3YOD/MuweITw0Sna0+y5xzFb6mbNR/Ppt6LteoXXf/9E60TDY7/awZZ/Wxgl7JekniuYjpWjk1XjDtbcHC1HFvkeZ8DIJKztppNvvDl71ulKmLbvF2q19bQz4dY3Ua9Fveet319E1HxuY8rCZElwlvKU2OZNnqKipvg2+vTL2KXs3jfMd9UY2tu61rygZJLu5EkGRelc3+MNFGENq2CJTRmkQHgDHVusNsIUNXANNCgCMjhQMe667c5bp+38RB/FV4m1nETiZ182oxTCdg2aQDm62dhgZwl+jbrI2epyeU5otQvkdJ0PTn6WwNBieuDJHmo2OOI+Nrbn/JqnadOpGt1Oq6Z8AFkNPbKDKXO2fg9sG8LngFolMFIdUkwj82UHkHbpAlUfXS8U4T29JrZ1Ksc8di0cz32XFar/YlwVleptgB8DgA16dAnoz9oF5G0LoZDl0DcZzzyGwgKKs4cQVDHYW/wE5kSoJ9nNAa2hfC6/WNwtUN9ZwCqbrRFVVsIHU="}',assetBaseUrl:"assets/",layout:"basic",responsive:!0},t}return e=d,(n=[{key:"componentDidMount",value:function(){this.initEditor(),window.initPesdk=this.initEditor.bind(this)}},{key:"initEditor",value:(a=regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},this.editor&&this.editor.dispose(),t.next=4,o.a.init(Object(o.c)([this.config,e]));case 4:n=t.sent,this.editor=n,console.log("PhotoEditorSDK for Web is ready!"),n.on(o.b.EXPORT,(function(t){console.log("Exported ",t)})),window.pesdkEditor=n;case 9:case"end":return t.stop()}}),t,this)})),p=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){s(i,n,r,o,l,"next",t)}function l(t){s(i,n,r,o,l,"throw",t)}o(void 0)}))},function(){return p.apply(this,arguments)})},{key:"render",value:function(){return i.a.createElement("div",{id:"editor",style:{width:"100vw",height:"100vh"}})}}])&&u(e.prototype,n),r&&u(e,r),d}(i.a.Component),y=n(3),g=n.n(y),m=document.getElementById("container");m&&g.a.render(i.a.createElement(d,null),m)}]);